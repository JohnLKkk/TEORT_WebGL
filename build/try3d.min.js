!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Try3d=t():e.Try3d=t()}(self,(function(){return(()=>{"use strict";var __webpack_modules__={4755:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r;(r=n(3846))&&r.__esModule;function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_PathName=t,this._m_Keyframes=[],this._m_ActionTrack=null}var t,n,r;return t=e,(n=[{key:"getLength",value:function(){var e=-Number.MAX_VALUE;return this._m_Keyframes.forEach((function(t){e=Math.max(e,t.getTime())})),e==-Number.MAX_VALUE?0:e}},{key:"addKeyframe",value:function(e){this._m_Keyframes.push(e)}},{key:"getPathName",value:function(){return this._m_PathName}},{key:"setActionTrack",value:function(e){this._m_ActionTrack=e}},{key:"update",value:function(e){for(var t=0,n=null,r=this._m_Keyframes.length;t<r&&this._m_Keyframes[t].getTime()<e;)t++;if(0==t)n=this._m_Keyframes[t],this._m_ActionTrack.setValue(n.getValue());else if(t==r)t-=1,n=this._m_Keyframes[t],this._m_ActionTrack.setValue(n.getValue());else{var o=this._m_Keyframes[t-1],i=this._m_Keyframes[t],a=1/(i.getTime()-o.getTime());n=o.interpolation(o.getValue(),i.getValue(),(e-o.getTime())*a),this._m_ActionTrack.setValue(n)}}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=i},479:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(3846))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Name=t,this._m_Time=0,this._m_TimeLength=0,this._m_Mode=e.S_LOOP,this._m_TimeMode=1,this._m_Processor=null,this._m_TrackMixer=null,this._m_State=e.S_STOP}var t,n,r;return t=e,(n=[{key:"setAnimationMode",value:function(e){}},{key:"_setProcessor",value:function(e){this._m_Processor=e}},{key:"getName",value:function(){return this._m_Name}},{key:"getAnimationLength",value:function(){return this._m_TimeLength}},{key:"setTrackMixer",value:function(e){var t=this;this._m_TrackMixer=e,this._m_Time=0,this._m_TimeLength=-Number.MAX_VALUE,e.getClips().forEach((function(e){t._m_TimeLength=Math.max(e.getLength(),t._m_TimeLength)})),this._m_TimeLength==-Number.MAX_VALUE&&(this._m_TimeLength=0),o.default.log("[["+this.getName()+"]]动画时长:"+this._m_TimeLength+"s")}},{key:"play",value:function(){this._m_State!=e.S_PLAY&&(this._m_Processor._activeAnimationAction(this),this._m_State=e.S_PLAY)}},{key:"pause",value:function(){this._m_State!=e.S_PAUSE&&(this._m_State==e.S_PLAY&&this._m_Processor._disableAnimationAction(this),this._m_State=e.S_PAUSE)}},{key:"stop",value:function(){this._m_State!=e.S_STOP&&(this._m_State==e.S_PLAY&&this._m_Processor._disableAnimationAction(this),this._m_State=e.S_STOP,this._m_Time=0)}},{key:"update",value:function(t){if(this._m_Time>=this._m_TimeLength){if(this._m_Mode==e.S_DONT_LOOP)return void(this._m_TimeMode=1);this._m_Mode==e.S_LOOP&&(this._m_Time=0,this._m_TimeMode=1),this._m_Mode==e.S_BACK_AND_FORTH&&(this._m_Time=this._m_TimeLength,this._m_TimeMode=-1)}this._m_Time+=t*this._m_TimeMode,this._m_TrackMixer.update(this._m_Time)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=_,a(_,"S_LOOP",1),a(_,"S_DONT_LOOP",2),a(_,"S_BACK_AND_FORTH",3),a(_,"S_PLAY",1),a(_,"S_PAUSE",2),a(_,"S_STOP",4)},1648:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(9650));i(n(3846));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,o=s(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._m_AnimationActions=[],n._m_AnimationActionMaps={},n._m_ActiveAnimationActions=[];var r=-1;return n._m_Scene.on("update",(function(e){if((r=n._m_ActiveAnimationActions.length)>0)for(var t=0;t<r;t++)n._m_ActiveAnimationActions[t].update(e)})),n}return t=i,(n=[{key:"getType",value:function(){return"AnimationProcessor"}},{key:"_activeAnimationAction",value:function(e){this._m_ActiveAnimationActions.push(e)}},{key:"_disableAnimationAction",value:function(e){var t=this._m_ActiveAnimationActions.indexOf(e);t>-1&&this._m_ActiveAnimationActions.splice(t,1)}},{key:"addAnimationAction",value:function(e){this._m_AnimationActionMaps[e.getName()]||(this._m_AnimationActionMaps[e.getName()]=e,this._m_AnimationActions.push(e),e._setProcessor(this))}},{key:"getAnimationAction",value:function(e){return this._m_AnimationActionMaps[e]}},{key:"getAnimationActionAtIndex",value:function(e){return e>=this._m_AnimationActions.length?null:this._m_AnimationActions[e]}},{key:"getAnimationActions",value:function(){return this._m_AnimationActions}}])&&a(t.prototype,n),r&&a(t,r),i}(o.default);t.default=f},9586:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},a(e,t,n||e)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(u,e);var t,n,r,o=s(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=o.call(this,e,t))._m_Bind=null,n}return t=u,(n=[{key:"getType",value:function(){return"Bone"}},{key:"bind",value:function(e){this._m_Bind=e}},{key:"getBind",value:function(){return this._m_Bind}},{key:"_updateLocalMatrix",value:function(){a(l(u.prototype),"_updateLocalMatrix",this).call(this),this._m_Bind&&this._m_Bind.actived()}}])&&i(t.prototype,n),r&&i(t,r),u}(((o=n(2949))&&o.__esModule?o:{default:o}).default);t.default=f},6458:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Time=t,this._m_Value=null,this._m_InterpolationMode=e.S_INTERPOLATION_MODE[e.S_LINEAR],this.interpolation=null}var t,r,o;return t=e,(r=[{key:"getTime",value:function(){return this._m_Time}},{key:"getValue",value:function(){return this._m_Value}},{key:"setInterpolationMode",value:function(t){this._m_InterpolationMode=e.S_INTERPOLATION_MODE[t]}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o,r(o,"S_INTERPOLATION_MODE",{LINEAR:0}),r(o,"S_LINEAR","LINEAR")},7868:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(6454)),o=i(n(8081));function i(e){return e&&e.__esModule?e:{default:e}}var a,_,s,u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};t.default=u,a=u,_="S_KEY_FRAME",s={scale:r.default,rotation:o.default,translation:r.default},_ in a?Object.defineProperty(a,_,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[_]=s},8081:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(6458)),i=a(n(453));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,a=l(f);function f(e,t,n,r,o){var _;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(_=a.call(this,e))._m_Value=new i.default(t,n,r,o),_}return t=f,(n=[{key:"setInterpolationMode",value:function(e){s(c(f.prototype),"setInterpolationMode",this).call(this,e),e==o.default.S_LINEAR&&(this.interpolation=i.default.slerp)}}])&&_(t.prototype,n),r&&_(t,r),f}(o.default);t.default=m},6454:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(6458)),i=a(n(5604));a(n(3846));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,a=l(f);function f(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(o=a.call(this,e))._m_Value=new i.default(t,n,r),o}return t=f,(n=[{key:"setInterpolationMode",value:function(e){s(c(f.prototype),"setInterpolationMode",this).call(this,e),e==o.default.S_LINEAR&&(this.interpolation=i.default.inter)}}])&&_(t.prototype,n),r&&_(t,r),f}(o.default);t.default=m},2414:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(6458)),i=a(n(7141));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,r,a=l(f);function f(e,t,n,r,o){var _;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(_=a.call(this,e))._m_Value=new i.default(t,n,r,o),_}return t=f,(n=[{key:"setInterpolationMode",value:function(e){s(c(f.prototype),"setInterpolationMode",this).call(this,e),e==o.default.S_LINEAR&&(this.interpolation=i.default.inter)}}])&&_(t.prototype,n),r&&_(t,r),f}(o.default);t.default=m},1245:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(3846))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Node=t,this._m_Node||o.default.warn("node为null:"),this.setValue=null,this.getValue=null,n){case"rotation":this.setValue=function(e){t.setLocalRotation(e)},this.getValue=function(){return t.getLocalRotation()};break;case"translation":this.setValue=function(e){t.setLocalTranslation(e)},this.getValue=function(){return t.getLocalTranslation()};break;case"scale":this.setValue=function(e){t.setLocalScale(e)},this.getValue=function(){return t.getLocalScale()}}}var t,n,r;return t=e,r=[{key:"bind",value:function(t,n){return new e(t,n)}},{key:"createTrack",value:function(t,n){t.setActionTrack(e.bind(n,t.getPathName()))}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();t.default=a},7938:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Clips=[]}var t,r,o;return t=e,(r=[{key:"addClip",value:function(e){this._m_Clips.push(e)}},{key:"getClip",value:function(e){return this._m_Clips[e]}},{key:"getClips",value:function(){return this._m_Clips}},{key:"update",value:function(e){this._m_Clips.forEach((function(t){t.update(e)}))}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},8649:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(2320)),o=i(n(3846));i(n(453)),i(n(431)),i(n(5397));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_OwnerSkeleton=null,this._m_Bone=null,this._m_Refs={},this._m_Id=t,this._m_Num=n,this._m_RelMat4=new r.default,this._m_JointMat4=new r.default,this._m_IsActive=!1}var t,n,i;return t=e,(n=[{key:"actived",value:function(){this._m_IsActive||(this._m_IsActive=!0,this._m_OwnerSkeleton.addActiveJoint(this))}},{key:"disable",value:function(){this._m_IsActive=!1}},{key:"addRef",value:function(e,t){this._m_Refs[e]?this._m_Refs[e]!=t&&o.default.warn("ref不等于最新ref:"+t):this._m_Refs[e]=t}},{key:"init",value:function(e,t){this.update(e,t)}},{key:"getId",value:function(){return this._m_Id}},{key:"getNum",value:function(){return this._m_Num}},{key:"setOwnerSkeleton",value:function(e){this._m_OwnerSkeleton=e}},{key:"link",value:function(e){e!=this._m_Bone&&e&&(this._m_Bone=e,this._m_Bone.bind(this))}},{key:"setJointSpace",value:function(e){this._m_RelMat4.setArray(e)}},{key:"getJointMat4",value:function(){return this._m_JointMat4}},{key:"update",value:function(e,t){this._m_Bone?(r.default.multiplyMM(this._m_JointMat4,0,this._m_Bone.getWorldMatrix(),0,this._m_RelMat4,0),e.uniformMatrix4fv(this._m_Refs[t],!1,this._m_JointMat4.getBufferData())):o.default.log("joint_"+this.getNum()+";id:"+this.getId()+"未关联Bone!")}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=_},1608:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9784)),o=i(n(3846));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Name=t,this._m_Joints=[],this._m_ActiveJoints=[],this._m_IsReady=!1,this._m_Finished=!0,this._m_OwnerShaders={}}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t){this._m_IsReady||(this._m_IsReady=!0,this._m_Joints.forEach((function(n){n.setRef(t.m_LastSubShader.getRef(e,r.default.S_JOINTS_SRC+"["+n.getNum()+"]")),n.init(e)})))}},{key:"isReady",value:function(){return this._m_IsReady}},{key:"owner",value:function(e,t){return this._m_OwnerShaders[t.m_LastSubShader.getSId()]||(this._m_Joints.forEach((function(n){n.addRef(t.m_LastSubShader.getSId(),t.m_LastSubShader.getRef(e,r.default.S_JOINTS_SRC+"["+n.getNum()+"]")),n.init(e,t.m_LastSubShader.getSId())})),this._m_OwnerShaders[t.m_LastSubShader.getSId()]=!0,o.default.log("持有!")),!0}},{key:"isFinished",value:function(){return this._m_Finished}},{key:"finished",value:function(){this._m_Finished=!0}},{key:"getActiveJoints",value:function(){return this._m_ActiveJoints}},{key:"addActiveJoint",value:function(e){this._m_ActiveJoints.push(e)}},{key:"setJoints",value:function(e){var t=this;this._m_Joints.length=0,e.forEach((function(e){t._m_Joints.push(e),e.setOwnerSkeleton(t)}))}},{key:"getJoints",value:function(){return this._m_Joints}},{key:"addJointAtIndex",value:function(e,t){this._m_Joints[e]=t,t.setOwnerSkeleton(this)}},{key:"addJoint",value:function(e){this._m_Joints.push(e),e.setOwnerSkeleton(this)}},{key:"updateJoints",value:function(e,t){this._m_ActiveJoints.length>0&&(this._m_ActiveJoints.forEach((function(n){n.update(e,t.m_LastSubShader.getSId()),n.disable()})),this._m_ActiveJoints.length=0)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=_},6858:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(4720)),i=u(n(9784)),a=u(n(2320)),_=u(n(2475)),s=u(n(3846));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=o.call(this,e,t))._m_Skeleton=null,n}return t=u,(n=[{key:"setSkeleton",value:function(e){this._m_Skeleton=e}},{key:"draw",value:function(e){var t=this._m_Scene.getCanvas().getGLContext();if(this._m_Skeleton){if(!this._m_Skeleton.isFinished())return;this._m_Skeleton.owner(t,e)||s.default.log("错误持有!"),this._m_Skeleton.updateJoints(t,e)}var n=e.m_LastSubShader.getContextVars(),r=null,o=null;for(var u in n)switch(u){case i.default.S_MODEL_MATRIX_SRC:t[n[u].fun](n[u].loc,!1,this.getWorldMatrix().getBufferData());break;case i.default.S_MV_SRC:r=e.getCalcContext(i.default.S_VIEW_MATRIX_SRC),a.default.multiplyMM(_.default.S_TEMP_MAT4,0,r,0,this.getWorldMatrix(),0),n[u].fun(n[u].loc,!1,_.default.S_TEMP_MAT4.getBufferData());break;case i.default.S_MVP_SRC:r=e.getCalcContext(i.default.S_VIEW_MATRIX_SRC),o=e.getCalcContext(i.default.S_PROJECT_MATRIX_SRC),a.default.multiplyMM(_.default.S_TEMP_MAT4,0,r,0,this.getWorldMatrix(),0),a.default.multiplyMM(_.default.S_TEMP_MAT4_1,0,o,0,r,0),t[n[u].fun](n[u].loc,!1,_.default.S_TEMP_MAT4_1.getBufferData())}this._m_Mesh.draw(t)}}])&&l(t.prototype,n),r&&l(t,r),u}(o.default);t.default=d},9650:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8636)),o=i(n(66));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this._mEvents=new o.default,this._m_NeedUpdate=!1,this._m_Id=n.id||r.default.nextId(),this._m_Components=[],this._m_ComponentIDs={},this._m_Scene=null,this._m_Owner=t,this._m_OwnerAttachComponents=[],this._m_OwnerAttachComponentIDs={},"Scene"==this.getType()?this._m_Scene=this:this._m_Scene=t._m_Scene,this._m_Scene.addComponentInScene(this),this._m_Owner&&this._m_Owner.attachComponent(this)}var t,n,i;return t=e,(n=[{key:"getType",value:function(){return null}},{key:"on",value:function(e,t,n){this._mEvents.register(e,t,n)}},{key:"off",value:function(e,t,n){this._mEvents.unregister(e,t,n)}},{key:"fire",value:function(e,t,n){this._mEvents.trigger(e,t,n)}},{key:"getId",value:function(){return this._m_Id}},{key:"attachComponent",value:function(t){t instanceof e?this._m_OwnerAttachComponentIDs[t.getId()]||(this._m_OwnerAttachComponentIDs[t.getId()]=t,this._m_OwnerAttachComponents.push(t)):console.error("component必须是一个组件!!")}},{key:"getComponent",value:function(e){return this._m_OwnerAttachComponentIDs[e]?this._m_OwnerAttachComponentIDs[e]:null}},{key:"getComponentAtIndex",value:function(e){return e>=this._m_OwnerAttachComponents.length?null:this._m_OwnerAttachComponents[e]}},{key:"getComponentAtType",value:function(e){for(var t=this._m_OwnerAttachComponents.length,n=0;n<t;n++)if(this._m_OwnerAttachComponents[n].getType()==e)return this._m_OwnerAttachComponents[n];return null}},{key:"getComponentAtTypes",value:function(e){for(var t=this._m_OwnerAttachComponents.length,n=null,r=0;r<t;r++)this._m_OwnerAttachComponents[r].getType()==e&&(n||(n=[]),n.push(this._m_OwnerAttachComponents[r]));return n}},{key:"getComponents",value:function(){return this._m_OwnerAttachComponents}},{key:"detachComponent",value:function(t){if(t instanceof e&&this._m_OwnerAttachComponentIDs[t.getId()]){this._m_OwnerAttachComponentIDs[t.getId()]=null;var n=this._m_OwnerAttachComponents.indexOf(t);n>-1&&this._m_OwnerAttachComponents.splice(n,1)}}},{key:"_doUpdate",value:function(e){this._m_NeedUpdate=!1,e?this._update&&this._update():this._m_Scene.scheduleTask(this._update,this)}},{key:"_update",value:function(){}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=_},5109:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(9650)),i=a(n(3846));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o=u(a);function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=o.call(this,e,t),t.version=t.version||"webgl2",n._m_Canvas=t.canvas,n._m_Canvas){if(n._m_GL=n._m_Canvas.getContext(t.version,{antialias:!!t.antialias||!0,depth:!0,powerPreference:!!t.powerPreference||"high-performance",alpha:!!t.alpha||!1}),n._m_GL){if(n._m_GL.getExtension("OES_texture_float_linear"),"webgl2"==t.version)n._m_GL.getExtension("EXT_color_buffer_float");else if(n._m_GL.getExtension("OES_texture_float"),n._m_GL.getExtension("OES_texture_half_float"),n._m_GL.getExtension("OES_texture_half_float_linear"),t.mobile&&n._m_GL.getExtension("WEBGL_color_buffer_float"),!n._m_GL.getExtension("WEBGL_depth_texture"))return console.log("Extension Depth texture is not working"),alert(":( Sorry, Your browser doesn't support depth texture extension. Please browse to webglreport.com to see more information."),l(n);var r=n._m_GL.getExtension("EXT_texture_filter_anisotropic");if(r||console.log("不支持各向异性拓展!"),r){var _=n._m_GL.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT);console.log("maxAnisotropy:"+_)}n._init()}else i.default.error("浏览器不支持"+t.version+"!");n._sizeCanvas(n._m_Canvas.parentNode,n._m_Canvas)}return n}return t=a,(n=[{key:"_sizeCanvas",value:function(e,t){var n=this,r=function(){e?(t.width=e.clientWidth,t.height=e.clientHeight):(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),i.default.debug("改变大小:"+t.width+","+t.height),n.fire("resize",[t.width,t.height])};window.onresize=r,r()}},{key:"getCanvasElement",value:function(){return this._m_Canvas}},{key:"_init",value:function(){var e=this._m_GL;e.clearColor(.3,.3,.3,1),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.disable(e.BLEND),e.cullFace(e.BACK),e.depthFunc(e.LEQUAL)}},{key:"setClearColor",value:function(e,t,n,r){this._m_GL.clearColor(e,t,n,r)}},{key:"getWidth",value:function(){return this._m_Canvas.width}},{key:"getHeight",value:function(){return this._m_Canvas.height}},{key:"getGLContext",value:function(){return this._m_GL}}])&&_(t.prototype,n),r&&_(t,r),a}(o.default);t.default=c},7120:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(9650)),i=_(n(5397)),a=_(n(7280));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){f(n,e);var t=m(n);function n(e,r){var o;s(this,n),o=t.call(this,e,r);var _=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,r)}return l(n,[{key:"getType",value:function(){return"FramePicture"}},{key:"isFramePicture",value:function(){return!0}}]),n}(a.default);return o._m_Enable=!0,o._m_FramePicture=new _(e,{id:i.default.nextId()}),o._m_PreFrames=null,o._m_PostFilters=null,o}return l(n,[{key:"getMaterial",value:function(){return this._m_FramePicture.getMaterial()}},{key:"finish",value:function(){this._init()}},{key:"_init",value:function(){this._m_FramePicture.getMaterial().getCurrentTechnology().getSubPasss(n.S_PRE_FRAME_FILTER)&&(this._m_PreFrames={},this._m_PreFrames[this._m_FramePicture.getMaterial().getId()]=[],this._m_PreFrames[this._m_FramePicture.getMaterial().getId()].push(this._m_FramePicture)),this._m_FramePicture.getMaterial().getCurrentTechnology().getSubPasss(n.S_POST_FILTER)&&(this._m_PostFilters={},this._m_PostFilters[this._m_FramePicture.getMaterial().getId()]=[],this._m_PostFilters[this._m_FramePicture.getMaterial().getId()].push(this._m_FramePicture))}},{key:"preFrame",value:function(e){this._m_PreFrames}},{key:"postFilter",value:function(){if(this._m_PostFilters){var e=this._m_Scene.getCanvas().getGLContext();this._m_Scene.getRender().draw(e,n.S_POST_FILTER,this._m_PostFilters)}}},{key:"isEnable",value:function(){return this._m_Enable}},{key:"enable",value:function(){this._m_Enable=!0}},{key:"disable",value:function(){this._m_Enable=!1}}],[{key:"newFilterFromMaterial",value:function(e,t){var r=new n(e,{id:i.default.nextId()});return r._m_FramePicture.setMaterial(t),r.finish(),r}}]),n}(o.default);t.default=g,p(g,"S_PRE_FRAME_FILTER","PreFrame"),p(g,"S_POST_FILTER","PostFilter")},8636:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=0,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,i;return t=e,i=[{key:"nextId",value:function(){return r--}}],(o=null)&&n(t.prototype,o),i&&n(t,i),e}();t.default=o},6984:(e,t)=>{function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};t.default=r,n(r,"CHASECAM_DOWN","ChaseCamDown"),n(r,"CHASECAM_UP","ChaseCamUp"),n(r,"CHASECAM_ZOOMIN","ChaseCamZoomIn"),n(r,"CHASECAM_ZOOMOUT","ChaseCamZoomOut"),n(r,"CHASECAM_MOVELEFT","ChaseCamMoveLeft"),n(r,"CHASECAM_MOVERIGHT","ChaseCamMoveRight"),n(r,"CHASECAM_TOGGLEROTATE","ChaseCamToggleRotate"),n(r,"CAMERA_MOVELEFT","CameraMoveLeft"),n(r,"CAMERA_MOVERIGHT","CameraMoveRight"),n(r,"CAMERA_MOVEFRONT","CameraMoveFront"),n(r,"CAMERA_MOVEBACK","CameraMoveBack"),n(r,"FLYCAM_LEFT","FLYCAM_Left"),n(r,"FLYCAM_RIGHT","FLYCAM_Right"),n(r,"FLYCAM_UP","FLYCAM_Up"),n(r,"FLYCAM_DOWN","FLYCAM_Down"),n(r,"FLYCAM_STRAFELEFT","FLYCAM_StrafeLeft"),n(r,"FLYCAM_STRAFERIGHT","FLYCAM_StrafeRight"),n(r,"FLYCAM_FORWARD","FLYCAM_Forward"),n(r,"FLYCAM_BACKWARD","FLYCAM_Backward"),n(r,"FLYCAM_ZOOMIN","FLYCAM_ZoomIn"),n(r,"FLYCAM_ZOOMOUT","FLYCAM_ZoomOut"),n(r,"FLYCAM_ROTATEDRAG","FLYCAM_RotateDrag"),n(r,"FLYCAM_RISE","FLYCAM_Rise"),n(r,"FLYCAM_LOWER","FLYCAM_Lower"),n(r,"FLYCAM_INVERTY","FLYCAM_InvertY")},8878:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(9650)),i=f(n(5604)),a=f(n(431)),_=f(n(1550)),s=f(n(2320)),u=f(n(4165)),l=f(n(2475));function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,r,o=h(f);function f(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=o.call(this,e,t))._m_LastExTime=0,n._m_Camera=null,n._m_CameraList=function(e,t,r){n.refresh()},n.setCamera(t.camera||n._m_Scene.getMainCamera()),n._m_Position=new i.default,t.position=t.position||n._m_Camera.getEye(),t.position&&n._m_Position.setTo(t.position),n._m_Front=new i.default(0,0,-1),t.front=t.front||n._m_Camera.getAt().subRetNew(t.position).normal(),t.front&&n._m_Front.setTo(t.front),n._m_Up=new i.default,n._m_Right=new i.default,n._m_WorldUp=new i.default(0,1,0),t.up&&n._m_WorldUp.setTo(t.up),n._m_Yaw=t.yaw||f.YAW,n._m_Pitch=t.pitch||f.PITCH,n._m_MovementSpeed=t.movementSpeed||f.SPEED,n._m_MouseSensitivity=t.mouseSensitivity||f.SENSITIVITY,n._m_Zoom=t.zoom||f.ZOOM,n._m_ViewMatrix=new s.default,n._m_ViewMatrix.identity(),n.synYawPitch(),n.updateCameraVectors(),n._updateViewMatrix();var r=u.default.getInput(n._m_Scene,{id:n._m_Scene.getId()});return n._m_Scene.on("update",(function(e){n._m_LastExTime=e;var t=!1;r.getMouseButtonDown(u.default.S_MOUSE_BUTTON0)&&(n.processMouseMovement(r.getAmountX(),r.getAmountY(),!0),n.updateCameraVectors(),t=!0);var o=null;r.getKeyDown(u.default.S_KEY_W)?o=f.FORWARD:r.getKeyDown(u.default.S_KEY_S)&&(o=f.BACKWARD),r.getKeyDown(u.default.S_KEY_A)?o=f.LEFT:r.getKeyDown(u.default.S_KEY_D)&&(o=f.RIGHT),null!=o&&(t=!0,n.processKeyboard(o,n._m_LastExTime)),t&&n._doUpdate(!0)})),r.on("mousewheel",(function(e){e&&(n.processMouseScroll(e),n._m_Camera.scroll(n._m_Zoom))})),n}return t=f,(n=[{key:"setMovementSpeed",value:function(e){this._m_MovementSpeed=e}},{key:"setMouseSensitivity",value:function(e){this._m_MouseSensitivity=e}},{key:"refresh",value:function(){this._m_Position.setTo(this._m_Camera.getEye()),this._m_Front.setTo(this._m_Camera.getAt().subRetNew(this._m_Position).normal()),this.synYawPitch()}},{key:"setCamera",value:function(e){null!=e&&this._m_Camera!=e&&(this._m_Camera&&this._m_Camera.off(_.default.S_CAMERA_UPDATE_EVENT,this._m_CameraList),this._m_Camera=e,this._m_Camera.on(_.default.S_CAMERA_UPDATE_EVENT,this._m_CameraList))}},{key:"synYawPitch",value:function(){this._m_Pitch=a.default.toAngle(Math.asin(this._m_Front._m_Y));var e=Math.cos(a.default.toRadians(this._m_Pitch)),t=this._m_Front._m_Z/e;t>=1?t=1:t<=-1&&(t=-1),this._m_Yaw=a.default.toAngle(Math.asin(t)),Math.cos(a.default.toRadians(this._m_Yaw))*e*this._m_Front._m_X<0&&(this._m_Yaw=180-this._m_Yaw)}},{key:"processKeyboard",value:function(e,t){var n=this._m_MovementSpeed*t;e==f.FORWARD?(this._m_Front.multLength(n,l.default.S_TEMP_VEC3),this._m_Position.add(l.default.S_TEMP_VEC3)):e==f.BACKWARD?(this._m_Front.multLength(-1*n,l.default.S_TEMP_VEC3),this._m_Position.add(l.default.S_TEMP_VEC3)):e==f.LEFT?(this._m_Right.multLength(-1*n,l.default.S_TEMP_VEC3),this._m_Position.add(l.default.S_TEMP_VEC3)):e==f.RIGHT&&(this._m_Right.multLength(n,l.default.S_TEMP_VEC3),this._m_Position.add(l.default.S_TEMP_VEC3))}},{key:"processMouseMovement",value:function(e,t,n){n=null==n||null==n||n,e*=this._m_MouseSensitivity,t*=this._m_MouseSensitivity,this._m_Yaw+=e,this._m_Pitch+=t,n&&(this._m_Pitch>89?this._m_Pitch=89:this._m_Pitch<-89&&(this._m_Pitch=-89))}},{key:"processMouseScroll",value:function(e){this._m_Zoom-=e,this._m_Zoom<1&&(this._m_Zoom=1),this._m_Zoom>45&&(this._m_Zoom=45)}},{key:"_updateViewMatrix",value:function(){this._m_Position.add(this._m_Front,l.default.S_TEMP_VEC3),this._m_ViewMatrix.lookAt(this._m_Position,l.default.S_TEMP_VEC3,this._m_Up)}},{key:"getViewMatrix",value:function(){return this._m_ViewMatrix}},{key:"getViewMatrixArray",value:function(){return this.getViewMatrix().m}},{key:"updateCameraVectors",value:function(){l.default.S_TEMP_VEC3._m_X=Math.cos(a.default.toRadians(this._m_Yaw))*Math.cos(a.default.toRadians(this._m_Pitch)),l.default.S_TEMP_VEC3._m_Y=Math.sin(a.default.toRadians(this._m_Pitch)),l.default.S_TEMP_VEC3._m_Z=Math.sin(a.default.toRadians(this._m_Yaw))*Math.cos(a.default.toRadians(this._m_Pitch)),this._m_Front.setTo(l.default.S_TEMP_VEC3),this._m_Front.normal(),this._m_Front.cross(this._m_WorldUp,this._m_Right),this._m_Right.normal(),this._m_Right.cross(this._m_Front,this._m_Up),this._m_Up.normal()}},{key:"_update",value:function(){this._updateViewMatrix(),this._m_Camera.lookAt(this._m_Position,this._m_Position.add(this._m_Front,l.default.S_TEMP_VEC3),this._m_Up)}}])&&c(t.prototype,n),r&&c(t,r),f}(o.default);t.default=S,g(S,"FORWARD",1),g(S,"BACKWARD",S.FORWARD<<1),g(S,"LEFT",S.BACKWARD<<1),g(S,"RIGHT",S.LEFT<<1),g(S,"YAW",-90),g(S,"PITCH",0),g(S,"SPEED",10.5),g(S,"SENSITIVITY",.1),g(S,"ZOOM",45)},4165:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=(n=o.call(this,e,t))._m_Scene.getCanvas().getCanvasElement();n._keys={},n._mouseButtons={},n._mouseCoords=null,n._wheelDelta=0,n._amountX=0,n._amountY=0,n._mouseStartDownCoords=null,r.oncontextmenu=function(){return!1},r.onkeydown=function(e){n._keys[s.S_KEYS[e.key]]=!0,n.fire("keydown",[s.S_KEYS[e.key]])},r.onkeyup=function(e){n._keys[s.S_KEYS[e.key]]=!1,n.fire("keyup",[s.S_KEYS[e.key]])},r.onkeypress=function(e){n.fire("keypress",[s.S_KEYS[e.key]])};var i=!1;r.onmousedown=function(e){i=!0,n._wheelDelta=0,n._amountX=0,n._amountY=0,n._mouseCoords=n._getClickCoordsWithinElement(e),n._mouseStartDownCoords=n._mouseCoords;var t=null;switch(e.which||e.button+1){case 1:n._mouseButtons[s.S_MOUSE_BUTTON0]=!0,t=s.S_MOUSE_BUTTON0_DOWN;break;case 2:n._mouseButtons[s.S_MOUSE_BUTTON1]=!0,t=s.S_MOUSE_BUTTON1_DOWN;break;case 3:n._mouseButtons[s.S_MOUSE_BUTTON2]=!0,t=s.S_MOUSE_BUTTON2_DOWN}n.fire("mousedown",[t])},r.onmouseup=function(e){i=!1,n._wheelDelta=0,n._amountX=0,n._amountY=0,n._mouseCoords=n._getClickCoordsWithinElement(e),n._mouseStartDownCoords=n._mouseCoords;var t=null;switch(e.which||e.button+1){case 1:n._mouseButtons[s.S_MOUSE_BUTTON0]=!1,t=s.S_MOUSE_BUTTON0_UP;break;case 2:n._mouseButtons[s.S_MOUSE_BUTTON1]=!1,t=s.S_MOUSE_BUTTON1_UP;break;case 3:n._mouseButtons[s.S_MOUSE_BUTTON2]=!1,t=s.S_MOUSE_BUTTON2_UP}n.fire("mouseup",[t])};var a=!1;return r.onmouseenter=function(e){n._wheelDelta=0,n._amountX=0,n._amountY=0,a=!0,n._mouseCoords=n._getClickCoordsWithinElement(e)},r.onmouseout=function(e){n._wheelDelta=0,n._amountX=0,n._amountY=0,a=!1,n._mouseCoords=n._getClickCoordsWithinElement(e)},r.onmousemove=function(e){a&&(n._wheelDelta=0,n._mouseCoords=n._getClickCoordsWithinElement(e),i&&(n._amountX=n._mouseCoords[0]-n._mouseStartDownCoords[0],n._amountY=n._mouseCoords[1]-n._mouseStartDownCoords[1],n._mouseStartDownCoords[0]=n._mouseCoords[0],n._mouseStartDownCoords[1]=n._mouseCoords[1]),n.fire("mousemove",[n._mouseCoords]))},r.onmousewheel=function(e){n._amountX=0,n._amountY=0,n._mouseCoords=n._getClickCoordsWithinElement(e),e.wheelDelta?(n._wheelDelta=e.wheelDelta/120,window.opera&&(n._wheelDelta=-n._wheelDelta)):e.detail&&(n._wheelDelta=-e.detail/3),n.fire("mousewheel",[n._wheelDelta])},n}return t=s,r=[{key:"getInput",value:function(e,t){if(s.S_INPUTS[t.id])return s.S_INPUTS[t.id];var n=new s(e,t);return s.S_INPUTS[t.id]=n,n}}],(n=[{key:"getMouseButtonDown",value:function(e){return this._mouseButtons[e]}},{key:"getKeyDown",value:function(e){return this._keys[e]}},{key:"getKeyUp",value:function(e){return!this._keys[e]}},{key:"getAmountX",value:function(){return this._amountX}},{key:"getAmountY",value:function(){return-this._amountY}},{key:"getMouseCoords",value:function(){return this._mouseCoords}},{key:"getWheelDelta",value:function(){return this._wheelDelta}},{key:"_getClickCoordsWithinElement",value:function(e){var t=[0,0];if(e){for(var n=e.target,r=0,o=0;n.offsetParent;)r+=n.offsetLeft,o+=n.offsetTop,n=n.offsetParent;t[0]=e.pageX-r,t[1]=e.pageY-o}else e=window.event,t.x=e.x,t.y=e.y;return t}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(9650))&&o.__esModule?o:{default:o}).default);t.default=f,l(f,"s_Inputs",{}),l(f,"S_KEY_0",0),l(f,"S_KEY_1",1),l(f,"S_KEY_2",2),l(f,"S_KEY_3",3),l(f,"S_KEY_4",4),l(f,"S_KEY_5",5),l(f,"S_KEY_6",6),l(f,"S_KEY_7",7),l(f,"S_KEY_8",8),l(f,"S_KEY_9",9),l(f,"S_KEY_A",10),l(f,"S_KEY_B",11),l(f,"S_KEY_C",12),l(f,"S_KEY_D",13),l(f,"S_KEY_E",14),l(f,"S_KEY_F",15),l(f,"S_KEY_G",16),l(f,"S_KEY_H",17),l(f,"S_KEY_I",18),l(f,"S_KEY_J",19),l(f,"S_KEY_K",20),l(f,"S_KEY_L",21),l(f,"S_KEY_M",22),l(f,"S_KEY_N",23),l(f,"S_KEY_O",24),l(f,"S_KEY_P",25),l(f,"S_KEY_Q",26),l(f,"S_KEY_R",27),l(f,"S_KEY_S",28),l(f,"S_KEY_T",29),l(f,"S_KEY_U",30),l(f,"S_KEY_V",31),l(f,"S_KEY_W",32),l(f,"S_KEY_X",33),l(f,"S_KEY_Y",34),l(f,"S_KEY_Z",35),l(f,"S_KEYS",{0:f.S_KEY_0,1:f.S_KEY_1,2:f.S_KEY_2,3:f.S_KEY_3,4:f.S_KEY_4,5:f.S_KEY_5,6:f.S_KEY_6,7:f.S_KEY_7,8:f.S_KEY_8,9:f.S_KEY_9,a:f.S_KEY_A,b:f.S_KEY_B,c:f.S_KEY_C,d:f.S_KEY_D,e:f.S_KEY_E,f:f.S_KEY_F,g:f.S_KEY_G,h:f.S_KEY_H,i:f.S_KEY_I,j:f.S_KEY_J,k:f.S_KEY_K,l:f.S_KEY_L,m:f.S_KEY_M,n:f.S_KEY_N,o:f.S_KEY_O,p:f.S_KEY_P,q:f.S_KEY_Q,r:f.S_KEY_R,s:f.S_KEY_S,t:f.S_KEY_T,u:f.S_KEY_U,v:f.S_KEY_V,w:f.S_KEY_W,x:f.S_KEY_X,y:f.S_KEY_Y,z:f.S_KEY_Z}),l(f,"S_MOUSE_BUTTON0_DOWN",36),l(f,"S_MOUSE_BUTTON1_DOWN",37),l(f,"S_MOUSE_BUTTON2_DOWN",38),l(f,"S_MOUSE_BUTTON0_UP",39),l(f,"S_MOUSE_BUTTON1_UP",40),l(f,"S_MOUSE_BUTTON2_UP",41),l(f,"S_MOUSE_BUTTON0",42),l(f,"S_MOUSE_BUTTON1",43),l(f,"S_MOUSE_BUTTON2",44),l(f,"S_INPUTS",{})},2028:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(5604)),i=u(n(431)),a=u(n(9650)),_=u(n(4165)),s=u(n(6984));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,a=c(u);function u(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),p(h(n=a.call(this,e,t)),"_m_Enabled",!0),p(h(n),"_m_Rotating",!0),p(h(n),"_m_VRotating",!0),p(h(n),"_m_CanRotate",!0),p(h(n),"_m_Rotation",0),p(h(n),"_m_VRotation",Math.PI/6),p(h(n),"_m_PreviousTargetRotation",0),p(h(n),"_m_TargetRotation",n._m_Rotation),p(h(n),"_m_TargetVRotation",n._m_VRotation),p(h(n),"_m_RotationSpeed",.3),p(h(n),"_m_ZoomSensitivity",2),p(h(n),"_m_ZoomSpeed",1),p(h(n),"_m_VeryCloseRotation",!0),p(h(n),"_m_MaxVerticalRotation",Math.PI/2),p(h(n),"_m_MinVerticalRotation",-Math.PI/2),p(h(n),"_m_Distance",1),p(h(n),"_m_TargetDistance",n._m_Distance),p(h(n),"_m_MinDistance",1),p(h(n),"_m_MaxDistance",10),p(h(n),"_m_Chasing",!0),p(h(n),"_m_Zooming",!0),p(h(n),"_m_Zoomin",!1),p(h(n),"_m_TrailingRotationInertia",.05),p(h(n),"_m_DistanceLerpFactor",0),p(h(n),"_m_TrailingLerpFactor",0),p(h(n),"_m_TrailingSensitivity",5),p(h(n),"_m_RotationSensitivity",5),p(h(n),"_m_TrailingEnabled",!0),p(h(n),"_m_SmoothMotion",!0),p(h(n),"_m_TargetLocation",new o.default),p(h(n),"_m_TargetDir",new o.default),p(h(n),"_m_OffsetDistance",.002),p(h(n),"_m_Target",new o.default),p(h(n),"_m_LookAtOffset",new o.default),p(h(n),"_m_PrevPos",new o.default),p(h(n),"temp",new o.default),p(h(n),"temp2",new o.default),p(h(n),"_m_Pos",new o.default),p(h(n),"_m_InitialUpVec",(new o.default).setTo(o.default.S_UNIT_AXIS_Y)),p(h(n),"_m_Cam",void 0),p(h(n),"_m_ChasingSensitivity",5),p(h(n),"_m_Input",void 0),p(h(n),"_m_TargetMoves",!1),n._m_Cam=t.camera||n._m_Scene.getMainCamera(),n._m_Input=_.default.getInput(n._m_Scene,{id:n._m_Scene.getId()});var r=0;return n._m_Scene.on("update",(function(e){r=e,n.updateCamera(e)})),n._m_Input.on("mousewheel",(function(e){e&&n.analog(e>0?s.default.CHASECAM_ZOOMIN:s.default.CHASECAM_ZOOMOUT,(e>0?e:-e)*n._m_ZoomSpeed,r)})),n}return t=u,(n=[{key:"setRotationSpeed",value:function(e){this._m_RotationSpeed=e}},{key:"getRotationSpeed",value:function(){return this._m_RotationSpeed}},{key:"setZoomSpeed",value:function(e){this._m_ZoomSpeed=e}},{key:"getZoomSpeed",value:function(){return this._m_ZoomSpeed}},{key:"setTargetDistance",value:function(e){this._m_TargetDistance=e}},{key:"focusCamera",value:function(){this._m_TargetLocation.setTo(this._m_Target).add(this._m_LookAtOffset),this._m_Distance=this._m_TargetDistance,this.computePosition(),this._m_Cam.lookAt(this._m_Pos,this._m_TargetLocation,this._m_InitialUpVec)}},{key:"getDistance",value:function(){return this._m_Distance}},{key:"lookScene",value:function(e){if(e){var t=e.getBoundingVolume(),n=2*t.getXHalf(),r=2*t.getYHalf(),i=2*t.getZHalf(),a=5*Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2)),_=a/5e3,s=a-_,u=2*Math.max(n,r,i);this.setTargetDistance(.5*(u-_)+_),this.setMaxDistance(u),this.setMinDistance(_),this.setZoomSpeed(.2*s);var l=new o.default;t.getCenter(l),this.setTarget(l)}}},{key:"setTarget",value:function(e){this._m_Target.setTo(e)}},{key:"syncNavDir",value:function(e,t){this._m_TargetDir.setToInXYZ(e[0],e[1],e[2]),this._m_TargetDir.normal(),this._m_TargetVRotation=Math.asin(this._m_TargetDir.y);var n=Math.cos(this._m_TargetVRotation),r=this._m_TargetDir.z/n;r>=1?r=1:r<=-1&&(r=-1),this._m_TargetRotation=Math.asin(r),Math.cos(this._m_TargetRotation)*n*this._m_TargetDir.x<0&&(this._m_TargetRotation=Math.PI+-this._m_TargetRotation),this._m_Rotating=!0,this._m_VRotating=!0,t&&(this._m_Zooming=!0,this.setTargetDistance(this._m_MaxDistance))}},{key:"rotate",value:function(e,t){var n=this._m_RotationSpeed;this._m_RotationSpeed=Math.PI/100,this._rotate1(e),this._rotate2(t),this._m_RotationSpeed=n}},{key:"_rotate1",value:function(e){this._m_CanRotate&&this._m_Enabled&&(this._m_Rotating=!0,this._m_TargetRotation+=e*this._m_RotationSpeed)}},{key:"_rotate2",value:function(e){if(this._m_CanRotate&&this._m_Enabled){this._m_VRotating=!0;var t=this._m_TargetVRotation;this._m_TargetVRotation+=e*this._m_RotationSpeed,this._m_TargetVRotation>this._m_MaxVerticalRotation&&(this._m_TargetVRotation=t),this._m_VeryCloseRotation?this._m_TargetVRotation<this._m_MinVerticalRotation&&this._m_TargetDistance>this._m_MinDistance+1?this._m_TargetVRotation=this._m_MinVerticalRotation:this._m_TargetVRotation<90*-i.default.S_DEG_TO_RAD&&(this._m_TargetVRotation=t):this._m_TargetVRotation<this._m_MinVerticalRotation&&(this._m_TargetVRotation=t)}}},{key:"setMinVerticalRotation",value:function(e){this._m_MinVerticalRotation=e}},{key:"setMaxVerticalRotation",value:function(e){this._m_MaxVerticalRotation=e}},{key:"_zoomCamera",value:function(e){this._m_Enabled&&(this._m_Zooming=!0,this._m_TargetDistance+=e*this._m_ZoomSensitivity,this._m_TargetDistance>this._m_MaxDistance&&(this._m_TargetDistance=this._m_MaxDistance),this._m_TargetDistance<this._m_MinDistance&&(this._m_TargetDistance=this._m_MinDistance),this._m_VeryCloseRotation&&this._m_TargetVRotation<this._m_MinVerticalRotation&&this._m_TargetDistance>this._m_MinDistance+1&&(this._m_TargetVRotation=this._m_MinVerticalRotation))}},{key:"_checkInput",value:function(e){if(this._m_Input.getMouseButtonDown(_.default.S_MOUSE_BUTTON0)){var t=this._m_Input.getAmountX(),n=this._m_Input.getAmountY();0!=t&&this.analog(t>0?s.default.CHASECAM_MOVERIGHT:s.default.CHASECAM_MOVELEFT,t>0?t:-t,e),0!=n&&this.analog(n>0?s.default.CHASECAM_DOWN:s.default.CHASECAM_UP,n>0?n:-n,e)}}},{key:"updateCamera",value:function(e){this._m_Enabled&&(this._checkInput(e),this._updateCamera(e))}},{key:"_updateCamera",value:function(e){if(this._m_Enabled){if(this._m_TargetLocation.setTo(this._m_Target).add(this._m_LookAtOffset),this._m_SmoothMotion){this._m_TargetDir.setTo(this._m_TargetLocation).sub(this._m_PrevPos);var t=this._m_TargetDir.length();if(this._m_OffsetDistance<t?(this._m_Chasing=!0,this._m_TrailingEnabled&&(this._m_Trailing=!0),this._m_TargetMoves=!0):(this._m_TargetMoves&&!this._m_CanRotate&&(this._m_TargetRotation-this._m_Rotation>this._m_TrailingRotationInertia?this._m_TargetRotation=this._m_Rotation+this._m_TrailingRotationInertia:this._m_TargetRotation-this._m_Rotation<-this._m_TrailingRotationInertia&&(this._m_TargetRotation=this._m_Rotation-this._m_TrailingRotationInertia)),this._m_TargetMoves=!1),this._m_CanRotate&&(this._m_TrailingLerpFactor=0,this._m_Trailing=!1),this._m_TrailingEnabled&&this._m_Trailing){if(this._m_TargetMoves){var n=this._m_TargetDir.negate().normal(),r=o.default.S_UNIT_AXIS_X;n.y=0,this._m_TargetDir.z>0?this._m_TargetRotation=i.default.S_TWO_PI-Math.acos(n.dot(r)):this._m_TargetRotation=Math.acos(n.dot(r)),(this._m_TargetRotation-this._m_Rotation>Math.PI||this._m_TargetRotation-this._m_Rotation<-Math.PI)&&(this._m_TargetRotation-=i.default.S_TWO_PI),this._m_TargetRotation!=this._m_PreviousTargetRotation&&Math.abs(this._m_TargetRotation-this._m_PreviousTargetRotation)>Math.PI/8&&(this._m_TrailingLerpFactor=0),this._m_PreviousTargetRotation=this._m_TargetRotation}this._m_TrailingLerpFactor=Math.min(this._m_TrailingLerpFactor+e*e*this._m_TrailingSensitivity,1),this._m_Rotation=i.default.interpolateLinear(this._m_TrailingLerpFactor,this._m_Rotation,this._m_TargetRotation),this._m_TargetRotation+.01>=this._m_Rotation&&this._m_TargetRotation-.01<=this._m_Rotation&&(this._m_Trailing=!1,this._m_TrailingLerpFactor=0)}this._m_Chasing&&(this.temp2.setTo(this._m_Cam.getEye()),this._m_Distance=this.temp.setTo(this._m_TargetLocation).sub(this.temp2).length(),this._m_DistanceLerpFactor=Math.min(this._m_DistanceLerpFactor+e*e*this._m_ChasingSensitivity*.05,1),this._m_Distance=i.default.interpolateLinear(this._m_DistanceLerpFactor,this._m_Distance,this._m_TargetDistance),this._m_TargetDistance+.01>=this._m_Distance&&this._m_TargetDistance-.01<=this._m_Distance&&(this._m_DistanceLerpFactor=0,this._m_Chasing=!1)),this._m_Zooming&&(this._m_DistanceLerpFactor=Math.min(this._m_DistanceLerpFactor+e*e*this._m_ZoomSensitivity,1),this._m_Distance=i.default.interpolateLinear(this._m_DistanceLerpFactor,this._m_Distance,this._m_TargetDistance),this._m_TargetDistance+.1>=this._m_Distance&&this._m_TargetDistance-.1<=this._m_Distance&&(this._m_Zooming=!1,this._m_DistanceLerpFactor=0)),this._m_Rotating&&(this._m_RotationLerpFactor=Math.min(this._m_RotationLerpFactor+e*e*this._m_RotationSensitivity,1),this._m_Rotation=i.default.interpolateLinear(this._m_RotationLerpFactor,this._m_Rotation,this._m_TargetRotation),this._m_TargetRotation+.01>=this._m_Rotation&&this._m_TargetRotation-.01<=this._m_Rotation&&(this._m_Rotating=!1,this._m_RotationLerpFactor=0)),this._m_VRotating&&(this._m_VRotationLerpFactor=Math.min(this._m_VRotationLerpFactor+e*e*this._m_RotationSensitivity,1),this._m_VRotation=i.default.interpolateLinear(this._m_VRotationLerpFactor,this._m_VRotation,this._m_TargetVRotation),this._m_TargetVRotation+.01>=this._m_VRotation&&this._m_TargetVRotation-.01<=this._m_VRotation&&(this._m_VRotating=!1,this._m_VRotationLerpFactor=0)),this.computePosition(),this._m_Pos.add(this._m_LookAtOffset)}else this._m_VRotation=this._m_TargetVRotation,this._m_Rotation=this._m_TargetRotation,this._m_Distance=this._m_TargetDistance,this.computePosition(),this._m_Pos.add(this._m_LookAtOffset);this._m_PrevPos.setTo(this._m_TargetLocation),this._m_Cam.lookAt(this._m_Pos,this._m_TargetLocation,this._m_InitialUpVec)}}},{key:"computePosition",value:function(){var e=this._m_Distance*Math.sin(Math.PI/2-this._m_VRotation);this._m_Pos.setToInXYZ(e*Math.cos(this._m_Rotation),this._m_Distance*Math.sin(this._m_VRotation),e*Math.sin(this._m_Rotation)),this._m_Pos.add(this._m_Target)}},{key:"analog",value:function(e,t,n){e==s.default.CHASECAM_MOVELEFT?this._rotate1(-t*n):e==s.default.CHASECAM_MOVERIGHT?this._rotate1(t*n):e==s.default.CHASECAM_UP?this._rotate2(t*n):e==s.default.CHASECAM_DOWN?this._rotate2(-t*n):e==s.default.CHASECAM_ZOOMIN?(this._zoomCamera(-t*n),0==this._m_Zoomin&&(this._m_DistanceLerpFactor=0),this._m_Zoomin=!0):e==s.default.CHASECAM_ZOOMOUT&&(this._zoomCamera(+t*n),1==this._m_Zoomin&&(this._m_DistanceLerpFactor=0),this._m_Zoomin=!1)}},{key:"isEnabled",value:function(){return this._m_Enabled}},{key:"setEnabled",value:function(e){this._m_Enabled=e,this._m_CanRotate=e}},{key:"getMaxDistance",value:function(){return this._m_MaxDistance}},{key:"setMaxDistance",value:function(e){this._m_MaxDistance=e,e<this._m_Distance&&this._zoomCamera(e-this._m_Distance)}},{key:"getMinDistance",value:function(){return this._m_MinDistance}},{key:"setMinDistance",value:function(e){this._m_MinDistance=e,e>this._m_Distance&&this._zoomCamera(this._m_Distance-e)}}])&&l(t.prototype,n),r&&l(t,r),u}(a.default);t.default=g},7539:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(513)),i=s(n(5604)),a=s(n(6177)),_=s(n(3846));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,o=f(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e,t))._m_Direction=new i.default,n}return t=s,(n=[{key:"getType",value:function(){return"DirectionalLight"}},{key:"getTypeId",value:function(){return 0}},{key:"_genShadow",value:function(){this._m_ShadowCfg.id=this._m_Id+"_shadow",this._m_ShadowCfg.nbSplits=this._m_ShadowCfg.nbSplits||2,this._m_Shadow=new a.default(this._m_Scene,this._m_ShadowCfg)}},{key:"setShadowSplitNum",value:function(e){(e<1||e>4)&&_.default.error("错误的分区数目:"+e),this._m_ShadowCfg.nbSplits=e||2}},{key:"setShadowSplitType",value:function(e){this._m_ShadowCfg.shadowSplitType=e}},{key:"setDirection",value:function(e){this._m_Direction.setTo(e)}},{key:"getDirection",value:function(){return this._m_Direction}},{key:"setDirectionXYZ",value:function(e,t,n){this._m_Direction.setToInXYZ(e,t,n),this._m_Direction.normal()}},{key:"getBoundingVolume",value:function(){return null}}])&&u(t.prototype,n),r&&u(t,r),s}(o.default);t.default=d,h(d,"S_SHADER_SPLIT_TYPE_HALF_TRANSITION",1),h(d,"S_SHADER_SPLIT_TYPE_FIXED",2)},2815:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(6967)),i=_(n(1846)),a=_(n(1446));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,r,o=l(_);function _(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(n=o.call(this,e,t))._m_ShCoeffs=null,n._m_ShCoeffsBufferData=null,n._m_PrefilterEnvMap=null,n._m_PrefilterMipmap=0,n._m_Bounding=new i.default,n}return t=_,(n=[{key:"getType",value:function(){return"GIProbe"}},{key:"getTypeId",value:function(){return 4}},{key:"setPrefilterMipmap",value:function(e){this._m_PrefilterMipmap=e}},{key:"getPrefilterMipmap",value:function(){return this._m_PrefilterMipmap}},{key:"setRadius",value:function(e){this._m_Bounding.setRaiuds(e)}},{key:"getRadius",value:function(){return this._m_Bounding.getRadius()}},{key:"setShCoeffs",value:function(e){this._m_ShCoeffs=e,this._m_ShCoeffsBufferData=new a.default(27);for(var t=this._m_ShCoeffsBufferData.getArray(),n=0,r=0;n<e.length;n++)t[r++]=e[n]._m_X,t[r++]=e[n]._m_Y,t[r++]=e[n]._m_Z}},{key:"getShCoeffs",value:function(){return this._m_ShCoeffs}},{key:"getShCoeffsBufferData",value:function(){return this._m_ShCoeffsBufferData}},{key:"setPrefilterEnvMap",value:function(e){this._m_PrefilterEnvMap=e}},{key:"getPrefilterEnvMap",value:function(){return this._m_PrefilterEnvMap}}])&&s(t.prototype,n),r&&s(t,r),_}(o.default);t.default=m},513:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(2949)),i=a(n(7141));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o=u(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e,t))._m_Color=new i.default,n._m_Enable=!0,n._m_Scene.enableLight(f(n)),n._m_ProShadow=!1,n._m_ResetProShadow=n._m_ProShadow,n._m_Shadow=null,n._m_ShadowCfg={shadowMapSize:512,backfaceShadows:!1,debug:!1},n._m_Mark=0,n._init(),n}return t=a,(n=[{key:"getType",value:function(){return"Light"}},{key:"getTypeId",value:function(){return-1}},{key:"_init",value:function(){this._m_Mark|=a.S_VISIBLE_LIGHT,this._m_Mark|=a.S_DYNAMIC}},{key:"enable",value:function(){this._m_Enable||(this._m_Enable=!0,this._m_Scene.enableLight(this),this._m_ResetProShadow&&(this._m_ResetProShadow=!1,this.proShadow(!0)))}},{key:"getShadow",value:function(){return this._m_Shadow}},{key:"setShadowMapSize",value:function(e){this._m_ShadowCfg.shadowMapSize=e}},{key:"debugShadowMap",value:function(){this._m_ShadowCfg.debug=!0}},{key:"proShadow",value:function(e){this._m_ProShadow=e,this._m_ProShadow&&!this._m_Shadow&&(this._genShadow(),this._m_Shadow&&this._m_Shadow.setLight(this)),this._m_Shadow&&this._m_Shadow.enable(e)}},{key:"isProShadow",value:function(){return this._m_ProShadow}},{key:"_genShadow",value:function(){}},{key:"disable",value:function(){this._m_Enable&&(this._m_Enable=!1,this._m_Scene.disableLight(this),this._m_ProShadow&&(this._m_ResetProShadow=this._m_ProShadow,this.proShadow(!1)))}},{key:"isEnable",value:function(){return this._m_Enable}},{key:"setColor",value:function(e){this._m_Color.setTo(e)}},{key:"getColor",value:function(){return this._m_Color}},{key:"setColorRGBA",value:function(e,t,n,r){this._m_Color.setToInXYZW(e,t,n,r)}},{key:"updateBounding",value:function(){this._updateBounding()}}])&&_(t.prototype,n),r&&_(t,r),a}(o.default);t.default=h,m(h,"S_VISIBLE_LIGHT",1),m(h,"S_STATIC_LIGHT",2),m(h,"S_DYNAMIC",3)},6807:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(513)),i=s(n(5604)),a=s(n(1846)),_=s(n(4867));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,o=f(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e,t))._m_Position=new i.default,n._m_Radius=-1,n._m_StepClip=.2,n._m_InvRadius=1/n._m_Radius,n._m_InvRadius2=1/(n._m_Radius-n._m_StepClip),n}return t=s,(n=[{key:"getType",value:function(){return"PointLight"}},{key:"getTypeId",value:function(){return 1}},{key:"_genShadow",value:function(){this._m_ShadowCfg.id=this._m_Id+"_shadow",this._m_Shadow=new _.default(this._m_Scene,this._m_ShadowCfg)}},{key:"setStepClip",value:function(e){e<0&&(e=1),this._m_StepClip=e,this._m_InvRadius2=1/(this._m_Radius-this._m_StepClip)}},{key:"getStepClip",value:function(){return this._m_StepClip}},{key:"setPosition",value:function(e){this._m_Position.setTo(e),this._updateBounding()}},{key:"getPosition",value:function(){return this._m_Position}},{key:"setPositionXYZ",value:function(e,t,n){this._m_Position.setToInXYZ(e,t,n),this._updateBounding()}},{key:"setRadius",value:function(e){this._m_Radius=e,this._m_InvRadius=1/e,this._updateBounding()}},{key:"getRadius",value:function(){return this._m_Radius}},{key:"getInRadius",value:function(){return this._m_InvRadius}},{key:"getInRadius2",value:function(){return this._m_InvRadius2}},{key:"getBoundingVolume",value:function(){return this._m_UpdateBoundingVolume&&(this._m_BoudingVolume||(this._m_BoudingVolume=new a.default),this._m_BoudingVolume.setCenter(this._m_Position),this._m_BoudingVolume.setRaiuds(this._m_Radius),this._m_UpdateBoundingVolume=!1),this._m_BoudingVolume}}])&&u(t.prototype,n),r&&u(t,r),s}(o.default);t.default=h},6967:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(513)),i=a(n(5604));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o=u(a);function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e,t))._m_Position=new i.default,n}return t=a,(n=[{key:"getType",value:function(){return"Probe"}},{key:"getTypeId",value:function(){return 100}},{key:"setPositionFromXYZ",value:function(e,t,n){this._m_Position.setToInXYZ(e,t,n)}},{key:"getPosition",value:function(){return this._m_Position}}])&&_(t.prototype,n),r&&_(t,r),a}(o.default);t.default=c},3330:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e,t)}return t=s,(n=[{key:"getType",value:function(){return"RefProbe"}},{key:"getTypeId",value:function(){return 5}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(6967))&&o.__esModule?o:{default:o}).default);t.default=l},9098:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(513)),i=l(n(5604)),a=l(n(431)),_=l(n(1846)),s=l(n(2475)),u=l(n(948));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,o=m(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,e,t))._m_Direction=new i.default,n._m_Position=new i.default,n._m_InnerAngle=a.default.toRadians(30),n._m_InnerCorner=Math.cos(n._m_InnerAngle),n._m_OuterAngle=a.default.toRadians(45),n._m_OuterCorner=Math.cos(n._m_OuterAngle),n._m_SpotRange=100,n._m_StepClip=4,n._m_InvSpotRange=1/n._m_SpotRange,n._m_InnerMinusOuter=n._m_InnerCorner-n._m_OuterCorner,n._m_PackedAngleCos=0,n.computeAngleParameters(),n}return t=l,(n=[{key:"getType",value:function(){return"SpotLight"}},{key:"getTypeId",value:function(){return 2}},{key:"_genShadow",value:function(){this._m_ShadowCfg.id=this._m_Id+"_shadow",this._m_Shadow=new u.default(this._m_Scene,this._m_ShadowCfg)}},{key:"setStepClip",value:function(e){e<0&&(e=1),this._m_StepClip=e}},{key:"getStepClip",value:function(){return this._m_StepClip}},{key:"getPackedAngleCos",value:function(){return this._m_PackedAngleCos}},{key:"computeAngleParameters",value:function(){this._m_PackedAngleCos=Math.floor(1e3*this._m_InnerCorner),this._m_PackedAngleCos==Math.floor(1e3*this._m_OuterCorner)&&(this._m_OuterCorner-=.001),this._m_PackedAngleCos+=1*this._m_OuterCorner}},{key:"getInnerMinusOuter",value:function(){return this._m_InnerMinusOuter}},{key:"setSpotRange",value:function(e){e<=0?(this._m_SpotRange=0,this._m_InvSpotRange=0):(this._m_SpotRange=e,this._m_InvSpotRange=1/this._m_SpotRange)}},{key:"getSpotRange",value:function(){return this._m_SpotRange}},{key:"getInvSpotRange",value:function(){return this._m_InvSpotRange}},{key:"setInnerAngle",value:function(e){this._m_InnerAngle=e,this._m_InnerCorner=Math.cos(this._m_InnerAngle),this._m_InnerMinusOuter=this._m_InnerCorner-this._m_OuterCorner,this.computeAngleParameters()}},{key:"getInnerAngle",value:function(){return this._m_InnerAngle}},{key:"setOuterAngle",value:function(e){this._m_OuterAngle=e,this._m_OuterCorner=Math.cos(this._m_OuterAngle),this._m_InnerMinusOuter=this._m_InnerCorner-this._m_OuterCorner,this.computeAngleParameters()}},{key:"getOuterAngle",value:function(){return this._m_OuterAngle}},{key:"setPosition",value:function(e){this._m_Position.setTo(e)}},{key:"setPositionXYZ",value:function(e,t,n){this._m_Position.setToInXYZ(e,t,n)}},{key:"getPosition",value:function(){return this._m_Position}},{key:"setDirection",value:function(e){this._m_Direction.setTo(e),this._m_Direction.normal()}},{key:"setDirectionXYZ",value:function(e,t,n){this._m_Direction.setToInXYZ(e,t,n).normal()}},{key:"getDirection",value:function(){return this._m_Direction}},{key:"getBoundingVolume",value:function(){if(0==this._m_SpotRange)return null;if(this._m_UpdateBoundingVolume){this._m_BoudingVolume||(this._m_BoudingVolume=new _.default);var e=.5*this._m_SpotRange,t=s.default.S_TEMP_VEC3_2;this._m_Direction.multLength(.5*this._m_SpotRange,t).add(this._m_Position);var n=this._m_SpotRange*Math.tan(this._m_OuterCorner);this._m_BoudingVolume.setCenter(t),this._m_BoudingVolume.setRaiuds(Math.max(e,n)),this._m_UpdateBoundingVolume=!1}return this._m_BoudingVolume}}])&&f(t.prototype,n),r&&f(t,r),l}(o.default);t.default=p},4008:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(9650)),i=l(n(2603)),a=l(n(2768)),_=l(n(9784)),s=l(n(3846)),u=l(n(7341));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,o=m(l);function l(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,e,t))._m_Params={},n._m_ParamValues={},n._m_CanDefineParams={},n._m_AleadyDefinedParams={},n._m_ChangeParams=[],n._init(),n._m_CurrentSubShader=null,n._m_RenderTechnologys={},n._m_CurrentTechnology=null,t.materialDef?function(){var e=n._m_Scene.getCanvas().getGLContext(),r=t.materialDef,o=r.getParams();for(var _ in o)n._m_ParamValues[o[_].getName()]=null,n._m_Params[o[_].getName()]=!0,n._m_CanDefineParams[o[_].getName()]=!0;var s=r.getSubShaderDefs(),u={};for(var l in s)n._initGlobals(r,s[l]),u[s[l].getName()]=new i.default(e,t.frameContext||n._m_Scene.getRender().getFrameContext(),s[l]);var f=r.getTechnologyDefs(),c=null,m=null;for(var h in f){c=f[h],n._m_RenderTechnologys[c.getName()]=new a.default(c.getName()),m=c.getSubPass();var d=function(e){m[e].forEach((function(t){t.getPass().forEach((function(t){n._m_RenderTechnologys[c.getName()].addSubPass(e,u[t.pass.getName()],t.renderState)}))}))};for(var p in m)d(p)}n.selectTechnology(n._m_Scene.getRender().getPriorityTechnology())}():console.log("找不到materialDef..."),n}return t=l,(n=[{key:"getType",value:function(){return"Material"}},{key:"_newAtc",value:function(e,t,n,r,o){"color"==n?t.addTexture(e,r,e.RGBA,0,e.RGBA,e.UNSIGNED_BYTE,e.COLOR_ATTACHMENT0+Number(o),!0):"depth24_stencil8"==n&&t.addBuffer(e,r,e.DEPTH24_STENCIL8,e.DEPTH_STENCIL_ATTACHMENT)}},{key:"_initGlobals",value:function(e){var t=this._m_Scene.getRender().getFrameContext(),n=e.getGlobals(),r=this._m_Scene.getCanvas().getGLContext(),o=this._m_Scene.getCanvas().getWidth(),i=this._m_Scene.getCanvas().getHeight();for(var a in n)if(!t.getFrameBuffer(a)){var _=n[a],l=new u.default(r,a,o,i);if(t.addFrameBuffer(a,l),_){for(var f in _)_[f][0].type,_[f].length>1?this._newAtc(r,l,_[f][1].type,_[f][1].name,_[f][1].loc):_[f].length>0?this._newAtc(r,l,_[f][0].type,_[f][0].name):s.default.log("错误的atc!");l.finish(r,this._m_Scene,!0)}s.default.log("create global "+a)}}},{key:"getRenderTechnology",value:function(e){return this._m_RenderTechnologys.get(e)}},{key:"addTechnology",value:function(e,t){this._m_RenderTechnologys[e]=t}},{key:"selectTechnology",value:function(e){var t=this;if(null==this._m_CurrentTechnology||this._m_RenderTechnologys[e]!=this._m_CurrentTechnology){var n=this._m_CurrentTechnology,r=null!=this._m_CurrentTechnology;if(this._m_CurrentTechnology=this._m_RenderTechnologys[e],null==this._m_CurrentTechnology&&(this._m_CurrentTechnology=null!=n?n:this._m_RenderTechnologys[""]),r){var o=function(e){for(var n in t._m_CurrentTechnology.getSubPassList())t._m_CurrentTechnology.getSubPasss(n).getSubShaders().forEach((function(t){t.subShader.addDefine(e)}))};for(var i in this._m_AleadyDefinedParams)o(i)}}}},{key:"getCurrentTechnology",value:function(){return this._m_CurrentTechnology}},{key:"preload",value:function(){var e=this,t=this.getCurrentTechnology().getSubPassList();t&&function(){var n=e._m_Scene.getCanvas().getGLContext(),r=e._m_Scene.getRender().getFrameContext();for(var o in t)t[o].getSubShaders().forEach((function(e){e.subShader.needCompile()&&e.subShader._compile(n,r)}))}()}},{key:"_selectSubShader",value:function(e){var t=this,n=!1;this._m_CurrentSubShader=e;var r=this._m_Scene.getCanvas().getGLContext(),o=this._m_Scene.getRender().getFrameContext();if(this._m_CurrentSubShader.needCompile()&&this._m_CurrentSubShader._compile(r,o),o.m_LastSubShaderId!=e.getDefId()&&(e.use(r),o.m_LastSubShaderId=e.getDefId(),o.m_LastMaterial=this,o.m_SM++,n=!0),o.m_LastSubShader!=e)for(var i in o.m_LastSubShader=e,o.m_SS++,this._m_ParamValues)this._m_ParamValues[i]&&this._m_CurrentSubShader.uploadParam(r,i,this._m_ParamValues[i]);return this._m_ChangeParams.length>0&&(this._m_ChangeParams.forEach((function(e){t._m_ParamValues[e.paramName]&&t._m_ParamValues[e.paramName].compare(e.value)||(t._m_CurrentSubShader.uploadParam(r,e.paramName,e.value),t._m_ParamValues[e.paramName]=e.value)})),this._m_ChangeParams.length=0),n}},{key:"_init",value:function(){}},{key:"setParam",value:function(e,t){var n=this;if(this._m_Params[e]){var r=!1;if(this._m_AleadyDefinedParams[e]||(r=!0,this._m_AleadyDefinedParams[e]=!0),r){var o=function(e){for(var t in n._m_CurrentTechnology.getSubPassList())n._m_CurrentTechnology.getSubPasss(t).getSubShaders().forEach((function(t){t.subShader.addDefine(e)}))};for(var i in this._m_AleadyDefinedParams)o(i)}var a=!0;if(this._m_ChangeParams.length>0)for(var _=0;_<this._m_ChangeParams.length;_++)if(this._m_ChangeParams[_].paramName==e){this._m_ChangeParams[_].value=t,a=!1;break}t.owner(this,e),a&&this._m_ChangeParams.push({paramName:e,value:t})}}},{key:"clearParam",value:function(e,t){if(this._m_Params[e]){var n=!1;if(this._m_AleadyDefinedParams[e]&&(n=!0,delete this._m_AleadyDefinedParams[e]),n)for(var r in this._m_CurrentTechnology.getSubPassList())this._m_CurrentTechnology.getSubPasss(r).getSubShaders().forEach((function(t){t.subShader.clearDefine(e)}));this._m_ParamValues[e].unowner(this)}}},{key:"addDefine",value:function(e,t){var n=this,r=!1;if(this._m_AleadyDefinedParams[e]||(r=!0,this._m_AleadyDefinedParams[e]=!0),r){var o=function(r){for(var o in n._m_CurrentTechnology.getSubPassList())n._m_CurrentTechnology.getSubPasss(o).getSubShaders().forEach((function(n){n.subShader.addDefine(r,e==r&&null!=_.default.Context_Data[e],t)}))};for(var i in this._m_AleadyDefinedParams)o(i)}}},{key:"clearDefine",value:function(e,t){var n=this,r=!1;if(this._m_AleadyDefinedParams[e]&&(r=!0,this._m_AleadyDefinedParams[e]=!1),r){var o=function(r){for(var o in n._m_CurrentTechnology.getSubPassList())n._m_CurrentTechnology.getSubPasss(o).getSubShaders().forEach((function(n){e==r&&n.subShader.clearDefine(r,e==r&&null!=_.default.Context_Data[e],t)}))};for(var i in this._m_AleadyDefinedParams)o(i)}}}])&&f(t.prototype,n),r&&f(t,r),l}(o.default);t.default=p},8113:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Component=_interopRequireDefault(__webpack_require__(9650)),_AssetLoader=_interopRequireDefault(__webpack_require__(1193)),_ShaderSource=_interopRequireDefault(__webpack_require__(9784)),_Tools=_interopRequireDefault(__webpack_require__(5397)),_SubShaderDef=_interopRequireDefault(__webpack_require__(4974)),_TechnologyDef=_interopRequireDefault(__webpack_require__(8173)),_Render=_interopRequireDefault(__webpack_require__(3061)),_Log=_interopRequireDefault(__webpack_require__(3846));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Block=function(){function e(t,n,r,o,i){_classCallCheck(this,e),this.m_Type=t,this.m_Id=n,this.m_Data=r,this.m_Start=o,this.m_End=i,this.m_SubBlock=[]}return _createClass(e,[{key:"getName",value:function(){return this.m_Id}},{key:"getType",value:function(){return this.m_Type}},{key:"addSubBlock",value:function(e){this.m_SubBlock.push(e)}},{key:"getSubBlock",value:function(){return this.m_SubBlock}},{key:"setStart",value:function(e){this.m_Start=e}},{key:"getStart",value:function(){return this.m_Start}},{key:"setEnd",value:function(e){this.m_End=e}},{key:"getEnd",value:function(){return this.m_End}},{key:"getData",value:function(){return this.m_Data}},{key:"toString",value:function(){return"type:"+this.m_Type+"\nid:"+this.m_Id+"\ndata:\n"+this.m_Data+"\n"}}]),e}(),Param=function(){function Param(){_classCallCheck(this,Param),this.m_Name=null,this.m_Type=null,this.m_DefaultValue=null,this.m_Pattern=null,this.m_Pattern2=null,this.m_TagPattern=null,this.m_DefType=null}return _createClass(Param,[{key:"creator",value:function creator(){this.m_Pattern=eval("/Params."+this.m_Name+"/"),this.m_Pattern2=eval("/Params."+this.m_Name+"[\\s+-;.,\\*\\\\]{1,}/"),this.m_TagPattern=eval("/Params."+this.m_Name+"/g"),this.m_DefType=""+this.m_Name}},{key:"getDefType",value:function(){return this.m_DefType}},{key:"getPattern",value:function(){return this.m_Pattern}},{key:"getPattern2",value:function(){return this.m_Pattern2}},{key:"getTagPattern",value:function(){return this.m_TagPattern}},{key:"setName",value:function(e){this.m_Name=e}},{key:"getName",value:function(){return this.m_Name}},{key:"setType",value:function(e){this.m_Type=e}},{key:"getType",value:function(){return this.m_Type}},{key:"setDefaultValue",value:function(e){this.m_DefaultValue=e}},{key:"getDefaultVaule",value:function(){return this.m_DefaultValue}}]),Param}(),SubTechnology=null,SubPassDef=function(){function e(t){_classCallCheck(this,e),this.m_RenderPath=t,this.m_Pass=[],this._m_FromMaterialDef=null}return _createClass(e,[{key:"addPass",value:function(e,t){this.m_Pass.push({pass:e,renderState:t})}},{key:"getPass",value:function(){return this.m_Pass}},{key:"setFromMaterialDef",value:function(e){this._m_FromMaterialDef=e}},{key:"getFromMaterialDef",value:function(){return this._m_FromMaterialDef}}]),e}(),MaterialDef=function(){function MaterialDef(e){_classCallCheck(this,MaterialDef),this._m_Name=e,this._m_Globals={},this._m_Params={},this._m_SubShaderDefs={},this._m_TechnologyDefs={},this._m_FBs={}}return _createClass(MaterialDef,[{key:"addSubShaderDef",value:function(e,t){this._m_SubShaderDefs[e]=t,t.setFromMaterialDef(this)}},{key:"getSubShaderDef",value:function(e){return this._m_SubShaderDefs[e]}},{key:"getSubShaderDefs",value:function(){return this._m_SubShaderDefs}},{key:"addTechnologyDef",value:function(e,t){this._m_TechnologyDefs[e]=t,t.setFromMaterialDef(this)}},{key:"getTechnologyDef",value:function(e){return this._m_TechnologyDefs[e]}},{key:"getTechnologyDefs",value:function(){return this._m_TechnologyDefs}},{key:"addParam",value:function(e){this._m_Params[e.getName()]=e}},{key:"getParams",value:function(){return this._m_Params}},{key:"getGlobalInner",value:function(e){return e.indexOf("color")>-1?"color":e.indexOf("depth24_stencil8")>-1?"depth24_stencil8":e.indexOf("depth")>-1?"depth":e.indexOf("stencil")>-1?"stencil":void 0}},{key:"addGlobal",value:function addGlobal(name,type,dataType,varName){this._m_Globals[name]||(this._m_Globals[name]={});var pName=varName;varName="_"+name+varName,this._m_Globals[name][varName]=[];var innerType=this.getGlobalInner(type),t=type.indexOf("color");if(t>-1){this._m_Globals[name][varName].push({type:innerType,dataType:"uniform sampler2D",refName:name,name:varName,pattern:eval("/Globals"+name+".In"+pName+"/"),pattern2:eval("/Globals"+name+".In"+pName+"[\\s+-;.,\\*\\\\]{1,}/"),tagPattern:eval("/Globals"+name+".In"+pName+"/g")});var loc=type.substring(t+5,type.length);_Log.default.log("loc:"+loc),this._m_Globals[name][varName].push({type:innerType,dataType,loc,refName:name,name:varName,pattern:eval("/Globals"+name+".Out"+pName+"/"),pattern2:eval("/Globals"+name+".Out"+pName+"[\\s+-;.,\\*\\\\]{1,}/"),tagPattern:eval("/Globals"+name+".Out"+pName+"/g")})}else this._m_Globals[name][varName].push({type:innerType,dataType,refName:name,name:varName,pattern:eval("/Globals"+name+".In"+pName+"/"),pattern2:eval("/Globals"+name+".In"+pName+"[\\s+-;.,\\*\\\\]{1,}/"),tagPattern:eval("/Globals"+name+".In"+pName+"/g")})}},{key:"getGlobals",value:function(){return this._m_Globals}},{key:"setName",value:function(e){this._m_Name=e}},{key:"getName",value:function(){return this._m_Name}}],[{key:"load",value:function(e){return MaterialDef.parse(_AssetLoader.default.loadMaterialSourceDef(e))}},{key:"trim",value:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},{key:"parseGlobals",value:function(e,t){for(var n=t.getName(),r=t.getData(),o=null,i=t.getStart()+1;i<t.getEnd();i++)o=r[i],o=(o=_Tools.default.trim(o)).substring(0,o.length-1).split(" "),e.addGlobal(n,o[0],o[1],o[2])}},{key:"parseParams",value:function(e,t){for(var n=t.getData(),r=null,o=null,i=t.getStart()+1;i<t.getEnd();i++)r=n[i],(r=_Tools.default.trim(r)).startsWith("//")||(r=r.substring(0,r.length-1).split(" "),(o=new Param).setName(r[1]),o.setType(r[0]),o.creator(),r.length>2&&o.setDefaultValue(r[3]),e.addParam(o))}},{key:"parseSubTechnology",value:function(e,t){t.data}},{key:"parseShader",value:function(e,t){t.getSubBlock().forEach((function(t){MaterialDef.parseBlockDef(e,t)}))}},{key:"parseShaderVars",value:function(e,t){for(var n=t.getData(),r=null,o=t.getStart()+1;o<t.getEnd();o++)r=n[o],(r=_Tools.default.trim(r)).startsWith("//")||(r=(r=r.substring(0,r.length-1)).split(" "),e.addVar(r[0],r[1]))}},{key:"parseAdvanced",value:function(e,t){for(var n=t.getData(),r=null,o=t.getStart()+1;o<t.getEnd();o++)r=n[o],(r=_Tools.default.trim(r)).startsWith("//")||(r=(r=r.substring(0,r.length-1)).split(" "))[0].startsWith("RenderProgram")&&e.setRenderProgramType(r[1])}},{key:"parseVsShader",value:function(e,t){for(var n=t.getData(),r=null,o="",i=[],a=[],_=e.getVarTable(),s=e.getFromMaterialDef().getParams(),u=null,l=!1,f=[],c={},m={},h={},d=function(t){if((r=_Tools.default.trim(n[t])).startsWith("//"))return"continue";var d=null,p=-1,g=-1,S=null;if(_.forEach((function(e){-1!=(p=_Tools.default.find2(r,e.pattern))&&(null!=(g=_Tools.default.find2(r,e.pattern2))&&g!=p&&(p=g),S||(S={}),null!=S[p]?S[p].name.length<e.name.length&&(S[p]=e):S[p]=e)})),S)for(var v in S)d=S[v],h[d.name]||(h[d.name]=!0,a.push(d));for(var y in d=null,p=-1,g=-1,S=null,s)u=s[y],-1!=(p=_Tools.default.find2(r,u.getPattern()))&&(null!=(g=_Tools.default.find2(r,u.getPattern2()))&&g!=p&&(p=g),S||(S={}),null!=S[p]?S[p].getName().length<u.getName().length&&(S[p]=u):S[p]=u);if(S)for(var C in S)d=S[C],c[d.getName()]||(f.push(d),c[d.getName()]=!0),r=_Tools.default.repSrc(r,d.getPattern(),d.getTagPattern(),d.getName()),l=!0;var T=null;for(var b in S=null,_ShaderSource.default.Context_Data)if(null!=(T=_ShaderSource.default.Context_Data[b]).pattern&&(-1!=(p=_Tools.default.find2(r,T.pattern))&&(null!=(g=_Tools.default.find2(r,T.pattern2))&&g!=p&&(p=g),S||(S={}),null!=S[p]?S[p].src.length<T.src.length&&(S[p]=T):S[p]=T),S))for(var P in S)T=S[P],m[T.src]||(T.isFlagVariable?e.addContextDefine(_ShaderSource.default.VERTEX_SHADER,T.src):(m[T.src]=!0,i.push(T))),r=_Tools.default.repSrc(r,T.pattern,T.tagPattern,T.tag);o+=_Tools.default.trim(r)+"\n"},p=t.getStart()+1;p<t.getEnd();p++)d(p);if(l){e.addUseParams(_ShaderSource.default.VERTEX_SHADER,f);var g="\n";for(var S in f)g+="uniform "+(u=f[S]).getType()+" "+u.getName()+";\n";o=g+o}if(a.length>0){var v="\n";a.forEach((function(e){v+="out "+e.type+" "+e.name+";\n"})),o=v+o}if(i.length>0){var y={},C=[];e.addUseContexts(i);var T="\n";for(var b in i.forEach((function(e){null!=e.loc||null!=e.loc?T+="layout (location="+e.loc+") in "+e.type+" "+e.src+";\n":e.def?(y[e.def]||C.push(e.def),y[e.def]=e.def):e.utype?(T+=e.utype+" "+e.src,e.modifier&&(T+=e.modifier),T+=";\n"):e.type&&(T+=e.type+" "+e.src+";\n")})),e.addUseBlocks(C),y)T+=_ShaderSource.default.BLOCKS[b].blockDef;o=T+o}o="#version 300 es\n"+o,e.addShaderSource(_ShaderSource.default.VERTEX_SHADER,o)}},{key:"parseVsShaderFun",value:function(e,t){}},{key:"parseVsShaderMain",value:function(e,t){for(var n=t.getData(),r=null,o="void main(){\n",i=[],a=[],_=e.getVarTable(),s=e.getFromMaterialDef().getParams(),u=null,l=!1,f=[],c={},m={},h={},d=t.getStart()+1;d<t.getEnd();d++)if(!(r=_Tools.default.trim(n[d])).startsWith("//")){for(var p in _.forEach((function(e){_Tools.default.find(r,e.pattern)&&(h[e.name]||(h[e.name]=!0,a.push(e)))})),s)u=s[p],_Tools.default.find(r,u.getPattern())&&(c[u.getName()]||(f.push(u),c[u.getName()]=!0),r=_Tools.default.repSrc(r,u.getPattern(),u.getTagPattern(),u.getName()),l=!0);var g=null;for(var S in _ShaderSource.default.Context_Data)g=_ShaderSource.default.Context_Data[S],_Tools.default.find(r,g.pattern)&&(m[g.src]||(m[g.src]=!0,i.push(g)),r=_Tools.default.repSrc(r,g.pattern,g.tagPattern,g.tag));o+=_Tools.default.trim(r)+"\n"}if(o+="}\n",l){e.addUseParams(f);var v="\n";for(var y in f)v+="uniform "+(u=f[y]).getType()+" "+u.getName()+";\n";o=v+o}if(a.length>0){var C="\n";a.forEach((function(e){C+="out "+e.type+" "+e.name+";\n"})),o=C+o}if(i.length>0){var T={},b=[];e.addUseContexts(i);var P="\n";for(var E in i.forEach((function(e){null!=e.loc||null!=e.loc?P+="layout (location="+e.loc+") in "+e.type+" "+e.src+";\n":e.def?(T[e.def]||b.push(e.def),T[e.def]=e.def):e.utype?(P+=e.utype+" "+e.src,e.modifier&&(P+=e.modifier),P+=";\n"):e.type&&(P+=e.type+" "+e.src+";\n")})),e.addUseBlocks(b),T)P+=_ShaderSource.default.BLOCKS[E].blockDef;o=P+o}return o="#version 300 es\n"+o}},{key:"parseFsShader",value:function(e,t){for(var n=t.getData(),r=null,o="",i=[],a=[],_=e.getVarTable(),s=e.getFromMaterialDef().getGlobals(),u=null,l=e.getFromMaterialDef().getParams(),f=null,c=!1,m=[],h=!1,d={},p={},g={},S={},v=[],y=null,C=function(t){if((r=_Tools.default.trim(n[t])).startsWith("//"))return"continue";var y=null,C=-1,T=-1,b=null;if(_.forEach((function(e){-1!=(C=_Tools.default.find2(r,e.pattern))&&(null!=(T=_Tools.default.find2(r,e.pattern2))&&T!=C&&(C=T),b||(b={}),null!=b[C]?b[C].name.length<e.name.length&&(b[C]=e):b[C]=e)})),b)for(var P in b)y=b[P],g[y.name]||(g[y.name]=!0,a.push(y));y=null,C=-1,T=-1,b=null;var E=null;for(var D in s)for(var R in u=s[D])for(var w=0;w<u[R].length;w++)E=u[R][w],-1!=(C=_Tools.default.find2(r,E.pattern))&&(null!=(T=_Tools.default.find2(r,E.pattern2))&&T!=C&&(C=T),b||(b={}),null!=b[C]?b[C].name.length<f.name.length&&(b[C]=E):b[C]=E);if(b)for(var M in b)y=b[M],S[y.name]||(v.push(y),S[y.name]=!0),r=_Tools.default.repSrc(r,y.pattern,y.tagPattern,y.name),h=!0;for(var x in y=null,C=-1,T=-1,b=null,l)f=l[x],-1!=(C=_Tools.default.find2(r,f.getPattern()))&&(null!=(T=_Tools.default.find2(r,f.getPattern2()))&&T!=C&&(C=T),b||(b={}),null!=b[C]?b[C].getName().length<f.getName().length&&(b[C]=f):b[C]=f);if(b)for(var A in b)y=b[A],d[y.getName()]||(m.push(y),d[y.getName()]=!0),r=_Tools.default.repSrc(r,y.getPattern(),y.getTagPattern(),y.getName()),c=!0;var L=null;for(var I in b=null,_ShaderSource.default.Context_Data)if(null!=(L=_ShaderSource.default.Context_Data[I]).pattern&&(-1!=(C=_Tools.default.find2(r,L.pattern))&&(null!=(T=_Tools.default.find2(r,L.pattern2))&&T!=C&&(C=T),b||(b={}),null!=b[C]?b[C].src.length<L.src.length&&(b[C]=L):b[C]=L),b))for(var O in b)L=b[O],p[L.src]||(L.isFlagVariable?e.addContextDefine(_ShaderSource.default.FRAGMENT_SHADER,L.src):(p[L.src]=!0,i.push(L))),r=_Tools.default.repSrc(r,L.pattern,L.tagPattern,L.tag);o+=_Tools.default.trim(r)+"\n"},T=t.getStart()+1;T<t.getEnd();T++)C(T);if(c){e.addUseParams(_ShaderSource.default.FRAGMENT_SHADER,m);var b="\n";for(var P in m)b+="uniform "+(f=m[P]).getType()+" "+f.getName()+";\n";o=b+o}if(h){e.addUseGlobals(v);var E="\n",D=null;for(var R in v)null!=(D=v[R]).loc||null!=D.loc?E+="layout (location="+D.loc+") out "+D.dataType+" "+D.name+";\n":E+=D.dataType+" "+D.name+";\n";o=E+o}if(a.length>0){var w="\n";a.forEach((function(e){w+="in "+e.type+" "+e.name+";\n"})),o=w+o}if(i.length>0){var M={},x=[];e.addUseContexts(i);var A="\n";for(var L in i.forEach((function(e){null!=e.loc||null!=e.loc?(y=_ShaderSource.default.Context_RenderDataRefFBs[e.src],A+="layout (location="+e.loc+") out "+e.type+" "+e.src+";\n"):e.def?(M[e.def]||x.push(e.def),M[e.def]=e.def):e.utype?(A+=e.utype+" "+e.src,e.modifier&&(A+=e.modifier),A+=";\n"):e.type&&(A+=e.type+" "+e.src+";\n")})),e.addUseBlocks(x),M)A+=_ShaderSource.default.BLOCKS[L].blockDef;o=A+o}o="#version 300 es\nprecision mediump float;\n"+o,e.addShaderSource(_ShaderSource.default.FRAGMENT_SHADER,o),e.setFBId(y)}},{key:"parseFsShaderFun",value:function(e,t){}},{key:"parseFsShaderMain",value:function(e,t){for(var n=t.getData(),r=null,o="void main(){\n",i=[],a=[],_=e.getVarTable(),s=e.getFromMaterialDef().getParams(),u=null,l=!1,f=[],c={},m={},h={},d=null,p=t.getStart()+1;p<t.getEnd();p++)if(!(r=_Tools.default.trim(n[p])).startsWith("//")){for(var g in _.forEach((function(e){_Tools.default.find(r,e.pattern)&&(h[e.name]||(h[e.name]=!0,a.push(e)))})),s)u=s[g],_Tools.default.find(r,u.getPattern())&&(c[u.getName()]||(f.push(u),c[u.getName()]=!0),r=_Tools.default.repSrc(r,u.getPattern(),u.getTagPattern(),u.getName()),l=!0);var S=null;for(var v in _ShaderSource.default.Context_Data)S=_ShaderSource.default.Context_Data[v],_Tools.default.find(r,S.pattern)&&(m[S.src]||(m[S.src]=!0,i.push(S)),r=_Tools.default.repSrc(r,S.pattern,S.tagPattern,S.tag));o+=_Tools.default.trim(r)+"\n"}if(o+="}\n",l){e.addUseParams(f);var y="\n";for(var C in f)y+="uniform "+(u=f[C]).getType()+" "+u.getName()+";\n";o=y+o}if(a.length>0){var T="\n";a.forEach((function(e){T+="in "+e.type+" "+e.name+";\n"})),o=T+o}if(i.length>0){e.addUseContexts(i);var b="\n";i.forEach((function(e){null!=e.loc||null!=e.loc?(d=_ShaderSource.default.Context_RenderDataRefFBs[e.src],b+="layout (location="+e.loc+") out "+e.type+" "+e.src+";\n"):e.utype?b+=e.utype+" "+e.src+";\n":e.type&&(b+=e.type+" "+e.src+";\n")})),o=b+o}return o="#version 300 es\nprecision mediump float;\n"+o,e.setFBId(d),o}},{key:"parseSubPass",value:function(e,t){var n=t.getName();null!=n&&""!=n||(n=_Render.default.FORWARD);for(var r=t.getData(),o=null,i=t.getStart()+1;i<t.getEnd();i++)o=r[i],(o=_Tools.default.trim(o)).startsWith("//")||(o=o.substring(0,o.length-1),e.addSubPass(n,e.getFromMaterialDef().getSubShaderDef(o)))}},{key:"parsePass",value:function(e,t){for(var n=t.getData(),r=null,o={},i=t.getStart()+1;i<t.getEnd();i++)if(r=n[i],!(r=_Tools.default.trim(r)).startsWith("//")&&0!=r.length)if((r=(r=r.substring(0,r.length-1)).split(" ")).length>2){for(var a=[],_=1;_<r.length;_++)a.push(r[_]);o[""+r[0]]=a}else o[""+r[0]]=""+r[1];e.addPass(e.getFromMaterialDef().getSubShaderDef(t.getName()),o)}},{key:"parseBlockDef",value:function(e,t){if(t){switch(t.getType()){case"Def":e.setName(t.getName());break;case"Globals":MaterialDef.parseGlobals(e,t);break;case"Params":MaterialDef.parseParams(e,t);break;case"SubTechnology":var n=new _SubShaderDef.default(t.getName());e.addSubShaderDef(n.getName(),n),e=n;break;case"Vs_Shader":return void MaterialDef.parseVsShader(e,t);case"Fs_Shader":return void MaterialDef.parseFsShader(e,t);case"Vars":MaterialDef.parseShaderVars(e,t);break;case"Advanced":MaterialDef.parseAdvanced(e,t);break;case"Vs_Shader_Main":case"Fs_Shader_Main":break;case"Technology":var r=new _TechnologyDef.default(t.getName());e.addTechnologyDef(t.getName(),r),e=r;break;case"Sub_Pass":var o=t.getName();null!=o&&""!=o||(o=_Render.default.FORWARD);var i=new SubPassDef(o);e.addSubPass(o,i),e=i;break;case"Pass":MaterialDef.parsePass(e,t)}t.getSubBlock().forEach((function(t){MaterialDef.parseBlockDef(e,t)}))}}},{key:"getBlockDef",value:function(e,t,n){for(var r=1,o=null,i=n+1;i<t.length;i++)if(!(o=MaterialDef.trim(t[i])).startsWith("//")){if(o.endsWith("{")){r++;var a=o.substring(0,o.indexOf("{")).split(" "),_=a[0];"void"==_&&(_=e.getType()+"_Main");var s="";a.length>1&&(s=a[a.length-1]);var u=new Block(_,s,t,i);2==r&&e.addSubBlock(u),this.getBlockDef(u,t,i)}else o.endsWith("}")&&r--;if(0==r){e.setEnd(i);break}}}},{key:"parse",value:function(e){if(e){e=e.split("\n");for(var t=0;t<e.length;t++){var n=MaterialDef.trim(e[t]);if(!n.startsWith("//")&&n.endsWith("{")){var r=n.substring(0,n.indexOf("{")).split(" "),o=r[0];if("void"!=o){var i="";r.length>1&&(i=r[r.length-1]);var a=new Block(o,i,e,t);MaterialDef.getBlockDef(a,e,t);var _=new MaterialDef(a.getName());return MaterialDef.parseBlockDef(_,a),_}}}}return null}}]),MaterialDef}();exports.default=MaterialDef},5449:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_RenderPath=t,this._m_SubShaders=[],this._m_SubShaderMaps={},this._m_FBId=null,this._m_PassId=0}var t,r,o;return t=e,(r=[{key:"setFBId",value:function(e){this._m_FBId=e}},{key:"getFBId",value:function(){return this._m_FBId}},{key:"getRenderPath",value:function(){return this._m_RenderPath}},{key:"addSubShader",value:function(e){this._m_SubShaders.push(e),this._m_SubShaderMaps[e.subShader.getName()]=e,this._m_SubShaderMaps[this._m_PassId++]=e}},{key:"getSubShaders",value:function(){return this._m_SubShaders}},{key:"getSubShaderMaps",value:function(){return this._m_SubShaderMaps}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},2603:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(9784)),o=_(n(9836)),i=_(n(5397)),a=_(n(3846));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Def=r,this._m_ObjId=i.default.nextId(),this._m_DefId=r.getDefId(),this._m_Name=r.getName(),this._m_MatParams={},this._m_CanDefineParams={},this._m_AleadyDefinedParams={},this._m_Params={},this._m_ParamValues={},this._m_Defines=null,this._m_KeyDefs=null,this._m_NeedLoadShaderCaches=!1,this._m_ContextVars={},this._m_RenderDatas={},this._m_FBId=r.getFBId(),this._m_RefRenderDataFBs=null,this._m_RenderProgramType=r.getRenderProgramType(),this._loadParams(),this._newShaderProgram(t,n)}var t,n,_;return t=e,(n=[{key:"getSId",value:function(){return this._m_DefId}},{key:"_loadParams",value:function(){var e=this,t=this._m_Def.getUseParams();t&&t.length>0&&t.forEach((function(t){e._m_CanDefineParams[t.getName()]="#define "+t.getDefType()+" "+t.getDefType(),e._m_Params[t.getName()]=!0}))}},{key:"uploadParam",value:function(e,t,n){if(this._m_MatParams[t]){if(this._m_ParamValues[t]&&this._m_ParamValues[t].compare(n))return;n._upload(e,this._m_MatParams[t].loc,null),this._m_ParamValues[t]=n}}},{key:"needCompile",value:function(){return this._m_NeedLoadShaderCaches||null!=this._m_Defines||this._m_ShaderProgram.needCompile()}},{key:"_compile",value:function(e,t){this._m_Defines&&this._newShaderProgram(e,t),this._m_ShaderProgram.needCompile()&&(this._m_ShaderProgram._compile(e),this._m_RenderDatas={},a.default.log("编译!")),this._loadShaderCaches(e,t)}},{key:"_loadShaderCaches",value:function(e,t){var n=this;this._m_MatParams=[],this._m_NeedLoadShaderCaches=!1,this.use(e);var o=this._m_Def.getUseParams(),i=this._m_Def.getUseGlobals(),a=this._m_Def.getUseContexts(),_=0;if(o&&o.length>0&&o.forEach((function(t){var r=e.getUniformLocation(n._m_ShaderProgram.getProgram(),t.getName());if(r){var o=null;switch(t.getType()){case"vec4":o="uniform4f";break;case"sampler2D":case"samplerCube":e.uniform1i(r,_),o=null,r=_++}n._m_MatParams[t.getName()]={type:t.getType(),loc:r,fun:o}}})),i&&i.length>0){var s=null,u=null;i.forEach((function(t){null==t.loc||null==t.loc?n._m_RenderDatas[t.name]||(s=e.getUniformLocation(n._m_ShaderProgram.getProgram(),t.name),e.uniform1i(s,_),u=null,s=_++,n._m_RenderDatas[t.name]={type:t.type,loc:s,fun:u,refId:t.refName,dataId:t.name}):n._m_FBId=t.refName}))}a&&a.length>0&&a.forEach((function(o){if(null==o.loc||null==o.loc){var i=e.getUniformLocation(n._m_ShaderProgram.getProgram(),o.src);if(i){var a=null;switch(o.type){case"mat4":a="uniformMatrix4fv";break;case"samplerCube":case"sampler2D":e.uniform1i(i,_),a=null,i=_++,"renderData"==o.flag&&(n._m_RenderDatas[o.src]={type:o.type,loc:i,fun:a,refId:r.default.Context_RenderDataRefFBs[o.src],dataId:o.src})}n._m_ContextVars[o.src]={type:o.type,loc:i,fun:a},n._m_MatParams[o.src]={type:o.type,loc:i,fun:a}}t.addContext(o.src)}}));var l=this._m_Def.getUseBlocks();l&&l.length>0&&l.forEach((function(t){e.uniformBlockBinding(n._m_ShaderProgram.getProgram(),e.getUniformBlockIndex(n._m_ShaderProgram.getProgram(),t),r.default.BLOCKS[t].blockIndex)})),t.m_LastSubShader&&t.m_LastSubShader.use(e)}},{key:"getRenderProgramType",value:function(){return this._m_RenderProgramType}},{key:"getName",value:function(){return this._m_Name}},{key:"getDefId",value:function(){return this._m_DefId}},{key:"setFBId",value:function(e){this._m_FBId=e}},{key:"getFBId",value:function(){return this._m_FBId}},{key:"use",value:function(e){this._m_ShaderProgram.use(e)}},{key:"getContextVars",value:function(){return this._m_ContextVars}},{key:"getRenderDatas",value:function(){return this._m_RenderDatas}},{key:"getRefRenderDataFBs",value:function(){return this._m_RefRenderDataFBs}},{key:"clearDefine",value:function(e,t,n){var o=!1;if(this._m_AleadyDefinedParams[e]&&(this._m_CanDefineParams[e]||t)&&(o=!0,delete this._m_AleadyDefinedParams[e]),o){for(var i in this._m_Defines=null,this._m_KeyDefs=null,this._m_AleadyDefinedParams){this._m_Defines||(this._m_Defines={});var a=this._m_Def.getShaderParams(),_=this._m_Def.getShaderContextDefines();a[r.default.VERTEX_SHADER]&&a[r.default.VERTEX_SHADER][i]||_[r.default.VERTEX_SHADER]&&_[r.default.VERTEX_SHADER][i]?(this._m_Defines[r.default.VERTEX_SHADER]||(this._m_Defines[r.default.VERTEX_SHADER]=""),t&&i==e||null!=r.default.Context_Data[i]?this._m_Defines[r.default.VERTEX_SHADER]+=r.default.Context_Data[i]+"\n":this._m_Defines[r.default.VERTEX_SHADER]+=this._m_CanDefineParams[i]+"\n",this._m_KeyDefs||(this._m_KeyDefs=""),this._m_KeyDefs+=i+","):(a[r.default.FRAGMENT_SHADER]&&a[r.default.FRAGMENT_SHADER][i]||_[r.default.FRAGMENT_SHADER]&&_[r.default.FRAGMENT_SHADER][i])&&(this._m_Defines[r.default.FRAGMENT_SHADER]||(this._m_Defines[r.default.FRAGMENT_SHADER]=""),t&&i==e||null!=r.default.Context_Data[i]?this._m_Defines[r.default.FRAGMENT_SHADER]+=r.default.Context_Data[i]+"\n":this._m_Defines[r.default.FRAGMENT_SHADER]+=this._m_CanDefineParams[i]+"\n",this._m_KeyDefs||(this._m_KeyDefs=""),this._m_KeyDefs+=i+",")}if(this._m_Defines||(this._m_Defines={},this._m_KeyDefs=","),null!=this._m_Defines&&n){var s=this._m_ShaderProgram._m_Holds;for(var u in s)s[u]!=this&&s[u]&&(s[u]._m_KeyDefs=this._m_KeyDefs,s[u]._m_Defines=this._m_Defines)}}}},{key:"addDefine",value:function(e,t,n){var o=!1;if(this._m_AleadyDefinedParams[e]||(this._m_CanDefineParams[e]||t)&&(o=!0,this._m_AleadyDefinedParams[e]=!0),o){for(var i in this._m_Defines=null,this._m_KeyDefs=null,this._m_AleadyDefinedParams){this._m_Defines||(this._m_Defines={});var a=this._m_Def.getShaderParams(),_=this._m_Def.getShaderContextDefines();a[r.default.VERTEX_SHADER]&&a[r.default.VERTEX_SHADER][i]||_[r.default.VERTEX_SHADER]&&_[r.default.VERTEX_SHADER][i]?(this._m_Defines[r.default.VERTEX_SHADER]||(this._m_Defines[r.default.VERTEX_SHADER]=""),t&&i==e||null!=r.default.Context_Data[i]?this._m_Defines[r.default.VERTEX_SHADER]+=r.default.Context_Data[i]+"\n":this._m_Defines[r.default.VERTEX_SHADER]+=this._m_CanDefineParams[i]+"\n",this._m_KeyDefs||(this._m_KeyDefs=""),this._m_KeyDefs+=i+","):(a[r.default.FRAGMENT_SHADER]&&a[r.default.FRAGMENT_SHADER][i]||_[r.default.FRAGMENT_SHADER]&&_[r.default.FRAGMENT_SHADER][i])&&(this._m_Defines[r.default.FRAGMENT_SHADER]||(this._m_Defines[r.default.FRAGMENT_SHADER]=""),t&&i==e||null!=r.default.Context_Data[i]?this._m_Defines[r.default.FRAGMENT_SHADER]+=r.default.Context_Data[i]+"\n":this._m_Defines[r.default.FRAGMENT_SHADER]+=this._m_CanDefineParams[i]+"\n",this._m_KeyDefs||(this._m_KeyDefs=""),this._m_KeyDefs+=i+",")}if(null!=this._m_Defines&&n){var s=this._m_ShaderProgram._m_Holds;for(var u in s)s[u]!=this&&s[u]&&(s[u]._m_KeyDefs=this._m_KeyDefs,s[u]._m_Defines=this._m_Defines)}}}},{key:"_newShaderProgram",value:function(e,t){if(this._m_Defines){var n=this._m_KeyDefs;n&&n.length>0&&(n=n.substr(0,n.length-1),this._m_DefId=this._m_Def.computeSignatureDefId(n))}t.m_Shaders[this._m_DefId]?(this._m_ShaderProgram&&(this._m_ShaderProgram.deleteHold(this),this._m_ShaderProgram.canDestroy()&&this._m_ShaderProgram.destroy(e,t)),this._m_ShaderProgram=t.m_Shaders[this._m_DefId],this._m_ShaderProgram.addHold(this),this._m_Defines=null):(this._m_ShaderProgram&&(this._m_ShaderProgram.deleteHold(this),this._m_ShaderProgram.canDestroy()&&this._m_ShaderProgram.destroy(e,t)),this._m_ShaderProgram=new o.default(e,this._m_DefId,this._m_Def.getShaderSource(),this._m_Defines,!0),t.m_Shaders[this._m_DefId]=this._m_ShaderProgram,this._m_ShaderProgram.addHold(this),this._m_Defines=null),this._m_NeedLoadShaderCaches=!0}},{key:"getRef",value:function(e,t){return e.getUniformLocation(this._m_ShaderProgram.getProgram(),t)}}])&&s(t.prototype,n),_&&s(t,_),e}();t.default=u},4974:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _ShaderSource=_interopRequireDefault(__webpack_require__(9784)),_Tools=_interopRequireDefault(__webpack_require__(5397));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var SubShaderDef=function(){function SubShaderDef(e){_classCallCheck(this,SubShaderDef),this._m_Name=e,this._m_DefId=null,this._m_Signature=null,this._m_ShaderSource=new _ShaderSource.default,this._m_FromMaterialDef=null,this._m_Var_Table=[],this._m_UseContexts=[],this._m_UseParams=[],this._m_UseGlobals=[],this._m_ShaderParams={},this._m_ShaderContextDefines={},this._m_UseBlocks=[],this._m_FBId=null,this._m_RefFBs=null,this._m_RenderProgramType=null}return _createClass(SubShaderDef,[{key:"setRenderProgramType",value:function(e){this._m_RenderProgramType=e}},{key:"getRenderProgramType",value:function(){return this._m_RenderProgramType}},{key:"setFBId",value:function(e){this._m_FBId=e}},{key:"getFBId",value:function(){return this._m_FBId}},{key:"computeSignatureDefId",value:function(e){if(e){var t=e.split(",").sort((function(e,t){return e.localeCompare(t)}));return e="",t.forEach((function(t){e+=t+","})),e=e.substr(0,e.length-1),_Tools.default.uniqueId(this._m_Signature+e)}return this._m_DefId=_Tools.default.uniqueId(this._m_Signature),this._m_DefId}},{key:"getDefId",value:function(){return this._m_DefId}},{key:"addUseContexts",value:function(e){var t=this;e.forEach((function(e){t._m_UseContexts.push(e)}))}},{key:"getUseContexts",value:function(){return this._m_UseContexts}},{key:"addUseGlobals",value:function(e){var t=this;e.forEach((function(e){t._m_UseGlobals.push(e)}))}},{key:"getUseGlobals",value:function(){return this._m_UseGlobals}},{key:"addUseParams",value:function(e,t){var n=this;t.forEach((function(t){n._m_UseParams.push(t),e==_ShaderSource.default.VERTEX_SHADER?(n._m_ShaderParams[_ShaderSource.default.VERTEX_SHADER]||(n._m_ShaderParams[_ShaderSource.default.VERTEX_SHADER]={}),n._m_ShaderParams[_ShaderSource.default.VERTEX_SHADER][t.getName()]=!0):e==_ShaderSource.default.FRAGMENT_SHADER&&(n._m_ShaderParams[_ShaderSource.default.FRAGMENT_SHADER]||(n._m_ShaderParams[_ShaderSource.default.FRAGMENT_SHADER]={}),n._m_ShaderParams[_ShaderSource.default.FRAGMENT_SHADER][t.getName()]=!0)}))}},{key:"addContextDefine",value:function(e,t){this._m_ShaderContextDefines[e]||(this._m_ShaderContextDefines[e]={}),this._m_ShaderContextDefines[e][t]=!0}},{key:"getShaderParams",value:function(){return this._m_ShaderParams}},{key:"getShaderContextDefines",value:function(){return this._m_ShaderContextDefines}},{key:"getUseParams",value:function(){return this._m_UseParams}},{key:"addUseBlocks",value:function(e){var t=this;e.forEach((function(e){t._m_UseBlocks.push(e)}))}},{key:"getUseBlocks",value:function(){return this._m_UseBlocks}},{key:"setFromMaterialDef",value:function(e){this._m_FromMaterialDef=e,this._m_Signature=e.getName()+this.getName(),this.computeSignatureDefId()}},{key:"getFromMaterialDef",value:function(){return this._m_FromMaterialDef}},{key:"getName",value:function(){return this._m_Name}},{key:"addVar",value:function addVar(type,name){this._m_Var_Table.push({type,name,pattern:eval("/"+name+"/"),pattern2:eval("/"+name+"[\\s+-;.,\\*\\\\]{1,}/")})}},{key:"getVarTable",value:function(){return this._m_Var_Table}},{key:"addShaderSource",value:function(e,t){this._m_ShaderSource.set(e,t)}},{key:"getShaderSource",value:function(){return this._m_ShaderSource}}]),SubShaderDef}();exports.default=SubShaderDef},7057:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(9784))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_ShaderSource=null,this._m_ShaderSource=new o.default,this._m_ShaderSource.set(o.default.VERTEX_SHADER,t.getVsSrc()),this._m_ShaderSource.set(o.default.FRAGMENT_SHADER,t.getFsSrc())}var t,n,r;return t=e,(n=[{key:"getShaderSource",value:function(){return this._m_ShaderSource}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=a},2768:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8435)),o=i(n(5449));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Name=t,this._m_SubPasss={}}var t,n,i;return t=e,(n=[{key:"setName",value:function(e){this._m_Name=e}},{key:"addSubPass",value:function(e,t,n){this._m_SubPasss[e]||(this._m_SubPasss[e]=new o.default(e));var i=null;if(n)for(var a in n)i||(i=new r.default),i.setFlag(a,n[a]);this._m_SubPasss[e].addSubShader({subShader:t,renderState:i})}},{key:"getSubPasss",value:function(e){return this._m_SubPasss[e]}},{key:"getSubPassList",value:function(){return this._m_SubPasss}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=_},8173:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m_Name=t,this.m_SubPass={},this._m_FromMaterialDef=null}var t,r,o;return t=e,(r=[{key:"getName",value:function(){return this.m_Name}},{key:"setFromMaterialDef",value:function(e){this._m_FromMaterialDef=e}},{key:"getFromMaterialDef",value:function(){return this._m_FromMaterialDef}},{key:"addSubPass",value:function(e,t){this.m_SubPass[e]||(this.m_SubPass[e]=[]),this.m_SubPass[e].push(t),t.setFromMaterialDef(this._m_FromMaterialDef)}},{key:"getSubPass",value:function(){return this.m_SubPass}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},3801:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(1322)),i=s(n(7088)),a=s(n(5604)),_=s(n(2320));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,n,r,s=f(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._m_XHalf=0,t._m_YHalf=0,t._m_ZHalf=0,t}return t=c,(n=[{key:"setHalfInXYZ",value:function(e,t,n){this._m_XHalf=e,this._m_YHalf=t,this._m_ZHalf=n}},{key:"setHalf",value:function(e){this._m_XHalf=e._m_X,this._m_YHalf=e._m_Y,this._m_ZHalf=e._m_Z}},{key:"setXHalf",value:function(e){this._m_XHalf=e}},{key:"getXHalf",value:function(){return this._m_XHalf}},{key:"setYHalf",value:function(e){this._m_YHalf=e}},{key:"getYHalf",value:function(){return this._m_YHalf}},{key:"setZHalf",value:function(e){this._m_ZHalf=e}},{key:"getZHalf",value:function(){return this._m_ZHalf}},{key:"getType",value:function(){return o.default.S_TYPE_AABB}},{key:"fromPositions",value:function(e){for(var t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=-Number.MAX_VALUE,a=-Number.MAX_VALUE,_=0;_<e.length;_+=3)t=Math.min(e[_],t),n=Math.min(e[_+1],n),r=Math.min(e[_+2],r),o=Math.max(e[_],o),i=Math.max(e[_+1],i),a=Math.max(e[_+2],a);this._m_Center.setToInXYZ(t+o,n+i,r+a),this._m_Center.multLength(.5),this._m_XHalf=Math.abs(o-this._m_Center._m_X),this._m_YHalf=Math.abs(i-this._m_Center._m_Y),this._m_ZHalf=Math.abs(a-this._m_Center._m_Z)}},{key:"fromMinMax",value:function(e,t){this._m_Center.setTo(t),this._m_Center.add(e),this._m_Center.multLength(.5),this._m_XHalf=Math.abs(t._m_X-this._m_Center._m_X),this._m_YHalf=Math.abs(t._m_Y-this._m_Center._m_Y),this._m_ZHalf=Math.abs(t._m_Z-this._m_Center._m_Z)}},{key:"whichSide",value:function(e){var t=e.distance(this._m_Center),n=e.getNormal(),r=Math.abs(this._m_XHalf*n._m_X)+Math.abs(this._m_YHalf*n._m_Y)+Math.abs(this._m_ZHalf*n._m_Z);return t>r?i.default.S_SIDE_POSITIVE:t<-r?i.default.S_SIDE_NEGATIVE:i.default.S_SIDE_NONE}},{key:"_mergeFromCenterAndHalf",value:function(e,t,n,r){if(this._m_XHalf==Number.POSITIVE_INFINITY||t==Number.POSITIVE_INFINITY)this._m_Center._m_X=0,this._m_XHalf=Number.POSITIVE_INFINITY;else{var o=this._m_Center._m_X-this._m_XHalf;o>e._m_X-t&&(o=e._m_X-t);var i=this._m_Center._m_X+this._m_XHalf;i<e._m_X+t&&(i=e._m_X+t),this._m_Center._m_X=(o+i)/2,this._m_XHalf=i-this._m_Center._m_X}if(this._m_YHalf==Number.POSITIVE_INFINITY||t==Number.POSITIVE_INFINITY)this._m_Center._m_Y=0,this._m_YHalf=Number.POSITIVE_INFINITY;else{var a=this._m_Center._m_Y-this._m_YHalf;a>e._m_Y-n&&(a=e._m_Y-n);var _=this._m_Center._m_Y+this._m_YHalf;_<e._m_Y+n&&(_=e._m_Y+n),this._m_Center._m_Y=(a+_)/2,this._m_YHalf=_-this._m_Center._m_Y}if(this._m_ZHalf==Number.POSITIVE_INFINITY||t==Number.POSITIVE_INFINITY)this._m_Center._m_Z=0,this._m_ZHalf=Number.POSITIVE_INFINITY;else{var s=this._m_Center._m_Z-this._m_ZHalf;s>e._m_Z-r&&(s=e._m_Z-r);var u=this._m_Center._m_Z+this._m_ZHalf;u<e._m_Z+r&&(u=e._m_Z+r),this._m_Center._m_Z=(s+u)/2,this._m_ZHalf=u-this._m_Center._m_Z}return this}},{key:"merge",value:function(e){if(!e)return this;switch(e.getType()){case o.default.S_TYPE_AABB:return this._mergeFromCenterAndHalf(e._m_Center,e._m_XHalf,e._m_YHalf,e._m_ZHalf);case o.default.S_TYPE_SPHERE:}}},{key:"setTo",value:function(e){e.getType()==o.default.S_TYPE_AABB&&(this._m_Center.setTo(e._m_Center),this._m_XHalf=e._m_XHalf,this._m_YHalf=e._m_YHalf,this._m_ZHalf=e._m_ZHalf)}},{key:"transform",value:function(e,t,n,r){r=r||c.S_TEMP_AABB,this._m_Center.mult(e,r._m_Center),t.multVec3(r._m_Center),r._m_Center.add(n),c.S_TEMP_VEC3.setToInXYZ(this._m_XHalf*Math.abs(e._m_X),this._m_YHalf*Math.abs(e._m_Y),this._m_ZHalf*Math.abs(e._m_Z)),_.default.fromQuaternion(t,c.S_TEMP_MAT4),c.S_TEMP_MAT4.absLocal(),_.default.multiplyMV3In3x3(c.S_TEMP_VEC32,c.S_TEMP_VEC3,c.S_TEMP_MAT4),r._m_XHalf=Math.abs(c.S_TEMP_VEC32._m_X),r._m_YHalf=Math.abs(c.S_TEMP_VEC32._m_Y),r._m_ZHalf=Math.abs(c.S_TEMP_VEC32._m_Z)}},{key:"transformFromMat44",value:function(e,t){t=t||c.S_TEMP_AABB;var n=_.default.multiplyMV3(t._m_Center,this._m_Center,e);t._m_Center.multLength(1/n);var r=c.S_TEMP_MAT4;r.set(e),r.keepRotation(),r.absLocal(),c.S_TEMP_VEC3.setToInXYZ(this._m_XHalf,this._m_YHalf,this._m_ZHalf),_.default.multiplyMV3In3x3(c.S_TEMP_VEC32,c.S_TEMP_VEC3,r),t.setHalfInXYZ(Math.abs(c.S_TEMP_VEC32._m_X),Math.abs(c.S_TEMP_VEC32._m_Y),Math.abs(c.S_TEMP_VEC32._m_Z))}},{key:"getMin",value:function(e){return(e=e||new a.default).setTo(this._m_Center),e.subInXYZ(this._m_XHalf,this._m_YHalf,this._m_ZHalf),e}},{key:"getMax",value:function(e){return(e=e||new a.default).setTo(this._m_Center),e.addInXYZ(this._m_XHalf,this._m_YHalf,this._m_ZHalf),e}},{key:"contains",value:function(e){switch(e.getType()){case o.default.S_TYPE_AABB:var t=this.getMin(c.S_TEMP_VEC3),n=this.getMax(c.S_TEMP_VEC32),r=e.getMin(c.S_TEMP_VEC33),i=e.getMax(c.S_TEMP_VEC34);return!(r._m_X>n._m_X||r._m_Y>n._m_Y||r._m_Z>n._m_Z||i._m_X<t._m_X||i._m_Y<t._m_Y||i._m_Z<t._m_Z);case o.default.S_TYPE_SPHERE:return!1}return!1}}])&&u(t.prototype,n),r&&u(t,r),c}(o.default);t.default=d,h(d,"S_TEMP_VEC3",new a.default),h(d,"S_TEMP_VEC32",new a.default),h(d,"S_TEMP_VEC33",new a.default),h(d,"S_TEMP_VEC34",new a.default),h(d,"S_TEMP_MAT4",new _.default),h(d,"S_TEMP_AABB",new d)},1846:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1322)),i=a(n(7088));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c,m,h,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,r,a=u(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e))._m_Radius=0,t}return t=l,(n=[{key:"setRaiuds",value:function(e){this._m_Radius=e}},{key:"getRadius",value:function(){return this._m_Radius}},{key:"getType",value:function(){return o.default.S_TYPE_SPHERE}},{key:"whichSide",value:function(e){var t=e.distance(this._m_Center);return t>this._m_Radius?i.default.S_SIDE_POSITIVE:t<-this._m_Radius?i.default.S_SIDE_NEGATIVE:i.default.S_SIDE_NONE}}])&&_(t.prototype,n),r&&_(t,r),l}(o.default);t.default=d,h=1.00001,(m="_S_RADIUS_EPSILON")in(c=d)?Object.defineProperty(c,m,{value:h,enumerable:!0,configurable:!0,writable:!0}):c[m]=h},1322:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5604))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_PriorityPlane=0,this._m_Center=new o.default}var t,n,r;return t=e,(n=[{key:"setCenter",value:function(e){this._m_Center.setTo(e)}},{key:"getCenter",value:function(e){return(e=e||new o.default).setTo(this._m_Center),e}},{key:"getType",value:function(){return-1}},{key:"whichSide",value:function(e){}},{key:"setTo",value:function(e){}},{key:"transform",value:function(e,t,n,r){}},{key:"transformFromMat44",value:function(e,t){}},{key:"merge",value:function(e){return null}},{key:"setPriorityPlane",value:function(e){this._m_PriorityPlane=e}},{key:"getPriorityPlane",value:function(){return this._m_PriorityPlane}},{key:"contains",value:function(e){return!1}},{key:"distance",value:function(e){return this._m_Center.distance(e)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=_,a(_,"S_TYPE_AABB",0),a(_,"S_TYPE_SPHERE",1)},2320:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5604))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.bufferData=new Float32Array(16)}var t,n,r;return t=e,r=[{key:"lookAt",value:function(e,t,n,r){var o=e.subRetNew(t).normal(),i=n.crossRetNew(o).normal(),a=o.crossRetNew(i).normal();return(r=r||new Array(16).fill(0))[0]=i._m_X,r[4]=i._m_Y,r[8]=i._m_Z,r[3]=0,r[1]=a._m_X,r[5]=a._m_Y,r[9]=a._m_Z,r[7]=0,r[2]=o._m_X,r[6]=o._m_Y,r[10]=o._m_Z,r[11]=0,r[12]=-(e._m_X*i._m_X+e._m_Y*i._m_Y+e._m_Z*i._m_Z),r[13]=-(e._m_X*a._m_X+e._m_Y*a._m_Y+e._m_Z*a._m_Z),r[14]=-(e._m_X*o._m_X+e._m_Y*o._m_Y+e._m_Z*o._m_Z),r[15]=1,r}},{key:"invert",value:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],_=e[5],s=e[6],u=e[7],l=e[8],f=e[9],c=e[10],m=e[11],h=e[12],d=e[13],p=e[14],g=e[15],S=n*_-r*a,v=n*s-o*a,y=n*u-i*a,C=r*s-o*_,T=r*u-i*_,b=o*u-i*s,P=l*d-f*h,E=l*p-c*h,D=l*g-m*h,R=f*p-c*d,w=f*g-m*d,M=c*g-m*p,x=S*M-v*w+y*R+C*D-T*E+b*P;return x?(x=1/x,t[0]=(_*M-s*w+u*R)*x,t[1]=(o*w-r*M-i*R)*x,t[2]=(d*b-p*T+g*C)*x,t[3]=(c*T-f*b-m*C)*x,t[4]=(s*D-a*M-u*E)*x,t[5]=(n*M-o*D+i*E)*x,t[6]=(p*y-h*b-g*v)*x,t[7]=(l*b-c*y+m*v)*x,t[8]=(a*w-_*D+u*P)*x,t[9]=(r*D-n*w-i*P)*x,t[10]=(h*T-d*y+g*S)*x,t[11]=(f*y-l*T-m*S)*x,t[12]=(_*E-a*R-s*P)*x,t[13]=(n*R-r*E+o*P)*x,t[14]=(d*v-h*C-p*S)*x,t[15]=(l*C-f*v+c*S)*x,t):null}},{key:"parallelM",value:function(e,t,n,r,o,i,a,_){e[t+0]=2/(1*r-n),e[t+5]=2/(1*o-i),e[t+10]=-2/(1*_-a),e[t+15]=1,e[t+12]=-(r+n)/(1*r-n),e[t+13]=-(o+i)/(1*o-i),e[t+14]=-(_+a)/(1*_-a)}},{key:"perspectiveM",value:function(e,t,n,r,o,i){var a=1/Math.tan(n*(Math.PI/360)),_=1/(o-i);e[t+0]=a/r,e[t+1]=0,e[t+2]=0,e[t+3]=0,e[t+4]=0,e[t+5]=a,e[t+6]=0,e[t+7]=0,e[t+8]=0,e[t+9]=0,e[t+10]=(i+o)*_,e[t+11]=-1,e[t+12]=0,e[t+13]=0,e[t+14]=2*i*o*_,e[t+15]=0}},{key:"multiplyMM",value:function(e,t,n,r,o,i){e.m[t+0]=o.m[0]*n.m[0]+o.m[1]*n.m[4]+o.m[2]*n.m[8]+o.m[3]*n.m[12],e.m[t+1]=o.m[0]*n.m[1]+o.m[1]*n.m[5]+o.m[2]*n.m[9]+o.m[3]*n.m[13],e.m[t+2]=o.m[0]*n.m[2]+o.m[1]*n.m[6]+o.m[2]*n.m[10]+o.m[3]*n.m[14],e.m[t+3]=o.m[0]*n.m[3]+o.m[1]*n.m[7]+o.m[2]*n.m[11]+o.m[3]*n.m[15],e.m[t+4]=o.m[4]*n.m[0]+o.m[5]*n.m[4]+o.m[6]*n.m[8]+o.m[7]*n.m[12],e.m[t+5]=o.m[4]*n.m[1]+o.m[5]*n.m[5]+o.m[6]*n.m[9]+o.m[7]*n.m[13],e.m[t+6]=o.m[4]*n.m[2]+o.m[5]*n.m[6]+o.m[6]*n.m[10]+o.m[7]*n.m[14],e.m[t+7]=o.m[4]*n.m[3]+o.m[5]*n.m[7]+o.m[6]*n.m[11]+o.m[7]*n.m[15],e.m[t+8]=o.m[8]*n.m[0]+o.m[9]*n.m[4]+o.m[10]*n.m[8]+o.m[11]*n.m[12],e.m[t+9]=o.m[8]*n.m[1]+o.m[9]*n.m[5]+o.m[10]*n.m[9]+o.m[11]*n.m[13],e.m[t+10]=o.m[8]*n.m[2]+o.m[9]*n.m[6]+o.m[10]*n.m[10]+o.m[11]*n.m[14],e.m[t+11]=o.m[8]*n.m[3]+o.m[9]*n.m[7]+o.m[10]*n.m[11]+o.m[11]*n.m[15],e.m[t+12]=o.m[12]*n.m[0]+o.m[13]*n.m[4]+o.m[14]*n.m[8]+o.m[15]*n.m[12],e.m[t+13]=o.m[12]*n.m[1]+o.m[13]*n.m[5]+o.m[14]*n.m[9]+o.m[15]*n.m[13],e.m[t+14]=o.m[12]*n.m[2]+o.m[13]*n.m[6]+o.m[14]*n.m[10]+o.m[15]*n.m[14],e.m[t+15]=o.m[12]*n.m[3]+o.m[13]*n.m[7]+o.m[14]*n.m[11]+o.m[15]*n.m[15]}},{key:"multiplyMV",value:function(e,t,n){e._m_X=t._m_X*n.m[0]+t._m_Y*n.m[4]+t._m_Z*n.m[8]+t._m_W*n.m[12],e._m_Y=t._m_X*n.m[1]+t._m_Y*n.m[5]+t._m_Z*n.m[9]+t._m_W*n.m[13],e._m_Z=t._m_X*n.m[2]+t._m_Y*n.m[6]+t._m_Z*n.m[10]+t._m_W*n.m[14],e._m_W=t._m_X*n.m[3]+t._m_Y*n.m[7]+t._m_Z*n.m[11]+t._m_W*n.m[15]}},{key:"multiplyMV3",value:function(e,t,n){return e._m_X=t._m_X*n.m[0]+t._m_Y*n.m[4]+t._m_Z*n.m[8]+n.m[12],e._m_Y=t._m_X*n.m[1]+t._m_Y*n.m[5]+t._m_Z*n.m[9]+n.m[13],e._m_Z=t._m_X*n.m[2]+t._m_Y*n.m[6]+t._m_Z*n.m[10]+n.m[14],t._m_X*n.m[3]+t._m_Y*n.m[7]+t._m_Z*n.m[11]+n.m[15]}},{key:"multiplyMV3In3x3",value:function(e,t,n){e._m_X=t._m_X*n.m[0]+t._m_Y*n.m[4]+t._m_Z*n.m[8],e._m_Y=t._m_X*n.m[1]+t._m_Y*n.m[5]+t._m_Z*n.m[9],e._m_Z=t._m_X*n.m[2]+t._m_Y*n.m[6]+t._m_Z*n.m[10]}},{key:"composeMat4",value:function(t,n,r,o){return e.fromQuaternion(n,o),o.scale(r._m_X,r._m_Y,r._m_Z),o.translate(t._m_X,t._m_Y,t._m_Z),o}},{key:"decomposeMat4",value:function(t,n,r,o){e._S_TEMP_VEC3.setToInXYZ(t.m[0],t.m[1],t.m[2]);var i=e._S_TEMP_VEC3.length();e._S_TEMP_VEC3.setToInXYZ(t.m[4],t.m[5],t.m[6]);var a=e._S_TEMP_VEC3.length();e._S_TEMP_VEC3.setToInXYZ(t.m[8],t.m[9],t.m[10]);var _=e._S_TEMP_VEC3.length();e.determinantMat4(t)<0&&(i=-i),n.setToInXYZ(t.m[12],t.m[13],t.m[14]),e._S_TEMP_MAT4.set(t);var s=1/i,u=1/a,l=1/_;e._S_TEMP_MAT4.m[0]*=s,e._S_TEMP_MAT4.m[1]*=s,e._S_TEMP_MAT4.m[2]*=s,e._S_TEMP_MAT4.m[4]*=u,e._S_TEMP_MAT4.m[5]*=u,e._S_TEMP_MAT4.m[6]*=u,e._S_TEMP_MAT4.m[8]*=l,e._S_TEMP_MAT4.m[9]*=l,e._S_TEMP_MAT4.m[10]*=l,r.fromMat44(e._S_TEMP_MAT4),o.setToInXYZ(i,a,_)}},{key:"determinantMat4",value:function(e){var t=e.m[0],n=e.m[1],r=e.m[2],o=e.m[3],i=e.m[4],a=e.m[5],_=e.m[6],s=e.m[7],u=e.m[8],l=e.m[9],f=e.m[10],c=e.m[11],m=e.m[12],h=e.m[13],d=e.m[14],p=e.m[15];return m*l*_*o-u*h*_*o-m*a*f*o+i*h*f*o+u*a*d*o-i*l*d*o-m*l*r*s+u*h*r*s+m*n*f*s-t*h*f*s-u*n*d*s+t*l*d*s+m*a*r*c-i*h*r*c-m*n*_*c+t*h*_*c+i*n*d*c-t*a*d*c-u*a*r*p+i*l*r*p+u*n*_*p-t*l*_*p-i*n*f*p+t*a*f*p}},{key:"fromQuaternion",value:function(e,t){var n=e._m_X,r=e._m_Y,o=e._m_Z,i=e._m_W,a=n+n,_=r+r,s=o+o,u=n*a,l=n*_,f=n*s,c=r*_,m=r*s,h=o*s,d=i*a,p=i*_,g=i*s;return t.m[0]=1-(c+h),t.m[4]=l-g,t.m[8]=f+p,t.m[1]=l+g,t.m[5]=1-(u+h),t.m[9]=m-d,t.m[2]=f-p,t.m[6]=m+d,t.m[10]=1-(u+c),t.m[3]=0,t.m[7]=0,t.m[11]=0,t.m[12]=0,t.m[13]=0,t.m[14]=0,t.m[15]=1,t}}],(n=[{key:"identity",value:function(){this.m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"scale",value:function(e,t,n){return this.m[0]*=e,this.m[4]*=t,this.m[8]*=n,this.m[1]*=e,this.m[5]*=t,this.m[9]*=n,this.m[2]*=e,this.m[6]*=t,this.m[10]*=n,this.m[3]*=e,this.m[7]*=t,this.m[11]*=n,this}},{key:"translate",value:function(e,t,n){var r=this.m[3];this.m[0]+=r*e,this.m[1]+=r*t,this.m[2]+=r*n;var o=this.m[7];this.m[4]+=o*e,this.m[5]+=o*t,this.m[6]+=o*n;var i=this.m[11];this.m[8]+=i*e,this.m[9]+=i*t,this.m[10]+=i*n;var a=this.m[15];return this.m[12]+=a*e,this.m[13]+=a*t,this.m[14]+=a*n,this}},{key:"lookAt",value:function(t,n,r){return this.m=e.lookAt(t,n,r,this.m),this}},{key:"inert",value:function(){e.invert(this.m,e._S_TEMP_MAT4.m)&&this.set(e._S_TEMP_MAT4)}},{key:"inertRetNew",value:function(t){return e.invert(this.m,e._S_TEMP_MAT4.m)?((t=t||new e).set(e._S_TEMP_MAT4),t):null}},{key:"set",value:function(e){for(var t=0;t<16;t++)this.m[t]=e.m[t]}},{key:"setArray",value:function(e){for(var t=0;t<16;t++)this.m[t]=e[t]}},{key:"setArrayTranspose",value:function(e){for(var t=0,n=0;t<4;t++)for(var r=0;r<4;r++)this.m[n++]=e[4*r+t]}},{key:"keepRotation",value:function(){this.m[12]=this.m[13]=this.m[14]=0,this.m[15]=1}},{key:"transpose",value:function(){for(var e=[],t=0;t<this.m.length;t++)e[t]=this.m[t];for(var n=0,r=0;n<4;n++)for(var o=0;o<4;o++)this.m[r++]=e[4*o+n]}},{key:"absLocal",value:function(){for(var e=0;e<16;e++)this.m[e]=Math.abs(this.m[e])}},{key:"perspectiveM",value:function(t,n,r,o){return e.perspectiveM(this.m,0,t,n,r,o),this}},{key:"parallelM",value:function(t,n,r,o,i,a){return this.identity(),e.parallelM(this.m,0,t,n,r,o,i,a),this}},{key:"getData",value:function(){return this.m}},{key:"getBufferData",value:function(){return this.bufferData.set(this.m),this.bufferData}},{key:"toString",value:function(){return"["+this.m[0]+","+this.m[1]+","+this.m[2]+","+this.m[3]+",\n"+this.m[4]+","+this.m[5]+","+this.m[6]+","+this.m[7]+",\n"+this.m[8]+","+this.m[9]+","+this.m[10]+","+this.m[11]+",\n"+this.m[12]+","+this.m[13]+","+this.m[14]+","+this.m[15]+"]"}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=_,a(_,"_S_TEMP_MAT4",new _),a(_,"_S_TEMP_VEC3",new o.default)},431:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;Math.PI,Math.PI;var o=1/Math.PI,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"toRadians",value:function(e){return.005555555555555556*e*Math.PI}},{key:"toAngle",value:function(e){return 180*e*o}},{key:"interpolateLinear",value:function(e,t,n){return t==n||e<=0?t:e>=1?n:(1-e)*t+e*n}},{key:"interpolateLinearVec3",value:function(e,t,n){return t==n||e<=0?t:e>=1?n:(t.multLength(1-e),t.add(n.mulReturn(e)),t)}},{key:"random",value:function(e,t){return e>t&&(e=t),Math.random()*(t-e)+e}}],(r=null)&&n(t.prototype,r),i&&n(t,i),e}();t.default=i,r(i,"S_HALF_PI",.5*Math.PI),r(i,"S_DEG_TO_RAD",.0174532925),r(i,"S_RAD_TO_DEG",57.295779513),r(i,"S_TWO_PI",2*Math.PI)},7088:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(5604))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Normal=new o.default,this._m_D=0}var t,n,r;return t=e,(n=[{key:"setD",value:function(e){this._m_D=e}},{key:"getD",value:function(){return this._m_D}},{key:"setNormal",value:function(e){this._m_Normal.setTo(e),this._m_Normal.normal()}},{key:"setNormaXYZ",value:function(e,t,n){this._m_Normal.setToInXYZ(e,t,n),this._m_Normal.normal()}},{key:"getNormal",value:function(){return this._m_Normal}},{key:"distance",value:function(e){return this._m_Normal.dot(e)-this._m_D}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=_,a(_,"S_SIDE_POSITIVE",1),a(_,"S_SIDE_NEGATIVE",_.S_SIDE_POSITIVE<<1),a(_,"S_SIDE_NONE",_.S_SIDE_POSITIVE<<2)},453:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(431))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_X=t||0,this._m_Y=n||0,this._m_Z=r||0,this._m_W=o||0}var t,n,r;return t=e,r=[{key:"slerp",value:function(t,n,r,o){var i,a,_=t._m_W*n._m_W+t._m_X*n._m_X+t._m_Y*n._m_Y+t._m_Z*n._m_Z,s=null;if(_<0?((s=e._S_TEMP_QUATERNION)._m_W=-t._m_W,s._m_X=-t._m_X,s._m_Y=-t._m_Y,s._m_Z=-t._m_Z,_=-_):s=t,_>.9995)i=1-r,a=r;else{var u=Math.acos(_),l=Math.sin(u);i=Math.sin((1-r)*u)/l,a=Math.sin(r*u)/l}return(o=o||e._S_TEMP_QUATERNION_2)._m_W=s._m_W*i+n._m_W*a,o._m_X=s._m_X*i+n._m_X*a,o._m_Y=s._m_Y*i+n._m_Y*a,o._m_Z=s._m_Z*i+n._m_Z*a,o}},{key:"slerp2",value:function(t,n,r,o){if(o=o||e._S_TEMP_QUATERNION_2,0===r)return o.setTo(t),o;if(1===r)return o.setTo(n),o;var i=t._m_X,a=t._m_Y,_=t._m_Z,s=t._m_W,u=s*n._m_W+i*n._m_X+a*n._m_Y+_*n._m_Z,l=null;if(u<0?((l=e._S_TEMP_QUATERNION)._m_W=-n._m_W,l._m_X=-n._m_X,l._m_Y=-n._m_Y,l._m_Z=-n._m_Z,u=-u):l=n,u>=1)return o._m_W=s,o._m_X=i,o._m_Y=a,o._m_Z=_,o;var f=1-u*u;if(f<=Number.EPSILON){var c=1-r;return o._m_W=c*s+r*l._m_W,o._m_X=c*i+r*l._m_X,o._m_Y=c*a+r*l._m_Y,o._m_Z=c*_+r*l._m_Z,o.normal(),o}var m=Math.sqrt(f),h=Math.atan2(m,u),d=Math.sin((1-r)*h)/m,p=Math.sin(r*h)/m;return o._m_W=s*d+l._m_W*p,o._m_X=i*d+l._m_X*p,o._m_Y=a*d+l._m_Y*p,o._m_Z=_*d+l._m_Z*p,o}},{key:"inter",value:function(t,n,r,o){var i=1-r;return(o=o||e._S_TEMP_QUATERNION)._m_X=t._m_X*i+n._m_X*r,o._m_Y=t._m_Y*i+n._m_Y*r,o._m_Z=t._m_Z*i+n._m_Z*r,o._m_W=t._m_W*i+n._m_W*r,o}}],(n=[{key:"setTo",value:function(e){this._m_X=e._m_X,this._m_Y=e._m_Y,this._m_Z=e._m_Z,this._m_W=e._m_W}},{key:"setToInXYZW",value:function(e,t,n,r){this._m_X=e||0,this._m_Y=t||0,this._m_Z=n||0,this._m_W=r||0}},{key:"toAngles",value:function(e){e=e||new Array(3);var t=this._m_W*this._m_W,n=this._m_X*this._m_X,r=this._m_Y*this._m_Y,i=this._m_Z*this._m_Z,a=n+r+i+t,_=this._m_X*this._m_Y+this._m_Z*this._m_W;return _>.499*a?(e[1]=2*Math.atan2(this._m_X,this._m_W),e[2]=o.default.S_HALF_PI,e[0]=0):_<-.499*a?(e[1]=-2*Math.atan2(this._m_X,this._m_W),e[2]=-o.default.S_HALF_PI,e[0]=0):(e[1]=Math.atan2(2*this._m_Y*this._m_W-2*this._m_X*this._m_Z,n-r-i+t),e[2]=Math.asin(2*_/a),e[0]=Math.atan2(2*this._m_X*this._m_W-2*this._m_Y*this._m_Z,-n+r-i+t)),e}},{key:"fromEuler",value:function(e,t,n){var r=-1;r=.5*e;var o=Math.cos(r),i=Math.sin(r);r=.5*t;var a=Math.cos(r),_=Math.sin(r);r=.5*n;var s=Math.cos(r),u=Math.sin(r),l=a*s,f=_*u,c=a*u,m=_*s;this._m_X=l*i+f*o,this._m_Y=m*o+c*i,this._m_Z=c*o-m*i,this._m_W=l*o-f*i}},{key:"fromMat44",value:function(e){var t,n=e.m[0],r=e.m[4],o=e.m[8],i=e.m[1],a=e.m[5],_=e.m[9],s=e.m[2],u=e.m[6],l=e.m[10],f=n+a+l;f>0?(t=.5/Math.sqrt(f+1),this._m_W=.25/t,this._m_X=(u-_)*t,this._m_Y=(o-s)*t,this._m_Z=(i-r)*t):n>a&&n>l?(t=2*Math.sqrt(1+n-a-l),this._m_W=(u-_)/t,this._m_X=.25*t,this._m_Y=(r+i)/t,this._m_Z=(o+s)/t):a>l?(t=2*Math.sqrt(1+a-n-l),this._m_W=(o-s)/t,this._m_X=(r+i)/t,this._m_Y=.25*t,this._m_Z=(_+u)/t):(t=2*Math.sqrt(1+l-n-a),this._m_W=(i-r)/t,this._m_X=(o+s)/t,this._m_Y=(_+u)/t,this._m_Z=.25*t)}},{key:"multVec3",value:function(e,t){t=t||e;var n=e._m_X,r=e._m_Y,o=e._m_Z,i=this._m_X,a=this._m_Y,_=this._m_Z,s=this._m_W;return t._m_X=s*s*n+2*a*s*o-2*_*s*r+i*i*n+2*a*i*r+2*_*i*o-_*_*n-a*a*n,t._m_Y=2*i*a*n+a*a*r+2*_*a*o+2*s*_*n-_*_*r+s*s*r-2*i*s*o-i*i*r,t._m_Z=2*i*_*n+2*a*_*r+_*_*o-2*s*a*n-a*a*o+2*s*i*r-i*i*o+s*s*o,t}},{key:"slerp",value:function(t,n,r){return e.slerp(this,t,n,r)}},{key:"normal",value:function(){var e=this.length();return e?(e=1/e,this._m_X*=e,this._m_Y*=e,this._m_Z*=e,this._m_W*=e):console.error("Vector3.normal异常,长度为0。"),this}},{key:"length",value:function(){var e=this._m_X*this._m_X+this._m_Y*this._m_Y+this._m_Z*this._m_Z+this._m_W*this._m_W;return e=Math.sqrt(e)}},{key:"inter",value:function(t,n,r){return e.inter(this,t,n,r)}},{key:"toString",value:function(){return"["+this._m_X+","+this._m_Y+","+this._m_Z+","+this._m_W+"]"}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=_,a(_,"_S_TEMP_QUATERNION",new _),a(_,"_S_TEMP_QUATERNION_2",new _)},9271:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_X=t||0,this._m_Y=n||0,this.bufferData=new Float32Array(2)}var t,r,o;return t=e,(r=[{key:"getBufferData",value:function(){return this.bufferData.set([this._m_X,this._m_Y]),this.bufferData}},{key:"setTo",value:function(e){this._m_X=e._m_X,this._m_Y=e._m_Y}},{key:"setToInXY",value:function(e,t){this._m_X=e||0,this._m_Y=t||0}},{key:"dot",value:function(e){return this._m_X*e._m_X+this._m_Y*e._m_Y}},{key:"cross",value:function(e,t){if(t)return t._m_X=this._m_Y*e._m_Z-this._m_Z*e._m_Y,t._m_Y=this._m_Z*e._m_X-this._m_X*e._m_Z,t;var n=this._m_Y*e._m_Z-this._m_Z*e._m_Y,r=this._m_Z*e._m_X-this._m_X*e._m_Z;return this._m_X=n,this._m_Y=r,this}},{key:"crossRetNew",value:function(t){var n=new e(0,0);return this.cross(t,n)}},{key:"divide",value:function(e,t){return t?(t._m_X=this._m_X/e._m_X,t._m_Y=this._m_Y/e._m_Y,t):(this._m_X/=e._m_X,this._m_Y/=e._m_Y,this)}},{key:"divideRetNew",value:function(t){var n=new e(0,0);return this.divide(t,n)}},{key:"mult",value:function(e,t){return t?(t._m_X=this._m_X*e._m_X,t._m_Y=this._m_Y*e._m_Y,t):(this._m_X*=e._m_X,this._m_Y*=e._m_Y,this)}},{key:"multRetNew",value:function(t){var n=new e(0,0);return this.mult(t,n)}},{key:"sub",value:function(e,t){return t?(t._m_X=this._m_X-e._m_X,t._m_Y=this._m_Y-e._m_Y,t):(this._m_X-=e._m_X,this._m_Y-=e._m_Y,this)}},{key:"subRetNew",value:function(t){var n=new e(0,0);return this.sub(t,n)}},{key:"add",value:function(e,t){return t?(t._m_X=this._m_X+e._m_X,t._m_Y=this._m_Y+e._m_Y,t):(this._m_X+=e._m_X,this._m_Y+=e._m_Y,this)}},{key:"addRetNew",value:function(t){var n=new e(0,0);return this.add(t,n)}},{key:"multLength",value:function(e,t){return t?(t._m_X=this._m_X*e,t._m_Y=this._m_Y*e,t):(this._m_X*=e,this._m_Y*=e,this)}},{key:"normal",value:function(){var e=this.length();return e?(e=1/e,this._m_X*=e,this._m_Y*=e):console.error("Vector3.normal异常,长度为0。"),this}},{key:"length",value:function(){var e=this._m_X*this._m_X+this._m_Y*this._m_Y;return e=Math.sqrt(e)}},{key:"toString",value:function(){return"["+this._m_X+","+this._m_Y+"]"}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},5604:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_X=t||0,this._m_Y=n||0,this._m_Z=r||0,this.bufferData=new Float32Array(3)}var t,r,o;return t=e,o=[{key:"inter",value:function(t,n,r,o){var i=1-r;return(o=o||e._S_TEMP_VEC3)._m_X=t._m_X*i+n._m_X*r,o._m_Y=t._m_Y*i+n._m_Y*r,o._m_Z=t._m_Z*i+n._m_Z*r,o}}],(r=[{key:"getBufferData",value:function(){return this.bufferData.set([this._m_X,this._m_Y,this._m_Z]),this.bufferData}},{key:"toArray",value:function(){return[this._m_X,this._m_Y,this._m_Z]}},{key:"setTo",value:function(e){return this._m_X=e._m_X,this._m_Y=e._m_Y,this._m_Z=e._m_Z,this}},{key:"setToInXYZ",value:function(e,t,n){return this._m_X=e||0,this._m_Y=t||0,this._m_Z=n||0,this}},{key:"dot",value:function(e){return this._m_X*e._m_X+this._m_Y*e._m_Y+this._m_Z*e._m_Z}},{key:"min",value:function(e,t){return t?(t._m_X=e._m_X<this._m_X?e._m_X:this._m_X,t._m_Y=e._m_Y<this._m_Y?e._m_Y:this._m_Y,t._m_Z=e._m_Z<this._m_Z?e._m_Z:this._m_Z,t):(this._m_X=e._m_X<this._m_X?e._m_X:this._m_X,this._m_Y=e._m_Y<this._m_Y?e._m_Y:this._m_Y,this._m_Z=e._m_Z<this._m_Z?e._m_Z:this._m_Z,this)}},{key:"max",value:function(e,t){return t?(t._m_X=e._m_X>this._m_X?e._m_X:this._m_X,t._m_Y=e._m_Y>this._m_Y?e._m_Y:this._m_Y,t._m_Z=e._m_Z>this._m_Z?e._m_Z:this._m_Z,t):(this._m_X=e._m_X>this._m_X?e._m_X:this._m_X,this._m_Y=e._m_Y>this._m_Y?e._m_Y:this._m_Y,this._m_Z=e._m_Z>this._m_Z?e._m_Z:this._m_Z,this)}},{key:"cross",value:function(e,t){if(t)return t._m_X=this._m_Y*e._m_Z-this._m_Z*e._m_Y,t._m_Y=this._m_Z*e._m_X-this._m_X*e._m_Z,t._m_Z=this._m_X*e._m_Y-this._m_Y*e._m_X,t;var n=this._m_Y*e._m_Z-this._m_Z*e._m_Y,r=this._m_Z*e._m_X-this._m_X*e._m_Z,o=this._m_X*e._m_Y-this._m_Y*e._m_X;return this._m_X=n,this._m_Y=r,this._m_Z=o,this}},{key:"crossRetNew",value:function(t){var n=new e(0,0,0);return this.cross(t,n)}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSq(e))}},{key:"distanceSq",value:function(e){var t=this._m_X-e._m_X,n=this._m_Y-e._m_Y,r=this._m_Z-e._m_Z;return t*t+n*n+r*r}},{key:"divide",value:function(e,t){return t?(t._m_X=this._m_X/e._m_X,t._m_Y=this._m_Y/e._m_Y,t._m_Z=this._m_Z/e._m_Z,t):(this._m_X/=e._m_X,this._m_Y/=e._m_Y,this._m_Z/=e._m_Z,this)}},{key:"divideInXYZ",value:function(e,t,n,r){return r?(r._m_X=this._m_X/e,r._m_Y=this._m_Y/t,r._m_Z=this._m_Z/n,r):(this._m_X/=e,this._m_Y/=t,this._m_Z/=n,this)}},{key:"divideRetNew",value:function(t){var n=new e(0,0,0);return this.divide(t,n)}},{key:"divideRetNewInXYZ",value:function(t,n,r){var o=new e(0,0,0);return this.divideInXYZ(t,n,r,o)}},{key:"mult",value:function(e,t){return t?(t._m_X=this._m_X*e._m_X,t._m_Y=this._m_Y*e._m_Y,t._m_Z=this._m_Z*e._m_Z,t):(this._m_X*=e._m_X,this._m_Y*=e._m_Y,this._m_Z*=e._m_Z,this)}},{key:"multInXYZ",value:function(e,t,n,r){return r?(r._m_X=this._m_X*e,r._m_Y=this._m_Y*t,r._m_Z=this._m_Z*n,r):(this._m_X*=e,this._m_Y*=t,this._m_Z*=n,this)}},{key:"multRetNew",value:function(t){var n=new e(0,0,0);return this.mult(t,n)}},{key:"multRetNewInXYZ",value:function(t,n,r){var o=new e(0,0,0);return this.multInXYZ(t,n,r,o)}},{key:"sub",value:function(e,t){return t?(t._m_X=this._m_X-e._m_X,t._m_Y=this._m_Y-e._m_Y,t._m_Z=this._m_Z-e._m_Z,t):(this._m_X-=e._m_X,this._m_Y-=e._m_Y,this._m_Z-=e._m_Z,this)}},{key:"subInXYZ",value:function(e,t,n,r){return r?(r._m_X=this._m_X-e,r._m_Y=this._m_Y-t,r._m_Z=this._m_Z-n,r):(this._m_X-=e,this._m_Y-=t,this._m_Z-=n,this)}},{key:"subRetNew",value:function(t){var n=new e(0,0,0);return this.sub(t,n)}},{key:"subRetNewInXYZ",value:function(t,n,r){var o=new e(0,0,0);return this.subInXYZ(t,n,r,o)}},{key:"add",value:function(e,t){return t?(t._m_X=this._m_X+e._m_X,t._m_Y=this._m_Y+e._m_Y,t._m_Z=this._m_Z+e._m_Z,t):(this._m_X+=e._m_X,this._m_Y+=e._m_Y,this._m_Z+=e._m_Z,this)}},{key:"addInXYZ",value:function(e,t,n,r){return r?(reslut._m_X=this._m_X+e,reslut._m_Y=this._m_Y+t,reslut._m_Z=this._m_Z+n,reslut):(this._m_X+=e,this._m_Y+=t,this._m_Z+=n,this)}},{key:"addRetNew",value:function(t){var n=new e(0,0,0);return this.add(t,n)}},{key:"addRetNewInXYZ",value:function(t,n,r){var o=new e(0,0,0);return this.addInXYZ(t,n,r,o)}},{key:"multLength",value:function(e,t){return t?(t._m_X=this._m_X*e,t._m_Y=this._m_Y*e,t._m_Z=this._m_Z*e,t):(this._m_X*=e,this._m_Y*=e,this._m_Z*=e,this)}},{key:"normal",value:function(){var e=this.length();return e?(e=1/e,this._m_X*=e,this._m_Y*=e,this._m_Z*=e):this._m_X=this._m_Y=this._m_Z=0,this}},{key:"negate",value:function(){return new e(-this._m_X,-this._m_Y,-this._m_Z)}},{key:"length",value:function(){var e=this._m_X*this._m_X+this._m_Y*this._m_Y+this._m_Z*this._m_Z;return e=Math.sqrt(e)}},{key:"toString",value:function(){return"["+this._m_X+","+this._m_Y+","+this._m_Z+"]"}},{key:"inter",value:function(t,n,r){return e.inter(this,t,n,r)}},{key:"equals",value:function(e){return e==this||null!=e&&this._m_X==e._m_X&&this._m_Y==e._m_Y&&this._m_Z==e._m_Z}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o,r(o,"_S_TEMP_VEC3",new o),r(o,"S_UNIT_AXIS_X",new o(1,0,0)),r(o,"S_UNIT_AXIS_Y",new o(0,1,0)),r(o,"S_UNIT_AXIS_Z",new o(0,0,1)),r(o,"S_UNIT_AXIS_NEGATIVE_X",new o(-1,0,0)),r(o,"S_UNIT_AXIS_NEGATIVE_Y",new o(0,-1,0)),r(o,"S_UNIT_AXIS_NEGATIVE_Z",new o(0,0,-1)),r(o,"S_POSITIVE_INFINITY",new o(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)),r(o,"S_NEGATIVE_INFINITY",new o(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY)),r(o,"S_MAX",new o(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)),r(o,"S_MIN",new o(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE))},7141:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i,a=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_X=t||0,this._m_Y=n||0,this._m_Z=r||0,this._m_W=null!=o&&null!=o?o:1,this.bufferData=new Float32Array(4)}var t,r,o;return t=e,o=[{key:"inter",value:function(t,n,r,o){var i=1-r;return(o=o||e._S_TEMP_VEC4)._m_X=t._m_X*i+n._m_X*r,o._m_Y=t._m_Y*i+n._m_Y*r,o._m_Z=t._m_Z*i+n._m_Z*r,o._m_W=1,o}}],(r=[{key:"getBufferData",value:function(){return this.bufferData.set([this._m_X,this._m_Y,this._m_Z,this._m_W]),this.bufferData}},{key:"setTo",value:function(e){return this._m_X=e._m_X,this._m_Y=e._m_Y,this._m_Z=e._m_Z,this._m_W=e._m_W,this}},{key:"setToInXYZW",value:function(e,t,n,r){return this._m_X=e||0,this._m_Y=t||0,this._m_Z=n||0,this._m_W=null!=r&&null!=r?r:1,this}},{key:"dot",value:function(e){return this._m_X*e._m_X+this._m_Y*e._m_Y+this._m_Z*e._m_Z+this._m_W*e._m_W}},{key:"cross",value:function(e,t){if(t)return t._m_X=this._m_Y*e._m_Z-this._m_Z*e._m_Y,t._m_Y=this._m_Z*e._m_X-this._m_X*e._m_Z,t._m_Z=this._m_X*e._m_Y-this._m_Y*e._m_X,t;var n=this._m_Y*e._m_Z-this._m_Z*e._m_Y,r=this._m_Z*e._m_X-this._m_X*e._m_Z,o=this._m_X*e._m_Y-this._m_Y*e._m_X;return this._m_X=n,this._m_Y=r,this._m_Z=o,this}},{key:"crossRetNew",value:function(t){var n=new e(0,0,0,1);return this.cross(t,n)}},{key:"divide",value:function(e,t){return t?(t._m_X=this._m_X/e._m_X,t._m_Y=this._m_Y/e._m_Y,t._m_Z=this._m_Z/e._m_Z,t._m_W=this._m_W/e._m_W,t):(this._m_X/=e._m_X,this._m_Y/=e._m_Y,this._m_Z/=e._m_Z,this._m_W/=e._m_W,this)}},{key:"divideRetNew",value:function(t){var n=new e(0,0,0,1);return this.divide(t,n)}},{key:"mult",value:function(e,t){return t?(t._m_X=this._m_X*e._m_X,t._m_Y=this._m_Y*e._m_Y,t._m_Z=this._m_Z*e._m_Z,t._m_W=this._m_W*e._m_W,t):(this._m_X*=e._m_X,this._m_Y*=e._m_Y,this._m_Z*=e._m_Z,this._m_W*=e._m_W,this)}},{key:"multRetNew",value:function(t){var n=new e(0,0,0,1);return this.mult(t,n)}},{key:"sub",value:function(e,t){return t?(t._m_X=this._m_X-e._m_X,t._m_Y=this._m_Y-e._m_Y,t._m_Z=this._m_Z-e._m_Z,t):(this._m_X-=e._m_X,this._m_Y-=e._m_Y,this._m_Z-=e._m_Z,this)}},{key:"subRetNew",value:function(t){var n=new e(0,0,0,1);return this.sub(t,n)}},{key:"add",value:function(e,t){return t?(t._m_X=this._m_X+e._m_X,t._m_Y=this._m_Y+e._m_Y,t._m_Z=this._m_Z+e._m_Z,t):(this._m_X+=e._m_X,this._m_Y+=e._m_Y,this._m_Z+=e._m_Z,this)}},{key:"addRetNew",value:function(t){var n=new e(0,0,0,1);return this.add(t,n)}},{key:"multLength",value:function(e,t){return t?(t._m_X=this._m_X*e,t._m_Y=this._m_Y*e,t._m_Z=this._m_Z*e,t):(this._m_X*=e,this._m_Y*=e,this._m_Z*=e,this)}},{key:"normal",value:function(){var e=this.length();return e?(e=1/e,this._m_X*=e,this._m_Y*=e,this._m_Z*=e):console.error("Vector3.normal异常,长度为0。"),this}},{key:"distanceSq",value:function(e){var t=this._m_X-e._m_X,n=this._m_Y-e._m_Y,r=this._m_Z-e._m_Z;return t*t+n*n+r*r}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSq(e))}},{key:"length",value:function(){var e=this._m_X*this._m_X+this._m_Y*this._m_Y+this._m_Z*this._m_Z;return e=Math.sqrt(e)}},{key:"toString",value:function(){return"["+this._m_X+","+this._m_Y+","+this._m_Z+","+this._m_W+"]"}},{key:"inter",value:function(t,n,r){return e.inter(this,t,n,r)}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=a,r=a,o="_S_TEMP_VEC4",i=new a,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i},5776:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e,t)}return t=s,(n=[{key:"getType",value:function(){return"FramePicture"}},{key:"isFramePicture",value:function(){return!0}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(7280))&&o.__esModule?o:{default:o}).default);t.default=l},4720:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(2949)),i=l(n(9784)),a=l(n(307)),_=l(n(2320)),s=l(n(2475)),u=l(n(3801));l(n(3846));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(h,e);var t,n,r,l=m(h);function h(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(n=l.call(this,e,t))._m_Mesh=null,n._m_ModelAABBBoundingBox=null,n._m_Material=null,n._m_IsDrawable=!0,n._m_Opaque=!0,n}return t=h,(n=[{key:"getType",value:function(){return"Geometry"}},{key:"lod",value:function(e){this._m_CurrentLod!=e&&(this._m_CurrentLod=e,null!=this._m_Mesh&&this._m_Mesh.lod(this._m_CurrentLod))}},{key:"setMaterial",value:function(e){this._m_Material=e,this._m_Mesh&&this._refreshBufLocal()}},{key:"getMaterial",value:function(){return this._m_Material}},{key:"setMesh",value:function(e){this._m_Mesh=e,this._m_Material&&this._refreshBufLocal()}},{key:"getMesh",value:function(){return this._m_Mesh}},{key:"updateBound",value:function(){this._m_Mesh&&(this._m_Mesh._updateBound(this._m_Scene.getCanvas().getGLContext()),this._m_ModelAABBBoundingBox||(this._m_ModelAABBBoundingBox=new u.default,this._m_ModelAABBBoundingBox.fromPositions(this._m_Mesh.getData(a.default.S_POSITIONS)),this._m_BoudingVolume||(this._m_BoudingVolume=new u.default),this._m_BoudingVolume.setTo(this._m_ModelAABBBoundingBox)),this._m_Mesh.lod(this._m_CurrentLod))}},{key:"getBoundingVolume",value:function(){return this._m_UpdateBoundingVolume&&(_.default.decomposeMat4(this.getWorldMatrix(),o.default.S_TEMP_VEC3,o.default.S_TEMP_Q,o.default.S_TEMP_VEC3_2),this._m_ModelAABBBoundingBox.transform(o.default.S_TEMP_VEC3_2,o.default.S_TEMP_Q,o.default.S_TEMP_VEC3,this._m_BoudingVolume),this._m_UpdateBoundingVolume=!1),this._m_BoudingVolume}},{key:"_refreshBufLocal",value:function(){}},{key:"isDrawable",value:function(){return this._m_IsDrawable}},{key:"setIsDrawable",value:function(e){this._m_IsDrawable=e}},{key:"isFramePicture",value:function(){return!1}},{key:"setOpaque",value:function(){this._m_Opaque=!0}},{key:"isOpaque",value:function(){return this._m_Opaque}},{key:"setTranslucent",value:function(){this._m_Opaque=!1}},{key:"isTranslucent",value:function(){return!this._m_Opaque}},{key:"isSky",value:function(){}},{key:"isGUI",value:function(){}},{key:"draw",value:function(e){var t=this._m_Scene.getCanvas().getGLContext(),n=e.m_LastSubShader.getContextVars(),r=null,o=null;for(var a in n)switch(a){case i.default.S_MODEL_MATRIX_SRC:t[n[a].fun](n[a].loc,!1,this.getWorldMatrix().getBufferData());break;case i.default.S_MV_SRC:r=e.getCalcContext(i.default.S_VIEW_MATRIX_SRC),_.default.multiplyMM(s.default.S_TEMP_MAT4,0,r,0,this.getWorldMatrix(),0),n[a].fun(n[a].loc,!1,s.default.S_TEMP_MAT4.getBufferData());break;case i.default.S_MVP_SRC:r=e.getCalcContext(i.default.S_VIEW_MATRIX_SRC),o=e.getCalcContext(i.default.S_PROJECT_MATRIX_SRC),_.default.multiplyMM(s.default.S_TEMP_MAT4,0,r,0,this.getWorldMatrix(),0),_.default.multiplyMM(s.default.S_TEMP_MAT4_1,0,o,0,r,0),t[n[a].fun](n[a].loc,!1,s.default.S_TEMP_MAT4_1.getBufferData())}this._m_Mesh.draw(t)}}])&&f(t.prototype,n),r&&f(t,r),h}(o.default);t.default=p},2949:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(9650)),i=c(n(2320)),a=c(n(5604)),_=c(n(453)),s=c(n(3801)),u=c(n(1550)),l=c(n(5397)),f=c(n(3846));function c(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,o=d(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=o.call(this,e,{id:l.default.nextId()+t.id}))._m_Name=t.id,n._m_CurrentLod=0,n._m_LocalMatrix=new i.default,n._m_WorldMatrix=new i.default,n._m_Parent=null,n._m_Children=[],n._m_ChildrenIDs={},n._m_LocalScale=new a.default(1,1,1),n._m_LocalRotation=new _.default(0,0,0,1),n._m_LocalTranslation=new a.default,n._m_UpdateLocalMatrix=!1,n._m_UpdateWorldMatrix=!1,n._m_BoudingVolume=null,n._m_UpdateBoundingVolume=!0,n._m_FrustumContain=u.default.S_FRUSTUM_INTERSECT_INTERSECTS,n._m_CullMode=null,n._m_CullingFlags=1,n._m_CullingFlags|=c.S_DEFAULT_FRUSTUM_CULLING,n._m_FilterFlag=c.S_DYNAMIC,n._m_ShadowMode=1,n._m_ShadowMode|=c.S_SHADOW_CAST_AND_RECEIVE,n}return t=c,(n=[{key:"getType",value:function(){return"Node"}},{key:"castShadow",value:function(e){!e||0!=(this._m_ShadowMode&c.S_SHADOW_CAST)&&0!=(this._m_ShadowMode&c.S_SHADOW_CAST_AND_RECEIVE)?(0!=(this._m_ShadowMode&c.S_SHADOW_CAST)&&(this._m_ShadowMode^=c.S_SHADOW_CAST),0!=(this._m_ShadowMode&c.S_SHADOW_CAST_AND_RECEIVE)&&(this._m_ShadowMode^=c.S_SHADOW_CAST_AND_RECEIVE,console.log("_m_ShadowMode:"+this._m_ShadowMode),this._m_ShadowMode&0==c.S_SHADOW_RECEIVE&&(this._m_ShadowMode|=c.S_SHADOW_RECEIVE))):this._m_ShadowMode|=c.S_SHADOW_CAST,this._m_Children.forEach((function(t){t.castShadow(e)}))}},{key:"isCastShadow",value:function(){return 0!=(this._m_ShadowMode&c.S_SHADOW_CAST)||0!=(this._m_ShadowMode&c.S_SHADOW_CAST_AND_RECEIVE)}},{key:"receiveShadow",value:function(e){!e||0!=(this._m_ShadowMode&c.S_SHADOW_RECEIVE)&&0!=(this._m_FilterFlag&c.S_SHADOW_CAST_AND_RECEIVE)?(0!=(this._m_ShadowMode&c.S_SHADOW_RECEIVE)&&(this._m_ShadowMode^=c.S_SHADOW_RECEIVE),0!=(this._m_ShadowMode&c.S_SHADOW_CAST_AND_RECEIVE)&&(this._m_ShadowMode^=c.S_SHADOW_CAST_AND_RECEIVE,this._m_ShadowMode&0==c.S_SHADOW_CAST&&(this._m_ShadowMode|=c.S_SHADOW_CAST))):this._m_ShadowMode|=c.S_SHADOW_RECEIVE,this._m_Children.forEach((function(t){t.receiveShadow(e)}))}},{key:"isReceiveShadow",value:function(){return 0!=(this._m_ShadowMode&c.S_SHADOW_RECEIVE)||0!=(this._m_ShadowMode&c.S_SHADOW_CAST_AND_RECEIVE)}},{key:"isDrawable",value:function(){return!1}},{key:"lod",value:function(e){this._m_CurrentLod!=e&&this._m_Children.getChildren().length>0&&this._m_Children.forEach((function(t){t.lod(e)}))}},{key:"setFilterFlag",value:function(e){this._m_FilterFlag=e}},{key:"getFilterFlag",value:function(){return this._m_FilterFlag}},{key:"getCullingFlags",value:function(){return this._m_CullingFlags}},{key:"clearCullingFlags",value:function(e){this._m_CullingFlags^=e}},{key:"addCullingFlags",value:function(e){this._m_CullingFlags|=e}},{key:"inFrustum",value:function(e){return this._m_FrustumContain=null==this._m_Parent?u.default.S_FRUSTUM_INTERSECT_INTERSECTS:this._m_Parent._m_FrustumContain,this._m_FrustumContain==u.default.S_FRUSTUM_INTERSECT_INTERSECTS&&(this._m_FrustumContain=e.frustumContains(this.getBoundingVolume())),this._m_FrustumContain!=u.default.S_FRUSTUM_INTERSECT_OUTSIDE}},{key:"getBoundingVolume",value:function(){var e=this;if(this._m_UpdateBoundingVolume){if(this._m_Children.length>0){var t=null;this._m_Children.forEach((function(n){(t=n.getBoundingVolume())&&(e._m_BoudingVolume||(e._m_BoudingVolume=new s.default),e._m_BoudingVolume.merge(t))}))}this._m_UpdateBoundingVolume=!1}return this._m_BoudingVolume}},{key:"getChildren",value:function(){return this._m_Children}},{key:"getChildrenAtName",value:function(e){var t=this._m_ChildrenIDs[e];if(t)return t;for(var n=this._m_Children.length,r=0;r<n;r++)if(t=this._m_Children[r].getChildrenAtName(e))return t;return null}},{key:"getChildrenAtIndex",value:function(e){return e>=this._m_Children.length?null:this._m_Children[e]}},{key:"getParent",value:function(){return this._m_Parent}},{key:"setLocalScale",value:function(e){this._m_LocalScale.setTo(e),this._updateLocalMatrix()}},{key:"setLocalScaleXYZ",value:function(e,t,n){this._m_LocalScale.setToInXYZ(e,t,n),this._updateLocalMatrix()}},{key:"getLocalScale",value:function(){return this._m_LocalScale}},{key:"setLocalRotation",value:function(e){this._m_LocalRotation.setTo(e),this._updateLocalMatrix()}},{key:"setLocalRotationFromEuler",value:function(e,t,n){this._m_LocalRotation.fromEuler(e,t,n),this._updateLocalMatrix()}},{key:"setLocalRotationFromXYZW",value:function(e,t,n,r){this._m_LocalRotation.setToInXYZW(e,t,n,r),this._updateLocalMatrix()}},{key:"getLocalRotation",value:function(){return this._m_LocalRotation}},{key:"setLocalTranslation",value:function(e){this._m_LocalTranslation.setTo(e),this._updateLocalMatrix()}},{key:"setLocalTranslationXYZ",value:function(e,t,n){this._m_LocalTranslation.setToInXYZ(e,t,n),this._updateLocalMatrix()}},{key:"getLocalTranslation",value:function(){return this._m_LocalTranslation}},{key:"_updateBounding",value:function(){this._m_UpdateBoundingVolume=!0}},{key:"_updateLocalMatrix",value:function(){this._m_UpdateLocalMatrix=!0,this._updateWorldMatrix(),this._updateBounding(),null!=this._m_Parent&&this._m_Parent._updateBounding(),this._m_Children.forEach((function(e){e._updateBounding()}))}},{key:"_updateWorldMatrix",value:function(){this._m_UpdateWorldMatrix=!0,this._m_Children.forEach((function(e){e._updateWorldMatrix()}))}},{key:"getLocalMatrix",value:function(){return this._m_UpdateLocalMatrix&&(i.default.composeMat4(this._m_LocalTranslation,this._m_LocalRotation,this._m_LocalScale,this._m_LocalMatrix),this._m_UpdateLocalMatrix=!1),this._m_LocalMatrix}},{key:"setLocalMatrix",value:function(e){this._m_LocalMatrix.set(e),this._updateLocalMatrix(),this._m_UpdateLocalMatrix=!1,i.default.decomposeMat4(e,this._m_LocalTranslation,this._m_LocalRotation,this._m_LocalScale)}},{key:"setLocalMatrixFromArray",value:function(e){this._m_LocalMatrix.setArray(e),this._updateLocalMatrix(),this._m_UpdateLocalMatrix=!1,i.default.decomposeMat4(this._m_LocalMatrix,this._m_LocalTranslation,this._m_LocalRotation,this._m_LocalScale)}},{key:"getWorldMatrix",value:function(){return this._m_UpdateWorldMatrix&&this._buildWorldMatrix(),this._m_WorldMatrix}},{key:"_buildWorldMatrix",value:function(){this._m_UpdateWorldMatrix&&(this.getLocalMatrix(),this._m_Parent?i.default.multiplyMM(this._m_WorldMatrix,0,this._m_Parent.getWorldMatrix(),0,this._m_LocalMatrix,0):this._m_WorldMatrix.set(this._m_LocalMatrix),this._m_UpdateWorldMatrix=!1)}},{key:"getName",value:function(){return this._m_Name}},{key:"addChildren",value:function(e){if(e instanceof c)if(null!=e._m_Parent||this._m_ChildrenIDs[e.getName()]){var t=e.getName()+l.default.nextId();f.default.warn("已存在:"+e.getName()+",重命名为:"+t),e._m_Name=t,null==e._m_Parent?(this._m_ChildrenIDs[e.getName()]=e,this._m_Children.push(e),e._m_Parent=this,e._updateWorldMatrix(),this._updateBounding()):f.default.warn(t+"已存在与父节点:"+e._m_Parent.getName())}else this._m_ChildrenIDs[e.getName()]=e,this._m_Children.push(e),e._m_Parent=this,e._updateWorldMatrix(),this._updateBounding();else f.default.error("children不是一个合法的Node!")}},{key:"removeChildren",value:function(e){if(e instanceof c&&this._m_ChildrenIDs[e.getName()]){this._m_ChildrenIDs[e.getName()]=null;var t=this._m_Children.indexOf(e);t>-1&&this._m_Children.splice(t,1),e._m_Parent=null}}},{key:"traverse",value:function(e){e&&e(this),this._m_Children.forEach((function(t){e&&e(t),t.traverse(e)}))}}])&&m(t.prototype,n),r&&m(t,r),c}(o.default);t.default=v,S(v,"S_DEFAULT_FRUSTUM_CULLING",2),S(v,"S_DYNAMIC",4),S(v,"S_ALWAYS",8),S(v,"S_NEVER",16),S(v,"S_SHADOW_RECEIVE",2),S(v,"S_SHADOW_CAST",4),S(v,"S_SHADOW_CAST_AND_RECEIVE",8),S(v,"S_SHADOW_NONE",0),S(v,"S_TEMP_VEC3",new a.default),S(v,"S_TEMP_Q",new _.default),S(v,"S_TEMP_VEC3_2",new a.default)},7280:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(4720)),i=f(n(2949)),a=f(n(307)),_=f(n(3370)),s=f(n(8113)),u=f(n(4008)),l=f(n(5397));function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,r,o=h(f);function f(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=o.call(this,e,t))._m_Width=t.width||1,n._m_Height=t.height||1,n._m_Zindex=1,n._m_Left=0,n._m_Top=0;var r=new a.default;return r.setData(a.default.S_POSITIONS,[-1,1,1,-1,-1,1,1,1,1,1,-1,1]),r.setData(a.default.S_UV0,[0,1,0,0,1,1,1,0]),r.setData(a.default.S_INDICES,[0,1,2,2,1,3]),n.setMesh(r),n.updateBound(),n._m_FilterFlag=i.default.S_NEVER,n._m_ShadowMode=i.default.S_SHADOW_NONE,n}return t=f,(n=[{key:"getType",value:function(){return"Picture"}},{key:"useDefaultMat",value:function(){this.setMaterial(new u.default(this._m_Scene,{id:"picture_gui_"+l.default.nextId(),materialDef:s.default.parse(_.default.S_PICTURE_DEF_DATA)}))}},{key:"setSize",value:function(e,t){this._m_Width==e&&this._m_Height==t||this.setLocalScaleXYZ(e,t,1)}},{key:"setLeftTop",value:function(e,t){this._m_Left==e&&this._m_Top==t||(this._m_Left=e,this._m_Top=t,this.setLocalTranslationXYZ(this._m_Left,this._m_Top,2*this._m_Zindex-1))}},{key:"setZIndex",value:function(e){this._m_Zindex!=e&&(this._m_Zindex=Math.min(Math.max(0,e),1),this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight(),this.setLocalTranslationXYZ(this._m_Left,this._m_Top,2*this._m_Zindex-1))}},{key:"getWidthSize",value:function(){return this._m_Width*this._m_Scene.getCanvas().getWidth()}},{key:"getWidth",value:function(){return this._m_Width}},{key:"getHeightSize",value:function(){return this._m_Height*this._m_Scene.getCanvas().getHeight()}},{key:"getHeight",value:function(){return this._m_Height}},{key:"isDrawable",value:function(){return!0}},{key:"isGUI",value:function(){return!0}}])&&c(t.prototype,n),r&&c(t,r),f}(o.default);t.default=g},5765:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,r,o=l(_);function _(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),n=o.call(this,e,t);var r=t.xHalf||1;r<=0&&(console.error("xHalf不能小于等于0!"),r*=-1);var s=t.yHalf||1;s<=0&&(console.error("yHalf不能小于等于0!"),s*=-1);var u=t.zHalf||1;u<=0&&(console.error("zHalf不能小于等于0!"),u*=-1);var l=t.center,f=l?l._m_X:0,c=l?l._m_Y:0,m=l?l._m_Z:0,h=-r+f,d=-s+c,p=-u+m,g=r+f,S=s+c,v=u+m,y=new i.default;y.setData(i.default.S_POSITIONS,[g,S,v,h,S,v,h,d,v,g,d,v,g,S,v,g,d,v,g,d,p,g,S,p,g,S,v,g,S,p,h,S,p,h,S,v,h,S,v,h,S,p,h,d,p,h,d,v,h,d,p,g,d,p,g,d,v,h,d,v,g,d,p,h,d,p,h,S,p,g,S,p]),y.setData(i.default.S_NORMALS,[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),y.setData(i.default.S_UV0,[1,0,0,0,0,1,1,1,0,0,0,1,1,1,1,0,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0]),y.setData(i.default.S_INDICES,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]);var C=a.default.generatorTangents2(y.getData(i.default.S_INDICES),y.getData(i.default.S_POSITIONS),y.getData(i.default.S_UV0),y.getData(i.default.S_NORMALS));return y.setData(i.default.S_TANGENTS,C),n.setMesh(y),n.updateBound(),n}return t=_,(n=[{key:"getType",value:function(){return"Box"}}])&&s(t.prototype,n),r&&s(t,r),_}(o.default);t.default=m},4992:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(e,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e,r);for(var _=void 0!==r.radiusTop?r.radiusTop:1,s=void 0!==r.radiusBottom?r.radiusBottom:1,u=void 0!==r.height?r.height:1,l=r.radialSegments||60,f=r.heightSegments||1,c=r.openEnded||!1,m=u/2,h=u/f,d=2*Math.PI/l,p=1/l,g=(o.radiusBottom,(_-s)/f),S=[],v=[],y=[],C=[],T=(90-180*Math.atan(u/(s-_))/Math.PI)/90,b=0;b<=f;b++)for(var P=_-b*g,E=m-b*h,D=0;D<=l;D++){var R=Math.sin(D*d),w=Math.cos(D*d);v.push(P*R),v.push(T),v.push(P*w),y.push(1-D*p),y.push(0+1*b/f),S.push(P*R),S.push(E),S.push(P*w)}for(var M=0;M<f;M++)for(var x=0;x<=l;x++){var A=M*(l+1)+x,L=A+l;C.push(A),C.push(L),C.push(L+1),C.push(A),C.push(L+1),C.push(A+1)}if(!c&&_>0){var I=S.length/3;v.push(0),v.push(1),v.push(0),y.push(.5),y.push(.5),S.push(0),S.push(m),S.push(0);for(var O=0;O<=l;O++){var F=Math.sin(O*d),k=Math.cos(O*d),B=.5*Math.sin(O*d)+.5,N=.5*Math.cos(O*d)+.5;v.push(_*F),v.push(1),v.push(_*k),y.push(B),y.push(N),S.push(_*F),S.push(m),S.push(_*k)}for(var V=0;V<l;V++){var G=I,U=I+1+V;C.push(U),C.push(U+1),C.push(G)}}if(!c&&s>0){var H=S.length/3;v.push(0),v.push(-1),v.push(0),y.push(.5),y.push(.5),S.push(0),S.push(0-m),S.push(0);for(var j=0;j<=l;j++){var X=Math.sin(j*d),Y=Math.cos(j*d),W=.5*Math.sin(j*d)+.5,Z=.5*Math.cos(j*d)+.5;v.push(s*X),v.push(-1),v.push(s*Y),y.push(W),y.push(Z),S.push(s*X),S.push(0-m),S.push(s*Y)}for(var z=0;z<l;z++){var q=H,K=H+1+z;C.push(q),C.push(K+1),C.push(K)}}var J=new i.default;J.setData(i.default.S_POSITIONS,S),J.setData(i.default.S_NORMALS,v),J.setData(i.default.S_UV0,y),J.setData(i.default.S_INDICES,C);var Q=a.default.generatorTangents2(J.getData(i.default.S_INDICES),J.getData(i.default.S_POSITIONS),J.getData(i.default.S_UV0),J.getData(i.default.S_NORMALS));return J.setData(i.default.S_TANGENTS,Q),o.setMesh(J),o.updateBound(),o}return n}(o.default);t.default=c},7698:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(e,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e,r);var _,s,u,l,f,c,m,h,d=r.width||1,p=r.height||1,g=[],S=[],v=[],y=[],C=d/2,T=p/2,b=r.widthSegments||1,P=r.heightSegments||1,E=b+1,D=P+1,R=d/b,w=p/P;for(s=0;s<D;s++)for(_=0;_<E;_++)u=_*R-C,l=s*w-T,g.push(u),g.push(0),g.push(-l),S.push(0),S.push(1),S.push(0),v.push(_/b),v.push(1-s/P);for(s=0;s<P;s++)for(_=0;_<b;_++)f=_+E*s,c=_+E*(s+1),m=_+1+E*(s+1),h=_+1+E*s,y.push(f),y.push(c),y.push(m),y.push(m),y.push(h),y.push(f);var M=new i.default;M.setData(i.default.S_POSITIONS,g),M.setData(i.default.S_NORMALS,S),M.setData(i.default.S_UV0,v),M.setData(i.default.S_INDICES,y);var x=a.default.generatorTangents2(M.getData(i.default.S_INDICES),M.getData(i.default.S_POSITIONS),M.getData(i.default.S_UV0),M.getData(i.default.S_NORMALS));return M.setData(i.default.S_TANGENTS,x),M.setPrimitive(i.default.S_PRIMITIVE_LINES),o.setMesh(M),o.updateBound(),o}return n}(o.default);t.default=c},1645:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(e,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e,r);var _=r.xSize||1;_<=0&&(console.error("xSize不能小于等于0!"),_*=-1);var s=r.zSize||1;s<=0&&(console.error("zSize不能小于等于0!"),s*=-1);var u=r.xSegments||1;u<=0&&(console.error("xSegments不能小于等于0!"),u*=-1),u<1&&(u=1);var l=r.zSegments||1;l<0&&(console.error("zSegments不能小于等于0!"),l*=-1),l<1&&(l=1);var f,c,m,h,d,p,g,S=r.center,v=S?S[0]:0,y=S?S[1]:0,C=S?S[2]:0,T=_/2,b=s/2,P=Math.floor(u)||1,E=Math.floor(l)||1,D=P+1,R=E+1,w=_/P,M=s/E,x=new Float32Array(D*R*3),A=new Float32Array(D*R*3),L=new Float32Array(D*R*2),I=0,O=0;for(f=0;f<R;f++){var F=f*M-b;for(c=0;c<D;c++)m=c*w-T,x[I]=m+v,x[I+1]=y,x[I+2]=-F+C,A[I+2]=-1,L[O]=P-c,L[O+1]=E-f,r.xRepeat||(L[O]/=P),r.zRepeat||(L[O+1]/=E),I+=3,O+=2}I=0;var k=new(x.length/3>65535?Uint32Array:Uint16Array)(P*E*6);for(f=0;f<E;f++)for(c=0;c<P;c++)h=c+D*f,d=c+D*(f+1),p=c+1+D*(f+1),g=c+1+D*f,k[I]=g,k[I+1]=d,k[I+2]=h,k[I+3]=g,k[I+4]=p,k[I+5]=d,I+=6;var B=new i.default;B.setData(i.default.S_POSITIONS,x),B.setData(i.default.S_NORMALS,A),B.setData(i.default.S_UV0,L),B.setData(i.default.S_INDICES,k);var N=a.default.generatorTangents2(B.getData(i.default.S_INDICES),B.getData(i.default.S_POSITIONS),B.getData(i.default.S_UV0),B.getData(i.default.S_NORMALS));return B.setData(i.default.S_TANGENTS,N),o.setMesh(B),o.updateBound(),o}return n}(o.default);t.default=c},6341:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,r,o=l(_);function _(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),n=o.call(this,e,t);var r=t.lod||1,s=t.center?t.center._m_X:0,u=t.center?t.center._m_Y:0,l=t.center?t.center._m_Z:0,f=t.radius||1;f<=0&&(console.error("radius不能小于等于0!"),f*=-1);var c=t.heightSegments||18;c<=0&&(console.error("heightSegments不能小于等于0!"),c*=-1),(c=Math.floor(r*c))<18&&(c=18);var m=t.widthSegments||18;m<=0&&(console.error("widthSegments不能小于等于0!"),m*=-1),(m=Math.floor(r*m))<18&&(m=18);var h,d,p,g,S,v,y,C,T,b,P,E,D,R,w=t.widthUVScale||.5,M=(t.heightUVScale,[]),x=[],A=[],L=[];for(h=0;h<=c;h++)for(p=h*Math.PI/c,g=Math.sin(p),S=Math.cos(p),d=0;d<=m;d++)v=2*d*Math.PI/m,y=Math.sin(v),C=Math.cos(v)*g,T=S,b=y*g,P=1-d/(m*w),E=h/(c*w),x.push(C),x.push(T),x.push(b),A.push(P),A.push(E),M.push(s+f*C),M.push(u+f*T),M.push(l+f*b);for(h=0;h<c;h++)for(d=0;d<m;d++)R=(D=h*(m+1)+d)+m+1,L.push(D+1),L.push(R+1),L.push(R),L.push(D+1),L.push(R),L.push(D);var I=new i.default;I.setData(i.default.S_POSITIONS,M),I.setData(i.default.S_NORMALS,x),I.setData(i.default.S_UV0,A),I.setData(i.default.S_INDICES,L);var O=a.default.generatorTangents2(I.getData(i.default.S_INDICES),I.getData(i.default.S_POSITIONS),I.getData(i.default.S_UV0),I.getData(i.default.S_NORMALS));return I.setData(i.default.S_TANGENTS,O),n.setMesh(I),n.updateBound(),n}return t=_,(n=[{key:"getType",value:function(){return"Sphere"}}])&&s(t.prototype,n),r&&s(t,r),_}(o.default);t.default=m},4257:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(e,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e,r);var _=new i.default;_.setData(i.default.S_POSITIONS,[.35,.6,-0,.345492,.6,.057428,.342019,.608859,.056851,.346481,.608859,-0,.340655,.61575,.056624,.3451,.61575,-0,.341105,.620672,.056699,.345556,.620672,-0,.343074,.623625,.057026,.34755,.623625,-0,.346263,.624609,.057556,.350781,.624609,-0,.350378,.623625,.05824,.35495,.623625,-0,.355123,.620672,.059029,.359756,.620672,-0,.3602,.61575,.059873,.3649,.61575,-0,.365315,.608859,.060723,.370081,.608859,-0,.37017,.6,.06153,.375,.6,-0,.332416,.6,.111664,.329074,.608859,.110541,.327762,.61575,.110101,.328196,.620672,.110246,.330089,.623625,.110882,.333158,.624609,.111913,.337117,.623625,.113243,.341682,.620672,.114777,.346567,.61575,.116418,.351488,.608859,.118071,.35616,.6,.11964,.311444,.6,.162036,.308313,.608859,.160407,.307084,.61575,.159767,.30749,.620672,.159979,.309264,.623625,.160902,.312139,.624609,.162398,.315849,.623625,.164328,.320125,.620672,.166553,.324703,.61575,.168934,.329313,.608859,.171333,.33369,.6,.17361,.283248,.6,.207872,.2804,.608859,.205782,.279283,.61575,.204962,.279652,.620672,.205233,.281265,.623625,.206417,.28388,.624609,.208336,.287254,.623625,.210812,.291144,.620672,.213666,.295306,.61575,.216721,.299499,.608859,.219799,.30348,.6,.22272,.2485,.6,.2485,.246002,.608859,.246002,.245021,.61575,.245021,.245345,.620672,.245345,.246761,.623625,.24676,.249055,.624609,.249055,.252014,.623625,.252014,.255427,.620672,.255427,.259079,.61575,.259079,.262758,.608859,.262758,.26625,.6,.26625,.207872,.6,.283248,.205782,.608859,.2804,.204962,.61575,.279283,.205233,.620672,.279652,.206417,.623625,.281265,.208336,.624609,.28388,.210812,.623625,.287254,.213666,.620672,.291144,.216721,.61575,.295306,.219799,.608859,.299499,.22272,.6,.30348,.162036,.6,.311444,.160407,.608859,.308313,.159767,.61575,.307084,.159979,.620672,.30749,.160902,.623625,.309264,.162398,.624609,.312139,.164328,.623625,.315849,.166553,.620672,.320126,.168934,.61575,.324703,.171333,.608859,.329313,.17361,.6,.33369,.111664,.6,.332416,.110541,.608859,.329074,.110101,.61575,.327762,.110246,.620672,.328196,.110882,.623625,.330089,.111913,.624609,.333158,.113243,.623625,.337117,.114777,.620672,.341682,.116418,.61575,.346567,.118071,.608859,.351488,.11964,.6,.35616,.057428,.6,.345492,.056851,.608859,.342019,.056624,.61575,.340655,.056699,.620672,.341105,.057026,.623625,.343074,.057556,.624609,.346263,.05824,.623625,.350378,.059029,.620672,.355123,.059873,.61575,.3602,.060723,.608859,.365315,.06153,.6,.37017,-0,.6,.35,-0,.608859,.346481,-0,.61575,.3451,-0,.620672,.345556,-0,.623625,.34755,-0,.624609,.350781,-0,.623625,.35495,-0,.620672,.359756,-0,.61575,.3649,-0,.608859,.370081,-0,.6,.375,-.062895,.6,.345492,-.060836,.608859,.342019,-.059423,.61575,.340655,-.058574,.620672,.341105,-.058207,.623625,.343074,-.05824,.624609,.346263,-.05859,.623625,.350378,-.059176,.620672,.355123,-.059917,.61575,.3602,-.060728,.608859,.365315,-.06153,.6,.37017,-.120304,.6,.332416,-.11684,.608859,.329074,-.114524,.61575,.327762,-.11321,.620672,.328196,-.112749,.623625,.330089,-.112993,.624609,.333158,-.113796,.623625,.337117,-.11501,.620672,.341682,-.116487,.61575,.346567,-.118079,.608859,.351488,-.11964,.6,.35616,-.171959,.6,.311444,-.16764,.608859,.308313,-.164848,.61575,.307084,-.163382,.620672,.30749,-.163045,.623625,.309264,-.163638,.624609,.312139,-.164963,.623625,.315849,-.166821,.620672,.320125,-.169014,.61575,.324703,-.171343,.608859,.329313,-.17361,.6,.33369,-.217592,.6,.283248,-.212868,.608859,.2804,-.209938,.61575,.279283,-.208567,.620672,.279652,-.208516,.623625,.281265,-.209551,.624609,.28388,-.211434,.623625,.287254,-.213929,.620672,.291144,-.216799,.61575,.295306,-.219808,.608859,.299499,-.22272,.6,.30348,-.256938,.6,.2485,-.252153,.608859,.246002,-.249341,.61575,.245021,-.248239,.620672,.245345,-.248583,.623625,.24676,-.250109,.624609,.249055,-.252555,.623625,.252014,-.255655,.620672,.255427,-.259146,.61575,.259079,-.262766,.608859,.262758,-.26625,.6,.26625,-.289728,.6,.207872,-.285124,.608859,.205782,-.2826,.61575,.204962,-.281874,.620672,.205233,-.282665,.623625,.206417,-.28469,.624609,.208336,-.287669,.623625,.210812,-.291319,.620672,.213666,-.295358,.61575,.216721,-.299506,.608859,.219799,-.30348,.6,.22272,-.315697,.6,.162036,-.311413,.608859,.160407,-.309261,.61575,.159767,-.308948,.620672,.159979,-.310182,.623625,.160902,-.312671,.624609,.162398,-.316121,.623625,.164328,-.32024,.620672,.166553,-.324737,.61575,.168934,-.329317,.608859,.171333,-.33369,.6,.17361,-.334576,.6,.111664,-.330649,.608859,.110541,-.328868,.61575,.110101,-.328936,.620672,.110246,-.330556,.623625,.110882,-.333428,.624609,.111913,-.337256,.623625,.113243,-.34174,.620672,.114777,-.346585,.61575,.116418,-.351491,.608859,.118071,-.35616,.6,.11964,-.346099,.6,.057428,-.342461,.608859,.056851,-.340966,.61575,.056624,-.341314,.620672,.056699,-.343205,.623625,.057026,-.346339,.624609,.057556,-.350417,.623625,.05824,-.355139,.620672,.059029,-.360205,.61575,.059873,-.365315,.608859,.060723,-.37017,.6,.06153,-.35,.6,-0,-.346481,.608859,-0,-.3451,.61575,-0,-.345556,.620672,-0,-.34755,.623625,-0,-.350781,.624609,-0,-.35495,.623625,-0,-.359756,.620672,-0,-.3649,.61575,-0,-.370081,.608859,-0,-.375,.6,-0,-.345492,.6,-.057428,-.342019,.608859,-.056851,-.340655,.61575,-.056624,-.341105,.620672,-.056699,-.343074,.623625,-.057026,-.346263,.624609,-.057556,-.350378,.623625,-.05824,-.355123,.620672,-.059029,-.3602,.61575,-.059873,-.365315,.608859,-.060723,-.37017,.6,-.06153,-.332416,.6,-.111664,-.329074,.608859,-.110541,-.327762,.61575,-.110101,-.328196,.620672,-.110246,-.330089,.623625,-.110882,-.333158,.624609,-.111913,-.337117,.623625,-.113243,-.341682,.620672,-.114777,-.346567,.61575,-.116418,-.351488,.608859,-.118071,-.35616,.6,-.11964,-.311444,.6,-.162036,-.308313,.608859,-.160407,-.307084,.61575,-.159768,-.30749,.620672,-.159979,-.309264,.623625,-.160902,-.312139,.624609,-.162398,-.315849,.623625,-.164328,-.320125,.620672,-.166553,-.324703,.61575,-.168934,-.329313,.608859,-.171333,-.33369,.6,-.17361,-.283248,.6,-.207872,-.2804,.608859,-.205782,-.279283,.61575,-.204962,-.279652,.620672,-.205233,-.281265,.623625,-.206417,-.28388,.624609,-.208336,-.287254,.623625,-.210812,-.291144,.620672,-.213666,-.295306,.61575,-.216721,-.299499,.608859,-.219799,-.30348,.6,-.22272,-.2485,.6,-.2485,-.246002,.608859,-.246002,-.245021,.61575,-.245021,-.245345,.620672,-.245345,-.246761,.623625,-.246761,-.249055,.624609,-.249055,-.252014,.623625,-.252015,-.255427,.620672,-.255427,-.259079,.61575,-.259079,-.262758,.608859,-.262758,-.26625,.6,-.26625,-.207872,.6,-.283248,-.205782,.608859,-.2804,-.204962,.61575,-.279283,-.205233,.620672,-.279652,-.206417,.623625,-.281265,-.208336,.624609,-.28388,-.210812,.623625,-.287254,-.213666,.620672,-.291144,-.216721,.61575,-.295306,-.219799,.608859,-.299499,-.22272,.6,-.30348,-.162036,.6,-.311444,-.160407,.608859,-.308313,-.159767,.61575,-.307084,-.159979,.620672,-.30749,-.160902,.623625,-.309264,-.162398,.624609,-.312139,-.164328,.623625,-.315849,-.166553,.620672,-.320126,-.168934,.61575,-.324703,-.171333,.608859,-.329313,-.17361,.6,-.33369,-.111664,.6,-.332416,-.110541,.608859,-.329074,-.110101,.61575,-.327762,-.110246,.620672,-.328196,-.110882,.623625,-.330089,-.111913,.624609,-.333158,-.113243,.623625,-.337117,-.114777,.620672,-.341682,-.116418,.61575,-.346567,-.118071,.608859,-.351488,-.11964,.6,-.35616,-.057428,.6,-.345492,-.056851,.608859,-.342019,-.056624,.61575,-.340655,-.056699,.620672,-.341106,-.057026,.623625,-.343074,-.057556,.624609,-.346263,-.05824,.623625,-.350378,-.059029,.620672,-.355123,-.059873,.61575,-.3602,-.060723,.608859,-.365315,-.06153,.6,-.37017,0,.6,-.35,0,.608859,-.346481,0,.61575,-.3451,0,.620672,-.345556,0,.623625,-.34755,0,.624609,-.350781,0,.623625,-.35495,0,.620672,-.359756,0,.61575,-.3649,0,.608859,-.370081,0,.6,-.375,.057428,.6,-.345492,.056851,.608859,-.342019,.056624,.61575,-.340655,.056699,.620672,-.341106,.057026,.623625,-.343074,.057556,.624609,-.346263,.05824,.623625,-.350378,.059029,.620672,-.355123,.059873,.61575,-.3602,.060723,.608859,-.365315,.06153,.6,-.37017,.111664,.6,-.332416,.110541,.608859,-.329074,.110101,.61575,-.327762,.110246,.620672,-.328196,.110882,.623625,-.330089,.111913,.624609,-.333158,.113243,.623625,-.337117,.114777,.620672,-.341682,.116418,.61575,-.346567,.118071,.608859,-.351488,.11964,.6,-.35616,.162036,.6,-.311444,.160407,.608859,-.308313,.159768,.61575,-.307084,.159979,.620672,-.30749,.160902,.623625,-.309264,.162398,.624609,-.312139,.164328,.623625,-.315849,.166553,.620672,-.320126,.168934,.61575,-.324703,.171333,.608859,-.329313,.17361,.6,-.33369,.207872,.6,-.283248,.205782,.608859,-.2804,.204962,.61575,-.279283,.205233,.620672,-.279652,.206417,.623625,-.281265,.208336,.624609,-.28388,.210812,.623625,-.287254,.213666,.620672,-.291144,.216721,.61575,-.295306,.219799,.608859,-.299499,.22272,.6,-.30348,.2485,.6,-.2485,.246002,.608859,-.246002,.245021,.61575,-.245021,.245345,.620672,-.245345,.246761,.623625,-.246761,.249055,.624609,-.249055,.252014,.623625,-.252015,.255427,.620672,-.255427,.259079,.61575,-.259079,.262758,.608859,-.262758,.26625,.6,-.26625,.283248,.6,-.207872,.2804,.608859,-.205782,.279283,.61575,-.204962,.279652,.620672,-.205233,.281265,.623625,-.206417,.28388,.624609,-.208336,.287254,.623625,-.210812,.291144,.620672,-.213666,.295306,.61575,-.216721,.299499,.608859,-.219799,.30348,.6,-.22272,.311444,.6,-.162036,.308313,.608859,-.160407,.307084,.61575,-.159768,.30749,.620672,-.159979,.309264,.623625,-.160902,.312139,.624609,-.162398,.315849,.623625,-.164328,.320126,.620672,-.166553,.324703,.61575,-.168934,.329313,.608859,-.171333,.33369,.6,-.17361,.332416,.6,-.111664,.329074,.608859,-.110541,.327762,.61575,-.110101,.328196,.620672,-.110246,.330089,.623625,-.110882,.333158,.624609,-.111913,.337117,.623625,-.113243,.341682,.620672,-.114777,.346567,.61575,-.116418,.351488,.608859,-.118071,.35616,.6,-.11964,.345492,.6,-.057428,.342019,.608859,-.056851,.340655,.61575,-.056624,.341105,.620672,-.056699,.343074,.623625,-.057026,.346263,.624609,-.057556,.350378,.623625,-.05824,.355123,.620672,-.059029,.3602,.61575,-.059873,.365315,.608859,-.060723,.37017,.6,-.06153,.388617,.560644,.064596,.393687,.560644,-0,.406693,.5214,.067601,.412,.5214,-0,.42403,.482381,.070483,.429563,.482381,-0,.440256,.4437,.07318,.446,.4437,-0,.455001,.405469,.075631,.460938,.405469,-0,.467895,.3678,.077774,.474,.3678,-0,.478568,.330806,.079548,.484812,.330806,-0,.48665,.2946,.080891,.493,.2946,-0,.491771,.259294,.081743,.498187,.259294,-0,.49356,.225,.08204,.5,.225,-0,.373909,.560644,.125602,.391301,.5214,.131444,.407981,.482381,.137048,.423593,.4437,.142292,.43778,.405469,.147057,.450186,.3678,.151225,.460456,.330806,.154675,.468232,.2946,.157287,.473159,.259294,.158942,.47488,.225,.15952,.350319,.560644,.182262,.366614,.5214,.19074,.382242,.482381,.19887,.396869,.4437,.20648,.410161,.405469,.213396,.421784,.3678,.219443,.431406,.330806,.224449,.438691,.2946,.228239,.443307,.259294,.230641,.44492,.225,.23148,.318603,.560644,.233819,.333423,.5214,.244695,.347636,.482381,.255126,.360939,.4437,.264888,.373028,.405469,.27376,.383599,.3678,.281518,.392349,.330806,.28794,.398975,.2946,.292803,.403173,.259294,.295884,.40464,.225,.29696,.279518,.560644,.279518,.29252,.5214,.29252,.304989,.482381,.304989,.31666,.4437,.31666,.327266,.405469,.327266,.33654,.3678,.33654,.344217,.330806,.344217,.35003,.2946,.35003,.353713,.259294,.353713,.355,.225,.355,.233819,.560644,.318603,.244695,.5214,.333423,.255126,.482381,.347636,.264888,.4437,.360939,.27376,.405469,.373027,.281518,.3678,.383599,.28794,.330806,.392349,.292803,.2946,.398975,.295884,.259294,.403173,.29696,.225,.40464,.182262,.560644,.350319,.19074,.5214,.366614,.19887,.482381,.382242,.20648,.4437,.396869,.213396,.405469,.410161,.219443,.3678,.421784,.224449,.330806,.431406,.228239,.2946,.438691,.230641,.259294,.443307,.23148,.225,.44492,.125602,.560644,.373909,.131444,.5214,.391301,.137048,.482381,.407981,.142292,.4437,.423593,.147057,.405469,.43778,.151225,.3678,.450186,.154675,.330806,.460456,.157287,.2946,.468232,.158942,.259294,.473159,.15952,.225,.47488,.064596,.560644,.388617,.067601,.5214,.406693,.070483,.482381,.42403,.07318,.4437,.440256,.075631,.405469,.455001,.077774,.3678,.467895,.079548,.330806,.478568,.080891,.2946,.48665,.081743,.259294,.491771,.08204,.225,.49356,-0,.560644,.393687,-0,.5214,.412,-0,.482381,.429563,-0,.4437,.446,-0,.405469,.460938,-0,.3678,.474,-0,.330806,.484812,-0,.2946,.493,-0,.259294,.498187,-0,.225,.5,-.064596,.560644,.388617,-.067601,.5214,.406693,-.070483,.482381,.42403,-.07318,.4437,.440256,-.075631,.405469,.455001,-.077774,.3678,.467895,-.079548,.330806,.478568,-.080891,.2946,.48665,-.081743,.259294,.491771,-.08204,.225,.49356,-.125602,.560644,.373909,-.131444,.5214,.391301,-.137048,.482381,.407981,-.142292,.4437,.423593,-.147058,.405469,.43778,-.151225,.3678,.450186,-.154675,.330806,.460456,-.157287,.2946,.468232,-.158942,.259294,.473159,-.15952,.225,.47488,-.182262,.560644,.350319,-.19074,.5214,.366614,-.19887,.482381,.382242,-.20648,.4437,.396869,-.213396,.405469,.410161,-.219443,.3678,.421784,-.224449,.330806,.431406,-.228239,.2946,.438691,-.230641,.259294,.443307,-.23148,.225,.44492,-.233819,.560644,.318603,-.244695,.5214,.333423,-.255126,.482381,.347636,-.264888,.4437,.360939,-.27376,.405469,.373027,-.281518,.3678,.383599,-.28794,.330806,.392349,-.292803,.2946,.398975,-.295884,.259294,.403173,-.29696,.225,.40464,-.279518,.560644,.279518,-.29252,.5214,.29252,-.304989,.482381,.304989,-.31666,.4437,.31666,-.327266,.405469,.327266,-.33654,.3678,.33654,-.344217,.330806,.344217,-.35003,.2946,.35003,-.353713,.259294,.353713,-.355,.225,.355,-.318603,.560644,.233819,-.333423,.5214,.244695,-.347636,.482381,.255126,-.360939,.4437,.264888,-.373028,.405469,.27376,-.383599,.3678,.281518,-.392349,.330806,.28794,-.398975,.2946,.292803,-.403173,.259294,.295884,-.40464,.225,.29696,-.350319,.560644,.182262,-.366614,.5214,.190739,-.382242,.482381,.19887,-.396869,.4437,.20648,-.410161,.405469,.213396,-.421784,.3678,.219443,-.431406,.330806,.224449,-.438691,.2946,.228239,-.443307,.259294,.230641,-.44492,.225,.23148,-.373909,.560644,.125602,-.391301,.5214,.131444,-.407981,.482381,.137048,-.423593,.4437,.142292,-.43778,.405469,.147057,-.450186,.3678,.151225,-.460456,.330806,.154675,-.468232,.2946,.157287,-.473159,.259294,.158942,-.47488,.225,.15952,-.388617,.560644,.064596,-.406693,.5214,.067601,-.42403,.482381,.070482,-.440256,.4437,.07318,-.455001,.405469,.07563,-.467895,.3678,.077774,-.478568,.330806,.079548,-.48665,.2946,.080891,-.491771,.259294,.081742,-.49356,.225,.08204,-.393687,.560644,-0,-.412,.5214,-0,-.429563,.482381,-0,-.446,.4437,-0,-.460938,.405469,-0,-.474,.3678,-0,-.484812,.330806,-0,-.493,.2946,-0,-.498187,.259294,-0,-.5,.225,-0,-.388617,.560644,-.064596,-.406693,.5214,-.067601,-.42403,.482381,-.070483,-.440256,.4437,-.07318,-.455001,.405469,-.075631,-.467895,.3678,-.077774,-.478568,.330806,-.079548,-.48665,.2946,-.080892,-.491771,.259294,-.081743,-.49356,.225,-.08204,-.373909,.560644,-.125602,-.391301,.5214,-.131445,-.407981,.482381,-.137048,-.423593,.4437,-.142292,-.43778,.405469,-.147058,-.450186,.3678,-.151225,-.460456,.330806,-.154675,-.468232,.2946,-.157287,-.473159,.259294,-.158942,-.47488,.225,-.15952,-.350319,.560644,-.182262,-.366614,.5214,-.19074,-.382242,.482381,-.19887,-.396869,.4437,-.20648,-.410161,.405469,-.213396,-.421784,.3678,-.219443,-.431406,.330806,-.224449,-.438691,.2946,-.228239,-.443307,.259294,-.230641,-.44492,.225,-.23148,-.318603,.560644,-.233819,-.333423,.5214,-.244695,-.347636,.482381,-.255126,-.360939,.4437,-.264888,-.373028,.405469,-.27376,-.383599,.3678,-.281518,-.392349,.330806,-.28794,-.398975,.2946,-.292803,-.403173,.259294,-.295884,-.40464,.225,-.29696,-.279518,.560644,-.279518,-.29252,.5214,-.29252,-.304989,.482381,-.304989,-.31666,.4437,-.31666,-.327266,.405469,-.327266,-.33654,.3678,-.33654,-.344217,.330806,-.344217,-.35003,.2946,-.35003,-.353713,.259294,-.353713,-.355,.225,-.355,-.233819,.560644,-.318603,-.244695,.5214,-.333423,-.255126,.482381,-.347636,-.264888,.4437,-.360939,-.27376,.405469,-.373028,-.281518,.3678,-.383599,-.28794,.330806,-.392349,-.292803,.2946,-.398975,-.295884,.259294,-.403173,-.29696,.225,-.40464,-.182262,.560644,-.350319,-.19074,.5214,-.366614,-.19887,.482381,-.382242,-.20648,.4437,-.396869,-.213396,.405469,-.410161,-.219443,.3678,-.421784,-.224449,.330806,-.431406,-.228239,.2946,-.438691,-.230641,.259294,-.443307,-.23148,.225,-.44492,-.125602,.560644,-.373909,-.131444,.5214,-.391301,-.137048,.482381,-.407981,-.142292,.4437,-.423593,-.147057,.405469,-.43778,-.151225,.3678,-.450186,-.154675,.330806,-.460456,-.157287,.2946,-.468232,-.158942,.259294,-.473159,-.15952,.225,-.47488,-.064596,.560644,-.388617,-.067601,.5214,-.406693,-.070483,.482381,-.42403,-.07318,.4437,-.440256,-.075631,.405469,-.455001,-.077774,.3678,-.467895,-.079548,.330806,-.478568,-.080891,.2946,-.48665,-.081743,.259294,-.491771,-.08204,.225,-.49356,0,.560644,-.393688,0,.5214,-.412,0,.482381,-.429563,0,.4437,-.446,0,.405469,-.460938,0,.3678,-.474,0,.330806,-.484812,0,.2946,-.493,0,.259294,-.498187,0,.225,-.5,.064596,.560644,-.388617,.067601,.5214,-.406693,.070483,.482381,-.42403,.07318,.4437,-.440256,.075631,.405469,-.455001,.077774,.3678,-.467895,.079548,.330806,-.478568,.080891,.2946,-.48665,.081743,.259294,-.491771,.08204,.225,-.49356,.125602,.560644,-.373909,.131444,.5214,-.391301,.137048,.482381,-.407981,.142292,.4437,-.423593,.147058,.405469,-.43778,.151225,.3678,-.450186,.154675,.330806,-.460456,.157287,.2946,-.468232,.158942,.259294,-.473159,.15952,.225,-.47488,.182262,.560644,-.350319,.19074,.5214,-.366614,.19887,.482381,-.382242,.20648,.4437,-.396869,.213396,.405469,-.410161,.219443,.3678,-.421784,.224449,.330806,-.431406,.228239,.2946,-.438691,.230641,.259294,-.443307,.23148,.225,-.44492,.233819,.560644,-.318603,.244695,.5214,-.333423,.255126,.482381,-.347636,.264888,.4437,-.360939,.27376,.405469,-.373028,.281518,.3678,-.383599,.28794,.330806,-.392349,.292803,.2946,-.398975,.295884,.259294,-.403173,.29696,.225,-.40464,.279518,.560644,-.279518,.29252,.5214,-.29252,.304989,.482381,-.304989,.31666,.4437,-.31666,.327266,.405469,-.327266,.33654,.3678,-.33654,.344217,.330806,-.344217,.35003,.2946,-.35003,.353713,.259294,-.353713,.355,.225,-.355,.318603,.560644,-.233819,.333423,.5214,-.244695,.347636,.482381,-.255126,.360939,.4437,-.264888,.373028,.405469,-.27376,.383599,.3678,-.281518,.392349,.330806,-.28794,.398975,.2946,-.292803,.403173,.259294,-.295884,.40464,.225,-.29696,.350319,.560644,-.182262,.366614,.5214,-.19074,.382242,.482381,-.19887,.396869,.4437,-.20648,.410161,.405469,-.213396,.421784,.3678,-.219443,.431406,.330806,-.224449,.438691,.2946,-.228239,.443307,.259294,-.230641,.44492,.225,-.23148,.373909,.560644,-.125602,.391301,.5214,-.131444,.407981,.482381,-.137048,.423593,.4437,-.142292,.43778,.405469,-.147057,.450186,.3678,-.151225,.460456,.330806,-.154675,.468232,.2946,-.157287,.473159,.259294,-.158942,.47488,.225,-.15952,.388617,.560644,-.064596,.406693,.5214,-.067601,.42403,.482381,-.070483,.440256,.4437,-.07318,.455001,.405469,-.075631,.467895,.3678,-.077774,.478568,.330806,-.079548,.48665,.2946,-.080891,.491771,.259294,-.081743,.49356,.225,-.08204,.490105,.192919,.081466,.4965,.192919,-0,.480727,.1641,.079907,.487,.1641,-0,.466908,.138431,.07761,.473,.138431,-0,.450127,.1158,.07482,.456,.1158,-0,.431865,.096094,.071785,.4375,.096094,-0,.413603,.0792,.06875,.419,.0792,-0,.396822,.065006,.06596,.402,.065006,-0,.383003,.0534,.063663,.388,.0534,-0,.373625,.044269,.062104,.3785,.044269,-0,.37017,.0375,.06153,.375,.0375,-0,.471556,.192919,.158403,.462533,.1641,.155372,.449236,.138431,.150906,.433091,.1158,.145482,.41552,.096094,.13958,.397949,.0792,.133678,.381804,.065006,.128254,.368507,.0534,.123788,.359484,.044269,.120757,.35616,.0375,.11964,.441806,.192919,.22986,.433352,.1641,.225462,.420894,.138431,.21898,.405767,.1158,.21111,.389305,.096094,.202545,.372843,.0792,.19398,.357716,.065006,.18611,.345258,.0534,.179628,.336804,.044269,.17523,.33369,.0375,.17361,.401807,.192919,.294881,.394119,.1641,.289239,.382789,.138431,.280924,.369032,.1158,.270828,.35406,.096094,.25984,.339088,.0792,.248852,.325331,.065006,.238756,.314001,.0534,.230441,.306312,.044269,.224799,.30348,.0375,.22272,.352515,.192919,.352515,.34577,.1641,.34577,.33583,.138431,.33583,.32376,.1158,.32376,.310625,.096094,.310625,.29749,.0792,.29749,.28542,.065006,.28542,.27548,.0534,.27548,.268735,.044269,.268735,.26625,.0375,.26625,.294881,.192919,.401808,.289239,.1641,.394119,.280924,.138431,.382789,.270828,.1158,.369032,.25984,.096094,.35406,.248852,.0792,.339088,.238756,.065006,.325331,.230441,.0534,.314001,.224799,.044269,.306312,.22272,.0375,.30348,.22986,.192919,.441806,.225462,.1641,.433352,.21898,.138431,.420894,.21111,.1158,.405767,.202545,.096094,.389305,.19398,.0792,.372843,.18611,.065006,.357716,.179628,.0534,.345258,.17523,.044269,.336804,.17361,.0375,.33369,.158403,.192919,.471556,.155372,.1641,.462533,.150906,.138431,.449236,.145482,.1158,.433091,.13958,.096094,.41552,.133678,.0792,.397949,.128254,.065006,.381804,.123787,.0534,.368507,.120757,.044269,.359484,.11964,.0375,.35616,.081466,.192919,.490105,.079907,.1641,.480727,.07761,.138431,.466908,.07482,.1158,.450127,.071785,.096094,.431865,.06875,.0792,.413603,.06596,.065006,.396822,.063663,.0534,.383003,.062104,.044269,.373625,.06153,.0375,.37017,-0,.192919,.4965,-0,.1641,.487,-0,.138431,.473,-0,.1158,.456,-0,.096094,.4375,-0,.0792,.419,-0,.065006,.402,-0,.0534,.388,-0,.044269,.3785,-0,.0375,.375,-.081466,.192919,.490105,-.079907,.1641,.480727,-.07761,.138431,.466908,-.074821,.1158,.450127,-.071785,.096094,.431865,-.06875,.0792,.413603,-.06596,.065006,.396822,-.063663,.0534,.383003,-.062104,.044269,.373625,-.06153,.0375,.37017,-.158403,.192919,.471556,-.155372,.1641,.462533,-.150906,.138431,.449236,-.145482,.1158,.433091,-.13958,.096094,.41552,-.133678,.0792,.397949,-.128254,.065006,.381804,-.123788,.0534,.368507,-.120757,.044269,.359484,-.11964,.0375,.35616,-.22986,.192919,.441806,-.225462,.1641,.433352,-.21898,.138431,.420894,-.21111,.1158,.405767,-.202545,.096094,.389305,-.19398,.0792,.372843,-.18611,.065006,.357716,-.179628,.0534,.345258,-.17523,.044269,.336804,-.17361,.0375,.33369,-.294881,.192919,.401807,-.289239,.1641,.394119,-.280924,.138431,.382789,-.270828,.1158,.369032,-.25984,.096094,.35406,-.248852,.0792,.339088,-.238756,.065006,.325331,-.230441,.0534,.314001,-.224799,.044269,.306312,-.22272,.0375,.30348,-.352515,.192919,.352515,-.34577,.1641,.34577,-.33583,.138431,.33583,-.32376,.1158,.32376,-.310625,.096094,.310625,-.29749,.0792,.29749,-.28542,.065006,.28542,-.27548,.0534,.27548,-.268735,.044269,.268735,-.26625,.0375,.26625,-.401808,.192919,.294881,-.394119,.1641,.289239,-.382789,.138431,.280924,-.369032,.1158,.270828,-.35406,.096094,.25984,-.339088,.0792,.248852,-.325331,.065006,.238756,-.314001,.0534,.230441,-.306312,.044269,.224799,-.30348,.0375,.22272,-.441806,.192919,.22986,-.433352,.1641,.225462,-.420894,.138431,.21898,-.405767,.1158,.21111,-.389305,.096094,.202545,-.372843,.0792,.19398,-.357716,.065006,.18611,-.345258,.0534,.179628,-.336804,.044269,.17523,-.33369,.0375,.17361,-.471556,.192919,.158403,-.462533,.1641,.155372,-.449236,.138431,.150906,-.433091,.1158,.145482,-.41552,.096094,.13958,-.397949,.0792,.133678,-.381804,.065006,.128254,-.368507,.0534,.123787,-.359484,.044269,.120757,-.35616,.0375,.11964,-.490105,.192919,.081466,-.480727,.1641,.079907,-.466908,.138431,.07761,-.450127,.1158,.07482,-.431865,.096094,.071785,-.413603,.0792,.06875,-.396822,.065006,.06596,-.383003,.0534,.063663,-.373625,.044269,.062104,-.37017,.0375,.06153,-.4965,.192919,-0,-.487,.1641,-0,-.473,.138431,-0,-.456,.1158,-0,-.4375,.096094,-0,-.419,.0792,-0,-.402,.065006,-0,-.388,.0534,-0,-.3785,.044269,-0,-.375,.0375,-0,-.490105,.192919,-.081466,-.480727,.1641,-.079907,-.466908,.138431,-.07761,-.450127,.1158,-.074821,-.431865,.096094,-.071785,-.413603,.0792,-.06875,-.396822,.065006,-.06596,-.383003,.0534,-.063663,-.373625,.044269,-.062104,-.37017,.0375,-.06153,-.471556,.192919,-.158403,-.462533,.1641,-.155373,-.449236,.138431,-.150906,-.433091,.1158,-.145482,-.41552,.096094,-.13958,-.397949,.0792,-.133678,-.381804,.065006,-.128254,-.368507,.0534,-.123788,-.359484,.044269,-.120757,-.35616,.0375,-.11964,-.441806,.192919,-.22986,-.433352,.1641,-.225462,-.420894,.138431,-.21898,-.405767,.1158,-.21111,-.389305,.096094,-.202545,-.372843,.0792,-.19398,-.357716,.065006,-.18611,-.345258,.0534,-.179628,-.336804,.044269,-.17523,-.33369,.0375,-.17361,-.401807,.192919,-.294881,-.394119,.1641,-.289239,-.382789,.138431,-.280924,-.369032,.1158,-.270828,-.35406,.096094,-.25984,-.339088,.0792,-.248852,-.325331,.065006,-.238756,-.314001,.0534,-.230441,-.306312,.044269,-.224799,-.30348,.0375,-.22272,-.352515,.192919,-.352515,-.34577,.1641,-.34577,-.33583,.138431,-.33583,-.32376,.1158,-.32376,-.310625,.096094,-.310625,-.29749,.0792,-.29749,-.28542,.065006,-.28542,-.27548,.0534,-.27548,-.268735,.044269,-.268735,-.26625,.0375,-.26625,-.294881,.192919,-.401808,-.289239,.1641,-.394119,-.280924,.138431,-.382789,-.270828,.1158,-.369032,-.25984,.096094,-.35406,-.248852,.0792,-.339088,-.238756,.065006,-.325331,-.230441,.0534,-.314001,-.224799,.044269,-.306312,-.22272,.0375,-.30348,-.22986,.192919,-.441806,-.225462,.1641,-.433352,-.21898,.138431,-.420894,-.21111,.1158,-.405767,-.202545,.096094,-.389305,-.19398,.0792,-.372843,-.18611,.065006,-.357716,-.179628,.0534,-.345258,-.17523,.044269,-.336804,-.17361,.0375,-.33369,-.158403,.192919,-.471556,-.155372,.1641,-.462533,-.150906,.138431,-.449236,-.145482,.1158,-.433091,-.13958,.096094,-.41552,-.133678,.0792,-.397949,-.128254,.065006,-.381804,-.123787,.0534,-.368507,-.120757,.044269,-.359484,-.11964,.0375,-.35616,-.081466,.192919,-.490105,-.079907,.1641,-.480727,-.07761,.138431,-.466908,-.07482,.1158,-.450127,-.071785,.096094,-.431865,-.06875,.0792,-.413603,-.06596,.065006,-.396822,-.063663,.0534,-.383003,-.062104,.044269,-.373625,-.06153,.0375,-.37017,0,.192919,-.4965,0,.1641,-.487,0,.138431,-.473,0,.1158,-.456,0,.096094,-.4375,0,.0792,-.419,0,.065006,-.402,0,.0534,-.388,0,.044269,-.3785,0,.0375,-.375,.081466,.192919,-.490105,.079907,.1641,-.480727,.07761,.138431,-.466908,.074821,.1158,-.450127,.071785,.096094,-.431865,.06875,.0792,-.413603,.06596,.065006,-.396822,.063663,.0534,-.383003,.062104,.044269,-.373625,.06153,.0375,-.37017,.158403,.192919,-.471556,.155372,.1641,-.462533,.150906,.138431,-.449236,.145482,.1158,-.433091,.13958,.096094,-.41552,.133678,.0792,-.397949,.128254,.065006,-.381804,.123788,.0534,-.368507,.120757,.044269,-.359484,.11964,.0375,-.35616,.22986,.192919,-.441806,.225462,.1641,-.433352,.21898,.138431,-.420894,.21111,.1158,-.405767,.202545,.096094,-.389305,.19398,.0792,-.372843,.18611,.065006,-.357716,.179628,.0534,-.345258,.17523,.044269,-.336804,.17361,.0375,-.33369,.294881,.192919,-.401807,.289239,.1641,-.394119,.280924,.138431,-.382789,.270828,.1158,-.369032,.25984,.096094,-.35406,.248852,.0792,-.339088,.238756,.065006,-.325331,.230441,.0534,-.314001,.224799,.044269,-.306312,.22272,.0375,-.30348,.352515,.192919,-.352515,.34577,.1641,-.34577,.33583,.138431,-.33583,.32376,.1158,-.32376,.310625,.096094,-.310625,.29749,.0792,-.29749,.28542,.065006,-.28542,.27548,.0534,-.27548,.268735,.044269,-.268735,.26625,.0375,-.26625,.401808,.192919,-.294881,.394119,.1641,-.289239,.382789,.138431,-.280924,.369032,.1158,-.270828,.35406,.096094,-.25984,.339088,.0792,-.248852,.325331,.065006,-.238756,.314001,.0534,-.230441,.306312,.044269,-.224799,.30348,.0375,-.22272,.441806,.192919,-.22986,.433352,.1641,-.225462,.420894,.138431,-.21898,.405767,.1158,-.21111,.389305,.096094,-.202545,.372843,.0792,-.19398,.357716,.065006,-.18611,.345258,.0534,-.179628,.336804,.044269,-.17523,.33369,.0375,-.17361,.471556,.192919,-.158403,.462533,.1641,-.155372,.449236,.138431,-.150906,.433091,.1158,-.145482,.41552,.096094,-.13958,.397949,.0792,-.133678,.381804,.065006,-.128254,.368507,.0534,-.123787,.359484,.044269,-.120757,.35616,.0375,-.11964,.490105,.192919,-.081466,.480727,.1641,-.079907,.466908,.138431,-.07761,.450127,.1158,-.07482,.431865,.096094,-.071785,.413603,.0792,-.06875,.396822,.065006,-.06596,.383003,.0534,-.063663,.373625,.044269,-.062104,.37017,.0375,-.06153,.3693,.031894,.061385,.374119,.031894,-0,.365432,.0264,.060742,.3702,.0264,-0,.356677,.021131,.059287,.361331,.021131,-0,.341149,.0162,.056706,.3456,.0162,-0,.316958,.011719,.052685,.321094,.011719,-0,.282218,.0078,.046911,.2859,.0078,-0,.235039,.004556,.039069,.238106,.004556,-0,.173536,.0021,.028845,.1758,.0021,-0,.095818,544e-6,.015927,.097069,544e-6,-0,0,-0,0,.355323,.031894,.119359,.351601,.0264,.118109,.343178,.021131,.115279,.328237,.0162,.11026,.304962,.011719,.102442,.271536,.0078,.091214,.226144,.004556,.075965,.166968,.0021,.056087,.092192,544e-6,.030969,.332906,.031894,.173202,.329419,.0264,.171388,.321527,.021131,.167282,.307529,.0162,.159999,.285722,.011719,.148654,.254405,.0078,.13236,.211876,.004556,.110234,.156434,.0021,.081388,.086376,544e-6,.044939,.302767,.031894,.222197,.299595,.0264,.219869,.292418,.021131,.214602,.279687,.0162,.205259,.259855,.011719,.190704,.231373,.0078,.169802,.192695,.004556,.141416,.142271,.0021,.104411,.078556,544e-6,.057651,.265624,.031894,.265624,.262842,.0264,.262842,.256545,.021131,.256545,.245376,.0162,.245376,.227977,.011719,.227977,.202989,.0078,.202989,.169055,.004556,.169055,.124818,.0021,.124818,.068919,544e-6,.068919,.222197,.031894,.302767,.219869,.0264,.299595,.214602,.021131,.292418,.205259,.0162,.279687,.190704,.011719,.259855,.169802,.0078,.231373,.141416,.004556,.192695,.104411,.0021,.142271,.057651,544e-6,.078556,.173202,.031894,.332906,.171388,.0264,.329419,.167282,.021131,.321527,.159999,.0162,.307529,.148654,.011719,.285722,.13236,.0078,.254405,.110234,.004556,.211876,.081388,.0021,.156434,.044939,544e-6,.086376,.119359,.031894,.355323,.118109,.0264,.351601,.115279,.021131,.343178,.11026,.0162,.328237,.102442,.011719,.304962,.091214,.0078,.271536,.075965,.004556,.226144,.056087,.0021,.166968,.030969,544e-6,.092192,.061385,.031894,.3693,.060742,.0264,.365432,.059287,.021131,.356677,.056706,.0162,.341149,.052685,.011719,.316958,.04691,.0078,.282218,.039068,.004556,.235039,.028845,.0021,.173536,.015927,544e-6,.095818,-0,.031894,.374119,-0,.0264,.3702,-0,.021131,.361331,-0,.0162,.3456,-0,.011719,.321094,-0,.0078,.2859,-0,.004556,.238106,-0,.0021,.1758,-0,544e-6,.097069,-.061385,.031894,.3693,-.060742,.0264,.365432,-.059287,.021131,.356677,-.056706,.0162,.341149,-.052685,.011719,.316958,-.046911,.0078,.282218,-.039069,.004556,.235039,-.028845,.0021,.173536,-.015927,544e-6,.095818,-.119359,.031894,.355323,-.118109,.0264,.351601,-.115279,.021131,.343178,-.11026,.0162,.328237,-.102442,.011719,.304962,-.091214,.0078,.271536,-.075965,.004556,.226144,-.056087,.0021,.166968,-.030969,544e-6,.092192,-.173202,.031894,.332906,-.171388,.0264,.329419,-.167282,.021131,.321527,-.159999,.0162,.307529,-.148654,.011719,.285722,-.13236,.0078,.254405,-.110234,.004556,.211876,-.081388,.0021,.156434,-.044939,544e-6,.086376,-.222197,.031894,.302767,-.219869,.0264,.299595,-.214602,.021131,.292418,-.205259,.0162,.279687,-.190704,.011719,.259855,-.169802,.0078,.231373,-.141416,.004556,.192695,-.104411,.0021,.142271,-.057651,544e-6,.078556,-.265624,.031894,.265624,-.262842,.0264,.262842,-.256545,.021131,.256545,-.245376,.0162,.245376,-.227977,.011719,.227977,-.202989,.0078,.202989,-.169055,.004556,.169055,-.124818,.0021,.124818,-.068919,544e-6,.068919,-.302767,.031894,.222197,-.299595,.0264,.219869,-.292418,.021131,.214602,-.279687,.0162,.205259,-.259855,.011719,.190704,-.231373,.0078,.169802,-.192695,.004556,.141416,-.142271,.0021,.104411,-.078556,544e-6,.057651,-.332906,.031894,.173202,-.329419,.0264,.171388,-.321527,.021131,.167282,-.307529,.0162,.159999,-.285722,.011719,.148654,-.254405,.0078,.13236,-.211876,.004556,.110234,-.156434,.0021,.081388,-.086376,544e-6,.044939,-.355323,.031894,.119359,-.351601,.0264,.118109,-.343178,.021131,.115279,-.328237,.0162,.11026,-.304962,.011719,.102442,-.271536,.0078,.091214,-.226144,.004556,.075965,-.166968,.0021,.056087,-.092192,544e-6,.030969,-.3693,.031894,.061385,-.365432,.0264,.060742,-.356677,.021131,.059287,-.341149,.0162,.056706,-.316958,.011719,.052685,-.282218,.0078,.04691,-.235039,.004556,.039068,-.173536,.0021,.028845,-.095818,544e-6,.015927,-.374119,.031894,-0,-.3702,.0264,-0,-.361331,.021131,-0,-.3456,.0162,-0,-.321094,.011719,-0,-.2859,.0078,-0,-.238106,.004556,-0,-.1758,.0021,-0,-.097069,544e-6,-0,-.3693,.031894,-.061385,-.365432,.0264,-.060742,-.356677,.021131,-.059287,-.341149,.0162,-.056706,-.316958,.011719,-.052685,-.282218,.0078,-.046911,-.235039,.004556,-.039069,-.173536,.0021,-.028845,-.095818,544e-6,-.015927,-.355323,.031894,-.119359,-.351601,.0264,-.118109,-.343178,.021131,-.115279,-.328237,.0162,-.11026,-.304962,.011719,-.102442,-.271536,.0078,-.091214,-.226144,.004556,-.075965,-.166968,.0021,-.056087,-.092192,544e-6,-.030969,-.332906,.031894,-.173202,-.329419,.0264,-.171388,-.321527,.021131,-.167282,-.307529,.0162,-.159999,-.285722,.011719,-.148654,-.254405,.0078,-.13236,-.211876,.004556,-.110234,-.156434,.0021,-.081388,-.086376,544e-6,-.044939,-.302767,.031894,-.222197,-.299595,.0264,-.219869,-.292418,.021131,-.214602,-.279687,.0162,-.205259,-.259855,.011719,-.190704,-.231373,.0078,-.169802,-.192695,.004556,-.141416,-.142271,.0021,-.104411,-.078556,544e-6,-.057651,-.265624,.031894,-.265624,-.262842,.0264,-.262842,-.256545,.021131,-.256545,-.245376,.0162,-.245376,-.227977,.011719,-.227977,-.202989,.0078,-.202989,-.169055,.004556,-.169055,-.124818,.0021,-.124818,-.068919,544e-6,-.068919,-.222197,.031894,-.302767,-.219869,.0264,-.299595,-.214602,.021131,-.292418,-.205259,.0162,-.279687,-.190704,.011719,-.259855,-.169802,.0078,-.231373,-.141416,.004556,-.192695,-.104411,.0021,-.142271,-.057651,544e-6,-.078556,-.173202,.031894,-.332906,-.171388,.0264,-.329419,-.167282,.021131,-.321527,-.159999,.0162,-.307529,-.148654,.011719,-.285722,-.13236,.0078,-.254405,-.110234,.004556,-.211876,-.081388,.0021,-.156434,-.044939,544e-6,-.086376,-.119359,.031894,-.355323,-.118109,.0264,-.351601,-.115279,.021131,-.343178,-.11026,.0162,-.328237,-.102442,.011719,-.304962,-.091214,.0078,-.271536,-.075965,.004556,-.226144,-.056087,.0021,-.166968,-.030969,544e-6,-.092192,-.061385,.031894,-.3693,-.060742,.0264,-.365432,-.059287,.021131,-.356677,-.056706,.0162,-.341149,-.052685,.011719,-.316958,-.04691,.0078,-.282218,-.039068,.004556,-.235039,-.028845,.0021,-.173536,-.015927,544e-6,-.095818,0,.031894,-.374119,0,.0264,-.3702,0,.021131,-.361331,0,.0162,-.3456,0,.011719,-.321094,0,.0078,-.2859,0,.004556,-.238106,0,.0021,-.1758,0,544e-6,-.097069,.061385,.031894,-.3693,.060742,.0264,-.365432,.059287,.021131,-.356677,.056706,.0162,-.341149,.052685,.011719,-.316958,.046911,.0078,-.282218,.039069,.004556,-.235039,.028845,.0021,-.173536,.015927,544e-6,-.095818,.119359,.031894,-.355323,.118109,.0264,-.351601,.115279,.021131,-.343178,.11026,.0162,-.328237,.102442,.011719,-.304962,.091214,.0078,-.271536,.075965,.004556,-.226144,.056087,.0021,-.166968,.030969,544e-6,-.092192,.173202,.031894,-.332906,.171388,.0264,-.329419,.167282,.021131,-.321527,.159999,.0162,-.307529,.148654,.011719,-.285722,.13236,.0078,-.254405,.110234,.004556,-.211876,.081388,.0021,-.156434,.044939,544e-6,-.086376,.222197,.031894,-.302767,.219869,.0264,-.299595,.214602,.021131,-.292418,.205259,.0162,-.279687,.190704,.011719,-.259855,.169802,.0078,-.231373,.141416,.004556,-.192695,.104411,.0021,-.142271,.057651,544e-6,-.078556,.265624,.031894,-.265624,.262842,.0264,-.262842,.256545,.021131,-.256545,.245376,.0162,-.245376,.227977,.011719,-.227977,.202989,.0078,-.202989,.169055,.004556,-.169055,.124818,.0021,-.124818,.068919,544e-6,-.068919,.302767,.031894,-.222197,.299595,.0264,-.219869,.292418,.021131,-.214602,.279687,.0162,-.205259,.259855,.011719,-.190704,.231373,.0078,-.169802,.192695,.004556,-.141416,.142271,.0021,-.104411,.078556,544e-6,-.057651,.332906,.031894,-.173202,.329419,.0264,-.171388,.321527,.021131,-.167282,.307529,.0162,-.159999,.285722,.011719,-.148654,.254405,.0078,-.13236,.211876,.004556,-.110234,.156434,.0021,-.081388,.086376,544e-6,-.044939,.355323,.031894,-.119359,.351601,.0264,-.118109,.343178,.021131,-.115279,.328237,.0162,-.11026,.304962,.011719,-.102442,.271536,.0078,-.091214,.226144,.004556,-.075965,.166968,.0021,-.056087,.092192,544e-6,-.030969,.3693,.031894,-.061385,.365432,.0264,-.060742,.356677,.021131,-.059287,.341149,.0162,-.056706,.316958,.011719,-.052685,.282218,.0078,-.04691,.235039,.004556,-.039068,.173536,.0021,-.028845,.095818,544e-6,-.015927,-.4,.50625,-0,-.3993,.507825,.02025,-.450114,.507767,.02025,-.450225,.506194,-0,-.496198,.507362,.02025,-.4958,.5058,-0,-.537406,.506264,.02025,-.536575,.504731,-0,-.573593,.504124,.02025,-.5724,.50265,-0,-.604612,.500597,.02025,-.603125,.499219,-0,-.630319,.495335,.02025,-.6286,.4941,-0,-.650567,.487991,.02025,-.648675,.486956,-0,-.66521,.478219,.02025,-.6632,.47745,-0,-.674103,.465671,.02025,-.672025,.465244,-0,-.6771,.45,.02025,-.675,.45,-0,-.3974,.5121,.036,-.449812,.512038,.036,-.497277,.511603,.036,-.539661,.510423,.036,-.57683,.508126,.036,-.60865,.504338,.036,-.634986,.498686,.036,-.655703,.4908,.036,-.670667,.480305,.036,-.679744,.466829,.036,-.6828,.45,.036,-.3946,.5184,.04725,-.449366,.518332,.04725,-.498867,.517853,.04725,-.542985,.516553,.04725,-.581602,.514022,.04725,-.6146,.50985,.04725,-.641862,.503626,.04725,-.663271,.494939,.04725,-.678709,.483379,.04725,-.688058,.468536,.04725,-.6912,.45,.04725,-.3912,.52605,.054,-.448826,.525974,.054,-.500798,.525442,.054,-.547021,.523997,.054,-.587395,.521183,.054,-.621825,.516544,.054,-.650213,.509623,.054,-.672461,.499965,.054,-.688474,.487112,.054,-.698152,.47061,.054,-.7014,.45,.054,-.3875,.534375,.05625,-.448238,.534291,.05625,-.5029,.5337,.05625,-.551413,.532097,.05625,-.5937,.528975,.05625,-.629688,.523828,.05625,-.6593,.51615,.05625,-.682463,.505434,.05625,-.6991,.491175,.05625,-.709137,.472866,.05625,-.7125,.45,.05625,-.3838,.5427,.054,-.447649,.542607,.054,-.505002,.541958,.054,-.555804,.540197,.054,-.600005,.536767,.054,-.63755,.531112,.054,-.668387,.522677,.054,-.692464,.510904,.054,-.709726,.495238,.054,-.720123,.475122,.054,-.7236,.45,.054,-.3804,.55035,.04725,-.447109,.55025,.04725,-.506933,.549547,.04725,-.55984,.547641,.04725,-.605798,.543928,.04725,-.644775,.537806,.04725,-.676738,.528674,.04725,-.701654,.51593,.04725,-.719491,.498971,.04725,-.730217,.477195,.04725,-.7338,.45,.04725,-.3776,.55665,.036,-.446663,.556543,.036,-.508523,.555797,.036,-.563164,.55377,.036,-.61057,.549824,.036,-.650725,.543319,.036,-.683614,.533614,.036,-.709222,.520069,.036,-.727533,.502045,.036,-.738531,.478902,.036,-.7422,.45,.036,-.3757,.560925,.02025,-.446361,.560814,.02025,-.509602,.560038,.02025,-.565419,.55793,.02025,-.613807,.553826,.02025,-.654763,.547059,.02025,-.688281,.536965,.02025,-.714358,.522878,.02025,-.73299,.504131,.02025,-.744172,.480061,.02025,-.7479,.45,.02025,-.375,.5625,-0,-.44625,.562388,-0,-.51,.5616,-0,-.56625,.559462,-0,-.615,.5553,-0,-.65625,.548438,-0,-.69,.5382,-0,-.71625,.523912,-0,-.735,.5049,-0,-.74625,.480487,-0,-.75,.45,-0,-.3757,.560925,-.02025,-.446361,.560814,-.02025,-.509602,.560038,-.02025,-.565419,.55793,-.02025,-.613807,.553826,-.02025,-.654763,.547059,-.02025,-.688281,.536965,-.02025,-.714358,.522878,-.02025,-.73299,.504131,-.02025,-.744172,.480061,-.02025,-.7479,.45,-.02025,-.3776,.55665,-.036,-.446663,.556543,-.036,-.508523,.555797,-.036,-.563164,.55377,-.036,-.61057,.549824,-.036,-.650725,.543319,-.036,-.683614,.533614,-.036,-.709222,.520069,-.036,-.727533,.502045,-.036,-.738531,.478902,-.036,-.7422,.45,-.036,-.3804,.55035,-.04725,-.447109,.55025,-.04725,-.506933,.549547,-.04725,-.55984,.547641,-.04725,-.605798,.543928,-.04725,-.644775,.537806,-.04725,-.676738,.528674,-.04725,-.701654,.51593,-.04725,-.719491,.498971,-.04725,-.730217,.477195,-.04725,-.7338,.45,-.04725,-.3838,.5427,-.054,-.447649,.542607,-.054,-.505002,.541958,-.054,-.555804,.540197,-.054,-.600005,.536767,-.054,-.63755,.531112,-.054,-.668387,.522677,-.054,-.692464,.510904,-.054,-.709726,.495238,-.054,-.720123,.475122,-.054,-.7236,.45,-.054,-.3875,.534375,-.05625,-.448238,.534291,-.05625,-.5029,.5337,-.05625,-.551413,.532097,-.05625,-.5937,.528975,-.05625,-.629688,.523828,-.05625,-.6593,.51615,-.05625,-.682463,.505434,-.05625,-.6991,.491175,-.05625,-.709137,.472866,-.05625,-.7125,.45,-.05625,-.3912,.52605,-.054,-.448826,.525974,-.054,-.500798,.525442,-.054,-.547021,.523997,-.054,-.587395,.521183,-.054,-.621825,.516544,-.054,-.650213,.509623,-.054,-.672461,.499965,-.054,-.688474,.487112,-.054,-.698152,.47061,-.054,-.7014,.45,-.054,-.3946,.5184,-.04725,-.449366,.518332,-.04725,-.498867,.517853,-.04725,-.542985,.516553,-.04725,-.581602,.514022,-.04725,-.6146,.50985,-.04725,-.641862,.503626,-.04725,-.663271,.494939,-.04725,-.678709,.483379,-.04725,-.688058,.468536,-.04725,-.6912,.45,-.04725,-.3974,.5121,-.036,-.449812,.512038,-.036,-.497277,.511603,-.036,-.539661,.510423,-.036,-.57683,.508126,-.036,-.60865,.504338,-.036,-.634986,.498686,-.036,-.655703,.4908,-.036,-.670667,.480305,-.036,-.679744,.466829,-.036,-.6828,.45,-.036,-.3993,.507825,-.02025,-.450114,.507767,-.02025,-.496198,.507362,-.02025,-.537406,.506264,-.02025,-.573593,.504124,-.02025,-.604612,.500597,-.02025,-.630319,.495335,-.02025,-.650567,.487991,-.02025,-.66521,.478219,-.02025,-.674103,.465671,-.02025,-.6771,.45,-.02025,-.675544,.43113,.02025,-.673475,.43155,-0,-.670777,.409652,.02025,-.6688,.4104,-0,-.662651,.386226,.02025,-.660825,.387225,-0,-.651018,.361507,.02025,-.6494,.3627,-0,-.635731,.336155,.02025,-.634375,.3375,-0,-.616642,.310826,.02025,-.6156,.3123,-0,-.593602,.286178,.02025,-.592925,.287775,-0,-.566463,.26287,.02025,-.5662,.2646,-0,-.535079,.241558,.02025,-.535275,.24345,-0,-.4993,.2229,.02025,-.681159,.429989,.036,-.676142,.407623,.036,-.667607,.383513,.036,-.655411,.35827,.036,-.639412,.332503,.036,-.619469,.306824,.036,-.595438,.281844,.036,-.567178,.258173,.036,-.534546,.236421,.036,-.4974,.2172,.036,-.689435,.428308,.04725,-.68405,.404633,.04725,-.674911,.379516,.04725,-.661885,.353498,.04725,-.644837,.327122,.04725,-.623635,.300928,.04725,-.598144,.275457,.04725,-.56823,.251251,.04725,-.53376,.228852,.04725,-.4946,.2088,.04725,-.699483,.426267,.054,-.693651,.401002,.054,-.68378,.374662,.054,-.669746,.347705,.054,-.651425,.320588,.054,-.628694,.293767,.054,-.60143,.267701,.054,-.569509,.242846,.054,-.532807,.21966,.054,-.4912,.1986,.054,-.710419,.424045,.05625,-.7041,.39705,.05625,-.693431,.36938,.05625,-.6783,.3414,.05625,-.658594,.313477,.05625,-.6342,.285975,.05625,-.605006,.259261,.05625,-.5709,.2337,.05625,-.531769,.209658,.05625,-.4875,.1875,.05625,-.721354,.421824,.054,-.714549,.393098,.054,-.703083,.364097,.054,-.686854,.335095,.054,-.665763,.306366,.054,-.639706,.278183,.054,-.608582,.250821,.054,-.572291,.224554,.054,-.530731,.199655,.054,-.4838,.1764,.054,-.731403,.419783,.04725,-.72415,.389467,.04725,-.711952,.359244,.04725,-.694715,.329302,.04725,-.67235,.299831,.04725,-.644765,.271022,.04725,-.611868,.243065,.04725,-.57357,.216149,.04725,-.529777,.190464,.04725,-.4804,.1662,.04725,-.739678,.418102,.036,-.732058,.386477,.036,-.719255,.355246,.036,-.701189,.32453,.036,-.677775,.29445,.036,-.648931,.265126,.036,-.614575,.236678,.036,-.574622,.209227,.036,-.528992,.182894,.036,-.4776,.1578,.036,-.745294,.416961,.02025,-.737423,.384448,.02025,-.724212,.352534,.02025,-.705582,.321293,.02025,-.681456,.290798,.02025,-.651758,.261124,.02025,-.616411,.232344,.02025,-.575337,.20453,.02025,-.528459,.177758,.02025,-.4757,.1521,.02025,-.747363,.416541,-0,-.7394,.3837,-0,-.726038,.351534,-0,-.7072,.3201,-0,-.682812,.289453,-0,-.6528,.25965,-0,-.617087,.230747,-0,-.5756,.2028,-0,-.528262,.175866,-0,-.475,.15,-0,-.745294,.416961,-.02025,-.737423,.384448,-.02025,-.724212,.352534,-.02025,-.705582,.321293,-.02025,-.681456,.290798,-.02025,-.651758,.261124,-.02025,-.616411,.232344,-.02025,-.575337,.20453,-.02025,-.528459,.177758,-.02025,-.4757,.1521,-.02025,-.739678,.418102,-.036,-.732058,.386477,-.036,-.719255,.355246,-.036,-.701189,.32453,-.036,-.677775,.29445,-.036,-.648931,.265126,-.036,-.614575,.236678,-.036,-.574622,.209227,-.036,-.528992,.182894,-.036,-.4776,.1578,-.036,-.731403,.419783,-.04725,-.72415,.389467,-.04725,-.711952,.359244,-.04725,-.694715,.329302,-.04725,-.67235,.299831,-.04725,-.644765,.271022,-.04725,-.611868,.243065,-.04725,-.57357,.216149,-.04725,-.529777,.190464,-.04725,-.4804,.1662,-.04725,-.721354,.421824,-.054,-.714549,.393098,-.054,-.703083,.364097,-.054,-.686854,.335095,-.054,-.665763,.306366,-.054,-.639706,.278183,-.054,-.608582,.250821,-.054,-.572291,.224554,-.054,-.530731,.199655,-.054,-.4838,.1764,-.054,-.710419,.424045,-.05625,-.7041,.39705,-.05625,-.693431,.36938,-.05625,-.6783,.3414,-.05625,-.658594,.313477,-.05625,-.6342,.285975,-.05625,-.605006,.259261,-.05625,-.5709,.2337,-.05625,-.531769,.209658,-.05625,-.4875,.1875,-.05625,-.699483,.426267,-.054,-.693651,.401002,-.054,-.68378,.374662,-.054,-.669746,.347705,-.054,-.651425,.320588,-.054,-.628694,.293767,-.054,-.60143,.267701,-.054,-.569509,.242846,-.054,-.532807,.21966,-.054,-.4912,.1986,-.054,-.689435,.428308,-.04725,-.68405,.404633,-.04725,-.674911,.379516,-.04725,-.661885,.353498,-.04725,-.644837,.327122,-.04725,-.623635,.300928,-.04725,-.598144,.275457,-.04725,-.56823,.251251,-.04725,-.53376,.228852,-.04725,-.4946,.2088,-.04725,-.681159,.429989,-.036,-.676142,.407623,-.036,-.667607,.383513,-.036,-.655411,.35827,-.036,-.639412,.332503,-.036,-.619469,.306824,-.036,-.595438,.281844,-.036,-.567178,.258173,-.036,-.534546,.236421,-.036,-.4974,.2172,-.036,-.675544,.43113,-.02025,-.670777,.409652,-.02025,-.662651,.386226,-.02025,-.651018,.361507,-.02025,-.635731,.336155,-.02025,-.616642,.310826,-.02025,-.593602,.286178,-.02025,-.566463,.26287,-.02025,-.535079,.241558,-.02025,-.4993,.2229,-.02025,.425,.35625,-0,.425,.350475,.04455,.484849,.355805,.043775,.483975,.36105,-0,.529245,.36978,.041672,.5278,.3744,-0,.561114,.390793,.038572,.559325,.394725,-0,.583382,.417237,.034808,.5814,.42045,-0,.598975,.447506,.030712,.596875,.45,-0,.610818,.479994,.026617,.6086,.4818,-0,.621836,.513094,.022853,.619425,.514275,-0,.634955,.545199,.019753,.6322,.54585,-0,.653101,.574703,.01765,.649775,.57495,-0,.6792,.6,.016875,.675,.6,-0,.425,.3348,.0792,.48722,.341569,.077822,.533166,.35724,.074083,.565971,.38012,.068573,.588763,.408516,.061882,.604675,.440737,.0546,.616837,.475092,.047318,.628379,.509888,.040627,.642434,.543432,.035117,.66213,.574034,.031378,.6906,.6,.03,.425,.3117,.10395,.490714,.32059,.102142,.538946,.33876,.097234,.573127,.36439,.090002,.596693,.395664,.08122,.613075,.430762,.071662,.625707,.467868,.062105,.638023,.505162,.053323,.653454,.540828,.046091,.675436,.573047,.041183,.7074,.6,.039375,.425,.28365,.1188,.494957,.295116,.116734,.545963,.31632,.111125,.581818,.345291,.102859,.606322,.380058,.092822,.623275,.41865,.0819,.636478,.459096,.070978,.649732,.499425,.060941,.666837,.537666,.052675,.691593,.571848,.047066,.7278,.6,.045,.425,.253125,.12375,.499575,.267394,.121597,.5536,.2919,.115755,.591275,.324506,.107145,.6168,.363075,.09669,.634375,.405469,.085312,.6482,.44955,.073935,.662475,.493181,.06348,.6814,.534225,.05487,.709175,.570544,.049027,.75,.6,.046875,.425,.2226,.1188,.504193,.239671,.116734,.561237,.26748,.111125,.600732,.303721,.102859,.627278,.346092,.092822,.645475,.392287,.0819,.659922,.440004,.070978,.675218,.486938,.060941,.695963,.530784,.052675,.726757,.56924,.047066,.7722,.6,.045,.425,.19455,.10395,.508436,.214197,.102142,.568254,.24504,.097234,.609423,.284622,.090002,.636907,.330486,.08122,.655675,.380175,.071662,.670693,.431232,.062105,.686927,.4812,.053323,.709346,.527622,.046091,.742914,.568041,.041183,.7926,.6,.039375,.425,.17145,.0792,.51193,.193218,.077822,.574034,.22656,.074083,.616579,.268893,.068573,.644837,.317634,.061882,.664075,.3702,.0546,.679563,.424008,.047318,.696571,.476475,.040627,.720366,.525018,.035117,.75622,.567054,.031378,.8094,.6,.03,.425,.155775,.04455,.514301,.178982,.043775,.577955,.21402,.041672,.621436,.25822,.038572,.650218,.308913,.034808,.669775,.363431,.030712,.685582,.419106,.026617,.703114,.473269,.022853,.727845,.523251,.019753,.765249,.566384,.01765,.8208,.6,.016875,.425,.15,-0,.515175,.173738,-0,.5794,.2094,-0,.623225,.254288,-0,.6522,.3057,-0,.671875,.360938,-0,.6878,.4173,-0,.705525,.472088,-0,.7306,.5226,-0,.768575,.566138,-0,.825,.6,-0,.425,.155775,-.04455,.514301,.178982,-.043775,.577955,.21402,-.041672,.621436,.25822,-.038572,.650218,.308913,-.034808,.669775,.363431,-.030713,.685582,.419106,-.026617,.703114,.473269,-.022853,.727845,.523251,-.019753,.765249,.566384,-.01765,.8208,.6,-.016875,.425,.17145,-.0792,.51193,.193218,-.077822,.574034,.22656,-.074083,.616579,.268893,-.068573,.644837,.317634,-.061882,.664075,.3702,-.0546,.679563,.424008,-.047318,.696571,.476475,-.040627,.720366,.525018,-.035117,.75622,.567054,-.031378,.8094,.6,-.03,.425,.19455,-.10395,.508436,.214197,-.102142,.568254,.24504,-.097234,.609423,.284622,-.090002,.636907,.330486,-.08122,.655675,.380175,-.071663,.670693,.431232,-.062105,.686927,.4812,-.053323,.709346,.527622,-.046091,.742914,.568041,-.041183,.7926,.6,-.039375,.425,.2226,-.1188,.504193,.239671,-.116734,.561237,.26748,-.111125,.600732,.303721,-.102859,.627278,.346092,-.092822,.645475,.392287,-.0819,.659922,.440004,-.070978,.675218,.486938,-.060941,.695963,.530784,-.052675,.726757,.56924,-.047066,.7722,.6,-.045,.425,.253125,-.12375,.499575,.267394,-.121598,.5536,.2919,-.115755,.591275,.324506,-.107145,.6168,.363075,-.09669,.634375,.405469,-.085313,.6482,.44955,-.073935,.662475,.493181,-.06348,.6814,.534225,-.05487,.709175,.570544,-.049028,.75,.6,-.046875,.425,.28365,-.1188,.494957,.295116,-.116734,.545963,.31632,-.111125,.581818,.345291,-.102859,.606322,.380058,-.092822,.623275,.41865,-.0819,.636478,.459096,-.070978,.649732,.499425,-.060941,.666837,.537666,-.052675,.691593,.571848,-.047066,.7278,.6,-.045,.425,.3117,-.10395,.490714,.320591,-.102142,.538946,.33876,-.097234,.573127,.36439,-.090002,.596693,.395664,-.08122,.613075,.430762,-.071663,.625707,.467868,-.062105,.638023,.505163,-.053323,.653454,.540828,-.046091,.675436,.573047,-.041183,.7074,.6,-.039375,.425,.3348,-.0792,.48722,.34157,-.077822,.533166,.35724,-.074083,.565971,.38012,-.068573,.588763,.408516,-.061882,.604675,.440738,-.0546,.616837,.475092,-.047318,.628379,.509888,-.040627,.642434,.543432,-.035117,.66213,.574034,-.031378,.6906,.6,-.03,.425,.350475,-.04455,.484849,.355805,-.043775,.529245,.36978,-.041672,.561114,.390793,-.038572,.583382,.417237,-.034808,.598975,.447506,-.030713,.610818,.479994,-.026617,.621836,.513094,-.022853,.634955,.545199,-.019753,.653101,.574703,-.01765,.6792,.6,-.016875,.686852,.605101,.016686,.68245,.605062,-0,.694091,.609076,.016173,.6896,.609,-0,.700632,.61192,.015417,.69615,.611812,-0,.706188,.613632,.014499,.7018,.6135,-0,.710472,.61421,.0135,.70625,.614062,-0,.713198,.613651,.012501,.7092,.6135,-0,.714081,.611953,.011583,.71035,.611812,-0,.712833,.609113,.010827,.7094,.609,-0,.709168,.60513,.010314,.70605,.605062,-0,.7028,.6,.010125,.7,.6,-0,.6988,.605207,.029664,.706282,.609281,.028752,.712797,.612212,.027408,.718097,.613991,.025776,.721931,.614611,.024,.724051,.614062,.022224,.724207,.612335,.020592,.72215,.609421,.019248,.717631,.605313,.018336,.7104,.6,.018,.716407,.605363,.038934,.724246,.609583,.037737,.730725,.612642,.035973,.735647,.614521,.033831,.738819,.615202,.0315,.740045,.614666,.029169,.739131,.612897,.027027,.735882,.609875,.025263,.730103,.605582,.024066,.7216,.6,.023625,.737787,.605553,.044496,.746061,.60995,.043128,.752494,.613164,.041112,.756958,.615163,.038664,.759325,.615919,.036,.759466,.615401,.033336,.757252,.61358,.030888,.752555,.610426,.028872,.745247,.605909,.027504,.7352,.6,.027,.761053,.605759,.04635,.7698,.61035,.044925,.776184,.613732,.042825,.78015,.615862,.040275,.781641,.616699,.0375,.7806,.6162,.034725,.776972,.614323,.032175,.7707,.611025,.030075,.761728,.606265,.02865,.75,.6,.028125,.78432,.605965,.044496,.793539,.61075,.043128,.799875,.6143,.041112,.803342,.616562,.038664,.803956,.61748,.036,.801734,.616999,.033336,.796692,.615066,.030888,.788845,.611624,.028872,.778209,.606621,.027504,.7648,.6,.027,.8057,.606154,.038934,.815354,.611117,.037737,.821644,.614822,.035973,.824653,.617204,.033831,.824463,.618197,.0315,.821155,.617734,.029169,.814813,.615748,.027027,.805518,.612175,.025263,.793353,.606948,.024066,.7784,.6,.023625,.823307,.60631,.029664,.833318,.611419,.028752,.839572,.615252,.027408,.842203,.617734,.025776,.84135,.618788,.024,.837149,.618338,.022224,.829736,.616311,.020592,.81925,.612629,.019248,.805825,.607217,.018336,.7896,.6,.018,.835254,.606416,.016686,.845509,.611624,.016173,.851737,.615544,.015417,.854112,.618093,.014499,.852809,.619188,.0135,.848002,.618749,.012501,.839863,.616692,.011583,.828567,.612937,.010827,.814288,.6074,.010314,.7972,.6,.010125,.839656,.606455,-0,.85,.6117,-0,.856219,.615652,-0,.8585,.618225,-0,.857031,.619336,-0,.852,.6189,-0,.843594,.616833,-0,.832,.61305,-0,.817406,.607467,-0,.8,.6,-0,.835254,.606416,-.016686,.845509,.611624,-.016173,.851737,.615544,-.015417,.854112,.618093,-.014499,.852809,.619188,-.0135,.848002,.618749,-.012501,.839863,.616692,-.011583,.828567,.612937,-.010827,.814288,.6074,-.010314,.7972,.6,-.010125,.823307,.60631,-.029664,.833318,.611419,-.028752,.839572,.615252,-.027408,.842203,.617734,-.025776,.84135,.618788,-.024,.837149,.618338,-.022224,.829736,.616311,-.020592,.81925,.612629,-.019248,.805825,.607217,-.018336,.7896,.6,-.018,.8057,.606154,-.038934,.815354,.611117,-.037737,.821644,.614822,-.035973,.824653,.617204,-.033831,.824463,.618197,-.0315,.821155,.617734,-.029169,.814813,.615748,-.027027,.805518,.612175,-.025263,.793353,.606948,-.024066,.7784,.6,-.023625,.78432,.605965,-.044496,.793539,.61075,-.043128,.799875,.6143,-.041112,.803342,.616562,-.038664,.803956,.61748,-.036,.801734,.616999,-.033336,.796692,.615066,-.030888,.788845,.611624,-.028872,.778209,.606621,-.027504,.7648,.6,-.027,.761053,.605759,-.04635,.7698,.61035,-.044925,.776184,.613732,-.042825,.78015,.615862,-.040275,.781641,.616699,-.0375,.7806,.6162,-.034725,.776972,.614323,-.032175,.7707,.611025,-.030075,.761728,.606265,-.02865,.75,.6,-.028125,.737787,.605553,-.044496,.746061,.60995,-.043128,.752494,.613164,-.041112,.756958,.615163,-.038664,.759325,.615919,-.036,.759466,.615401,-.033336,.757252,.61358,-.030888,.752555,.610426,-.028872,.745247,.605909,-.027504,.7352,.6,-.027,.716407,.605363,-.038934,.724246,.609583,-.037737,.730725,.612642,-.035973,.735647,.614521,-.033831,.738819,.615202,-.0315,.740045,.614666,-.029169,.739131,.612897,-.027027,.735882,.609875,-.025263,.730103,.605582,-.024066,.7216,.6,-.023625,.698799,.605207,-.029664,.706282,.609281,-.028752,.712797,.612212,-.027408,.718097,.613991,-.025776,.721931,.614611,-.024,.724051,.614062,-.022224,.724207,.612335,-.020592,.72215,.609421,-.019248,.717631,.605313,-.018336,.7104,.6,-.018,.686852,.605101,-.016686,.694091,.609076,-.016173,.700632,.61192,-.015417,.706188,.613632,-.014499,.710472,.61421,-.0135,.713198,.613651,-.012501,.714081,.611953,-.011583,.712833,.609113,-.010827,.709168,.60513,-.010314,.7028,.6,-.010125,.048027,.785363,.008012,.04865,.785363,-0,0,.7875,-0,.076211,.7794,.012714,.0772,.7794,-0,.088403,.770288,.014747,.08955,.770288,-0,.088452,.7587,.014754,.0896,.7587,-0,.080209,.745312,.013377,.08125,.745312,-0,.067523,.7308,.011258,.0684,.7308,-0,.054245,.715837,.009039,.05495,.715837,-0,.044224,.7011,.007362,.0448,.7011,-0,.041311,.687262,.00687,.04185,.687262,-0,.049356,.675,.008204,.05,.675,-0,.046218,.785363,.015568,.07334,.7794,.024704,.085072,.770288,.028655,.085119,.7587,.028669,.077186,.745312,.025994,.064977,.7308,.021878,.052198,.715837,.017567,.042554,.7011,.014311,.039749,.687262,.013357,.047488,.675,.015952,.043314,.785363,.022577,.068732,.7794,.035825,.079727,.770288,.041555,.07977,.7587,.041576,.072335,.745312,.037698,.060892,.7308,.03173,.048915,.715837,.025481,.039874,.7011,.020762,.037242,.687262,.019381,.044492,.675,.023148,.039407,.785363,.028947,.062532,.7794,.045933,.072535,.770288,.053281,.072574,.7587,.053308,.065808,.745312,.048337,.055396,.7308,.040686,.044497,.715837,.032677,.03627,.7011,.026628,.033872,.687262,.024861,.040464,.675,.029696,.034587,.785363,.034587,.054884,.7794,.054884,.063663,.770288,.063663,.063697,.7587,.063697,.057758,.745312,.057758,.048618,.7308,.048618,.03905,.715837,.03905,.031826,.7011,.031826,.029719,.687262,.029718,.0355,.675,.0355,.028947,.785363,.039406,.045934,.7794,.062532,.053281,.770288,.072534,.053308,.7587,.072574,.048337,.745312,.065808,.040686,.7308,.055396,.032677,.715837,.044497,.026628,.7011,.036269,.024861,.687262,.033872,.029696,.675,.040464,.022577,.785363,.043314,.035825,.7794,.068732,.041555,.770288,.079727,.041577,.7587,.07977,.037698,.745312,.072335,.03173,.7308,.060892,.025481,.715837,.048914,.020762,.7011,.039874,.019381,.687262,.037242,.023148,.675,.044492,.015568,.785363,.046217,.024704,.7794,.07334,.028655,.770288,.085072,.028669,.7587,.085119,.025994,.745312,.077186,.021878,.7308,.064977,.017568,.715837,.052198,.014311,.7011,.042554,.013357,.687262,.039749,.015952,.675,.047488,.008012,.785363,.048027,.012714,.7794,.076211,.014747,.770288,.088402,.014754,.7587,.088452,.013377,.745312,.080208,.011258,.7308,.067523,.009039,.715837,.054245,.007362,.7011,.044224,.00687,.687262,.041311,.008204,.675,.049356,-0,.785363,.04865,-0,.7794,.0772,-0,.770288,.08955,-0,.7587,.0896,-0,.745312,.08125,-0,.7308,.0684,-0,.715837,.05495,-0,.7011,.0448,-0,.687262,.04185,-0,.675,.05,-.008012,.785363,.048027,-.012714,.7794,.076211,-.014747,.770288,.088402,-.014754,.7587,.088452,-.013377,.745312,.080208,-.011258,.7308,.067523,-.009039,.715837,.054245,-.007362,.7011,.044224,-.00687,.687262,.041311,-.008204,.675,.049356,-.015568,.785363,.046217,-.024704,.7794,.07334,-.028655,.770288,.085072,-.028669,.7587,.085119,-.025994,.745312,.077186,-.021878,.7308,.064977,-.017568,.715837,.052198,-.014311,.7011,.042554,-.013357,.687262,.039749,-.015952,.675,.047488,-.022577,.785363,.043314,-.035825,.7794,.068732,-.041555,.770288,.079727,-.041577,.7587,.07977,-.037698,.745312,.072335,-.03173,.7308,.060892,-.025481,.715837,.048914,-.020762,.7011,.039874,-.019381,.687262,.037242,-.023148,.675,.044492,-.028947,.785363,.039406,-.045934,.7794,.062532,-.053281,.770288,.072534,-.053308,.7587,.072574,-.048337,.745312,.065808,-.040686,.7308,.055396,-.032677,.715837,.044497,-.026628,.7011,.036269,-.024861,.687262,.033872,-.029696,.675,.040464,-.034587,.785363,.034587,-.054884,.7794,.054884,-.063663,.770288,.063663,-.063697,.7587,.063697,-.057758,.745312,.057758,-.048618,.7308,.048618,-.03905,.715837,.03905,-.031826,.7011,.031826,-.029719,.687262,.029718,-.0355,.675,.0355,-.039407,.785363,.028947,-.062532,.7794,.045933,-.072535,.770288,.053281,-.072574,.7587,.053308,-.065808,.745312,.048337,-.055396,.7308,.040686,-.044497,.715837,.032677,-.03627,.7011,.026628,-.033872,.687262,.024861,-.040464,.675,.029696,-.043314,.785363,.022576,-.068732,.7794,.035825,-.079727,.770288,.041555,-.07977,.7587,.041576,-.072335,.745312,.037698,-.060892,.7308,.03173,-.048915,.715837,.025481,-.039874,.7011,.020762,-.037242,.687262,.019381,-.044492,.675,.023148,-.046218,.785363,.015568,-.07334,.7794,.024704,-.085072,.770288,.028655,-.085119,.7587,.028669,-.077186,.745312,.025994,-.064977,.7308,.021878,-.052198,.715837,.017567,-.042554,.7011,.014311,-.039749,.687262,.013357,-.047488,.675,.015952,-.048027,.785363,.008012,-.076211,.7794,.012714,-.088403,.770288,.014747,-.088452,.7587,.014754,-.080209,.745312,.013377,-.067523,.7308,.011258,-.054245,.715837,.009039,-.044224,.7011,.007362,-.041311,.687262,.00687,-.049356,.675,.008204,-.04865,.785363,-0,-.0772,.7794,-0,-.08955,.770288,-0,-.0896,.7587,-0,-.08125,.745312,-0,-.0684,.7308,-0,-.05495,.715837,-0,-.0448,.7011,-0,-.04185,.687262,-0,-.05,.675,-0,-.048027,.785363,-.008012,-.076211,.7794,-.012714,-.088403,.770288,-.014747,-.088452,.7587,-.014754,-.080209,.745312,-.013377,-.067523,.7308,-.011258,-.054245,.715837,-.009039,-.044224,.7011,-.007363,-.041311,.687262,-.00687,-.049356,.675,-.008204,-.046218,.785363,-.015568,-.07334,.7794,-.024704,-.085072,.770288,-.028655,-.085119,.7587,-.028669,-.077186,.745312,-.025994,-.064977,.7308,-.021878,-.052198,.715837,-.017568,-.042554,.7011,-.014312,-.039749,.687262,-.013357,-.047488,.675,-.015952,-.043314,.785363,-.022577,-.068732,.7794,-.035825,-.079727,.770288,-.041555,-.07977,.7587,-.041577,-.072335,.745312,-.037698,-.060892,.7308,-.03173,-.048915,.715837,-.025481,-.039874,.7011,-.020762,-.037242,.687262,-.019381,-.044492,.675,-.023148,-.039407,.785363,-.028947,-.062532,.7794,-.045934,-.072535,.770288,-.053281,-.072574,.7587,-.053309,-.065808,.745312,-.048337,-.055396,.7308,-.040686,-.044497,.715837,-.032677,-.03627,.7011,-.026628,-.033872,.687262,-.024861,-.040464,.675,-.029696,-.034587,.785363,-.034587,-.054884,.7794,-.054884,-.063663,.770288,-.063663,-.063697,.7587,-.063697,-.057758,.745312,-.057758,-.048618,.7308,-.048618,-.03905,.715837,-.03905,-.031826,.7011,-.031826,-.029719,.687262,-.029719,-.0355,.675,-.0355,-.028947,.785363,-.039407,-.045934,.7794,-.062532,-.053281,.770288,-.072535,-.053308,.7587,-.072574,-.048337,.745312,-.065808,-.040686,.7308,-.055396,-.032677,.715837,-.044497,-.026628,.7011,-.03627,-.024861,.687262,-.033872,-.029696,.675,-.040464,-.022577,.785363,-.043314,-.035825,.7794,-.068732,-.041555,.770288,-.079727,-.041577,.7587,-.079771,-.037698,.745312,-.072335,-.03173,.7308,-.060892,-.025481,.715837,-.048915,-.020762,.7011,-.039874,-.019381,.687262,-.037242,-.023148,.675,-.044492,-.015568,.785363,-.046218,-.024704,.7794,-.07334,-.028655,.770288,-.085072,-.028669,.7587,-.085119,-.025994,.745312,-.077186,-.021878,.7308,-.064977,-.017568,.715837,-.052198,-.014311,.7011,-.042554,-.013357,.687262,-.039749,-.015952,.675,-.047488,-.008012,.785363,-.048027,-.012714,.7794,-.076211,-.014747,.770288,-.088403,-.014754,.7587,-.088452,-.013377,.745312,-.080209,-.011258,.7308,-.067523,-.009039,.715837,-.054245,-.007362,.7011,-.044224,-.00687,.687262,-.041311,-.008204,.675,-.049356,0,.785363,-.04865,0,.7794,-.0772,0,.770288,-.08955,0,.7587,-.0896,0,.745312,-.08125,0,.7308,-.0684,0,.715837,-.05495,0,.7011,-.0448,0,.687262,-.04185,0,.675,-.05,.008012,.785363,-.048027,.012714,.7794,-.076211,.014747,.770288,-.088403,.014754,.7587,-.088452,.013377,.745312,-.080209,.011258,.7308,-.067523,.009039,.715837,-.054245,.007362,.7011,-.044224,.00687,.687262,-.041311,.008204,.675,-.049356,.015568,.785363,-.046218,.024704,.7794,-.07334,.028655,.770288,-.085072,.028669,.7587,-.085119,.025994,.745312,-.077186,.021878,.7308,-.064977,.017568,.715837,-.052198,.014311,.7011,-.042554,.013357,.687262,-.039749,.015952,.675,-.047488,.022577,.785363,-.043314,.035825,.7794,-.068732,.041555,.770288,-.079727,.041577,.7587,-.079771,.037698,.745312,-.072335,.03173,.7308,-.060892,.025481,.715837,-.048915,.020762,.7011,-.039874,.019381,.687262,-.037242,.023148,.675,-.044492,.028947,.785363,-.039407,.045934,.7794,-.062532,.053281,.770288,-.072535,.053308,.7587,-.072574,.048337,.745312,-.065808,.040686,.7308,-.055396,.032677,.715837,-.044497,.026628,.7011,-.03627,.024861,.687262,-.033872,.029696,.675,-.040464,.034587,.785363,-.034587,.054884,.7794,-.054884,.063663,.770288,-.063663,.063697,.7587,-.063697,.057758,.745312,-.057758,.048618,.7308,-.048618,.03905,.715837,-.03905,.031826,.7011,-.031826,.029719,.687262,-.029719,.0355,.675,-.0355,.039407,.785363,-.028947,.062532,.7794,-.045934,.072535,.770288,-.053281,.072574,.7587,-.053309,.065808,.745312,-.048337,.055396,.7308,-.040686,.044497,.715837,-.032677,.03627,.7011,-.026628,.033872,.687262,-.024861,.040464,.675,-.029696,.043314,.785363,-.022577,.068732,.7794,-.035825,.079727,.770288,-.041555,.07977,.7587,-.041577,.072335,.745312,-.037698,.060892,.7308,-.03173,.048915,.715837,-.025481,.039874,.7011,-.020762,.037242,.687262,-.019381,.044492,.675,-.023148,.046218,.785363,-.015568,.07334,.7794,-.024704,.085072,.770288,-.028655,.085119,.7587,-.028669,.077186,.745312,-.025994,.064977,.7308,-.021878,.052198,.715837,-.017568,.042554,.7011,-.014311,.039749,.687262,-.013357,.047488,.675,-.015952,.048027,.785363,-.008012,.076211,.7794,-.012714,.088403,.770288,-.014747,.088452,.7587,-.014754,.080209,.745312,-.013377,.067523,.7308,-.011258,.054245,.715837,-.009039,.044224,.7011,-.007363,.041311,.687262,-.00687,.049356,.675,-.008204,.06895,.6648,.011461,.06985,.6648,-0,.09654,.6564,.016047,.0978,.6564,-0,.129757,.64935,.021568,.13145,.64935,-0,.166231,.6432,.027631,.1684,.6432,-0,.203593,.6375,.033841,.20625,.6375,-0,.239475,.6318,.039806,.2426,.6318,-0,.271507,.62565,.04513,.27505,.62565,-0,.297321,.6186,.049421,.3012,.6186,-0,.314546,.6102,.052284,.31865,.6102,-0,.320814,.6,.053326,.325,.6,-0,.066341,.6648,.022285,.092887,.6564,.031202,.124846,.64935,.041938,.15994,.6432,.053726,.195888,.6375,.065802,.230412,.6318,.077399,.261231,.62565,.087752,.286068,.6186,.096095,.302641,.6102,.101662,.308672,.6,.103688,.062155,.6648,.032338,.087026,.6564,.045277,.116969,.64935,.060856,.149849,.6432,.077962,.183529,.6375,.095485,.215875,.6318,.112314,.24475,.62565,.127337,.26802,.6186,.139444,.283548,.6102,.147522,.289198,.6,.150462,.056528,.6648,.041485,.079148,.6564,.058085,.10638,.64935,.078071,.136283,.6432,.100016,.166914,.6375,.122496,.196331,.6318,.144085,.222592,.62565,.163358,.243755,.6186,.178889,.257877,.6102,.189253,.263016,.6,.193024,.049594,.6648,.049593,.069438,.6564,.069438,.09333,.64935,.093329,.119564,.6432,.119564,.146438,.6375,.146437,.172246,.6318,.172246,.195285,.62565,.195285,.213852,.6186,.213852,.226241,.6102,.226241,.23075,.6,.23075,.041485,.6648,.056528,.058085,.6564,.079148,.078071,.64935,.10638,.100016,.6432,.136283,.122496,.6375,.166914,.144085,.6318,.196331,.163358,.62565,.222592,.178889,.6186,.243755,.189253,.6102,.257877,.193024,.6,.263016,.032338,.6648,.062155,.045278,.6564,.087026,.060856,.64935,.116969,.077963,.6432,.149849,.095486,.6375,.183529,.112314,.6318,.215875,.127337,.62565,.24475,.139444,.6186,.26802,.147522,.6102,.283548,.150462,.6,.289198,.022285,.6648,.066341,.031202,.6564,.092886,.041938,.64935,.124846,.053726,.6432,.15994,.065802,.6375,.195888,.077399,.6318,.230412,.087752,.62565,.261231,.096095,.6186,.286068,.101662,.6102,.302641,.103688,.6,.308672,.011461,.6648,.06895,.016047,.6564,.09654,.021568,.64935,.129757,.027631,.6432,.166231,.033842,.6375,.203593,.039806,.6318,.239475,.04513,.62565,.271507,.049421,.6186,.297321,.052284,.6102,.314546,.053326,.6,.320814,-0,.6648,.06985,-0,.6564,.0978,-0,.64935,.13145,-0,.6432,.1684,-0,.6375,.20625,-0,.6318,.2426,-0,.62565,.27505,-0,.6186,.3012,-0,.6102,.31865,-0,.6,.325,-.011461,.6648,.06895,-.016047,.6564,.09654,-.021568,.64935,.129757,-.027631,.6432,.166231,-.033842,.6375,.203593,-.039806,.6318,.239475,-.04513,.62565,.271507,-.049421,.6186,.297321,-.052284,.6102,.314546,-.053326,.6,.320814,-.022285,.6648,.066341,-.031202,.6564,.092886,-.041938,.64935,.124846,-.053726,.6432,.15994,-.065802,.6375,.195888,-.077399,.6318,.230412,-.087752,.62565,.261231,-.096095,.6186,.286068,-.101662,.6102,.302641,-.103688,.6,.308672,-.032338,.6648,.062155,-.045278,.6564,.087026,-.060856,.64935,.116969,-.077963,.6432,.149849,-.095486,.6375,.183529,-.112314,.6318,.215875,-.127337,.62565,.24475,-.139444,.6186,.26802,-.147522,.6102,.283547,-.150462,.6,.289198,-.041485,.6648,.056528,-.058085,.6564,.079148,-.078071,.64935,.10638,-.100016,.6432,.136283,-.122496,.6375,.166914,-.144085,.6318,.196331,-.163358,.62565,.222592,-.178889,.6186,.243755,-.189253,.6102,.257877,-.193024,.6,.263016,-.049594,.6648,.049593,-.069438,.6564,.069438,-.09333,.64935,.093329,-.119564,.6432,.119564,-.146438,.6375,.146437,-.172246,.6318,.172246,-.195285,.62565,.195285,-.213852,.6186,.213852,-.226241,.6102,.226241,-.23075,.6,.23075,-.056528,.6648,.041485,-.079148,.6564,.058085,-.10638,.64935,.078071,-.136283,.6432,.100016,-.166914,.6375,.122496,-.196331,.6318,.144085,-.222592,.62565,.163358,-.243755,.6186,.178889,-.257877,.6102,.189253,-.263016,.6,.193024,-.062155,.6648,.032338,-.087026,.6564,.045277,-.116969,.64935,.060856,-.149849,.6432,.077962,-.18353,.6375,.095485,-.215875,.6318,.112314,-.244751,.62565,.127337,-.26802,.6186,.139444,-.283548,.6102,.147522,-.289198,.6,.150462,-.066341,.6648,.022285,-.092887,.6564,.031202,-.124846,.64935,.041938,-.15994,.6432,.053726,-.195888,.6375,.065802,-.230412,.6318,.077399,-.261232,.62565,.087752,-.286068,.6186,.096095,-.302641,.6102,.101662,-.308672,.6,.103688,-.06895,.6648,.011461,-.09654,.6564,.016047,-.129757,.64935,.021568,-.166231,.6432,.027631,-.203593,.6375,.033841,-.239475,.6318,.039806,-.271507,.62565,.04513,-.297321,.6186,.049421,-.314546,.6102,.052284,-.320814,.6,.053326,-.06985,.6648,-0,-.0978,.6564,-0,-.13145,.64935,-0,-.1684,.6432,-0,-.20625,.6375,-0,-.2426,.6318,-0,-.27505,.62565,-0,-.3012,.6186,-0,-.31865,.6102,-0,-.325,.6,-0,-.06895,.6648,-.011461,-.09654,.6564,-.016047,-.129757,.64935,-.021568,-.166231,.6432,-.027631,-.203593,.6375,-.033842,-.239475,.6318,-.039806,-.271507,.62565,-.04513,-.297321,.6186,-.049421,-.314546,.6102,-.052284,-.320814,.6,-.053326,-.066341,.6648,-.022285,-.092887,.6564,-.031202,-.124846,.64935,-.041938,-.15994,.6432,-.053726,-.195888,.6375,-.065802,-.230412,.6318,-.077399,-.261231,.62565,-.087752,-.286068,.6186,-.096095,-.302641,.6102,-.101662,-.308672,.6,-.103688,-.062155,.6648,-.032338,-.087026,.6564,-.045278,-.116969,.64935,-.060856,-.149849,.6432,-.077963,-.183529,.6375,-.095486,-.215875,.6318,-.112314,-.24475,.62565,-.127337,-.26802,.6186,-.139444,-.283548,.6102,-.147522,-.289198,.6,-.150462,-.056528,.6648,-.041485,-.079148,.6564,-.058085,-.10638,.64935,-.078071,-.136283,.6432,-.100016,-.166914,.6375,-.122496,-.196331,.6318,-.144085,-.222592,.62565,-.163358,-.243755,.6186,-.178889,-.257877,.6102,-.189253,-.263016,.6,-.193024,-.049594,.6648,-.049594,-.069438,.6564,-.069438,-.09333,.64935,-.09333,-.119564,.6432,-.119564,-.146438,.6375,-.146438,-.172246,.6318,-.172246,-.195285,.62565,-.195286,-.213852,.6186,-.213852,-.226241,.6102,-.226242,-.23075,.6,-.23075,-.041485,.6648,-.056528,-.058085,.6564,-.079148,-.078071,.64935,-.10638,-.100016,.6432,-.136283,-.122496,.6375,-.166914,-.144085,.6318,-.196331,-.163358,.62565,-.222592,-.178889,.6186,-.243755,-.189253,.6102,-.257877,-.193024,.6,-.263016,-.032338,.6648,-.062155,-.045278,.6564,-.087026,-.060856,.64935,-.11697,-.077963,.6432,-.149849,-.095486,.6375,-.18353,-.112314,.6318,-.215875,-.127337,.62565,-.244751,-.139444,.6186,-.26802,-.147522,.6102,-.283548,-.150462,.6,-.289198,-.022285,.6648,-.066341,-.031202,.6564,-.092887,-.041938,.64935,-.124846,-.053726,.6432,-.15994,-.065802,.6375,-.195888,-.077399,.6318,-.230412,-.087752,.62565,-.261232,-.096095,.6186,-.286068,-.101662,.6102,-.302641,-.103688,.6,-.308672,-.011461,.6648,-.06895,-.016047,.6564,-.09654,-.021568,.64935,-.129757,-.027631,.6432,-.166231,-.033842,.6375,-.203594,-.039806,.6318,-.239475,-.04513,.62565,-.271507,-.049421,.6186,-.297321,-.052284,.6102,-.314546,-.053326,.6,-.320814,0,.6648,-.06985,0,.6564,-.0978,0,.64935,-.13145,0,.6432,-.1684,0,.6375,-.20625,0,.6318,-.2426,0,.62565,-.27505,0,.6186,-.3012,0,.6102,-.31865,0,.6,-.325,.011461,.6648,-.06895,.016047,.6564,-.09654,.021568,.64935,-.129757,.027631,.6432,-.166231,.033842,.6375,-.203594,.039806,.6318,-.239475,.04513,.62565,-.271507,.049421,.6186,-.297321,.052284,.6102,-.314546,.053326,.6,-.320814,.022285,.6648,-.066341,.031202,.6564,-.092887,.041938,.64935,-.124846,.053726,.6432,-.15994,.065802,.6375,-.195888,.077399,.6318,-.230412,.087752,.62565,-.261231,.096095,.6186,-.286068,.101662,.6102,-.302641,.103688,.6,-.308672,.032338,.6648,-.062155,.045278,.6564,-.087026,.060856,.64935,-.116969,.077963,.6432,-.149849,.095486,.6375,-.18353,.112314,.6318,-.215875,.127337,.62565,-.24475,.139444,.6186,-.26802,.147522,.6102,-.283548,.150462,.6,-.289198,.041485,.6648,-.056528,.058085,.6564,-.079148,.078071,.64935,-.10638,.100016,.6432,-.136283,.122496,.6375,-.166914,.144085,.6318,-.196331,.163358,.62565,-.222592,.178889,.6186,-.243755,.189253,.6102,-.257877,.193024,.6,-.263016,.049594,.6648,-.049594,.069438,.6564,-.069438,.09333,.64935,-.09333,.119564,.6432,-.119564,.146438,.6375,-.146438,.172246,.6318,-.172246,.195285,.62565,-.195286,.213852,.6186,-.213852,.226241,.6102,-.226242,.23075,.6,-.23075,.056528,.6648,-.041485,.079148,.6564,-.058085,.10638,.64935,-.078071,.136283,.6432,-.100016,.166914,.6375,-.122496,.196331,.6318,-.144085,.222592,.62565,-.163358,.243755,.6186,-.178889,.257877,.6102,-.189253,.263016,.6,-.193024,.062155,.6648,-.032338,.087026,.6564,-.045278,.116969,.64935,-.060856,.149849,.6432,-.077963,.18353,.6375,-.095486,.215875,.6318,-.112314,.244751,.62565,-.127337,.26802,.6186,-.139444,.283548,.6102,-.147522,.289198,.6,-.150462,.066341,.6648,-.022285,.092887,.6564,-.031202,.124846,.64935,-.041938,.15994,.6432,-.053726,.195888,.6375,-.065802,.230412,.6318,-.077399,.261232,.62565,-.087752,.286068,.6186,-.096095,.302641,.6102,-.101662,.308672,.6,-.103688,.06895,.6648,-.011461,.09654,.6564,-.016047,.129757,.64935,-.021568,.166231,.6432,-.027631,.203593,.6375,-.033842,.239475,.6318,-.039806,.271507,.62565,-.04513,.297321,.6186,-.049421,.314546,.6102,-.052284,.320814,.6,-.053326]),_.setData(i.default.S_NORMALS,[-.92935,-.369152,-.003693,-.917203,-.369304,-.149358,-.947172,-.283151,-.150456,-.959105,-.282968,-31e-6,-.986297,-.053682,-.155889,-.998688,-.050935,-702e-6,-.932279,.330302,-.147465,-.943907,.330149,519e-6,-.600146,.794153,-.09537,-.60921,.792993,244e-6,-.033784,.99939,-.005036,-.03415,.99939,305e-6,.385205,.920774,.061403,.39021,.920713,244e-6,.606494,.789178,.096438,.614307,.789026,183e-6,.73986,.662374,.117588,.749352,.66213,122e-6,.828974,.543504,.131687,.840114,.542344,.001038,.878262,.45732,.13947,.889401,.457106,31e-6,-.882077,-.369762,-.291849,-.911588,-.284494,-.29664,-.949309,-.052339,-.309915,-.895993,.333659,-.292947,-.578936,.793146,-.18894,-.032502,.99939,-.010254,.370373,.920927,.121158,.58327,.789575,.190558,.711753,.662801,.232459,.797632,.543992,.260475,.845119,.457778,.275948,-.825282,-.370098,-.426496,-.853572,-.283731,-.436903,-.888699,-.051057,-.455611,-.839564,.332499,-.429548,-.541734,.793603,-.276925,-.028657,.999481,-.014496,.346446,.921079,.177557,.545152,.790735,.278359,.666128,.663259,.341014,.746666,.544389,.382183,.791223,.458205,.40495,-.748619,-.370373,-.549852,-.775323,-.284982,-.563585,-.807184,-.052431,-.587939,-.762291,.332682,-.555132,-.491684,.793847,-.357799,-.02768,.99942,-.019745,.314249,.921232,.229194,.494888,.790948,.359752,.604816,.662618,.441664,.677786,.544694,.49382,.718314,.45848,.52324,-.654164,-.370403,-.659413,-.678396,-.285073,-.677114,-.706107,-.052492,-.706137,-.66686,.332743,-.666707,-.430067,.793939,-.429731,-.024232,.99942,-.023774,.274789,.921262,.275155,.432905,.79107,.432142,.528855,.662709,.530168,.592853,.544816,.592975,.628346,.458541,.628376,-.54387,-.370373,-.752983,-.56447,-.283914,-.775048,-.58739,-.051057,-.807672,-.554552,.334178,-.762078,-.359264,.792596,-.492599,-.020264,.99942,-.027284,.228797,.921201,.314585,.360637,.790979,.494217,.440168,.662618,.605914,.493637,.544725,.677908,.523179,.45848,.718375,-.419874,-.370067,-.828669,-.436781,-.283761,-.853603,-.454909,-.05237,-.888974,-.429731,.332469,-.839503,-.278207,.792383,-.542863,-.01474,.999481,-.028504,.177068,.92111,.34666,.279305,.790735,.544664,.340465,.662313,.667379,.382031,.54442,.746727,.406018,.458754,.790338,-.288186,-.369732,-.883297,-.297555,-.283456,-.911618,-.310617,-.053713,-.949004,-.293374,.330607,-.896969,-.189154,.793268,-.578692,-.010102,.999481,-.030488,.12064,.920927,.370525,.190588,.790399,.582171,.231697,.661885,.712851,.260292,.543962,.797693,.275826,.457778,.845149,-.142033,-.369274,-.918363,-.150395,-.28312,-.947203,-.15659,-.05237,-.986267,-.147404,.333445,-.93115,-.095157,.794122,-.600208,-.005646,.99939,-.033662,.060854,.920743,.385296,.096072,.789209,.606525,.116642,.661428,.740837,.132481,.544359,.828303,.139409,.45732,.878292,.001648,-.369884,-.929044,-.003174,-.283914,-.958831,-.001709,-.052156,-.998627,-.001617,.330302,-.943846,-824e-6,.791864,-.610675,-244e-6,.999359,-.035493,122e-6,.92114,.389141,458e-6,.789727,.613422,763e-6,.662984,.748589,-92e-6,.54326,.839534,-.001434,.456526,.889706,.14304,-.39143,-.908994,.142033,-.304819,-.94174,.150945,-.078555,-.985382,.146458,.306711,-.940458,.097171,.782525,-.614978,.005463,.999359,-.034791,-.061708,.919401,.388409,-.096408,.787774,.608325,-.117344,.661641,.740562,-.132694,.542375,.829585,-.139439,.457289,.878292,.275155,-.432508,-.858608,.282205,-.351665,-.892544,.301279,-.135319,-.943876,.297372,.250191,-.921384,.202185,.758232,-.6198,.012696,.999146,-.038789,-.123417,.917417,.378246,-.191504,.785638,.588275,-.232582,.660543,.713797,-.261574,.542344,.798364,-.275948,.457686,.84518,.398968,-.472152,-.786035,.415082,-.397595,-.818293,.444929,-.192145,-.874691,.446608,.191046,-.874081,.311594,.73159,-.606342,.021851,.99884,-.042268,-.183599,.915128,.358867,-.284188,.782098,.554552,-.343425,.658376,.669729,-.383587,.542192,.747551,-.40495,.458022,.791314,.520859,-.498398,-.693014,.540452,-.424207,-.726585,.580004,-.224219,-.783105,.586077,.158116,-.794641,.414441,.714133,-.564074,.030915,.998627,-.042055,-.240211,.913175,.329203,-.367901,.780755,.50502,-.441969,.659169,.608356,-.4944,.542985,.678732,-.523301,.458266,.718406,.631397,-.502335,-.590716,.651448,-.429792,-.625202,.698508,-.231056,-.677236,.706076,.149663,-.692099,.503464,.704856,-.49968,.039918,.998383,-.039979,-.289132,.912839,.288217,-.442305,.780389,.441908,-.532395,.658101,.532365,-.594928,.5421,.593432,-.628468,.458327,.628407,.730033,-.484939,-.481491,.750755,-.412915,-.51558,.801843,-.209693,-.559496,.803339,.171331,-.570299,.569384,.711264,-.412122,.045839,.998352,-.033784,-.328623,.913877,.238289,-.504562,.781518,.366894,-.608264,.658681,.442854,-.6798,.542222,.493789,-.718467,.458235,.52324,.813685,-.451979,-.36552,.835658,-.379192,-.39729,.886685,-.167943,-.430738,.874722,.213935,-.434797,.608936,.730003,-.310251,.047426,.998535,-.024812,-.357799,.91586,.182043,-.553178,.783685,.282418,-.669088,.659719,.342174,-.747429,.543168,.382427,-.790429,.458602,.406018,.877102,-.413526,-.24424,.901089,-.338664,-.270791,.948729,-.119022,-.292764,.919675,.262734,-.291726,.624622,.753838,-.203772,.045198,.99884,-.01529,-.376965,.918119,.122196,-.587634,.786157,.19126,-.713462,.660909,.232673,-.798975,.542405,.259651,-.845943,.457076,.274606,.91583,-.382366,-.12244,.942137,-.304971,-.139134,.985504,-.07947,-.149754,.941923,.30192,-.146977,.624073,.774895,-.099979,.040956,.999115,-.006897,-.387341,.919889,.060976,-.607898,.788141,.096164,-.74044,.661733,.117405,-.82992,.542344,.130589,-.878323,.457289,.139348,.929319,-.369121,.008545,.957915,-.286966,793e-6,.998383,-.056673,702e-6,.94586,.324503,-488e-6,.615223,.788324,-732e-6,.034303,.99939,-305e-6,-.39198,.91995,-58e-5,-.61449,.788903,-122e-6,-.750206,.661184,-977e-6,-.840175,.542283,-.001099,-.889401,.457106,-31e-6,.917203,-.369304,.149358,.947172,-.283151,.150456,.986206,-.050966,.157384,.932279,.330271,.147465,.600146,.794153,.09537,.031831,.999481,.004883,-.385205,.920774,-.061403,-.606494,.789178,-.096438,-.739921,.662313,-.117466,-.828608,.544359,-.130558,-.878262,.45732,-.13947,.882077,-.369762,.291849,.911588,-.283425,.297678,.949309,-.052339,.309915,.896664,.332133,.292611,.578906,.793176,.18894,.032502,.99939,.010254,-.370373,.920927,-.121158,-.58327,.789575,-.190558,-.711753,.662801,-.232459,-.797876,.543077,-.261574,-.844966,.457198,-.277352,.825282,-.370098,.426496,.853572,-.2837,.436903,.889218,-.053774,.454237,.839564,.332469,.429548,.541734,.793603,.276925,.028657,.999481,.014496,-.346446,.921079,-.177557,-.545152,.790735,-.278359,-.666128,.663259,-.341014,-.746666,.544389,-.382183,-.791223,.458205,-.40495,.748619,-.370373,.549852,.775323,-.284982,.563585,.807184,-.052431,.587939,.761559,.334208,.555254,.491684,.793847,.357799,.029206,.999329,.021027,-.31428,.921232,-.229225,-.494888,.790948,-.359752,-.604816,.662618,-.441664,-.677786,.544694,-.49382,-.718314,.45848,-.52324,.654164,-.370403,.659413,.678396,-.285073,.677114,.706107,-.052492,.706137,.667562,.331217,.666799,.430067,.79397,.429701,.024262,.99942,.023804,-.275857,.92053,-.276528,-.432936,.79104,-.432173,-.528855,.662709,-.530168,-.592853,.544816,-.592975,-.628346,.458541,-.628376,.54387,-.370373,.752983,.56447,-.283914,.775048,.58739,-.051057,.807672,.554552,.334178,.762078,.358074,.793725,.491653,.020264,.99942,.027314,-.228797,.921232,-.314585,-.360637,.790979,-.494217,-.440168,.662618,-.605914,-.493637,.544725,-.677908,-.523179,.45848,-.718375,.419874,-.370067,.828669,.436781,-.283761,.853603,.454909,-.05237,.888974,.429731,.332469,.839503,.278207,.792383,.542863,.01474,.999481,.028504,-.177068,.92111,-.34666,-.279305,.790735,-.544664,-.340465,.662313,-.667379,-.382031,.54442,-.746727,-.406018,.458754,-.790338,.288186,-.369732,.883297,.297555,-.283456,.911618,.309915,-.052309,.949309,.292795,.332163,.896603,.189154,.793268,.578692,.010102,.999481,.030488,-.12064,.920927,-.370525,-.190588,.790399,-.582171,-.231697,.661885,-.712851,-.260292,.543962,-.797693,-.275826,.457778,-.845149,.142033,-.369274,.918363,.150395,-.28312,.947203,.15659,-.052309,.986267,.148015,.331919,.931608,.095767,.792962,.601642,.005646,.99939,.033662,-.060854,.920743,-.385296,-.096072,.789209,-.606525,-.116642,.661428,-.740837,-.132481,.544359,-.828303,-.139409,.45732,-.878292,-.003693,-.369152,.92935,-31e-6,-.282968,.959105,-732e-6,-.050905,.998688,61e-6,.331736,.943358,244e-6,.792962,.609241,305e-6,.99939,.03415,244e-6,.920713,-.39021,183e-6,.789026,-.614307,122e-6,.66213,-.749352,-946e-6,.544145,-.838984,.001434,.456526,-.889676,-.149358,-.369304,.917203,-.150456,-.283151,.947172,-.156621,-.052278,.986267,-.147801,.331858,.931669,-.095248,.792993,.601703,-.005036,.99939,.033784,.061403,.920774,-.385205,.096438,.789178,-.606494,.117588,.662374,-.73986,.131687,.543504,-.828974,.140904,.45674,-.878353,-.291849,-.369762,.882077,-.297678,-.283425,.911588,-.309915,-.052339,.949309,-.292398,.330577,.897305,-.188665,.793268,.578845,-.010254,.99939,.032502,.121158,.920927,-.370373,.190558,.789544,-.5833,.232459,.662801,-.711753,.260475,.543992,-.797632,.275948,.457778,-.845119,-.426496,-.370098,.825282,-.436903,-.2837,.853572,-.454237,-.053774,.889218,-.429548,.332469,.839564,-.276589,.794702,.540269,-.015229,.99939,.030457,.177557,.92111,-.346416,.279489,.789911,-.545793,.341014,.663228,-.666158,.382183,.544389,-.746666,.40495,.458205,-.791223,-.549852,-.370373,.748619,-.563585,-.284982,.775323,-.587939,-.052431,.807184,-.555223,.332621,.762261,-.357799,.793847,.491684,-.019745,.99942,.02768,.229225,.921232,-.31428,.360973,.790124,-.495315,.440535,.663533,-.604633,.49382,.544694,-.677786,.52324,.45848,-.718314,-.659413,-.370403,.654164,-.677114,-.285073,.678396,-.706137,-.052492,.706107,-.666707,.332804,.66686,-.428938,.795068,.428785,-.0253,.999329,.025575,.275155,.921262,-.274789,.432173,.79104,-.432936,.529008,.663656,-.528825,.592975,.544816,-.592853,.628376,.458541,-.628346,-.752983,-.370373,.54387,-.775048,-.283914,.56447,-.807642,-.051088,.58739,-.762078,.334178,.554552,-.492599,.792627,.359233,-.027314,.99942,.020264,.31608,.920499,-.229652,.494217,.790979,-.360637,.605914,.662618,-.440168,.677908,.544725,-.493637,.718375,.45848,-.523179,-.828669,-.370067,.419874,-.853603,-.283731,.436781,-.888974,-.0524,.454909,-.839503,.332438,.429731,-.54149,.793603,.277352,-.028504,.999481,.01474,.34666,.92111,-.177068,.544664,.790735,-.279305,.667379,.662313,-.340465,.746727,.54442,-.382031,.790338,.458754,-.406018,-.884396,-.369732,.284799,-.911618,-.283456,.297555,-.949004,-.053713,.310617,-.897,.330607,.293374,-.578692,.793268,.189154,-.034211,.999329,.011353,.370525,.920927,-.12064,.582171,.790399,-.190588,.712851,.661885,-.231697,.796838,.544847,-.261116,.845149,.457778,-.275826,-.918363,-.369274,.142033,-.946745,-.284219,.15125,-.986267,-.05237,.15659,-.93115,.333445,.147404,-.600208,.794122,.095157,-.033662,.99939,.005646,.387036,.920042,-.060945,.606525,.789209,-.096072,.739952,.662313,-.117435,.829005,.543504,-.131504,.878811,.45674,-.138066,.89346,.426099,.14185,.904752,.425886,0,.897702,.416852,.142521,.909055,.416639,0,.904904,.401196,.141881,.916166,.400739,0,.914609,.378002,.143498,.925993,.377483,0,.926633,.345927,.14713,.938322,.345744,0,.940794,.304209,.149388,.952635,.304025,0,.956084,.250649,.15183,.968108,.250496,0,.970916,.18302,.15418,.983123,.182928,0,.982879,.099857,.154759,.995056,.099033,0,.987243,-.027833,.156743,.999603,-.027833,0,.859798,.426527,.280679,.863887,.41728,.282022,.870663,.401379,.284249,.879635,.377758,.288949,.891415,.345897,.292734,.905423,.304544,.295602,.920499,.251503,.29899,.934812,.183905,.303751,.945921,.099216,.308817,.949889,-.028932,.311197,.804956,.426954,.411939,.808802,.417676,.413923,.81518,.401776,.417158,.823969,.37846,.421674,.834986,.34666,.42732,.847804,.30488,.433882,.861629,.251198,.440962,.874569,.182775,.44911,.88525,.098575,.454512,.889828,-.027924,.455397,.730827,.427198,.532304,.734306,.417951,.534867,.740074,.40202,.539079,.74807,.378704,.544908,.75808,.346904,.552202,.769738,.305094,.560686,.782311,.251381,.569842,.794549,.183599,.578753,.804285,.099399,.585833,.807978,-.027924,.588519,.639271,.42729,.639271,.642323,.418043,.642354,.647389,.402112,.64742,.654378,.378796,.654408,.663137,.346965,.663167,.67333,.305155,.673391,.684347,.251442,.684378,.695059,.18363,.69509,.703574,.099429,.703604,.706809,-.027924,.706809,.532304,.427198,.730827,.534837,.417951,.734306,.539048,.40202,.740104,.544877,.378704,.7481,.552141,.346904,.75811,.560656,.305094,.769768,.569811,.251381,.782342,.578722,.183599,.79458,.585833,.099399,.804285,.588519,-.027924,.807978,.411908,.426954,.804987,.415509,.417829,.807917,.417127,.401776,.81518,.421644,.37846,.823969,.42729,.34666,.834986,.433851,.30488,.847804,.440931,.251198,.86166,.447798,.183447,.875088,.453291,.099338,.8858,.455397,-.027894,.889828,.278817,.426435,.860439,.281991,.41728,.863887,.28254,.401135,.871334,.287271,.378094,.880062,.291086,.346294,.891781,.295541,.304544,.905454,.300363,.250954,.920194,.305063,.183233,.934507,.308786,.099216,.945921,.311228,-.026826,.94995,.14185,.426099,.89346,.142491,.416852,.897702,.14362,.400952,.904752,.145146,.377697,.914457,.147099,.345927,.926633,.149327,.304209,.940794,.153203,.251228,.955718,.154118,.18302,.970916,.156011,.099094,.982757,.156743,-.027863,.987213,0,.425886,.904752,.001831,.416791,.908963,0,.400739,.916166,0,.377483,.925993,0,.345744,.938322,0,.304025,.952635,.001434,.251076,.967956,-.001373,.182257,.983245,0,.099033,.995056,0,-.027833,.999603,-.14185,.426099,.89346,-.142521,.416852,.897702,-.143651,.400952,.904752,-.145207,.377667,.914457,-.14713,.345927,.926633,-.149388,.304209,.940794,-.15183,.250649,.956084,-.155553,.182348,.970824,-.154759,.099857,.982879,-.156743,-.027833,.987243,-.280679,.426527,.859798,-.282022,.41728,.863887,-.284249,.401379,.870663,-.287271,.378094,.880032,-.291147,.346294,.891781,-.295602,.304544,.905423,-.29899,.251503,.920499,-.305094,.183233,.934507,-.308817,.099216,.945921,-.311197,-.028932,.949889,-.411939,.426954,.804956,-.413923,.417676,.808802,-.417158,.401776,.81518,-.421674,.37846,.823969,-.428816,.346263,.834376,-.433882,.30488,.847804,-.440962,.251198,.861629,-.44911,.182775,.874569,-.453322,.099338,.885769,-.455397,-.027924,.889828,-.532304,.427198,.730827,-.534867,.417951,.734306,-.539079,.40202,.740074,-.544877,.378704,.74807,-.552202,.346904,.75808,-.560686,.305094,.769738,-.569842,.251381,.782311,-.577563,.184271,.795251,-.585833,.099399,.804285,-.588519,-.027924,.807978,-.639271,.42729,.639271,-.642354,.418043,.642323,-.64742,.402112,.647389,-.654408,.378796,.654378,-.663167,.346965,.663137,-.67336,.305155,.67336,-.684378,.251442,.684347,-.69509,.18363,.695059,-.70455,.098666,.702719,-.706809,-.027924,.706809,-.730827,.427198,.532304,-.734306,.417951,.534837,-.740104,.40202,.539048,-.7481,.378704,.544877,-.75811,.346904,.552141,-.769768,.305094,.560656,-.782342,.251381,.569811,-.79458,.183599,.578722,-.803461,.100162,.58681,-.807978,-.027924,.588519,-.804987,.426923,.411908,-.808832,.417676,.413892,-.81518,.401776,.417127,-.823969,.37846,.421644,-.834986,.34666,.42729,-.847804,.30488,.433851,-.86166,.251198,.440931,-.875088,.183447,.447798,-.8858,.099338,.453291,-.890286,-.028962,.454451,-.860439,.426435,.278817,-.863887,.41728,.281991,-.870663,.401379,.284219,-.880062,.378094,.287271,-.891781,.346294,.291086,-.905454,.304544,.295541,-.920194,.250954,.300363,-.934507,.183233,.305063,-.945921,.099216,.308786,-.94995,-.026826,.311228,-.89346,.426099,.14185,-.897702,.416852,.142491,-.904752,.400952,.14362,-.914457,.377697,.145146,-.926633,.345927,.147099,-.940794,.304209,.149327,-.956084,.250649,.151769,-.970916,.18302,.154118,-.982757,.099094,.156011,-.987213,-.027863,.156743,-.904752,.425886,0,-.909055,.416639,0,-.916166,.400739,0,-.925993,.377483,0,-.938322,.345714,0,-.952635,.304025,0,-.968108,.250496,0,-.983123,.182928,0,-.995056,.099033,0,-.972533,.232734,-641e-6,-.89346,.426099,-.14185,-.897916,.417005,-.14066,-.904904,.401196,-.141881,-.914457,.377667,-.145207,-.926756,.346324,-.145482,-.940794,.304209,-.149388,-.956175,.251198,-.150334,-.971007,.183691,-.152776,-.982757,.099094,-.156041,-.987243,-.027833,-.156743,-.859798,.426527,-.280679,-.863887,.41728,-.282022,-.870205,.401135,-.285958,-.879635,.377758,-.288949,-.891781,.346294,-.291147,-.905118,.304056,-.297128,-.920499,.251503,-.29899,-.934507,.183233,-.305094,-.945585,.098453,-.310068,-.950224,-.027894,-.310221,-.804956,.426954,-.411939,-.808802,.417676,-.413923,-.81518,.401776,-.417158,-.823969,.37846,-.421674,-.834986,.34666,-.42732,-.847804,.30488,-.433882,-.861629,.251198,-.440962,-.874569,.182775,-.44911,-.88525,.098575,-.454512,-.889828,-.027924,-.455397,-.730827,.427198,-.532304,-.734306,.417951,-.534867,-.740074,.40202,-.539079,-.74807,.378704,-.544908,-.75808,.346904,-.552202,-.770531,.305551,-.559343,-.782311,.251381,-.569842,-.795251,.184271,-.577563,-.804285,.099399,-.585833,-.807978,-.027924,-.588519,-.639271,.42729,-.639271,-.642323,.418043,-.642354,-.647389,.402112,-.64742,-.654378,.378796,-.654408,-.663137,.346965,-.663167,-.67333,.305155,-.673391,-.683432,.250862,-.685507,-.695059,.18363,-.69509,-.702719,.098666,-.70455,-.706809,-.027924,-.706809,-.532304,.427198,-.730827,-.534837,.417951,-.734306,-.539048,.40202,-.740104,-.546159,.37904,-.746971,-.552141,.346904,-.75811,-.560656,.305094,-.769768,-.569811,.251381,-.782342,-.578722,.183599,-.79458,-.585833,.099399,-.804285,-.588519,-.027924,-.807978,-.411908,.426954,-.804987,-.413892,.417676,-.808832,-.417127,.401776,-.81518,-.421644,.37846,-.823969,-.425916,.346233,-.835871,-.433851,.30488,-.847804,-.440931,.251198,-.86166,-.447798,.183447,-.875088,-.453291,.099338,-.8858,-.455397,-.027894,-.889828,-.278817,.426435,-.860439,-.281991,.41728,-.863887,-.284219,.401379,-.870663,-.287271,.378094,-.880062,-.291086,.346294,-.891781,-.295541,.304544,-.905454,-.300363,.250954,-.920194,-.305063,.183233,-.934507,-.308786,.099216,-.945921,-.311228,-.026826,-.94995,-.14185,.426099,-.89346,-.142491,.416852,-.897702,-.14362,.400952,-.904752,-.145146,.377697,-.914457,-.147099,.345927,-.926633,-.149327,.304209,-.940794,-.153203,.251228,-.955718,-.154118,.18302,-.970916,-.156011,.099094,-.982757,-.156743,-.027863,-.987213,0,.425886,-.904752,0,.416639,-.909055,0,.400739,-.916166,0,.377483,-.925993,0,.345744,-.938322,0,.304025,-.952635,-.001434,.251076,-.967956,.001373,.182257,-.983245,0,.099033,-.995056,0,-.027833,-.999603,.14185,.426099,-.89346,.142521,.416852,-.897702,.141881,.401196,-.904904,.145207,.377667,-.914457,.14713,.345927,-.926633,.149388,.304209,-.940794,.15183,.250649,-.956084,.155553,.182348,-.970824,.154759,.099857,-.982879,.156743,-.027833,-.987243,.280679,.426527,-.859798,.282022,.41728,-.863887,.284219,.401379,-.870663,.287271,.378094,-.880032,.291147,.346294,-.891781,.295602,.304544,-.905423,.29899,.251503,-.920499,.305094,.183233,-.934507,.308817,.099216,-.945921,.311197,-.028932,-.949889,.411939,.426954,-.804956,.413923,.417676,-.808802,.417158,.401776,-.81518,.421674,.37846,-.823969,.428816,.346263,-.834376,.433882,.30488,-.847804,.440962,.251198,-.861629,.44911,.182775,-.874569,.453322,.099338,-.885769,.455397,-.027924,-.889828,.532304,.427198,-.730827,.534867,.417951,-.734306,.539079,.40202,-.740074,.544908,.378704,-.74807,.552202,.346904,-.75808,.560686,.305063,-.769738,.569842,.251381,-.782311,.577563,.184271,-.795251,.585833,.099399,-.804285,.588519,-.027924,-.807978,.639271,.42729,-.639271,.642354,.418043,-.642323,.64742,.402112,-.647389,.654408,.378796,-.654378,.663167,.346965,-.663137,.673391,.305155,-.67333,.684378,.251442,-.684347,.69509,.18363,-.695059,.70455,.098666,-.702719,.706809,-.027924,-.706809,.730827,.427198,-.532304,.734306,.417951,-.534837,.740104,.40202,-.539048,.7481,.378704,-.544877,.75811,.346904,-.552141,.769768,.305094,-.560656,.782342,.251381,-.569811,.79458,.183599,-.578722,.804285,.099399,-.585833,.807978,-.027924,-.588519,.804987,.426954,-.411908,.808832,.417676,-.413892,.81518,.401776,-.417127,.823969,.37846,-.421644,.834986,.34666,-.42729,.847804,.30488,-.433821,.86166,.251198,-.440931,.875088,.183447,-.447798,.8858,.099338,-.453291,.889828,-.027894,-.455397,.860439,.426435,-.278817,.863887,.41728,-.281991,.870663,.401379,-.284219,.880062,.378094,-.287271,.891781,.346294,-.291086,.905454,.304544,-.295541,.920194,.250954,-.300363,.934507,.183233,-.305063,.945921,.099216,-.308786,.950224,-.027894,-.310221,.89346,.426099,-.14185,.897702,.416852,-.142491,.904752,.400952,-.14362,.914457,.377697,-.145146,.926633,.345927,-.147099,.940794,.304209,-.149327,.956084,.250649,-.151769,.970916,.18302,-.154118,.982757,.099094,-.156011,.987213,-.027863,-.156743,.965361,-.211097,.153233,.977722,-.209784,-885e-6,.906125,-.397412,.144749,.918149,-.396161,-61e-6,.831202,-.540056,.13187,.841762,-.539811,-92e-6,.756584,-.64275,.119999,.7669,-.641743,-.001099,.693899,-.71157,.110141,.70278,-.711356,-92e-6,.649678,-.753166,.10303,.65804,-.752953,-61e-6,.631428,-.768914,.100223,.639546,-.768731,0,.658162,-.745537,.104556,.666646,-.745323,92e-6,.793695,-.595172,.125492,.80459,-.593799,122e-6,.939268,-.308969,.149205,.951109,-.308817,61e-6,.929136,-.211341,.303293,.872585,-.396771,.284768,.799799,-.540513,.260994,.727897,-.643208,.237495,.667501,-.712027,.21778,.624043,-.75396,.205145,.607318,-.769311,.198218,.633045,-.745964,.206732,.764367,-.59444,.249672,.904202,-.307901,.295938,.870052,-.211554,.445204,.81698,-.397168,.418012,.748741,-.540971,.383038,.681326,-.643635,.348521,.624714,-.712424,.319559,.584826,-.753929,.299173,.568316,-.769677,.29078,.592425,-.746361,.303262,.715476,-.594867,.366283,.8464,-.30958,.433241,.790002,-.211707,.575365,.741752,-.397412,.540178,.679708,-.541246,.494949,.618458,-.643941,.450331,.567034,-.712699,.412885,.530808,-.754204,.386517,.515793,-.769921,.375683,.537675,-.746605,.391736,.649434,-.595203,.47319,.768548,-.311136,.559008,.691092,-.211768,.691031,.648885,-.397504,.648762,.594592,-.541368,.59444,.540971,-.644032,.540849,.495987,-.71279,.495865,.464278,-.754295,.464156,.451155,-.770012,.451125,.47026,-.746696,.470382,.568041,-.595294,.568255,.672384,-.311258,.671529,.575427,-.211707,.789941,.5403,-.397443,.741661,.495102,-.541246,.679617,.450484,-.643941,.618336,.413038,-.712699,.566912,.386639,-.754204,.530717,.375683,-.769921,.515793,.391552,-.746605,.537767,.472976,-.595172,.649617,.559709,-.309793,.768548,.445296,-.211554,.870022,.418134,-.397168,.816919,.38432,-.540025,.748741,.348704,-.643635,.681234,.319742,-.712424,.624622,.299295,-.753929,.584765,.290811,-.769677,.568316,.303079,-.746361,.592517,.366039,-.594867,.715598,.433119,-.30958,.846492,.303385,-.211341,.929106,.284921,-.396771,.872555,.261177,-.540513,.799738,.236427,-.643941,.727592,.217963,-.712027,.66744,.204047,-.753563,.624866,.198248,-.769311,.607318,.207556,-.746513,.63213,.249397,-.59447,.764458,.295053,-.309275,.904019,.152379,-.212256,.965239,.144017,-.396374,.906705,.132054,-.540056,.831172,.120212,-.64275,.756554,.111484,-.71099,.694266,.103183,-.753166,.649648,.100223,-.768914,.631428,.104373,-.745537,.658193,.125614,-.59273,.795495,.149052,-.308969,.939299,885e-6,-.209784,.977722,61e-6,-.396161,.918149,92e-6,-.539811,.841762,92e-6,-.642506,.766259,92e-6,-.711356,.70278,-.001373,-.753349,.657582,0,-.768731,.639546,-92e-6,-.745323,.666646,-122e-6,-.593799,.80459,-61e-6,-.308817,.951109,-.153233,-.211097,.965361,-.144749,-.397412,.906125,-.13187,-.540056,.831202,-.119999,-.64275,.756584,-.11005,-.7116,.693899,-.10303,-.753166,.649678,-.0983,-.768853,.631764,-.104556,-.745537,.658162,-.126286,-.594012,.794458,-.149205,-.308969,.939268,-.303293,-.211341,.929136,-.284768,-.396771,.872585,-.260994,-.540513,.799799,-.237495,-.643208,.727897,-.21778,-.712027,.667501,-.203894,-.753563,.624928,-.198218,-.769311,.607318,-.208045,-.745384,.63329,-.249672,-.59444,.764367,-.295206,-.309305,.903958,-.444563,-.210364,.870663,-.418012,-.397168,.81698,-.383038,-.540971,.748741,-.348521,-.643635,.681326,-.319559,-.712424,.624714,-.299173,-.753929,.584826,-.29078,-.769677,.568316,-.303262,-.746361,.592425,-.366283,-.594867,.715476,-.433241,-.30958,.8464,-.575365,-.211707,.790002,-.540696,-.39848,.740837,-.494949,-.541246,.679708,-.450331,-.643941,.618458,-.412885,-.712699,.567034,-.386517,-.754204,.530808,-.375683,-.769921,.515793,-.391736,-.746605,.537675,-.47319,-.595203,.649434,-.559008,-.311136,.768548,-.691031,-.211768,.691092,-.648762,-.397504,.648885,-.59444,-.541368,.594592,-.540849,-.644032,.540971,-.495865,-.71279,.495987,-.464156,-.754295,.464278,-.451125,-.770012,.451155,-.470382,-.746696,.47026,-.568255,-.595294,.568041,-.671529,-.311258,.672384,-.789941,-.211707,.575427,-.741661,-.397443,.5403,-.679617,-.541246,.495102,-.618336,-.643941,.450484,-.566912,-.712699,.413038,-.530717,-.754204,.386639,-.515793,-.769921,.375683,-.537767,-.746605,.391552,-.649617,-.595172,.472976,-.768548,-.309793,.559709,-.870022,-.211554,.445296,-.816919,-.397168,.418134,-.74865,-.540971,.383221,-.681234,-.643635,.348704,-.624622,-.712424,.319742,-.584765,-.753929,.299295,-.567461,-.769646,.292581,-.592517,-.746361,.303079,-.715598,-.594867,.366039,-.846492,-.30958,.433119,-.929106,-.211341,.303385,-.872555,-.396771,.284921,-.800012,-.539598,.262246,-.727836,-.643208,.237678,-.66744,-.712027,.217963,-.624866,-.753563,.204047,-.607318,-.769311,.198248,-.634083,-.745384,.205664,-.764458,-.59447,.249397,-.904019,-.309305,.295053,-.965239,-.212256,.152379,-.906705,-.396374,.144017,-.831172,-.540056,.132054,-.756127,-.643452,.118992,-.693869,-.7116,.110233,-.649648,-.753166,.103183,-.631428,-.768914,.100223,-.658193,-.745537,.104373,-.794519,-.594012,.12598,-.939299,-.308969,.149052,-.977477,-.210974,31e-6,-.918149,-.396161,61e-6,-.841762,-.539811,92e-6,-.766259,-.642506,92e-6,-.70278,-.711356,92e-6,-.65804,-.752953,61e-6,-.639546,-.768731,0,-.666646,-.745323,-92e-6,-.80459,-.593799,-122e-6,-.951109,-.308817,-61e-6,-.965361,-.211097,-.153233,-.906735,-.396374,-.143895,-.831202,-.540056,-.13187,-.756584,-.64275,-.119999,-.693899,-.7116,-.11005,-.649678,-.753166,-.10303,-.631397,-.768914,-.100223,-.658162,-.745537,-.104556,-.794458,-.594012,-.126286,-.939268,-.308969,-.149205,-.929136,-.211341,-.303293,-.873318,-.395703,-.284097,-.800653,-.539567,-.260262,-.727897,-.643208,-.237495,-.667501,-.712027,-.21778,-.624928,-.753563,-.203894,-.607318,-.769311,-.198218,-.633045,-.745964,-.206732,-.764367,-.59444,-.249672,-.903958,-.309305,-.295206,-.870052,-.211554,-.445204,-.81698,-.397168,-.418012,-.747734,-.541856,-.383679,-.680258,-.644368,-.349254,-.624714,-.712424,-.319559,-.584826,-.753929,-.299173,-.568316,-.769677,-.290811,-.592425,-.746361,-.303262,-.715476,-.594867,-.366283,-.8464,-.30958,-.433241,-.790002,-.211707,-.575365,-.741752,-.397412,-.540178,-.679708,-.541246,-.494949,-.618458,-.643941,-.450331,-.568224,-.712088,-.412305,-.530808,-.754204,-.386517,-.515793,-.769921,-.375683,-.537675,-.746605,-.391736,-.649434,-.595203,-.47319,-.768487,-.309793,-.559832,-.691092,-.211768,-.691031,-.648885,-.397504,-.648762,-.594592,-.541368,-.59444,-.540971,-.644032,-.540849,-.495987,-.71279,-.495865,-.462935,-.754692,-.464888,-.451155,-.770012,-.451125,-.47026,-.746696,-.470382,-.568041,-.595294,-.568255,-.672201,-.309915,-.672323,-.575427,-.211707,-.789941,-.5403,-.397443,-.741661,-.495102,-.541246,-.679617,-.450484,-.643941,-.618336,-.413038,-.712699,-.566912,-.386639,-.754204,-.530717,-.375683,-.769921,-.515793,-.391552,-.746605,-.537767,-.472976,-.595172,-.649617,-.559709,-.309793,-.768548,-.445296,-.211554,-.870022,-.418134,-.397168,-.816919,-.383221,-.540971,-.74865,-.348704,-.643635,-.681234,-.319742,-.712424,-.624622,-.299295,-.753929,-.584765,-.29255,-.769646,-.567461,-.303903,-.74691,-.591388,-.366039,-.594867,-.715598,-.433119,-.30958,-.846461,-.303385,-.211341,-.929106,-.284921,-.396771,-.872555,-.261177,-.540513,-.799738,-.238868,-.642445,-.728141,-.217963,-.712027,-.66744,-.204047,-.753563,-.624866,-.198248,-.769311,-.607318,-.205664,-.745384,-.634083,-.249184,-.593188,-.765496,-.295053,-.309275,-.904019,-.152379,-.212256,-.965239,-.144017,-.396374,-.906705,-.133061,-.539109,-.831629,-.120212,-.64275,-.756554,-.10889,-.712149,-.693503,-.103183,-.753166,-.649648,-.100223,-.768914,-.631428,-.105502,-.746086,-.657399,-.12598,-.594012,-.794519,-.149052,-.308969,-.939299,-885e-6,-.209784,-.977722,-61e-6,-.396161,-.918149,-92e-6,-.539811,-.841762,0,-.642476,-.766289,-92e-6,-.711356,-.70278,-.001434,-.752556,-.658498,0,-.768731,-.639546,92e-6,-.745323,-.666646,641e-6,-.592547,-.805506,61e-6,-.308817,-.951109,.153233,-.211097,-.965361,.144749,-.397412,-.906125,.13187,-.540056,-.831202,.119999,-.64275,-.756584,.111179,-.71218,-.693106,.10303,-.753166,-.649678,.102145,-.768975,-.631062,.104556,-.745537,-.658162,.126286,-.594012,-.794458,.148442,-.310312,-.938932,.303293,-.211341,-.929136,.284768,-.396771,-.872585,.260994,-.540513,-.799799,.237495,-.643208,-.727897,.216865,-.711417,-.668447,.203894,-.753563,-.624928,.198218,-.769311,-.607318,.206732,-.745964,-.633045,.249672,-.59444,-.764367,.295206,-.309305,-.903958,.444563,-.210364,-.870663,.418012,-.397168,-.81698,.383038,-.540971,-.748741,.348521,-.643635,-.681326,.319559,-.712424,-.624714,.300272,-.754326,-.583758,.29078,-.769677,-.568316,.303262,-.746361,-.592425,.366283,-.594867,-.715476,.433241,-.30958,-.8464,.575365,-.211707,-.790002,.540696,-.39848,-.740837,.494949,-.541246,-.679708,.450331,-.643941,-.618458,.412885,-.712699,-.567034,.386517,-.754204,-.530808,.375683,-.769921,-.515793,.390362,-.747154,-.537889,.47319,-.595203,-.649434,.559832,-.309793,-.768487,.691031,-.211768,-.691092,.648762,-.397504,-.648885,.59444,-.541368,-.594592,.540849,-.644032,-.540971,.495865,-.71279,-.495987,.464156,-.754295,-.464278,.451125,-.770012,-.451155,.470382,-.746696,-.47026,.569262,-.594043,-.568346,.672323,-.309915,-.672201,.789941,-.211707,-.575427,.741661,-.397443,-.5403,.679617,-.541246,-.495102,.618336,-.643941,-.450484,.566912,-.712699,-.413038,.530717,-.754204,-.386639,.515793,-.769921,-.375683,.537797,-.746605,-.391552,.648518,-.596362,-.472976,.768548,-.309793,-.559709,.870022,-.211554,-.445296,.816919,-.397168,-.418134,.74865,-.540971,-.383221,.681234,-.643635,-.348704,.624622,-.712424,-.319742,.584765,-.753929,-.299295,.568316,-.769677,-.290811,.592517,-.746361,-.303079,.715598,-.594867,-.366039,.847163,-.308176,-.432752,.929106,-.211341,-.303385,.872555,-.396771,-.284921,.799738,-.540513,-.261177,.727836,-.643208,-.237678,.66744,-.712027,-.217963,.624866,-.753563,-.204047,.607318,-.769311,-.198248,.633106,-.745964,-.206549,.764458,-.59447,-.249397,.904019,-.309305,-.295053,.965361,-.211097,-.153325,.906705,-.396374,-.144017,.831172,-.540056,-.132054,.756554,-.64275,-.120212,.693869,-.7116,-.110233,.649648,-.753166,-.103183,.631397,-.768914,-.100223,.658193,-.745537,-.104373,.794519,-.594012,-.12598,.939299,-.308969,-.149052,.916135,-.373486,.14536,.927671,-.373333,-92e-6,.676534,-.728599,.106845,.683798,-.729667,-183e-6,.408185,-.910581,.064516,.41203,-.911161,305e-6,.24015,-.96997,.037843,.243233,-.969939,-214e-6,.145329,-.989105,.022828,.147191,-.989105,-214e-6,.089175,-.995911,.013916,.090304,-.995911,-214e-6,.05356,-.998505,.008271,.054231,-.998505,-183e-6,.029664,-.999542,.004486,.03003,-.999542,-183e-6,.014405,-.999878,.001953,.014557,-.999878,-305e-6,0,-1,0,.88171,-.373852,.287729,.650868,-.728965,.21189,.391034,-.911405,.127964,.232551,-.969665,.075228,.139744,-.989135,.045351,.085757,-.995911,.027741,.051546,-.998505,.016572,.028565,-.999542,.009095,.013916,-.999878,.004181,.825526,-.374218,.422376,.607929,-.730583,.310862,.365764,-.911618,.187506,.216041,-.970122,.110263,.129215,-.989349,.06653,.080233,-.995911,.040803,.048219,-.998535,.024445,.026734,-.999542,.013459,.013062,-.999878,.006317,.749535,-.374432,.545824,.551805,-.730857,.401654,.333293,-.9111,.242439,.196051,-.970183,.142491,.118656,-.989166,.086123,.072848,-.995941,.052767,.043794,-.998535,.031617,.024293,-.999542,.017426,.011902,-.999878,.008271,.654866,-.376019,.655507,.482681,-.730949,.482406,.292856,-.910428,.292062,.171484,-.970183,.171148,.103824,-.989166,.103488,.063723,-.995941,.063417,.038331,-.998535,.038026,.021271,-.999542,.020997,.010468,-.999878,.01001,.545183,-.375927,.74926,.40199,-.730857,.551561,.242836,-.9111,.333018,.141545,-.970519,.194952,.08652,-.989166,.118381,.053133,-.995941,.072573,.031983,-.998535,.04355,.017762,-.999542,.024049,.008789,-.999878,.011536,.422559,-.374187,.825465,.311197,-.730583,.607746,.189062,-.910276,.368267,.110691,-.970122,.215796,.067049,-.989166,.130528,.0412,-.995911,.08005,.024812,-.998535,.048036,.013794,-.999542,.026551,.006897,-.999878,.012787,.287942,-.373852,.881649,.212195,-.730186,.649434,.129093,-.910062,.39375,.074557,-.970397,.229591,.045808,-.989135,.139622,.028169,-.995911,.085604,.016999,-.998505,.051393,.009491,-.999542,.028413,.004822,-.999878,.013703,.145543,-.373516,.916105,.107364,-.729789,.675161,.065584,-.909879,.409589,.037507,-.970336,.238746,.023286,-.989105,.145268,.014344,-.995911,.089084,.008698,-.998505,.053499,.004883,-.999542,.029603,.002594,-.999878,.014313,92e-6,-.373333,.927671,519e-6,-.728446,.68508,214e-6,-.91052,.413404,-336e-6,-.970306,.241798,214e-6,-.989105,.147191,214e-6,-.995911,.090304,183e-6,-.998505,.054231,183e-6,-.999542,.03003,305e-6,-.999878,.014557,-.14536,-.373486,.916135,-.106967,-.729789,.675222,-.064852,-.911222,.40672,-.037843,-.96997,.24015,-.022828,-.989105,.145329,-.013916,-.995911,.089175,-.008271,-.998505,.05356,-.004486,-.999542,.029664,-.001953,-.999878,.014405,-.287729,-.373852,.88171,-.211798,-.730186,.649556,-.128025,-.910062,.394116,-.075106,-.970061,.230903,-.045351,-.989135,.139744,-.027741,-.995911,.085757,-.016572,-.998505,.051546,-.009095,-.999542,.028565,-.004181,-.999878,.013916,-.422376,-.374218,.825526,-.310862,-.730583,.607929,-.187628,-.910977,.36726,-.110141,-.970489,.214484,-.066622,-.989166,.130741,-.040803,-.995911,.080233,-.024445,-.998535,.048219,-.013459,-.999542,.026734,-.006317,-.999878,.013062,-.545824,-.374432,.749535,-.401654,-.730857,.551805,-.242439,-.9111,.333293,-.142491,-.970183,.196051,-.086123,-.989166,.118656,-.052767,-.995941,.072848,-.031617,-.998535,.043794,-.017426,-.999542,.024293,-.008271,-.999878,.011933,-.655507,-.376019,.654866,-.482406,-.730949,.482681,-.291177,-.91113,.291513,-.171148,-.970183,.171484,-.103488,-.989166,.103824,-.063417,-.995941,.063723,-.038026,-.998535,.038331,-.020997,-.999542,.021271,-.01001,-.999878,.010468,-.74926,-.375927,.545183,-.551561,-.730857,.40199,-.333018,-.9111,.242836,-.195746,-.970183,.142857,-.118381,-.989166,.08652,-.072573,-.995941,.053133,-.04355,-.998535,.031983,-.024049,-.999542,.017762,-.011536,-.999878,.008789,-.825465,-.374187,.422559,-.607746,-.730583,.311197,-.367046,-.910977,.188055,-.215796,-.970122,.110691,-.130528,-.989166,.067049,-.08005,-.995911,.0412,-.048036,-.998535,.024812,-.026551,-.999542,.013794,-.012787,-.999878,.006897,-.881649,-.373852,.287942,-.649434,-.730186,.212195,-.392376,-.910794,.1283,-.23075,-.970061,.075564,-.139622,-.989135,.045808,-.085604,-.995911,.028169,-.051393,-.998505,.016999,-.028413,-.999542,.009491,-.013703,-.999878,.004822,-.916105,-.373516,.145543,-.675161,-.729789,.107364,-.408094,-.910581,.065004,-.240059,-.96997,.038331,-.145268,-.989105,.023286,-.089084,-.995911,.014344,-.053499,-.998505,.008698,-.029603,-.999542,.004883,-.014313,-.999878,.002594,-.928281,-.371807,549e-6,-.683798,-.729667,183e-6,-.413404,-.91052,214e-6,-.243233,-.969939,214e-6,-.147191,-.989105,214e-6,-.090304,-.995911,214e-6,-.054231,-.998505,183e-6,-.03003,-.999542,183e-6,-.014557,-.999878,305e-6,-.916135,-.373486,-.14536,-.673971,-.730888,-.107303,-.408185,-.910581,-.064516,-.24015,-.96997,-.037843,-.145329,-.989105,-.022828,-.089175,-.995911,-.013916,-.05356,-.998505,-.008271,-.029664,-.999542,-.004486,-.014405,-.999878,-.001953,-.88171,-.373852,-.287729,-.649556,-.730186,-.211798,-.394116,-.910062,-.128025,-.230903,-.970061,-.075106,-.139744,-.989135,-.045351,-.085757,-.995911,-.027741,-.051546,-.998505,-.016572,-.028565,-.999542,-.009095,-.013916,-.999878,-.004181,-.825526,-.374218,-.422376,-.607929,-.730583,-.310862,-.36726,-.910977,-.187628,-.214484,-.970489,-.110141,-.130772,-.989166,-.066622,-.080233,-.995911,-.040803,-.048219,-.998535,-.024445,-.026734,-.999542,-.013459,-.013062,-.999878,-.006317,-.749535,-.374432,-.545824,-.553026,-.729667,-.402142,-.333293,-.9111,-.242439,-.196051,-.970183,-.142491,-.118656,-.989166,-.086123,-.072848,-.995941,-.052767,-.043794,-.998535,-.031617,-.024293,-.999542,-.017426,-.011902,-.999878,-.008271,-.65569,-.374554,-.655538,-.482681,-.730949,-.482406,-.290139,-.911771,-.290597,-.171484,-.970183,-.171148,-.103824,-.989166,-.103488,-.063723,-.995941,-.063417,-.038331,-.998535,-.038026,-.021271,-.999542,-.020997,-.010468,-.999878,-.01001,-.545976,-.374462,-.749413,-.402997,-.729667,-.552385,-.242836,-.9111,-.333018,-.142857,-.970183,-.195746,-.08652,-.989166,-.118381,-.053133,-.995941,-.072573,-.031983,-.998535,-.04355,-.017762,-.999542,-.024049,-.008789,-.999878,-.011536,-.422559,-.374187,-.825465,-.311197,-.730583,-.607746,-.187933,-.910886,-.36729,-.110691,-.970122,-.215796,-.067049,-.989166,-.130528,-.0412,-.995911,-.08002,-.024812,-.998535,-.048036,-.013794,-.999542,-.026551,-.006897,-.999878,-.012787,-.287942,-.373852,-.881649,-.212195,-.730186,-.649434,-.1283,-.910794,-.392376,-.075381,-.97,-.230995,-.045808,-.989135,-.139622,-.028169,-.995911,-.085604,-.016999,-.998505,-.051393,-.009491,-.999542,-.028413,-.004822,-.999878,-.013703,-.145543,-.373516,-.916105,-.107364,-.729789,-.675161,-.065004,-.910581,-.408094,-.038331,-.96997,-.240059,-.022462,-.989319,-.143956,-.014344,-.995911,-.089084,-.008698,-.998505,-.053499,-.004883,-.999542,-.029603,-.002594,-.999878,-.014313,-549e-6,-.371807,-.928281,-519e-6,-.728446,-.68508,-214e-6,-.91052,-.413434,-214e-6,-.969939,-.243233,-214e-6,-.989105,-.147191,-214e-6,-.995911,-.090304,-183e-6,-.998505,-.054231,-183e-6,-.999542,-.03003,-305e-6,-.999878,-.014557,.14536,-.373486,-.916135,.107303,-.730888,-.673971,.064852,-.911222,-.40672,.037751,-.969573,-.241768,.022828,-.989105,-.145329,.013916,-.995911,-.089175,.008271,-.998505,-.05356,.004486,-.999542,-.029664,.001953,-.999878,-.014405,.287851,-.373791,-.88168,.211798,-.730186,-.649556,.128025,-.910062,-.394116,.075106,-.970061,-.230903,.045473,-.989349,-.138218,.027741,-.995911,-.085757,.016572,-.998505,-.051546,.009095,-.999542,-.028565,.004181,-.999878,-.013916,.422376,-.374218,-.825526,.3108,-.731681,-.606647,.187628,-.910977,-.36726,.110538,-.970092,-.216071,.066622,-.989166,-.130772,.040803,-.995911,-.080233,.024445,-.998535,-.048219,.013459,-.999542,-.026734,.006317,-.999878,-.013062,.545824,-.374432,-.749535,.401654,-.730857,-.551775,.242439,-.9111,-.333293,.142491,-.970183,-.196051,.085788,-.98938,-.117191,.052767,-.995941,-.072848,.031617,-.998535,-.043794,.017426,-.999542,-.024293,.008271,-.999878,-.011902,.655538,-.374554,-.65569,.482406,-.730949,-.482681,.291177,-.91113,-.291513,.171148,-.970183,-.171484,.103488,-.989166,-.103824,.063417,-.995941,-.063723,.038026,-.998535,-.038331,.020997,-.999542,-.021271,.01001,-.999878,-.010468,.749413,-.374462,-.545976,.551561,-.730857,-.40199,.333018,-.9111,-.242836,.195746,-.970183,-.142857,.118381,-.989166,-.08652,.072573,-.995941,-.053133,.04355,-.998535,-.031983,.024049,-.999542,-.017762,.011536,-.999878,-.008789,.8258,-.372662,-.423231,.607746,-.730583,-.311197,.368267,-.910276,-.189062,.215796,-.970122,-.110691,.130528,-.989166,-.067049,.08002,-.995911,-.0412,.048036,-.998535,-.024812,.026551,-.999542,-.013794,.012787,-.999878,-.006897,.881649,-.373852,-.287942,.648457,-.731284,-.211341,.392376,-.910794,-.1283,.230995,-.97,-.075381,.139622,-.989135,-.045808,.085604,-.995911,-.028169,.051393,-.998505,-.016999,.028413,-.999542,-.009491,.013703,-.999878,-.004822,.916105,-.373516,-.145543,.676351,-.728599,-.107883,.408094,-.910581,-.065004,.240059,-.96997,-.038331,.143956,-.989319,-.022462,.089084,-.995911,-.014344,.053499,-.998505,-.008698,.029603,-.999542,-.004883,.014313,-.999878,-.002594,.001099,-.999969,.003693,.001099,-.98471,.174108,.004791,-.985717,.168279,.004761,-.999969,-.001984,.017487,-.98526,.170049,.017426,-.999847,0,.042421,-.984497,.17008,.042177,-.999084,0,.085482,-.981506,.171117,.084841,-.996368,0,.156377,-.972167,.174352,.155126,-.987884,61e-6,.270974,-.94528,.181555,.269143,-.963073,305e-6,.449141,-.872005,.194494,.448805,-.893613,549e-6,.686972,-.695547,.210334,.694754,-.719199,366e-6,.898312,-.380535,.21955,.918332,-.395795,-336e-6,.973876,-.052339,.220862,.998474,-.055177,-397e-6,.001068,-.924345,.381512,.00473,-.926695,.375713,.017151,-.926054,.376965,.041627,-.925321,.376843,.083834,-.921628,.378826,.152867,-.910062,.385174,.262612,-.878475,.39906,.427625,-.799097,.422498,.637867,-.625294,.449538,.81869,-.336894,.464949,.882473,-.044618,.468215,946e-6,-.778222,.627949,.004212,-.779992,.625721,.015259,-.779321,.626392,.036988,-.778771,.626179,.074282,-.774255,.628437,.134373,-.760094,.635731,.227027,-.724387,.650899,.359722,-.644612,.674551,.519517,-.490097,.699911,.65157,-.256661,.713828,.695181,-.0318,.718101,61e-5,-.470199,.882534,.002716,-.474929,.880001,.009857,-.476394,.879147,.023957,-.477065,.878506,.048006,-.474685,.878842,.086245,-.464766,.881191,.143681,-.43907,.886868,.222633,-.383679,.896207,.312906,-.283242,.906552,.382641,-.142857,.912748,.399304,-.016083,.916654,0,.004303,.999969,0,-.001679,.999969,-31e-6,.001343,.999969,-183e-6,.002625,.999969,-641e-6,.00412,.999969,-.001526,.005219,.999969,-.002777,.004975,.999969,-.003571,.002808,.999969,-.002655,122e-6,.999969,-122e-6,-763e-6,.999969,-.001221,-244e-6,.999969,-671e-6,.474105,.880428,-.003021,.473861,.880551,-.011048,.478256,.87814,-.02707,.47969,.87701,-.054689,.47673,.877316,-.098453,.463179,.880764,-.162206,.428663,.88876,-.243599,.359935,.900601,-.325816,.25135,.911374,-.380779,.121372,.916623,-.39491,.011841,.918607,-.00116,.778466,.627674,-.005158,.779199,.626728,-.018708,.780053,.625416,-.045686,.778466,.625965,-.091952,.770318,.63097,-.165563,.747459,.6433,-.27427,.69451,.66512,-.415693,.588427,.693442,-.560228,.415265,.716697,-.658681,.202765,.72457,-.690573,.019166,.722983,-.001434,.927335,.374187,-.006287,.926115,.377148,-.022828,.926115,.376507,-.055757,.924131,.377941,-.112705,.916593,.383587,-.204505,.894955,.396435,-.343211,.840754,.418683,-.527879,.721885,.447401,-.717154,.514115,.470473,-.842311,.251137,.476852,-.880612,.022553,.473251,-.001526,.986023,.16657,-.006684,.985046,.172033,-.024659,.985107,.170019,-.060305,.983367,.171148,-.122196,.976989,.174688,-.222846,.957671,.182134,-.377056,.905454,.194708,-.58507,.783013,.211035,-.798151,.559282,.223853,-.93527,.271859,.2266,-.974395,.023041,.223609,-.001556,.999969,-.003723,-.006806,.999969,.001984,-.025147,.999664,153e-6,-.061617,.998077,366e-6,-.124943,.992157,671e-6,-.22837,.97354,.001007,-.387371,.921903,.001312,-.602557,.798029,.001526,-.822352,.568926,.001556,-.961486,.274728,.001282,-.999725,.022217,458e-6,-.001526,.98471,-.174108,-.006684,.985717,-.168157,-.024628,.985137,-.169866,-.060335,.98349,-.170537,-.122379,.977172,-.173467,-.223457,.957884,-.180212,-.378491,.905393,-.192206,-.587695,.781854,-.207984,-.801355,.556108,-.220283,-.937223,.267922,-.223121,-.974761,.021485,-.222083,-.001404,.92581,-.377941,-.006195,.926786,-.375469,-.022736,.925993,-.376812,-.055605,.924131,-.377972,-.1124,.916776,-.38316,-.204169,.895535,-.395367,-.343364,.841609,-.416852,-.529527,.722251,-.444838,-.720847,.512223,-.466842,-.846004,.247108,-.472396,-.881924,.020539,-.470901,-.00116,.778222,-.627949,-.005158,.778893,-.627094,-.018586,.779351,-.62627,-.04532,.777642,-.627033,-.091159,.769646,-.631886,-.164098,.747337,-.643818,-.272378,.695425,-.664937,-.414869,.590228,-.692434,-.562334,.416028,-.714591,-.662954,.200842,-.721183,-.69274,.017701,-.720939,-671e-6,.4738,-.880612,-.003021,.475082,-.87991,-.010926,.476455,-.879116,-.026612,.476455,-.87878,-.053377,.47203,-.87994,-.095523,.457747,-.883908,-.157262,.424146,-.891812,-.237709,.358104,-.90289,-.32194,.251778,-.912656,-.381146,.121525,-.916471,-.394452,.01117,-.918821,0,-.004303,-.999969,0,-336e-6,-.999969,31e-6,-.00116,-.999969,153e-6,-.002228,-.999969,458e-6,-.00354,-.999969,.001099,-.00473,-.999969,.002136,-.005341,-.999969,.003357,-.004791,-.999969,.003845,-.002899,-.999969,.002258,-732e-6,-.999969,397e-6,-31e-6,-.999969,61e-5,-.477676,-.878506,.002716,-.473708,-.880673,.009949,-.477981,-.878292,.024293,-.479659,-.877102,.048891,-.47795,-.87701,.088198,-.467818,-.879391,.146977,-.440138,-.8858,.226661,-.380688,-.896451,.314951,-.276284,-.907987,.379772,-.137333,-.914792,.396619,-.015412,-.917814,946e-6,-.780877,-.624653,.004212,-.777825,-.628437,.01532,-.780175,-.625355,.037172,-.779962,-.624714,.074618,-.775719,-.626606,.135014,-.761711,-.633656,.228278,-.725639,-.649068,.361797,-.643727,-.674306,.520676,-.484817,-.702719,.647816,-.251015,-.71923,.691733,-.03122,-.721458,.001068,-.927305,-.374218,.00473,-.925321,-.379101,.017182,-.926328,-.376263,.041566,-.925657,-.375988,.083529,-.922147,-.377667,.152074,-.910916,-.383496,.260994,-.879971,-.396832,.425611,-.801141,-.420698,.636464,-.625813,-.450789,.81634,-.335276,-.47026,.880459,-.04471,-.471938,.001099,-.986023,-.16657,.004791,-.985046,-.172124,.017457,-.98529,-.169836,.042238,-.984527,-.169866,.084841,-.981628,-.170812,.15479,-.972533,-.173711,.267769,-.94644,-.180303,.444197,-.874905,-.192785,.682485,-.700034,-.209967,.896512,-.383312,-.222022,.973357,-.053102,-.222907,.963652,.146306,.223426,.988708,.149663,122e-6,.937437,.266396,.224006,.962462,.271401,305e-6,.902829,.368908,.220862,.927152,.374615,122e-6,.860805,.461959,.213446,.883724,.467971,-214e-6,.810602,.549516,.202338,.831446,.555559,-641e-6,.750755,.632893,.189093,.769158,.639027,-.001007,.680074,.711661,.176092,.695761,.718253,-.001221,.597919,.78399,.166814,.610706,.791833,-.001282,.504776,.847285,.165136,.514389,.85754,-.001099,.455977,.874264,.166509,.870846,.132908,.47322,.846065,.244179,.4738,.815424,.340678,.467971,.779992,.429701,.454909,.738609,.514786,.435224,.688955,.596728,.411298,.628712,.674123,.387555,.556444,.743736,.370373,.472274,.801202,.367382,.426862,.82461,.371136,.682211,.10474,.723594,.661489,.194739,.724204,.638539,.274789,.718833,.614612,.350688,.706534,.588336,.425703,.68746,.556627,.500198,.663259,.515732,.571673,.638081,.462569,.634693,.618976,.395978,.6816,.615253,.357219,.697226,.621448,.386944,.059786,.920133,.374096,.112491,.92053,.361461,.160619,.918424,.350047,.207617,.913419,.338939,.255715,.905362,.326029,.305307,.894681,.307962,.35432,.882931,.281228,.397351,.873501,.243477,.425977,.871334,.216254,.426984,.877987,-641e-6,-153e-6,.999969,-.002258,-916e-6,.999969,-.003754,-.002136,.999969,-.005066,-.003815,.999969,-.006012,-.005676,.999939,-.006226,-.007263,.999939,-.00531,-.00766,.999939,-.003204,-.005799,.999969,-488e-6,-.001434,.999969,336e-6,61e-5,.999969,-.386761,-.060945,.920133,-.376812,-.119449,.918516,-.362255,-.173925,.915677,-.347056,-.22602,.910184,-.331248,-.27662,.902066,-.313486,-.325022,.892209,-.291757,-.36848,.882656,-.26429,-.402417,.876461,-.230384,-.421247,.877163,-.208289,-.420301,.883114,-.683096,-.108554,.72219,-.659383,-.212012,.721274,-.626606,-.306986,.7163,-.589435,-.393384,.705527,-.550005,-.471511,.689291,-.50856,-.541124,.669698,-.464705,-.60094,.650288,-.41792,-.64864,.636067,-.368023,-.681173,.632862,-.340068,-.691855,.636891,-.870632,-.13889,.471877,-.83871,-.272195,.471633,-.791681,-.393475,.467299,-.735679,-.499893,.456984,-.675314,-.590869,.441359,-.613697,-.666921,.422529,-.552507,-.728965,.404126,-.492721,-.777734,.390271,-.434797,-.813776,.385571,-.404614,-.828394,.387341,-.962645,-.153783,.222755,-.926756,-.302194,.223121,-.871792,-.436964,.22132,-.80459,-.553026,.216163,-.731803,-.649007,.207862,-.658498,-.726127,.197729,-.587939,-.786798,.187628,-.521805,-.833888,.179693,-.460799,-.869808,.176122,-.430555,-.885159,.176183,-.987457,-.157689,61e-6,-.95056,-.310465,336e-6,-.893277,-.449446,.001068,-.822565,-.568621,.001892,-.745811,-.666128,.002564,-.668844,-.74337,.002991,-.595508,-.803308,.003052,-.527726,-.849391,.002686,-.466201,-.88464,.001892,-.436872,-.899503,.001465,-.962676,-.153478,-.222816,-.926878,-.30195,-.222846,-.872036,-.43733,-.219703,-.804682,-.554277,-.212714,-.731498,-.65099,-.202673,-.657735,-.728507,-.19129,-.58681,-.7893,-.180639,-.520524,-.836085,-.173132,-.459578,-.871487,-.170934,-.43086,-.886013,-.171209,-.870479,-.138249,-.472365,-.838557,-.271004,-.47261,-.792047,-.392529,-.467452,-.736534,-.499893,-.455611,-.676382,-.59212,-.438002,-.614612,-.669424,-.417219,-.552995,-.732353,-.397229,-.49263,-.781549,-.382672,-.434248,-.817408,-.37846,-.405927,-.831507,-.379162,-.682485,-.107791,-.722861,-.657826,-.209967,-.723258,-.625233,-.304209,-.71868,-.588702,-.390515,-.707724,-.550127,-.469497,-.690573,-.509507,-.540788,-.66924,-.466201,-.602741,-.647542,-.419477,-.652516,-.631031,-.369213,-.686514,-.626362,-.342906,-.697989,-.62862,-.387463,-.060762,-.919858,-.373302,-.117191,-.920255,-.356822,-.169439,-.918638,-.340403,-.219123,-.914365,-.32429,-.267739,-.907254,-.307321,-.315378,-.897794,-.287423,-.360118,-.887478,-.262429,-.397717,-.879147,-.230873,-.422071,-.876644,-.210395,-.424726,-.88049,-.001587,-31e-6,-.999969,.001831,671e-6,-.999969,.00351,.001831,-.999969,.005188,.00351,-.999969,.0065,.005524,-.999939,.00708,.007447,-.999939,.0065,.008301,-.999939,.004578,.00708,-.999939,.001801,.003327,-.999969,183e-6,336e-6,-.999969,.38789,.060213,-.919706,.376965,.1142,-.919126,.365307,.163945,-.916318,.354381,.212683,-.91055,.34312,.262215,-.901914,.32899,.312235,-.891201,.308695,.359691,-.88049,.279397,.398785,-.873409,.24015,.422285,-.87405,.213172,.421216,-.881527,.683096,.105197,-.722678,.663686,.196204,-.721763,.640584,.276955,-.716178,.615864,.353191,-.704215,.588275,.427808,-.686178,.55501,.501053,-.663991,.512772,.570482,-.64156,.459029,.631092,-.625263,.392926,.675954,-.623432,.353099,.68984,-.631977,.871303,.133091,-.472304,.847163,.244606,-.471664,.816248,.340953,-.466323,.780297,.429426,-.454573,.738395,.513688,-.436842,.688406,.594745,-.415143,.628132,.671285,-.393384,.556139,.740379,-.377453,.472304,.797754,-.374767,.424543,.820887,-.381939,.963805,.146184,-.222907,.937834,.265938,-.222877,.903378,.367809,-.220374,.861568,.460158,-.214209,.811701,.547044,-.204535,.752312,.629994,-.192572,.682028,.70867,-.180425,.600024,.781396,-.17127,.506516,.845454,-.169195,.455184,.873287,-.173528,-.081393,.996673,855e-6,-.082766,.95819,.273873,-.182226,.949553,.255135,-.186468,.982452,-977e-6,-.402203,.882717,.242836,-.419111,.907926,-519e-6,-.629597,.742119,.229865,-.655354,.755303,61e-6,-.798364,.561693,.216987,-.826533,.562883,427e-6,-.884854,.413526,.214454,-.913694,.406323,946e-6,-.909207,.344096,.234291,-.943571,.331065,.00293,-.890835,.363903,.271859,-.936766,.34962,.014252,-.833552,.458388,.308298,-.890744,.454207,.014954,-.723075,.607318,.329051,-.782708,.622211,.013184,-.592547,.740379,.317301,-.637226,.770623,.007019,-.079073,.828822,.55388,-.158818,.837275,.523148,-.341258,.79284,.504868,-.538743,.688406,.48558,-.694266,.547166,.467513,-.776421,.42732,.463149,-.790887,.369213,.48796,-.760033,.379162,.527757,-.690176,.443831,.57149,-.585833,.548173,.596851,-.483108,.654042,.582049,-.060945,.606189,.792962,-.110752,.633778,.765526,-.227912,.620045,.750694,-.365642,.5674,.737754,-.485092,.487472,.725944,-.553758,.41319,.722892,-.564989,.371014,.73693,-.543352,.368664,.754204,-.484054,.398267,.779107,-.406262,.451003,.794671,-.338633,.521653,.783044,-.024323,.317881,.947783,-.033418,.343425,.938566,-.060976,.360179,.930876,-.109073,.365307,.924436,-.163427,.353038,.921201,-.201972,.330699,.921842,-.225593,.31312,.922513,-.242714,.306986,.920225,-.239753,.310831,.919706,-.211859,.313761,.925535,-.183477,.345561,.920255,.02942,-.002747,.999542,.069247,-.005249,.997559,.146214,.02588,.988891,.211463,.077822,.974273,.233345,.136113,.962798,.199469,.180486,.963103,.154973,.190344,.96939,.100253,.178869,.978729,.053865,.14716,.98764,.026612,.08121,.996338,-.005036,.087649,.996124,.095676,-.329173,.93939,.167943,-.3202,.93231,.318949,-.267403,.909238,.454543,-.172185,.873897,.532823,-.068636,.84341,.538591,.008087,.842524,.483657,.040345,.874294,.398358,.023621,.916898,.303903,-.037751,.951933,.224891,-.160924,.960997,.178228,-.247139,.952422,.16129,-.612445,.773858,.254555,-.591357,.76516,.456099,-.512528,.7275,.629749,-.375011,.680258,.731956,-.23191,.640645,.75808,-.133488,.638325,.723106,-.10007,.683432,.645161,-.135929,.751854,.533952,-.235725,.811945,.408856,-.402478,.819025,.316172,-.530168,.786706,.213813,-.8193,.531938,.319926,-.789575,.523606,.546251,-.682028,.48619,.735374,-.511155,.444838,.844966,-.341044,.411878,.882199,-.232063,.40968,.869137,-.206336,.449385,.815271,-.267678,.513443,.710349,-.406873,.574297,.552049,-.5992,.579791,.410108,-.739341,.533952,.244972,-.933653,.261177,.357341,-.898373,.255318,.59154,-.771783,.233192,.785119,-.582446,.210456,.896207,-.399304,.193152,.938536,-.286966,.191748,.938871,-.268899,.214911,.903012,-.34904,.250343,.808039,-.515244,.285531,.631947,-.719596,.287698,.454939,-.852901,.25605,.254463,-.967071,-244e-6,.370037,-.929014,.001434,.604816,-.79635,-397e-6,.798944,-.601367,-.001343,.90997,-.414655,-.002564,.953154,-.302347,-.005493,.956847,-.290536,-.004517,.925108,-.379589,-.0047,.831263,-.555834,-.003937,.648,-.76162,-.001984,.464156,-.885739,58e-5,.244331,-.932463,-.26606,.360942,-.898099,-.251137,.594043,-.769463,-.234504,.787194,-.578387,-.213813,.897153,-.394116,-.199286,.937284,-.282022,-.204749,.93527,-.269234,-.229713,.896969,-.353832,-.264931,.800134,-.522477,-.294504,.624104,-.726707,-.286935,.455397,-.855098,-.247688,.211615,-.812311,-.543443,.324656,-.790979,-.518571,.549211,-.677664,-.488937,.737083,-.504929,-.44911,.844172,-.333964,-.419294,.877041,-.224891,-.424482,.860317,-.202582,-.467757,.80633,-.26606,-.528184,.705924,-.407086,-.579577,.552355,-.603992,-.57448,.417249,-.747215,-.517197,.157781,-.598926,-.785058,.259011,-.592853,-.762505,.458022,-.505448,-.731223,.629292,-.367534,-.684744,.727928,-.224372,-.647877,.749138,-.126164,-.650258,.712668,-.094394,-.69509,.641011,-.130741,-.756279,.539262,-.23075,-.80987,.418195,-.400372,-.815332,.328806,-.541215,-.773888,.092746,-.316172,-.944151,.169073,-.316141,-.9335,.317911,-.25895,-.912046,.450514,-.165685,-.877224,.526292,-.063936,-.847865,.532456,.01062,-.84637,.483749,.04178,-.874172,.408948,.025513,-.912168,.320231,-.034242,-.946715,.237678,-.15482,-.958892,.188635,-.253395,-.948759,.026704,.012177,-.999542,.067202,.004852,-.997711,.141758,.032716,-.989349,.206244,.080081,-.975188,.23542,.131718,-.962889,.22187,.169103,-.960295,.174017,.185308,-.967132,.124271,.174932,-.976684,.074313,.144383,-.986694,.035279,.082919,-.995911,.004608,.075625,-.997101,-.027406,.340892,-.939695,-.034486,.339091,-.940092,-.058412,.351634,-.934294,-.099124,.354686,-.929685,-.146214,.34434,-.927366,-.189581,.327158,-.925748,-.212073,.310007,-.926756,-.216315,.300211,-.928983,-.212867,.300485,-.929716,-.192907,.302133,-.933531,-.167852,.33549,-.926939,-.062746,.628956,-.774865,-.112003,.629627,-.768761,-.226661,.61626,-.754173,-.361217,.56505,-.741752,-.484146,.486709,-.727073,-.55855,.41203,-.719871,-.570421,.370251,-.733116,-.536149,.368786,-.75927,-.475448,.399548,-.783746,-.400128,.454512,-.79577,-.323527,.520768,-.790002,-.078921,.84167,-.534165,-.157476,.833888,-.528977,-.338908,.791009,-.509323,-.537431,.687948,-.487686,-.697012,.547197,-.463332,-.78045,.427534,-.45616,-.798395,.369091,-.475661,-.768273,.378979,-.515824,-.696493,.445875,-.562151,-.588946,.553148,-.58916,-.472274,.657918,-.586566,-.081881,.960875,-.264534,-.178899,.949004,-.259468,-.400098,.882931,-.245552,-.628864,.742668,-.230049,-.797937,.563097,-.21485,-.88461,.416242,-.210181,-.911374,.345622,-.223426,-.89996,.359844,-.24604,-.845241,.453566,-.282479,-.734275,.604846,-.308115,-.591937,.743431,-.311289,-.487045,.82577,.284341,-.523179,.852168,.005341,-.41023,.878323,.245369,-.440596,.897671,.00354,-.322306,.926633,.193396,-.345347,.938444,.001648,-.207404,.970916,.119388,-.220405,.975402,183e-6,.02884,.998627,-.043153,.045991,.998932,-427e-6,.486465,.810877,-.325205,.597827,.801599,61e-6,.828059,.178014,-.531571,.99176,.128025,-61e-5,.766106,-.397382,-.505081,.874203,-.485488,-.002441,.641835,-.645894,-.413312,.706992,-.707205,-732e-6,.59389,-.723289,-.352275,.641102,-.767296,.014069,-.399213,.746117,.532792,-.33726,.820429,.461592,-.266823,.891598,.365795,-.172918,.958739,.225532,-.004975,.998871,-.046999,.277993,.838435,-.468703,.512131,.313913,-.799463,.534227,-.192511,-.823084,.487686,-.483077,-.727134,.468368,-.592792,-.65511,-.283395,.618854,.732597,-.242225,.729118,.640065,-.19367,.838191,.509781,-.128849,.94113,.312418,-.027528,.999359,-.021882,.12656,.868374,-.479446,.261971,.461287,-.847652,.310099,.030824,-.950194,.311869,-.274331,-.909635,.311289,-.402783,-.860714,-.152409,.440138,.884884,-.132115,.599872,.789087,-.108982,.764977,.634724,-.08066,.916837,.391003,-.036714,.999176,.015595,.031892,.895566,-.443739,.096225,.585192,-.805139,.133122,.235694,-.962645,.148503,-.049745,-.98764,.15302,-.175329,-.972533,92e-6,.189184,.981933,275e-6,.407819,.913053,-.007294,.651875,.758263,-.021729,.878719,.476791,-.034333,.997681,.058504,-.031343,.918668,-.39375,-.019379,.687521,-.725883,-.006928,.422193,-.906461,214e-6,.186102,-.982513,-92e-6,.084201,-.996429,.162847,-.139439,.976714,.158879,.116214,.980407,.133976,.454817,.880428,.068331,.81109,.580889,-.018921,.994201,.105716,-.078494,.938505,-.336161,-.107364,.775506,-.622089,-.122349,.593524,-.795434,-.134342,.427442,-.893979,-.142827,.359355,-.922178,.306131,-.48732,.817774,.329417,-.266579,.905759,.334147,.1236,.934355,.231941,.673696,.701651,.018128,.987457,.156713,-.116703,.955962,-.269265,-.177831,.851344,-.493484,-.216254,.743858,-.632344,-.246712,.648366,-.720206,-.261177,.609119,-.748802,.392712,-.745628,.538285,.450179,-.620045,.642506,.540788,-.30015,.78576,.515885,.418775,.747276,.098636,.975066,.198645,-.148289,.970489,-.190039,-.232917,.911618,-.338633,-.284646,.857753,-.427992,-.3249,.81225,-.48442,-.342357,.792352,-.504898,.423933,-.871273,.247169,.492996,-.816095,.301492,.646443,-.640858,.413923,.839137,.172155,.515915,.243599,.954619,.171209,-.170629,.980468,-.097476,-.267312,.948943,-.167302,-.323038,.922971,-.209143,-.365398,.901181,-.23307,-.383343,.890774,-.243965,.429762,-.902921,-.003784,.49913,-.866482,-.005585,.664022,-.747581,-.011902,.9935,.113559,-.002747,.339152,.940703,-427e-6,-.178411,.983947,61e-6,-.278146,.960509,-61e-6,-.33491,.942228,-.00119,-.37669,.926328,336e-6,-.39433,.918943,-.003815,.424818,-.868404,-.255684,.495376,-.809107,-.31608,.65389,-.610645,-.446638,.833308,.198798,-.515763,.265908,.94821,-.173711,-.170568,.980468,.097781,-.266854,.948882,.168371,-.323588,.922636,.209784,-.36552,.900266,.236427,-.384136,.893246,.233467,.392529,-.738731,-.547838,.44966,-.603107,-.658803,.536363,-.262734,-.802026,.525101,.400555,-.750847,.128513,.966033,-.224067,-.147282,.970916,.188696,-.232521,.911405,.339427,-.284371,.856563,.430555,-.323832,.808954,.490616,-.345256,.79989,.490829,.305002,-.480758,-.822077,.327219,-.255165,-.909818,.333079,.128056,-.934141,.248299,.646321,-.721519,.033448,.982238,-.184484,-.115574,.957091,.265694,-.178045,.850765,.49443,-.216224,.743126,.633229,-.244911,.644246,.724509,-.265938,.620472,.737724,.163945,-.142705,-.976074,.160283,.111942,-.980682,.137577,.445204,-.884762,.076357,.798334,-.597308,-.012696,.991913,-.126072,-.077792,.940977,.329325,-.106937,.774407,.623554,-.122776,.592425,.796167,-.133915,.426679,.894406,-.146123,.366894,.918699,.004883,.179937,-.983642,.002777,.4008,-.916135,-.004975,.645985,-.763298,-.01886,.87463,-.484359,-.032075,.997009,-.070132,-.0318,.922025,.385754,-.018067,.686117,.727226,-.006653,.417493,.908628,122e-6,.18244,.983184,61e-6,.083468,.99649,-.144963,.435713,-.888302,-.127293,.59859,-.790857,-.106662,.764153,-.636128,-.079501,.916654,-.391675,-.03531,.999146,-.020386,.030519,.898953,.436933,.098422,.584094,.805658,.134678,.227638,.964354,.148381,-.056398,.987304,.146428,-.166662,.975066,-.27839,.616779,-.736229,-.236976,.728477,-.64275,-.189245,.83932,-.509598,-.126743,.942778,-.308298,-.025422,.999451,.020692,.125065,.871242,.474624,.264595,.462783,.846034,.312235,.022217,.949736,.310862,-.279855,.908292,.295785,-.384472,.874447,-.398419,.746239,-.533219,-.335337,.820368,-.463149,-.263253,.892178,-.366955,-.169317,.960204,-.222022,-.002014,.998932,.04593,.276925,.840632,.465407,.514298,.319681,.795801,.535569,-.196783,.821223,.485763,-.483444,.728202,.449782,-.573473,.684683,-.489883,.826411,-.277444,-.411908,.878597,-.241615,-.322336,.926786,-.192602,-.205267,.971465,-.118564,.028748,.998749,.040193,.483016,.814325,.321787,.827906,.189062,.52797,.768212,-.394696,.503983,.642506,-.642689,.417249,.5833,-.713767,.387585,.130131,.991272,.020875,.13184,.991241,366e-6,0,1,0,.415082,.907376,.065645,.420362,.907346,244e-6,.887143,.439711,.139988,.899014,.43788,336e-6,.951415,-.268838,.149937,.963195,-.268715,-61e-6,.792627,-.596728,.124882,.802637,-.596423,-92e-6,.736778,-.666036,.116276,.746178,-.6657,31e-6,.775842,-.619037,.121586,.786218,-.617939,92e-6,.908231,-.393109,.143254,.919584,-.392834,-488e-6,.970702,.184118,.154302,.983551,.180548,-336e-6,.667135,.737358,.105869,.675436,.737388,-183e-6,.125065,.991272,.040986,.399182,.90759,.129826,.853359,.441725,.276833,.915983,-.269204,.297372,.762749,-.597369,.247597,.709525,-.666555,.228523,.746605,-.619739,.241798,.874569,-.392346,.28486,.934355,.183996,.305124,.641743,.737785,.209235,.116916,.991302,.059999,.373394,.907834,.190649,.799799,.440291,.407971,.857265,-.271218,.437605,.714011,-.59801,.363994,.663411,-.667318,.33842,.699088,-.619587,.356822,.818781,-.393078,.418348,.874935,.183905,.44789,.600665,.738121,.307108,.10596,.991333,.077486,.337626,.908719,.245277,.726005,.440535,.528001,.778832,-.269875,.566179,.648,-.598468,.471023,.602008,-.667745,.437757,.634327,-.620136,.461562,.74337,-.392163,.541795,.794397,.183844,.578875,.546495,.737114,.397443,.092502,.991333,.093051,.295907,.908078,.296304,.635121,.438795,.635639,.680898,-.269967,.680776,.566485,-.598621,.566301,.526261,-.667898,.5262,.554552,-.620319,.554674,.649892,-.393811,.650014,.695303,.182043,.695242,.476943,.738456,.476638,.076876,.991333,.106388,.245491,.908719,.337474,.527787,.440565,.726157,.566912,-.268197,.778863,.472335,-.597491,.647969,.437819,-.667745,.601978,.461867,-.62096,.63329,.541002,-.395032,.742454,.578845,.182104,.794794,.397198,.738365,.544969,.059328,.991302,.117252,.190161,.907834,.373669,.40791,.43849,.800806,.437513,-.26957,.857814,.363048,-.598926,.713736,.336741,-.667379,.664205,.356731,-.619648,.699088,.418348,-.393048,.818812,.44734,.183996,.87521,.307474,.738151,.600452,.040254,.991272,.125309,.129215,.908322,.397748,.27723,.441755,.853206,.297525,-.269204,.915952,.248817,-.596393,.763115,.230323,-.666677,.708853,.243568,-.61977,.745994,.285104,-.393811,.873836,.304544,.184057,.934507,.209632,.737815,.641591,.020112,.991272,.130253,.065279,.908109,.413556,.139622,.43791,.888089,.149541,-.270455,.951018,.126011,-.595752,.793176,.114322,-.666097,.737022,.123447,-.619068,.775536,.143315,-.390332,.909421,.153691,.184149,.970794,.106082,.73748,.666951,-366e-6,.991241,.13184,122e-6,.908078,.418775,-336e-6,.43788,.899014,458e-6,-.267037,.963683,92e-6,-.596423,.802637,-.001923,-.665792,.746117,-122e-6,-.617908,.786218,-61e-5,-.389996,.920804,31e-6,.182409,.983215,183e-6,.737388,.675436,-.020875,.991272,.130131,-.065645,.907376,.415082,-.139866,.439619,.887204,-.149937,-.268838,.951415,-.125706,-.597674,.791803,-.114414,-.665914,.737175,-.121586,-.619068,.775842,-.143284,-.393078,.908261,-.153996,.182318,.971099,-.105655,.73748,.667043,-.040986,.991272,.125065,-.128971,.908322,.397839,-.277444,.439985,.85403,-.297678,-.270821,.915403,-.247017,-.596423,.763695,-.230293,-.666677,.708853,-.242897,-.618915,.74694,-.28486,-.392315,.874569,-.305155,.183966,.934355,-.209235,.737785,.641743,-.059999,.991302,.116916,-.190649,.907834,.373424,-.408551,.438459,.800501,-.437391,-.269601,.857875,-.363994,-.59801,.714011,-.340068,-.667409,.662465,-.356914,-.619648,.698996,-.418378,-.393048,.818812,-.44789,.183874,.874966,-.307108,.738121,.600665,-.077486,.991333,.10596,-.246529,.908017,.338664,-.528001,.440535,.726005,-.566179,-.269875,.778832,-.471023,-.598468,.648,-.437757,-.667745,.602008,-.461531,-.620136,.634327,-.540147,-.395032,.743065,-.578845,.183844,.794397,-.397443,.737114,.546495,-.093051,.991333,.092502,-.296304,.908078,.295907,-.634846,.440626,.634632,-.680776,-.269967,.680898,-.566301,-.598621,.566485,-.5262,-.667898,.526261,-.554674,-.620319,.554552,-.649159,-.395215,.649892,-.695242,.183874,.694815,-.476638,.738456,.476943,-.106388,.991333,.076876,-.338969,.908017,.246101,-.726157,.440535,.527787,-.778741,-.269875,.566301,-.647877,-.598468,.471236,-.601978,-.667745,.437819,-.634419,-.620136,.461379,-.742454,-.395032,.540971,-.794733,.183905,.578356,-.544969,.738365,.397198,-.117252,.991302,.059328,-.373669,.907834,.190161,-.799921,.440321,.407697,-.857814,-.269601,.437513,-.71392,-.59801,.364208,-.663411,-.667318,.33845,-.698019,-.620472,.357372,-.818018,-.394513,.418531,-.87521,.183966,.44734,-.600452,.738151,.307474,-.125309,.991272,.040254,-.397748,.908322,.129215,-.853206,.441755,.27723,-.916257,-.267525,.298044,-.762688,-.597369,.24781,-.708335,-.666585,.232154,-.745994,-.61977,.243599,-.874569,-.392346,.284829,-.934751,.182165,.304971,-.641591,.737815,.209632,-.128544,.991485,.020234,-.415174,.907376,.065127,-.888089,.43791,.139622,-.951018,-.270455,.149541,-.792077,-.597644,.124058,-.736778,-.666036,.116245,-.77636,-.618213,.122623,-.909452,-.390301,.143315,-.970794,.184149,.153691,-.665792,.738609,.105411,-.13184,.991241,-366e-6,-.422132,.906522,-397e-6,-.898099,.439741,-122e-6,-.963195,-.268715,61e-6,-.802637,-.596423,92e-6,-.746178,-.6657,-31e-6,-.785577,-.618732,916e-6,-.920194,-.391369,0,-.983215,.182409,31e-6,-.675436,.737388,183e-6,-.130131,.991272,-.020875,-.415082,.907376,-.065645,-.886349,.44145,-.1395,-.951415,-.268838,-.149937,-.792627,-.596728,-.124882,-.737175,-.665914,-.114414,-.775842,-.619037,-.121586,-.90878,-.391644,-.143864,-.971099,.182257,-.154057,-.667043,.73748,-.105655,-.125065,.991272,-.040986,-.397839,.908322,-.128971,-.853328,.441725,-.276833,-.915983,-.269173,-.297433,-.762749,-.597369,-.247597,-.709525,-.666555,-.228523,-.74694,-.618885,-.242927,-.874569,-.392315,-.28486,-.934355,.183996,-.305124,-.6404,.738945,-.209296,-.116916,.991302,-.059999,-.373424,.907834,-.190649,-.79989,.440199,-.407849,-.857265,-.271218,-.437605,-.712973,-.598956,-.364513,-.663411,-.667318,-.33842,-.699088,-.619587,-.356822,-.818781,-.393078,-.418348,-.874966,.183874,-.44789,-.600665,.738121,-.307108,-.10596,.991333,-.077486,-.338664,.908017,-.246529,-.726005,.440535,-.528001,-.778161,-.271493,-.566301,-.648,-.598468,-.471023,-.602008,-.667745,-.437757,-.634327,-.620136,-.461562,-.74337,-.392163,-.541795,-.794397,.183844,-.578875,-.546495,.737114,-.397443,-.092502,.991333,-.093051,-.295083,.90878,-.2949,-.634632,.440626,-.634846,-.680898,-.269967,-.680776,-.566485,-.598621,-.566301,-.526261,-.667898,-.5262,-.554552,-.620319,-.554674,-.649892,-.395215,-.649159,-.695303,.182043,-.695242,-.476943,.738456,-.476638,-.076876,.991333,-.106388,-.246101,.908017,-.339,-.528153,.438704,-.727012,-.566301,-.269875,-.778741,-.471236,-.598468,-.647877,-.437819,-.667745,-.601978,-.461867,-.62096,-.63329,-.541002,-.395032,-.742454,-.578356,.183905,-.794763,-.397198,.738365,-.544969,-.059328,.991302,-.117252,-.190161,.907834,-.373669,-.407697,.440321,-.799921,-.437513,-.269601,-.857814,-.364208,-.59801,-.71392,-.33845,-.667318,-.663411,-.357341,-.620472,-.69805,-.418348,-.393048,-.818812,-.44734,.183996,-.87521,-.307474,.738151,-.600452,-.040254,.991272,-.125309,-.129215,.908322,-.397748,-.27723,.441755,-.853206,-.297525,-.269204,-.915952,-.248817,-.596393,-.763115,-.230323,-.666677,-.708853,-.243599,-.61977,-.745994,-.284829,-.392376,-.874569,-.304544,.184027,-.934507,-.209632,.737815,-.641591,-.020112,.991272,-.130253,-.065127,.907376,-.415174,-.139622,.43791,-.888089,-.149541,-.270455,-.951018,-.125095,-.596728,-.792596,-.114353,-.666097,-.737022,-.123447,-.619068,-.775536,-.143315,-.390301,-.909452,-.153691,.184118,-.970794,-.106082,.73748,-.666951,366e-6,.991241,-.13184,244e-6,.907346,-.420362,122e-6,.439741,-.898099,-61e-6,-.268715,-.963195,-92e-6,-.596423,-.802637,31e-6,-.6657,-.746178,92e-6,-.617939,-.786218,61e-5,-.389996,-.920804,-336e-6,.180548,-.983551,-183e-6,.737388,-.675436,.020875,.991272,-.130131,.065645,.907376,-.415082,.139988,.439711,-.887143,.149937,-.268838,-.951415,.124882,-.596728,-.792627,.116276,-.666036,-.736778,.121586,-.619068,-.775842,.143254,-.393109,-.908231,.153996,.182318,-.971099,.10593,.738609,-.665731,.040986,.991272,-.125065,.129826,.90759,-.399182,.276833,.441725,-.853359,.297372,-.269204,-.915983,.247597,-.597369,-.762749,.228523,-.666555,-.709525,.241768,-.619739,-.746605,.28486,-.392346,-.874569,.305155,.183996,-.934355,.209418,.736534,-.643117,.059999,.991302,-.116916,.190649,.907834,-.373424,.40727,.44203,-.799188,.437605,-.271218,-.857265,.363567,-.597034,-.715049,.33842,-.667318,-.663411,.356822,-.619587,-.699088,.418348,-.393078,-.818781,.44789,.183905,-.874935,.307108,.738121,-.600665,.077486,.991333,-.10596,.246529,.908017,-.338664,.528031,.440535,-.726005,.566301,-.271493,-.778161,.471023,-.598468,-.648,.439253,-.667837,-.600818,.461562,-.620136,-.634327,.541795,-.392163,-.74337,.578875,.183874,-.794397,.397443,.737114,-.546495,.093051,.991333,-.092502,.296304,.908078,-.295907,.634846,.440626,-.634632,.680776,-.269967,-.680898,.566301,-.598621,-.566485,.5262,-.667898,-.526261,.554674,-.620319,-.554552,.650014,-.393811,-.649892,.695242,.180181,-.695791,.476638,.738456,-.476943,.106388,.991333,-.076876,.339,.908017,-.246101,.726157,.440535,-.527787,.778741,-.269875,-.566301,.647877,-.598468,-.471236,.601978,-.667745,-.437819,.63329,-.62096,-.461867,.742454,-.395032,-.541002,.794794,.182073,-.578875,.544237,.739525,-.396069,.117252,.991302,-.059328,.373669,.907834,-.190161,.799921,.440321,-.407697,.857814,-.26957,-.437513,.714194,-.597034,-.365276,.663411,-.667318,-.33845,.69805,-.620472,-.357372,.818812,-.393048,-.418348,.875362,.182134,-.447768,.600452,.738151,-.307474,.125309,.991272,-.040254,.399365,.90762,-.129307,.854122,.440016,-.277139,.915952,-.269204,-.297525,.762688,-.597369,-.24781,.709372,-.666738,-.228492,.745994,-.61977,-.243568,.874569,-.392376,-.284829,.934538,.184057,-.304544,.640553,.738945,-.208808,.130253,.991272,-.020112,.413556,.908109,-.065279,.887173,.439741,-.139683,.951415,-.268838,-.15009,.792596,-.596728,-.125095,.736778,-.666036,-.116245,.77633,-.618275,-.122501,.909421,-.390332,-.143315,.970794,.184149,-.153691,.666951,.73748,-.106082,.373669,.925657,.059053,.37846,.925596,-214e-6,.245491,.968596,.038728,.248665,.968566,-183e-6,.183111,.982665,.028871,.185461,.982635,-153e-6,.154698,.98764,.024445,.156713,.98761,-92e-6,.149968,.988372,.023835,.151952,.988372,31e-6,.168889,.98526,.026948,.171148,.985229,153e-6,.222266,.974334,.035463,.225196,.974303,183e-6,.348674,.935575,.055574,.353252,.935514,214e-6,.669454,.73513,.106479,.677999,.735038,214e-6,.838862,.528703,.12946,.848903,.528489,-.003632,.35783,.926389,.117161,.236061,.968688,.076815,.176061,.982696,.057253,.148747,.987671,.048433,.144169,.988403,.04709,.162358,.98529,.053133,.21363,.974395,.069948,.335215,.935728,.109653,.643971,.735496,.210425,.807733,.529191,.259804,.336161,.925993,.171728,.220832,.968749,.112735,.164708,.982727,.084078,.139164,.987701,.071078,.134831,.988433,.069033,.15183,.985321,.077853,.199805,.974456,.102451,.313547,.93585,.16068,.602649,.735862,.308634,.756737,.529618,.383129,.305063,.926084,.2219,.200415,.96881,.145695,.14948,.982757,.108646,.126286,.987732,.09183,.122318,.988464,.089145,.13773,.985351,.100497,.181249,.974487,.132267,.284433,.935942,.207465,.546922,.736137,.398633,.687613,.529923,.496323,.26545,.926695,.265969,.175298,.96881,.174993,.130741,.982757,.130497,.110446,.987732,.110294,.106967,.988464,.107028,.120426,.985351,.12064,.158452,.974487,.158757,.248115,.936521,.247658,.478317,.736229,.478652,.60213,.530076,.597003,.222266,.926084,.304788,.146031,.96881,.20014,.110202,.982543,.149785,.092013,.987732,.126164,.09003,.988525,.12122,.100253,.985351,.137913,.131932,.974487,.181494,.206702,.936491,.283242,.398938,.734855,.548448,.502213,.529954,.683309,.172155,.925993,.335948,.113132,.968749,.220649,.084384,.982727,.164556,.069887,.987793,.138981,.068941,.988433,.134892,.077334,.985137,.153325,.102084,.974456,.199988,.160253,.93585,.313761,.308664,.734581,.604205,.38963,.529649,.75341,.117466,.92584,.359172,.077212,.968688,.235908,.057588,.982696,.175939,.048616,.987671,.148686,.046999,.988403,.1442,.052828,.98529,.16245,.069521,.974395,.213782,.109195,.935728,.335368,.209998,.735496,.644124,.266762,.529221,.805444,.059511,.925657,.373577,.039155,.968596,.24543,.029206,.982665,.18305,.024659,.98764,.154668,.023743,.988372,.149968,.026643,.98526,.16895,.035066,.974334,.222327,.055086,.935575,.348766,.106052,.73513,.669546,.136692,.528733,.837703,61e-5,.924986,.379986,183e-6,.968566,.248665,153e-6,.982635,.185461,92e-6,.98761,.156713,-31e-6,.988372,.151952,-153e-6,.985229,.171148,-183e-6,.974303,.225196,-214e-6,.935514,.353252,-214e-6,.735038,.677999,.003632,.528489,.848903,-.059053,.925657,.373669,-.039247,.968932,.244118,-.028871,.982665,.183111,-.024445,.98764,.154698,-.023835,.988372,.149968,-.026948,.98526,.168889,-.035463,.974334,.222266,-.055574,.935575,.348674,-.106479,.73513,.669454,-.12946,.528703,.838862,-.117008,.92584,.359325,-.076815,.968688,.236061,-.057253,.982696,.176061,-.048433,.987671,.148747,-.04709,.988403,.144169,-.053133,.98529,.162358,-.069948,.974395,.21363,-.109653,.935728,.335215,-.209632,.736686,.642903,-.259804,.529191,.807733,-.171728,.925993,.336161,-.112735,.968749,.220832,-.084078,.982727,.164708,-.071078,.987701,.139164,-.069033,.988433,.134831,-.077853,.985321,.15183,-.102451,.974456,.199805,-.16068,.93585,.313547,-.308634,.735893,.602649,-.386242,.529679,.75512,-.2219,.926084,.305063,-.145695,.96881,.200415,-.108646,.982757,.14948,-.09183,.987732,.126286,-.089145,.988464,.122318,-.100497,.985351,.13773,-.132267,.974487,.181249,-.207465,.935942,.284433,-.398633,.736137,.546922,-.496292,.529923,.687613,-.265969,.926695,.26545,-.174993,.96881,.175298,-.130497,.982757,.130741,-.110294,.987732,.110446,-.107028,.988464,.106967,-.12064,.985351,.120426,-.158757,.974487,.158452,-.249062,.935972,.248726,-.478652,.736229,.478317,-.597003,.530076,.60213,-.304788,.926084,.222266,-.20014,.96881,.146031,-.149266,.982757,.108921,-.126164,.987732,.092013,-.122379,.988464,.089084,-.137913,.985351,.100253,-.181494,.974487,.131932,-.283242,.936491,.206702,-.547197,.736137,.398297,-.683309,.529954,.502213,-.335948,.925993,.172155,-.220649,.968749,.113132,-.164556,.982727,.084384,-.139042,.987701,.071261,-.134892,.988433,.068941,-.151982,.985321,.077578,-.199988,.974456,.102084,-.313761,.93585,.160253,-.604205,.734581,.308664,-.75341,.529649,.38963,-.359172,.92584,.117466,-.235908,.968688,.077212,-.175939,.982696,.057588,-.148686,.987671,.048616,-.1442,.988403,.046999,-.161199,.985443,.053438,-.212348,.97467,.069826,-.335368,.935728,.109195,-.644124,.735496,.209998,-.805444,.529221,.266762,-.373577,.925657,.059511,-.24543,.968596,.039155,-.18305,.982665,.029206,-.154668,.98764,.024659,-.149968,.988372,.023743,-.16895,.98526,.026643,-.223792,.973998,.03473,-.350352,.934965,.054994,-.669546,.73513,.106052,-.837703,.528733,.136692,-.37846,.925596,214e-6,-.248665,.968566,183e-6,-.185461,.982635,153e-6,-.156713,.98761,92e-6,-.151952,.988372,-31e-6,-.171148,.985229,-153e-6,-.225196,.974303,-183e-6,-.351817,.936033,336e-6,-.677999,.735038,-214e-6,-.848903,.528489,.003632,-.373669,.925657,-.059053,-.245491,.968596,-.038728,-.183111,.982665,-.028871,-.154698,.98764,-.024445,-.149968,.988372,-.023835,-.168889,.98526,-.026948,-.222266,.974334,-.035463,-.348674,.935575,-.055574,-.670797,.733848,-.106937,-.838862,.528703,-.12946,-.359325,.92584,-.117008,-.236061,.968688,-.076815,-.176061,.982696,-.057253,-.148747,.987671,-.048433,-.144169,.988403,-.04709,-.162358,.98529,-.053133,-.21363,.974395,-.069948,-.335215,.935728,-.109653,-.643971,.735496,-.210425,-.807733,.529191,-.259804,-.336161,.925993,-.171728,-.220832,.968749,-.112735,-.164708,.982727,-.084078,-.139164,.987701,-.071078,-.134831,.988433,-.069033,-.15183,.985321,-.077853,-.199805,.974456,-.102451,-.313547,.93585,-.16068,-.602649,.735862,-.308634,-.756737,.529618,-.383129,-.305063,.926084,-.2219,-.200415,.96881,-.145695,-.14948,.982757,-.108646,-.126286,.987732,-.09183,-.122318,.988464,-.089145,-.13773,.985351,-.100497,-.181249,.974487,-.132267,-.284433,.935942,-.207465,-.546922,.736137,-.398633,-.687613,.529923,-.496323,-.26545,.926695,-.265969,-.175298,.96881,-.174993,-.130741,.982757,-.130497,-.110446,.987732,-.110294,-.106967,.988464,-.107028,-.120426,.985351,-.12064,-.158452,.974487,-.158757,-.248115,.936521,-.247658,-.477737,.737388,-.477432,-.602161,.530045,-.597003,-.222266,.926084,-.304788,-.147282,.968444,-.200995,-.108921,.982757,-.149266,-.092013,.987732,-.126164,-.089084,.988464,-.122379,-.100253,.985351,-.137913,-.131932,.974487,-.181494,-.206702,.936491,-.283242,-.398938,.734855,-.548448,-.499374,.529923,-.685385,-.172155,.925993,-.335948,-.113132,.968749,-.220649,-.083102,.98294,-.163976,-.071261,.987701,-.139073,-.068941,.988433,-.134892,-.077578,.985321,-.151982,-.102084,.974456,-.199988,-.160253,.93585,-.313761,-.308664,.734581,-.604205,-.38963,.529649,-.75341,-.117466,.92584,-.359172,-.077212,.968688,-.235908,-.057588,.982696,-.175939,-.048616,.987671,-.148686,-.046999,.988403,-.1442,-.053438,.985443,-.161199,-.069521,.974395,-.213782,-.109195,.935728,-.335368,-.209998,.735496,-.644124,-.266762,.529221,-.805444,-.060152,.925047,-.375011,-.039155,.968596,-.24543,-.029206,.982665,-.18305,-.024659,.98764,-.154668,-.023743,.988372,-.149968,-.026643,.98526,-.16895,-.03473,.973998,-.223792,-.055086,.935575,-.348766,-.106052,.73513,-.669546,-.136692,.528733,-.837703,-214e-6,.925596,-.37846,488e-6,.968902,-.247383,-153e-6,.982635,-.185461,-92e-6,.98761,-.156713,31e-6,.988372,-.151952,153e-6,.985229,-.171148,183e-6,.974303,-.225196,214e-6,.935514,-.353252,214e-6,.735038,-.677999,-.003632,.528489,-.848903,.059053,.925657,-.373638,.038728,.968596,-.245491,.028871,.982665,-.183111,.024445,.98764,-.154698,.023835,.988372,-.149968,.026948,.98526,-.168889,.035463,.974334,-.222266,.055574,.935575,-.348674,.106479,.73513,-.669454,.12946,.528703,-.838862,.117008,.92584,-.359325,.076815,.968688,-.236061,.057253,.982696,-.176061,.048433,.987671,-.148747,.04709,.988403,-.144169,.053133,.98529,-.162358,.069948,.974395,-.21363,.109653,.935728,-.335215,.210425,.735496,-.643971,.259804,.529191,-.807733,.171667,.926542,-.334666,.112735,.968749,-.220832,.084078,.982727,-.164708,.071078,.987701,-.139164,.069033,.988433,-.134831,.077853,.985321,-.15183,.102451,.974456,-.199805,.16068,.93585,-.313547,.308634,.735862,-.602649,.383129,.529618,-.756737,.2219,.926084,-.305063,.145695,.96881,-.200415,.108646,.982757,-.14948,.09183,.987732,-.126286,.089145,.988464,-.122318,.100497,.985351,-.13773,.132267,.974487,-.181249,.206153,.936491,-.283639,.397534,.737297,-.546159,.496323,.529923,-.687613,.265969,.926695,-.26545,.174993,.96881,-.175298,.130497,.982757,-.130741,.110294,.987732,-.110446,.107028,.988464,-.106967,.12064,.985351,-.120426,.157353,.974792,-.158086,.249062,.936003,-.248726,.479781,.734947,-.479171,.599475,.530045,-.599689,.304788,.926084,-.222266,.20014,.96881,-.146031,.149785,.982543,-.110202,.126164,.987732,-.092013,.122379,.988464,-.089084,.137913,.985351,-.100253,.181494,.974487,-.131932,.284738,.935881,-.207343,.547197,.736137,-.398297,.683309,.529923,-.502213,.335948,.925993,-.172155,.220649,.968749,-.113132,.164556,.982727,-.084384,.138981,.987793,-.069887,.134892,.988433,-.068941,.151982,.985321,-.077578,.199988,.974456,-.102084,.313761,.93585,-.160253,.604205,.734581,-.308664,.75341,.529649,-.38963,.359172,.92584,-.117466,.235908,.968688,-.077212,.175939,.982696,-.057588,.148686,.987671,-.048616,.1442,.988403,-.046999,.16245,.98529,-.052828,.212348,.97467,-.069826,.335368,.935728,-.109195,.644124,.735496,-.209998,.805444,.529221,-.266762,.373577,.925657,-.059511,.24543,.968596,-.039155,.18305,.982665,-.029206,.154668,.98764,-.024659,.149968,.988372,-.023743,.16895,.98526,-.026643,.222327,.974334,-.035066,.350352,.934965,-.054994,.669546,.73513,-.106052,.837703,.528733,-.136692]),_.setData(i.default.S_UV0,[.684148,.5,.681346,.442629,.679187,.443206,.681961,.5,.67834,.443432,.681102,.5,.67862,.443358,.681386,.5,.679843,.443031,.682625,.5,.681825,.442501,.684633,.5,.684383,.441818,.687224,.5,.687331,.44103,.690211,.5,.690487,.440187,.693408,.5,.693666,.439338,.696628,.5,.696683,.438531,.699685,.5,.673219,.388447,.671142,.389569,.670327,.390009,.670596,.389864,.671773,.389228,.67368,.388198,.676141,.38687,.678978,.385338,.682014,.383699,.685073,.382047,.687976,.380479,.660185,.338126,.658239,.339753,.657475,.340392,.657728,.340181,.65883,.339259,.660617,.337765,.662923,.335836,.665581,.333614,.668425,.331235,.671291,.328838,.674011,.326563,.642661,.292336,.640892,.294423,.640197,.295243,.640426,.294972,.641429,.293789,.643054,.291872,.645151,.289399,.647568,.286547,.650156,.283495,.652762,.280421,.655236,.277502,.621066,.251748,.619513,.254244,.618903,.255224,.619105,.2549,.619984,.253486,.62141,.251194,.62325,.248237,.625371,.244828,.62764,.24118,.629927,.237505,.632097,.234016,.595815,.217035,.594516,.21988,.594007,.220996,.594175,.220628,.594911,.219016,.596104,.216403,.597642,.213033,.599416,.209147,.601315,.204989,.603228,.2008,.605043,.196823,.567328,.188867,.566316,.191995,.565918,.193223,.56605,.192817,.566623,.191045,.567553,.188173,.568753,.184467,.570135,.180194,.571615,.175622,.573106,.171016,.574521,.166643,.536022,.167916,.535324,.171255,.535051,.172565,.535141,.172132,.535536,.170241,.536177,.167175,.537004,.163219,.537957,.158659,.538977,.153779,.540004,.148863,.540979,.144196,.502315,.154853,.501956,.158323,.501815,.159685,.501861,.159235,.502065,.157269,.502394,.154083,.502819,.149972,.503309,.145232,.503834,.14016,.504362,.13505,.504864,.1302,.466623,.15035,.466623,.153865,.466623,.155245,.466623,.154789,.466623,.152797,.466623,.149569,.466623,.145405,.466623,.140603,.466623,.135465,.466623,.130288,.466623,.125375,.427534,.154853,.428813,.158323,.429692,.159685,.430219,.159235,.430448,.157269,.430427,.154083,.43021,.149972,.429845,.145232,.429385,.14016,.428881,.13505,.428382,.1302,.391854,.167916,.394007,.171255,.395446,.172565,.396264,.172132,.39655,.170241,.396398,.167175,.395899,.16322,.395145,.158659,.394227,.153779,.393237,.148863,.392267,.144196,.359751,.188867,.362435,.191995,.364171,.193223,.365081,.192817,.365291,.191045,.364922,.188173,.364099,.184467,.362944,.180194,.361582,.175622,.360134,.171016,.358725,.166643,.33139,.217035,.334326,.21988,.336147,.220996,.336999,.220628,.337031,.219016,.336388,.216403,.335217,.213033,.333667,.209147,.331883,.204989,.330013,.2008,.328203,.196823,.306937,.251748,.309911,.254244,.311658,.255224,.312343,.2549,.312129,.253486,.311181,.251194,.309661,.248237,.307734,.244828,.305564,.24118,.303315,.237505,.301149,.234016,.286558,.292336,.289419,.294424,.290988,.295243,.291439,.294972,.290947,.293789,.289689,.291872,.287838,.289399,.285569,.286547,.283059,.283495,.280481,.280421,.278011,.277503,.270418,.338126,.273081,.339753,.274418,.340392,.274612,.340181,.273845,.339259,.272299,.337765,.270155,.335837,.267594,.333614,.2648,.331235,.261953,.328838,.259235,.326564,.258685,.388448,.261126,.389569,.262232,.390009,.26219,.389864,.261183,.389229,.259398,.388199,.257019,.38687,.254232,.385338,.251221,.383699,.248172,.382047,.24527,.38048,.251523,.44263,.253784,.443206,.254713,.443433,.254497,.443358,.253322,.443031,.251374,.442501,.24884,.441818,.245905,.44103,.242756,.440187,.23958,.439338,.236563,.438532,.249099,.5,.251286,.5,.252144,.5,.251861,.5,.250621,.5,.248613,.5,.246022,.5,.243035,.5,.239839,.5,.236618,.5,.233561,.5,.251901,.557371,.254059,.556794,.254907,.556568,.254627,.556642,.253404,.556969,.251421,.557499,.248864,.558182,.245915,.55897,.24276,.559813,.239581,.560662,.236563,.561469,.260027,.611553,.262104,.610431,.26292,.609991,.26265,.610136,.261473,.610772,.259566,.611802,.257105,.61313,.254268,.614662,.251232,.616301,.248174,.617953,.24527,.619521,.273061,.661874,.275007,.660247,.275771,.659608,.275519,.659819,.274416,.660741,.272629,.662235,.270324,.664164,.267666,.666386,.264821,.668765,.261956,.671162,.259236,.673437,.290585,.707664,.292355,.705577,.29305,.704757,.29282,.705028,.291817,.706211,.290192,.708128,.288095,.710601,.285678,.713453,.283091,.716505,.280485,.719579,.278011,.722498,.312181,.748252,.313734,.745756,.314343,.744776,.314142,.7451,.313262,.746514,.311836,.748806,.309997,.751763,.307876,.755172,.305606,.75882,.30332,.762495,.301149,.765984,.337431,.782965,.33873,.78012,.33924,.779004,.339071,.779372,.338336,.780984,.337143,.783597,.335604,.786967,.33383,.790853,.331931,.795011,.330019,.7992,.328203,.803177,.365918,.811133,.366931,.808005,.367328,.806777,.367197,.807183,.366623,.808955,.365693,.811827,.364494,.815533,.363111,.819806,.361631,.824378,.36014,.828984,.358725,.833357,.397224,.832084,.397922,.828745,.398196,.827435,.398105,.827868,.39771,.829759,.397069,.832825,.396243,.836781,.39529,.841341,.39427,.846221,.393243,.851137,.392267,.855804,.430932,.845147,.431291,.841677,.431432,.840315,.431385,.840765,.431182,.842731,.430852,.845917,.430427,.850028,.429937,.854768,.429412,.85984,.428884,.86495,.428383,.8698,.466623,.84965,.466623,.846135,.466623,.844755,.466623,.845211,.466623,.847203,.466623,.850431,.466623,.854595,.466623,.859397,.466623,.864535,.466623,.869712,.466623,.874625,.502315,.845147,.501956,.841677,.501815,.840315,.501862,.840765,.502065,.842731,.502394,.845917,.502819,.850028,.50331,.854768,.503834,.85984,.504363,.86495,.504864,.8698,.536022,.832084,.535325,.828745,.535051,.827435,.535141,.827868,.535536,.829759,.536177,.832825,.537004,.83678,.537957,.841341,.538977,.846221,.540004,.851137,.540979,.855804,.567328,.811133,.566316,.808005,.565919,.806777,.56605,.807183,.566623,.808955,.567553,.811827,.568753,.815533,.570136,.819806,.571616,.824378,.573106,.828984,.574522,.833357,.595815,.782965,.594517,.78012,.594007,.779004,.594175,.779372,.594911,.780984,.596104,.783597,.597643,.786967,.599417,.790853,.601315,.795011,.603228,.7992,.605043,.803177,.621066,.748252,.619513,.745756,.618903,.744776,.619105,.7451,.619985,.746514,.62141,.748806,.62325,.751763,.625371,.755172,.62764,.75882,.629927,.762495,.632097,.765984,.642661,.707664,.640892,.705576,.640197,.704757,.640426,.705028,.641429,.706211,.643054,.708128,.645151,.710601,.647568,.713453,.650156,.716505,.652762,.719579,.655236,.722497,.660185,.661874,.658239,.660247,.657475,.659608,.657728,.659819,.65883,.660741,.660617,.662235,.662923,.664163,.665581,.666386,.668425,.668765,.671291,.671162,.674011,.673436,.673219,.611552,.671142,.610431,.670327,.609991,.670596,.610136,.671773,.610771,.67368,.611801,.676141,.61313,.678978,.614662,.682014,.616301,.685073,.617953,.687976,.61952,.681346,.55737,.679187,.556794,.67834,.556567,.67862,.556642,.679843,.556969,.681825,.557499,.684383,.558182,.687331,.55897,.690487,.559813,.693666,.560662,.696683,.561468,.708148,.435468,.711299,.5,.719383,.432467,.722681,.5,.730157,.429588,.733596,.5,.740241,.426893,.743811,.5,.749405,.424445,.753095,.5,.757419,.422304,.761213,.5,.764053,.420531,.767933,.5,.769075,.419189,.773022,.5,.772258,.418339,.776246,.5,.77337,.418042,.777372,.5,.699007,.374523,.709816,.368687,.720183,.363089,.729886,.35785,.738703,.353089,.746413,.348926,.752796,.34548,.757628,.34287,.76069,.341217,.76176,.340639,.684346,.31792,.694473,.309451,.704186,.301328,.713276,.293726,.721537,.286817,.728761,.280776,.734741,.275775,.739269,.271989,.742138,.269589,.74314,.268751,.664635,.266415,.673845,.255549,.682679,.245129,.690946,.235376,.698459,.226513,.705029,.218763,.710467,.212348,.714586,.20749,.717195,.204412,.718106,.203337,.640343,.220761,.648424,.207772,.656174,.195315,.663427,.183656,.670018,.173061,.675782,.163796,.680553,.156127,.684166,.15032,.686455,.14664,.687255,.145355,.611941,.181715,.618701,.16691,.625183,.152711,.631251,.139422,.636765,.127345,.641586,.116784,.645577,.108043,.6486,.101423,.650514,.09723,.651183,.095764,.579898,.150031,.585167,.133752,.590221,.11814,.59495,.103528,.599248,.090249,.603007,.078637,.606118,.069025,.608473,.061747,.609966,.057136,.610488,.055524,.544685,.126465,.548316,.10909,.551798,.092426,.555057,.07683,.558019,.062657,.560609,.050264,.562753,.040004,.564377,.032236,.565405,.027314,.565765,.025594,.50677,.111771,.508637,.093713,.510428,.076394,.512104,.060184,.513627,.045454,.51496,.032573,.516062,.02191,.516897,.013836,.517426,.00872,.517611,.006933,.466623,.106706,.466623,.088412,.466623,.070867,.466623,.054446,.466623,.039523,.466623,.026473,.466623,.015672,.466623,.007493,.466623,.00231,.466623,499e-6,.426477,.111771,.424609,.093713,.422818,.076394,.421142,.060184,.419619,.045454,.418287,.032573,.417184,.02191,.416349,.013836,.41582,.008721,.415635,.006933,.388562,.126465,.384931,.10909,.381448,.092426,.378189,.07683,.375227,.062657,.372637,.050264,.370493,.040004,.36887,.032236,.367841,.027314,.367482,.025595,.353348,.150031,.348079,.133752,.343026,.11814,.338296,.103528,.333998,.090249,.33024,.078637,.327129,.069026,.324773,.061747,.32328,.057136,.322759,.055524,.321305,.181715,.314546,.16691,.308063,.152711,.301996,.139422,.296482,.127345,.29166,.116785,.287669,.108043,.284647,.101424,.282732,.09723,.282063,.095764,.292903,.220761,.284823,.207772,.277073,.195315,.26982,.183656,.263228,.173061,.257464,.163796,.252693,.156127,.24908,.15032,.246791,.14664,.245991,.145355,.268612,.266415,.259401,.25555,.250568,.245129,.2423,.235376,.234787,.226514,.228217,.218763,.222779,.212348,.218661,.20749,.216052,.204412,.21514,.203337,.248901,.317921,.238773,.309451,.229061,.301329,.21997,.293726,.211709,.286818,.204485,.280776,.198505,.275776,.193977,.271989,.191109,.26959,.190106,.268751,.23424,.374524,.22343,.368687,.213064,.363089,.203361,.35785,.194544,.35309,.186833,.348926,.180451,.34548,.175618,.342871,.172556,.341217,.171486,.34064,.225099,.435468,.213864,.432467,.203089,.429588,.193005,.426894,.183841,.424445,.175827,.422304,.169194,.420532,.164171,.41919,.160988,.418339,.159877,.418042,.221947,.5,.210566,.5,.199651,.5,.189435,.5,.180151,.5,.172033,.5,.165313,.5,.160225,.5,.157001,.5,.155874,.5,.225099,.564532,.213864,.567533,.20309,.570412,.193005,.573107,.183841,.575555,.175827,.577696,.169194,.579469,.164171,.580811,.160989,.581661,.159877,.581958,.23424,.625477,.22343,.631313,.213064,.636911,.203361,.64215,.194544,.646911,.186833,.651074,.180451,.65452,.175618,.65713,.172556,.658783,.171486,.659361,.248901,.68208,.238773,.690549,.229061,.698672,.21997,.706274,.211709,.713183,.204485,.719224,.198505,.724225,.193977,.728011,.191109,.730411,.190106,.731249,.268612,.733585,.259401,.744451,.250568,.754871,.2423,.764624,.234787,.773487,.228217,.781237,.222779,.787652,.218661,.79251,.216052,.795588,.21514,.796663,.292903,.779239,.284823,.792228,.277073,.804685,.26982,.816344,.263228,.826939,.257464,.836204,.252693,.843873,.24908,.84968,.246791,.85336,.245991,.854645,.321305,.818285,.314546,.83309,.308063,.847289,.301996,.860578,.296482,.872655,.29166,.883216,.287669,.891957,.284647,.898577,.282732,.902771,.282063,.904236,.353348,.849969,.348079,.866248,.343026,.88186,.338296,.896472,.333998,.909751,.33024,.921363,.327129,.930975,.324773,.938253,.32328,.942864,.322759,.944476,.388562,.873535,.384931,.89091,.381448,.907574,.378189,.92317,.375227,.937343,.372637,.949737,.370493,.959996,.36887,.967764,.367841,.972686,.367482,.974406,.426477,.888229,.424609,.906287,.422819,.923606,.421142,.939816,.419619,.954546,.418287,.967427,.417184,.97809,.416349,.986164,.41582,.99128,.415636,.993067,.466623,.893294,.466623,.911588,.466623,.929133,.466623,.945554,.466623,.960477,.466623,.973526,.466623,.984328,.466623,.992507,.466623,.99769,.466623,.999501,.50677,.888229,.508637,.906287,.510428,.923606,.512104,.939816,.513628,.954546,.51496,.967427,.516062,.97809,.516897,.986164,.517426,.991279,.517611,.993067,.544685,.873535,.548316,.89091,.551798,.907574,.555057,.92317,.558019,.937343,.560609,.949736,.562753,.959996,.564377,.967764,.565405,.972686,.565765,.974406,.579899,.849969,.585168,.866248,.590221,.88186,.59495,.896472,.599248,.909751,.603007,.921363,.606118,.930975,.608474,.938253,.609966,.942864,.610488,.944475,.611941,.818285,.618701,.83309,.625184,.847289,.631251,.860578,.636765,.872655,.641586,.883215,.645577,.891957,.6486,.898576,.650514,.90277,.651183,.904236,.640343,.779239,.648424,.792228,.656174,.804685,.663427,.816344,.670018,.826939,.675782,.836204,.680553,.843873,.684166,.84968,.686455,.85336,.687255,.854645,.664635,.733585,.673845,.74445,.682679,.754871,.690946,.764624,.698459,.773486,.705029,.781237,.710468,.787652,.714586,.79251,.717195,.795588,.718106,.796663,.684346,.682079,.694473,.690549,.704186,.698671,.713277,.706274,.721537,.713182,.728761,.719224,.734741,.724224,.739269,.728011,.742138,.73041,.74314,.731249,.699007,.625476,.709816,.631313,.720183,.636911,.729886,.64215,.738703,.64691,.746413,.651074,.752796,.65452,.757629,.657129,.760691,.658783,.76176,.65936,.708148,.564532,.719383,.567533,.730157,.570412,.740241,.573106,.749405,.575555,.757419,.577696,.764053,.579468,.769076,.58081,.772258,.581661,.77337,.581958,.771223,.418616,.775197,.5,.765395,.420173,.769293,.5,.756806,.422468,.760592,.5,.746376,.425254,.750026,.5,.735027,.428287,.738529,.5,.723677,.431319,.727031,.5,.713248,.434106,.716466,.5,.704659,.4364,.707765,.5,.69883,.437958,.70186,.5,.696683,.438531,.699685,.5,.759694,.341755,.754087,.344783,.745823,.349245,.735788,.354663,.724868,.360559,.713948,.366456,.703913,.371874,.69565,.376336,.690042,.379364,.687976,.380479,.741205,.27037,.735951,.274764,.728208,.281239,.718807,.289101,.708576,.297657,.698344,.306213,.688943,.314076,.6812,.320551,.675947,.324945,.674011,.326563,.716346,.205413,.711568,.21105,.704526,.219356,.695976,.229443,.686671,.24042,.677366,.251396,.668816,.261483,.661774,.269789,.656996,.275426,.655236,.277502,.685711,.147837,.681519,.154575,.675341,.164505,.667839,.176563,.659676,.189685,.651513,.202807,.644011,.214865,.637834,.224795,.633642,.231533,.632097,.234016,.649891,.098594,.646385,.106274,.641217,.117593,.634942,.131337,.628113,.146294,.621285,.16125,.61501,.174994,.609842,.186313,.606335,.193994,.605043,.196823,.609481,.058636,.606747,.067081,.602719,.079526,.597828,.094638,.592505,.111084,.587182,.127529,.58229,.142642,.578262,.155087,.575529,.163532,.574521,.166643,.565071,.028915,.563187,.037929,.560411,.051212,.55704,.067342,.553372,.084895,.549704,.102448,.546333,.118578,.543557,.131861,.541673,.140875,.540979,.144196,.517254,.010385,.516285,.019753,.514858,.033559,.513124,.050323,.511237,.068566,.509351,.08681,.507617,.103574,.50619,.11738,.505221,.126748,.504864,.1302,.466623,.003996,.466623,.013486,.466623,.027473,.466623,.044455,.466623,.062937,.466623,.081419,.466623,.098402,.466623,.112388,.466623,.121878,.466623,.125375,.415992,.010385,.416961,.019753,.418389,.033559,.420122,.050323,.422009,.068567,.423895,.08681,.425629,.103574,.427057,.11738,.428025,.126748,.428382,.1302,.368176,.028915,.370059,.037929,.372835,.051212,.376206,.067342,.379874,.084895,.383543,.102448,.386914,.118578,.389689,.131861,.391573,.140875,.392267,.144196,.323766,.058636,.326499,.067081,.330527,.079526,.335419,.094638,.340742,.111084,.346065,.12753,.350956,.142642,.354984,.155087,.357718,.163532,.358725,.166643,.283355,.098594,.286862,.106274,.292029,.117593,.298304,.131337,.305133,.146294,.311962,.16125,.318237,.174995,.323405,.186313,.326911,.193994,.328203,.196823,.247536,.147837,.251728,.154576,.257905,.164506,.265407,.176564,.27357,.189685,.281734,.202807,.289235,.214865,.295413,.224795,.299605,.231534,.301149,.234016,.2169,.205413,.221679,.21105,.22872,.219357,.237271,.229443,.246576,.24042,.25588,.251396,.264431,.261483,.271472,.269789,.276251,.275426,.278011,.277503,.192042,.27037,.197296,.274764,.205038,.281239,.21444,.289101,.224671,.297657,.234902,.306214,.244304,.314076,.252046,.320551,.2573,.324945,.259235,.326564,.173552,.341755,.17916,.344783,.187423,.349245,.197458,.354663,.208378,.36056,.219298,.366456,.229333,.371874,.237597,.376336,.243204,.379364,.24527,.38048,.162024,.418616,.167852,.420173,.176441,.422468,.18687,.425254,.19822,.428287,.20957,.431319,.219999,.434106,.228588,.436401,.234416,.437958,.236563,.438532,.158049,.5,.163954,.5,.172655,.5,.18322,.5,.194718,.5,.206215,.5,.216781,.5,.225482,.5,.231386,.5,.233561,.5,.162024,.581384,.167852,.579827,.176441,.577532,.18687,.574746,.19822,.571713,.20957,.568681,.219999,.565894,.228588,.5636,.234416,.562042,.236563,.561469,.173552,.658245,.17916,.655217,.187424,.650755,.197458,.645337,.208378,.639441,.219298,.633544,.229333,.628126,.237597,.623664,.243204,.620636,.24527,.619521,.192042,.72963,.197296,.725236,.205038,.718761,.21444,.710899,.224671,.702343,.234902,.693787,.244304,.685924,.252046,.679449,.2573,.675055,.259236,.673437,.216901,.794587,.221679,.78895,.22872,.780644,.237271,.770557,.246576,.75958,.25588,.748604,.264431,.738517,.271472,.730211,.276251,.724574,.278011,.722498,.247536,.852163,.251728,.845425,.257906,.835495,.265407,.823437,.27357,.810315,.281734,.797193,.289235,.785135,.295413,.775205,.299605,.768467,.301149,.765984,.283355,.901406,.286862,.893726,.292029,.882407,.298304,.868663,.305133,.853706,.311962,.83875,.318237,.825006,.323405,.813687,.326911,.806006,.328203,.803177,.323766,.941364,.326499,.932919,.330528,.920474,.335419,.905362,.340742,.888916,.346065,.872471,.350956,.857358,.354985,.844913,.357718,.836468,.358725,.833357,.368176,.971085,.37006,.962071,.372836,.948788,.376206,.932658,.379875,.915105,.383543,.897552,.386914,.881422,.38969,.868139,.391573,.859125,.392267,.855804,.415993,.989615,.416961,.980247,.418389,.966441,.420123,.949677,.422009,.931434,.423896,.91319,.425629,.896426,.427057,.88262,.428026,.873252,.428383,.8698,.466623,.996004,.466623,.986513,.466623,.972527,.466623,.955544,.466623,.937063,.466623,.918581,.466623,.901598,.466623,.887612,.466623,.878122,.466623,.874625,.517254,.989615,.516285,.980247,.514858,.966441,.513124,.949677,.511238,.931433,.509351,.91319,.507617,.896426,.50619,.88262,.505221,.873252,.504864,.8698,.565071,.971085,.563187,.962071,.560411,.948788,.55704,.932658,.553372,.915105,.549704,.897552,.546333,.881422,.543557,.868139,.541673,.859125,.540979,.855804,.609481,.941364,.606747,.932919,.602719,.920474,.597828,.905362,.592505,.888916,.587182,.87247,.58229,.857358,.578262,.844913,.575529,.836468,.574522,.833357,.649891,.901406,.646385,.893726,.641217,.882407,.634942,.868663,.628113,.853706,.621285,.83875,.61501,.825005,.609842,.813687,.606335,.806006,.605043,.803177,.685711,.852163,.681519,.845424,.675341,.835494,.66784,.823436,.659676,.810315,.651513,.797193,.644011,.785135,.637834,.775205,.633642,.768466,.632097,.765984,.716346,.794587,.711568,.78895,.704526,.780643,.695976,.770557,.686671,.75958,.677366,.748604,.668816,.738517,.661774,.730211,.656996,.724574,.655236,.722497,.741205,.72963,.735951,.725236,.728208,.718761,.718807,.710899,.708576,.702343,.698345,.693786,.688943,.685924,.681201,.679449,.675947,.675055,.674011,.673436,.759694,.658245,.754087,.655217,.745823,.650755,.735788,.645337,.724868,.63944,.713948,.633544,.703914,.628126,.69565,.623664,.690042,.620636,.687976,.61952,.771223,.581384,.765395,.579827,.756806,.577532,.746376,.574746,.735027,.571713,.723677,.568681,.713248,.565894,.704659,.563599,.69883,.562042,.696683,.561468,.696143,.438676,.699137,.5,.693738,.439318,.696702,.5,.688298,.440772,.69119,.5,.678647,.443351,.681413,.5,.663612,.447367,.666182,.5,.642021,.453136,.64431,.5,.6127,.460971,.614606,.5,.574475,.471184,.575883,.5,.526174,.484089,.526951,.5,.466623,.5,.687456,.38076,.685143,.382009,.679908,.384836,.670622,.38985,.656157,.39766,.635383,.408877,.607171,.42411,.570393,.443969,.52392,.469062,.673524,.326971,.671356,.328783,.666452,.332885,.657752,.340161,.644199,.351495,.624736,.367772,.598304,.389876,.563847,.418693,.520306,.455106,.654792,.278025,.652821,.28035,.648361,.285612,.640448,.294946,.628123,.309486,.610421,.330368,.586383,.358725,.555045,.395693,.515445,.442407,.631708,.234641,.629979,.237421,.626066,.243711,.619124,.254869,.60831,.272251,.592781,.297214,.571691,.331113,.544197,.375307,.509456,.43115,.604718,.197536,.603271,.200704,.599998,.207874,.594191,.220592,.585145,.240405,.572155,.268858,.554513,.307498,.531515,.357871,.502453,.421523,.574268,.167427,.57314,.17091,.570589,.178794,.566062,.192778,.559011,.214563,.548885,.245849,.535133,.288335,.517206,.343722,.494553,.413711,.540805,.145032,.540027,.14875,.538269,.157165,.53515,.172091,.530291,.195343,.523312,.228735,.513836,.274082,.501481,.333199,.48587,.4079,.504774,.131069,.504374,.134933,.50347,.143679,.501866,.159192,.499367,.183359,.495778,.218064,.490904,.265195,.48455,.326638,.476522,.404277,.466623,.126255,.466623,.13017,.466623,.13903,.466623,.154745,.466623,.179227,.466623,.214386,.466623,.262132,.466623,.324376,.466623,.403028,.428472,.131069,.428872,.134933,.429776,.143679,.43138,.159192,.43388,.183359,.437468,.218064,.442342,.265195,.448696,.326638,.456725,.404277,.392442,.145032,.393219,.14875,.394977,.157165,.398097,.172091,.402956,.195343,.409934,.228735,.419411,.274082,.431765,.333199,.447376,.4079,.358978,.167427,.360106,.17091,.362658,.178794,.367184,.192779,.374235,.214563,.384362,.245849,.398113,.288335,.416041,.343722,.438694,.413711,.328528,.197536,.329975,.200704,.333248,.207874,.339055,.220592,.348101,.240405,.361092,.268858,.378733,.307498,.401732,.357871,.430793,.421523,.301538,.234641,.303267,.237421,.307181,.243711,.314122,.254869,.324936,.272251,.340466,.297214,.361556,.331114,.389049,.375307,.42379,.43115,.278454,.278025,.280425,.280351,.284886,.285613,.292798,.294946,.305124,.309487,.322825,.330368,.346864,.358725,.378202,.395693,.417801,.442407,.259723,.326971,.26189,.328784,.266795,.332885,.275495,.340161,.289047,.351495,.308511,.367772,.334942,.389877,.3694,.418693,.412941,.455106,.245791,.380761,.248104,.38201,.253339,.384836,.262624,.38985,.27709,.397661,.297864,.408878,.326075,.424111,.362853,.443969,.409326,.469062,.237104,.438676,.239508,.439318,.244949,.440772,.2546,.443351,.269634,.447368,.291225,.453137,.320547,.460971,.358771,.471184,.407072,.484089,.234109,.5,.236545,.5,.242056,.5,.251833,.5,.267064,.5,.288937,.5,.318641,.5,.357364,.5,.406295,.5,.237104,.561324,.239508,.560682,.244949,.559228,.2546,.556649,.269634,.552633,.291225,.546864,.320547,.539029,.358771,.528816,.407072,.515911,.245791,.61924,.248104,.617991,.253339,.615164,.262625,.61015,.27709,.60234,.297864,.591122,.326075,.57589,.362853,.556031,.409326,.530938,.259723,.673029,.26189,.671217,.266795,.667115,.275495,.659839,.289048,.648505,.308511,.632228,.334942,.610124,.3694,.581307,.412941,.544894,.278454,.721975,.280425,.71965,.284886,.714388,.292798,.705054,.305124,.690514,.322825,.669632,.346864,.641275,.378202,.604307,.417801,.557593,.301538,.765359,.303267,.762579,.307181,.756289,.314123,.745131,.324936,.727749,.340466,.702786,.361556,.668887,.389049,.624693,.42379,.56885,.328528,.802464,.329975,.799296,.333249,.792126,.339055,.779408,.348101,.759595,.361092,.731142,.378733,.692502,.401732,.642129,.430793,.578477,.358979,.832573,.360106,.82909,.362658,.821206,.367184,.807222,.374235,.785437,.384362,.754151,.398113,.711665,.416041,.656278,.438694,.586289,.392442,.854968,.393219,.85125,.394978,.842835,.398097,.827909,.402956,.804657,.409934,.771265,.419411,.725918,.431765,.666801,.447376,.5921,.428472,.868931,.428872,.865067,.429776,.856321,.431381,.840808,.43388,.816641,.437469,.781936,.442342,.734805,.448696,.673362,.456725,.595723,.466623,.873745,.466623,.86983,.466623,.86097,.466623,.845255,.466623,.820773,.466623,.785614,.466623,.737868,.466623,.675624,.466623,.596972,.504774,.868931,.504375,.865067,.50347,.856321,.501866,.840808,.499367,.816641,.495778,.781936,.490904,.734805,.484551,.673362,.476522,.595723,.540805,.854968,.540028,.85125,.538269,.842835,.53515,.827909,.530291,.804657,.523312,.771265,.513836,.725918,.501481,.666801,.48587,.5921,.574268,.832573,.573141,.82909,.570589,.821206,.566062,.807221,.559011,.785437,.548885,.754151,.535133,.711665,.517206,.656278,.494553,.586289,.604718,.802464,.603272,.799296,.599998,.792126,.594191,.779408,.585145,.759595,.572155,.731142,.554513,.692502,.531515,.642129,.502453,.578477,.631708,.765359,.629979,.762579,.626066,.756289,.619124,.745131,.60831,.727749,.592781,.702786,.571691,.668886,.544197,.624693,.509456,.56885,.654792,.721975,.652821,.719649,.648361,.714387,.640448,.705054,.628123,.690513,.610421,.669632,.586383,.641275,.555045,.604307,.515446,.557593,.673524,.673029,.671356,.671216,.666452,.667115,.657752,.659839,.644199,.648505,.624736,.632228,.598304,.610123,.563847,.581307,.520306,.544894,.687456,.619239,.685143,.61799,.679908,.615164,.670622,.61015,.656157,.602339,.635383,.591122,.607171,.575889,.570393,.556031,.52392,.530938,.696143,.561324,.693739,.560682,.688298,.559228,.678647,.556649,.663612,.552632,.642021,.546863,.6127,.539029,.574475,.528816,.526174,.515911,.218024,.5,.218459,.47977,.186878,.47977,.186809,.5,.158237,.47977,.158484,.5,.132626,.47977,.133143,.5,.110136,.47977,.110878,.5,.090858,.47977,.091782,.5,.074881,.47977,.075949,.5,.062297,.47977,.063473,.5,.053196,.47977,.054446,.5,.047669,.47977,.048961,.5,.045807,.47977,.047112,.5,.21964,.464036,.187066,.464036,.157567,.464036,.131225,.464036,.108124,.464036,.088348,.464036,.071981,.464036,.059105,.464036,.049805,.464036,.044163,.464036,.042264,.464036,.22138,.452797,.187343,.452797,.156578,.452797,.129159,.452797,.105159,.452797,.08465,.452797,.067707,.452797,.054401,.452797,.044807,.452797,.038997,.452797,.037044,.452797,.223493,.446054,.187679,.446054,.155378,.446054,.126651,.446054,.101558,.446054,.08016,.446054,.062517,.446054,.04869,.446054,.038738,.446054,.032723,.446054,.030704,.446054,.225793,.443806,.188044,.443806,.154072,.443806,.123921,.443806,.09764,.443806,.075273,.443806,.056869,.443806,.042474,.443806,.032134,.443806,.025896,.443806,.023806,.443806,.228092,.446054,.18841,.446054,.152766,.446054,.121192,.446054,.093721,.446054,.070387,.446054,.051222,.446054,.036258,.446054,.02553,.446054,.019068,.446054,.016907,.446054,.230205,.452797,.188746,.452797,.151565,.452797,.118684,.452797,.090121,.452797,.065897,.452797,.046032,.452797,.030547,.452797,.019461,.452797,.012794,.452797,.010568,.452797,.231945,.464036,.189023,.464036,.150577,.464036,.116618,.464036,.087155,.464036,.062199,.464036,.041758,.464036,.025843,.464036,.014463,.464036,.007628,.464036,.005347,.464036,.233126,.47977,.18921,.47977,.149906,.47977,.115216,.47977,.085143,.47977,.059689,.47977,.038858,.47977,.022651,.47977,.011071,.47977,.004122,.47977,.001805,.47977,.233561,.5,.18928,.5,.149659,.5,.1147,.5,.084402,.5,.058765,.5,.037789,.5,.021475,.5,.009822,.5,.00283,.5,5e-4,.5,.233126,.52023,.18921,.52023,.149906,.52023,.115216,.52023,.085143,.52023,.059689,.52023,.038858,.52023,.022651,.52023,.011072,.52023,.004122,.52023,.001805,.52023,.231945,.535964,.189023,.535964,.150577,.535964,.116618,.535964,.087155,.535964,.062199,.535964,.041758,.535964,.025843,.535964,.014463,.535964,.007628,.535964,.005347,.535964,.230205,.547203,.188746,.547203,.151565,.547203,.118684,.547203,.090121,.547203,.065897,.547203,.046032,.547203,.030547,.547203,.019461,.547203,.012794,.547203,.010568,.547203,.228092,.553946,.18841,.553946,.152766,.553946,.121192,.553946,.093721,.553946,.070387,.553946,.051222,.553946,.036258,.553946,.02553,.553946,.019068,.553946,.016907,.553946,.225793,.556194,.188044,.556194,.154072,.556194,.123921,.556194,.09764,.556194,.075273,.556194,.056869,.556194,.042474,.556194,.032134,.556194,.025896,.556194,.023806,.556194,.223493,.553946,.187679,.553946,.155378,.553946,.126651,.553946,.101558,.553946,.08016,.553946,.062517,.553946,.04869,.553946,.038738,.553946,.032723,.553946,.030704,.553946,.22138,.547203,.187343,.547203,.156578,.547203,.129159,.547203,.105159,.547203,.08465,.547203,.067707,.547203,.054401,.547203,.044807,.547203,.038997,.547203,.037044,.547203,.21964,.535964,.187066,.535964,.157567,.535964,.131225,.535964,.108124,.535964,.088348,.535964,.071981,.535964,.059105,.535964,.049805,.535964,.044163,.535964,.042264,.535964,.218459,.52023,.186878,.52023,.158237,.52023,.132626,.52023,.110136,.52023,.090858,.52023,.074881,.52023,.062297,.52023,.053196,.52023,.047669,.52023,.045807,.52023,.046774,.47977,.04806,.5,.049737,.47977,.050965,.5,.054787,.47977,.055922,.5,.062016,.47977,.063022,.5,.071517,.47977,.07236,.5,.083382,.47977,.084029,.5,.097701,.47977,.098121,.5,.114567,.47977,.114731,.5,.134073,.47977,.133951,.5,.156309,.47977,.043284,.464036,.046402,.464036,.051707,.464036,.059286,.464036,.069229,.464036,.081624,.464036,.09656,.464036,.114123,.464036,.134404,.464036,.15749,.464036,.038141,.452797,.041488,.452797,.047167,.452797,.055263,.452797,.065858,.452797,.079035,.452797,.094878,.452797,.113469,.452797,.134892,.452797,.15923,.452797,.031895,.446054,.03552,.446054,.041655,.446054,.050377,.446054,.061764,.446054,.075891,.446054,.092835,.446054,.112675,.446054,.135485,.446054,.161343,.446054,.025099,.443806,.029026,.443806,.035657,.443806,.045061,.443806,.057308,.443806,.072469,.443806,.090613,.443806,.11181,.443806,.13613,.443806,.163643,.443806,.018303,.446054,.022532,.446054,.029659,.446054,.039744,.446054,.052853,.446054,.069047,.446054,.08839,.446054,.110945,.446054,.136775,.446054,.165942,.446054,.012058,.452797,.016565,.452797,.024146,.452797,.034859,.452797,.048759,.452797,.065903,.452797,.086348,.452797,.110151,.452797,.137368,.452797,.168055,.452797,.006915,.464036,.011651,.464036,.019607,.464036,.030836,.464036,.045387,.464036,.063314,.464036,.084666,.464036,.109496,.464036,.137856,.464036,.169796,.464036,.003425,.47977,.008316,.47977,.016527,.47977,.028105,.47977,.043099,.47977,.061556,.47977,.083525,.47977,.109052,.47977,.138187,.47977,.170976,.47977,.002139,.5,.007087,.5,.015392,.5,.0271,.5,.042256,.5,.060909,.5,.083104,.5,.108889,.5,.138309,.5,.171412,.5,.003425,.52023,.008316,.52023,.016527,.52023,.028105,.52023,.043099,.52023,.061556,.52023,.083525,.52023,.109052,.52023,.138187,.52023,.170977,.52023,.006915,.535964,.011651,.535964,.019607,.535964,.030836,.535964,.045387,.535964,.063314,.535964,.084666,.535964,.109496,.535964,.137856,.535964,.169796,.535964,.012058,.547203,.016565,.547203,.024146,.547203,.034859,.547203,.048759,.547203,.065903,.547203,.086348,.547203,.110151,.547203,.137368,.547203,.168055,.547203,.018303,.553946,.022532,.553946,.029659,.553946,.039744,.553946,.052853,.553946,.069047,.553946,.08839,.553946,.110945,.553946,.136775,.553946,.165942,.553946,.025099,.556194,.029026,.556194,.035657,.556194,.045061,.556194,.057308,.556194,.072469,.556194,.090613,.556194,.11181,.556194,.13613,.556194,.163643,.556194,.031895,.553946,.03552,.553946,.041655,.553946,.050377,.553946,.061764,.553946,.075891,.553946,.092835,.553946,.112675,.553946,.135485,.553946,.161343,.553946,.038141,.547203,.041488,.547203,.047167,.547203,.055263,.547203,.065858,.547203,.079035,.547203,.094878,.547203,.113469,.547203,.134892,.547203,.15923,.547203,.043284,.535964,.046402,.535964,.051707,.535964,.059286,.535964,.069229,.535964,.081624,.535964,.09656,.535964,.114123,.535964,.134404,.535964,.15749,.535964,.046774,.52023,.049737,.52023,.054787,.52023,.062016,.52023,.071517,.52023,.083382,.52023,.097701,.52023,.114567,.52023,.134073,.52023,.156309,.52023,.73076,.5,.73076,.455494,.767956,.456269,.767413,.5,.795548,.45837,.79465,.5,.815355,.461466,.814243,.5,.829194,.465226,.827962,.5,.838885,.469318,.83758,.5,.846245,.47341,.844867,.5,.853093,.47717,.851595,.5,.861247,.480266,.859535,.5,.872525,.482368,.870457,.5,.888745,.483142,.886135,.5,.73076,.420879,.76943,.422255,.797985,.425991,.818373,.431496,.832539,.43818,.842428,.445454,.849986,.452729,.85716,.459413,.865895,.464918,.878136,.468654,.89583,.47003,.73076,.396154,.771601,.39796,.801577,.402863,.822821,.410088,.837467,.418861,.847648,.428409,.855499,.437956,.863153,.44673,.872744,.453955,.886405,.458858,.906271,.460664,.73076,.381319,.774238,.383383,.805938,.388986,.828222,.397243,.843451,.40727,.853988,.418182,.862193,.429093,.870431,.43912,.881061,.447377,.896447,.45298,.91895,.455045,.73076,.376374,.777108,.378524,.810685,.384361,.8341,.392962,.849963,.403406,.860886,.414773,.869478,.426139,.87835,.436583,.890112,.445185,.907374,.451021,.932747,.453172,.73076,.381319,.779978,.383383,.815431,.388986,.839977,.397243,.856476,.40727,.867785,.418182,.876763,.429093,.88627,.43912,.899163,.447377,.918302,.45298,.946544,.455045,.73076,.396154,.782615,.39796,.819792,.402863,.845378,.410088,.86246,.418861,.874124,.428409,.883458,.437956,.893547,.44673,.90748,.453955,.928343,.458858,.959223,.460664,.73076,.420879,.784787,.422255,.823384,.425991,.849826,.431496,.867388,.43818,.879345,.445454,.888971,.452729,.899541,.459413,.91433,.464918,.936613,.468654,.969664,.47003,.73076,.455494,.786261,.456269,.825821,.45837,.852845,.461466,.870732,.465226,.882887,.469318,.892712,.47341,.903608,.47717,.918978,.480266,.942224,.482368,.976749,.483142,.73076,.5,.786804,.5,.826719,.5,.853957,.5,.871964,.5,.884192,.5,.89409,.5,.905106,.5,.92069,.5,.944291,.5,.979359,.5,.73076,.544505,.786261,.543731,.825821,.54163,.852845,.538534,.870732,.534773,.882887,.530682,.892712,.52659,.903608,.52283,.918978,.519733,.942224,.517632,.976749,.516858,.73076,.579121,.784787,.577745,.823384,.574009,.849826,.568504,.867388,.56182,.879345,.554545,.888971,.547271,.899541,.540586,.91433,.535082,.936613,.531346,.969664,.52997,.73076,.603846,.782615,.60204,.819792,.597137,.845378,.589912,.86246,.581138,.874124,.571591,.883458,.562043,.893547,.55327,.90748,.546045,.928343,.541142,.959223,.539335,.73076,.618681,.779978,.616617,.815431,.611014,.839977,.602756,.856476,.59273,.867785,.581818,.876763,.570907,.88627,.56088,.899163,.552622,.918302,.547019,.946544,.544955,.73076,.623626,.777108,.621476,.810685,.615639,.8341,.607038,.849963,.596593,.860886,.585227,.869478,.573861,.87835,.563416,.890112,.554815,.907374,.548978,.932747,.546828,.73076,.618681,.774238,.616617,.805938,.611014,.828222,.602756,.843451,.59273,.853988,.581818,.862194,.570907,.870431,.56088,.881061,.552622,.896447,.547019,.91895,.544955,.73076,.603846,.771601,.60204,.801577,.597137,.822821,.589912,.837467,.581138,.847648,.571591,.855499,.562043,.863153,.55327,.872744,.546045,.886405,.541142,.906271,.539335,.73076,.579121,.76943,.577745,.797985,.574009,.818373,.568504,.832539,.56182,.842428,.554545,.849986,.547271,.85716,.540586,.865895,.535082,.878136,.531346,.89583,.52997,.73076,.544505,.767956,.543731,.795548,.54163,.815355,.538534,.829194,.534773,.838885,.530682,.846245,.52659,.853093,.52283,.861247,.519733,.872525,.517632,.888745,.516858,.8935,.48333,.890765,.5,.898,.483843,.895208,.5,.902065,.484598,.899279,.5,.905518,.485515,.902791,.5,.90818,.486513,.905556,.5,.909875,.487511,.90739,.5,.910423,.488428,.908105,.5,.909648,.489184,.907514,.5,.90737,.489696,.905432,.5,.903412,.489885,.901672,.5,.900926,.470365,.905576,.471277,.909625,.472619,.912919,.47425,.915302,.476024,.91662,.477798,.916717,.479428,.915438,.480771,.91263,.481682,.908136,.482018,.911869,.461105,.916741,.462301,.920767,.464063,.923827,.466203,.925798,.468531,.92656,.47086,.925992,.473,.923972,.474762,.920381,.475958,.915096,.476398,.925156,.455548,.930299,.456915,.934297,.458929,.937072,.461374,.938542,.464036,.93863,.466697,.937254,.469143,.934335,.471157,.929793,.472523,.923549,.473027,.939616,.453696,.945053,.45512,.949021,.457218,.951485,.459765,.952412,.462537,.951765,.46531,.94951,.467857,.945612,.469955,.940036,.471378,.932747,.471903,.954077,.455548,.959807,.456915,.963744,.458929,.965899,.461374,.966281,.464036,.9649,.466697,.961766,.469143,.956889,.471157,.950279,.472523,.941945,.473027,.967364,.461105,.973364,.462301,.977274,.464063,.979144,.466203,.979025,.468531,.97697,.47086,.973028,.473,.967252,.474762,.959691,.475958,.950397,.476398,.978307,.470365,.984529,.471277,.988416,.472619,.990051,.47425,.989521,.476024,.98691,.477798,.982303,.479428,.975785,.480771,.967442,.481682,.957358,.482018,.985732,.48333,.992105,.483843,.995976,.484598,.997453,.485515,.996643,.486513,.993655,.487511,.988597,.488428,.981576,.489184,.972702,.489696,.962082,.489885,.988468,.5,.994897,.5,.998762,.5,1.00018,.5,.999267,.5,.99614,.5,.990915,.5,.98371,.5,.97464,.5,.963822,.5,.985732,.516669,.992105,.516157,.995976,.515401,.997453,.514484,.996643,.513486,.993655,.512488,.988597,.511571,.981576,.510816,.972702,.510303,.962082,.510115,.978307,.529634,.984529,.528723,.988416,.52738,.990051,.52575,.989521,.523976,.98691,.522202,.982303,.520571,.975785,.519229,.967442,.518317,.957358,.517982,.967364,.538895,.973364,.537699,.977274,.535937,.979144,.533797,.979025,.531468,.97697,.52914,.973028,.527,.967252,.525238,.959691,.524042,.950397,.523601,.954077,.544451,.959806,.543085,.963744,.541071,.965899,.538625,.966281,.535964,.9649,.533302,.961766,.530857,.956889,.528843,.950279,.527476,.941945,.526973,.939616,.546304,.945053,.54488,.949021,.542782,.951485,.540235,.952412,.537462,.951765,.53469,.94951,.532143,.945612,.530045,.940036,.528621,.932747,.528097,.925156,.544451,.930299,.543085,.934297,.541071,.937072,.538625,.938542,.535964,.93863,.533303,.937254,.530857,.934335,.528843,.929793,.527476,.923549,.526973,.911869,.538895,.916741,.537699,.920768,.535937,.923827,.533797,.925798,.531468,.92656,.52914,.925992,.527,.923972,.525238,.920381,.524042,.915096,.523601,.900926,.529634,.905576,.528723,.909625,.52738,.912919,.52575,.915302,.523976,.91662,.522202,.916717,.520571,.915438,.519229,.91263,.518318,.908136,.517982,.8935,.516669,.898,.516157,.902065,.515401,.905518,.514484,.90818,.513486,.909875,.512488,.910423,.511571,.909648,.510816,.90737,.510303,.903412,.510115,.496472,.491996,.496859,.5,.466623,.5,.513988,.487299,.514603,.5,.521565,.485268,.522278,.5,.521596,.485261,.522309,.5,.516473,.486636,.51712,.5,.508589,.488753,.509134,.5,.500336,.49097,.500775,.5,.494109,.492645,.494466,.5,.492298,.493137,.492633,.5,.497298,.491804,.497698,.5,.495347,.484448,.512204,.475321,.519495,.471374,.519525,.47136,.514594,.474032,.507007,.478144,.499064,.48245,.49307,.485703,.491327,.486656,.496137,.484064,.493543,.477446,.50934,.464211,.516173,.458486,.5162,.458465,.511579,.462339,.504468,.468302,.497024,.474544,.491405,.479259,.489769,.480639,.494275,.476875,.491114,.471082,.505487,.454112,.511703,.446772,.511728,.446745,.507523,.451711,.501052,.459354,.494278,.467356,.489165,.473398,.487675,.475163,.491772,.470334,.488119,.465447,.500734,.445171,.50619,.4364,.506211,.436367,.50252,.4423,.496839,.451431,.490893,.460989,.486403,.468206,.485093,.470311,.488686,.464535,.484614,.460633,.495171,.437531,.499737,.427538,.499754,.427499,.496665,.434258,.49191,.444659,.486932,.455547,.483173,.463767,.482075,.466162,.485079,.459576,.480655,.45673,.488889,.431337,.49245,.420353,.492463,.420309,.490053,.427737,.486343,.439169,.48246,.451134,.479527,.460166,.478668,.462795,.48101,.455552,.476299,.453829,.481976,.426733,.484432,.415013,.484441,.414966,.482778,.422891,.48022,.435088,.477541,.447854,.475518,.457489,.474925,.460291,.476537,.452559,.471603,.452021,.474525,.423865,.475788,.411686,.475793,.411637,.474937,.419872,.47362,.432545,.472241,.445809,.471199,.45582,.470893,.45873,.471722,.450693,.466623,.451399,.466623,.422877,.466623,.410539,.466623,.410489,.466623,.418831,.466623,.431668,.466623,.445105,.466623,.455245,.466623,.458192,.466623,.45005,.461644,.452021,.458722,.423865,.457458,.411686,.457454,.411637,.458309,.419872,.459626,.432545,.461005,.445809,.462047,.45582,.462354,.45873,.461524,.450693,.456948,.453829,.45127,.426733,.448814,.415013,.448806,.414966,.450468,.422891,.453026,.435088,.455705,.447854,.457729,.457489,.458322,.460291,.456709,.452559,.452592,.45673,.444358,.431337,.440797,.420353,.440784,.420309,.443194,.427737,.446903,.439169,.450787,.451134,.45372,.460166,.454578,.462795,.452237,.455552,.448633,.460633,.438076,.437531,.433509,.427538,.433492,.427499,.436582,.434258,.441337,.444659,.446315,.455547,.450074,.463767,.451172,.466162,.448167,.459576,.445127,.465447,.432513,.445171,.427057,.4364,.427036,.436367,.430727,.4423,.436407,.451431,.442354,.460989,.446843,.468206,.448153,.470311,.44456,.464535,.442132,.471082,.42776,.454112,.421543,.446772,.421519,.446745,.425724,.451711,.432195,.459354,.438968,.467356,.444082,.473398,.445572,.475163,.441475,.470334,.439704,.477446,.423906,.464211,.417073,.458486,.417046,.458465,.421667,.46234,.428779,.468302,.436223,.474544,.441842,.479259,.443477,.480639,.438972,.476875,.437899,.484448,.421043,.475321,.413751,.471374,.413722,.47136,.418652,.474032,.42624,.478144,.434182,.48245,.440176,.485703,.441919,.486656,.43711,.484064,.436775,.491996,.419258,.487299,.411681,.485268,.411651,.485261,.416774,.486636,.424658,.488753,.43291,.49097,.439138,.492645,.440948,.493137,.435949,.491804,.436387,.5,.418644,.5,.410968,.5,.410937,.5,.416126,.5,.424113,.5,.432472,.5,.43878,.5,.440614,.5,.435548,.5,.436775,.508004,.419258,.512701,.411681,.514732,.411651,.514739,.416774,.513364,.424658,.511247,.43291,.50903,.439138,.507355,.440948,.506863,.435949,.508196,.437899,.515552,.421043,.524679,.413751,.528626,.413722,.52864,.418652,.525968,.42624,.521856,.434182,.51755,.440176,.514297,.441919,.513344,.43711,.515936,.439704,.522554,.423906,.535789,.417073,.541514,.417046,.541535,.421667,.537661,.428779,.531698,.436223,.525456,.441842,.520741,.443477,.519361,.438972,.523125,.442132,.528918,.42776,.545888,.421543,.553228,.421519,.553255,.425724,.548289,.432195,.540646,.438968,.532644,.444082,.526602,.445572,.524837,.441475,.529666,.445127,.534553,.432513,.554829,.427057,.5636,.427036,.563633,.430727,.5577,.436407,.548569,.442354,.539011,.446843,.531794,.448153,.529689,.44456,.535465,.448633,.539367,.438076,.562469,.433509,.572462,.433492,.572501,.436582,.565742,.441337,.555341,.446315,.544453,.450074,.536233,.451172,.533838,.448167,.540424,.452592,.54327,.444358,.568663,.440797,.579647,.440784,.579691,.443194,.572263,.446903,.560831,.450787,.548866,.45372,.539834,.454578,.537205,.452237,.544448,.456948,.546171,.45127,.573267,.448814,.584987,.448806,.585034,.450468,.577109,.453026,.564912,.455705,.552146,.457729,.542511,.458322,.539709,.456709,.547441,.461644,.547979,.458722,.576135,.457458,.588314,.457454,.588363,.458309,.580128,.459626,.567455,.461005,.554191,.462048,.54418,.462354,.54127,.461524,.549307,.466623,.548601,.466623,.577123,.466623,.589461,.466623,.589511,.466623,.581169,.466623,.568332,.466623,.554895,.466623,.544755,.466623,.541808,.466623,.54995,.471603,.547979,.474525,.576135,.475788,.588314,.475793,.588363,.474937,.580128,.47362,.567455,.472241,.554191,.471199,.54418,.470893,.54127,.471722,.549307,.476299,.546171,.481977,.573267,.484432,.584987,.484441,.585034,.482778,.577109,.48022,.564912,.477541,.552146,.475518,.542511,.474925,.539709,.476537,.547441,.480655,.54327,.488889,.568663,.49245,.579647,.492463,.579691,.490053,.572263,.486343,.560831,.48246,.548866,.479527,.539834,.478668,.537205,.48101,.544448,.484614,.539367,.495171,.562469,.499737,.572462,.499754,.572501,.496665,.565742,.49191,.555341,.486932,.544453,.483173,.536233,.482075,.533838,.485079,.540424,.488119,.534553,.500734,.554829,.50619,.5636,.506211,.563633,.50252,.5577,.496839,.548569,.490893,.539011,.486403,.531794,.485093,.529689,.488686,.535465,.491114,.528918,.505487,.545888,.511703,.553228,.511728,.553255,.507523,.548289,.501052,.540646,.494278,.532644,.489165,.526602,.487675,.524837,.491772,.529666,.493543,.522554,.50934,.535789,.516173,.541514,.5162,.541535,.511579,.53766,.504468,.531698,.497024,.525456,.491405,.520741,.489769,.519361,.494275,.523125,.495347,.515552,.512204,.524679,.519495,.528626,.519525,.52864,.514594,.525968,.507007,.521856,.499064,.51755,.49307,.514297,.491327,.513344,.496137,.515936,.496472,.508004,.513988,.512701,.521565,.514732,.521596,.514739,.516473,.513364,.508589,.511247,.500336,.50903,.494109,.507355,.492298,.506863,.497298,.508196,.509476,.48855,.510035,.5,.526623,.483969,.527406,.5,.547267,.478453,.548319,.5,.569936,.472396,.571284,.5,.593156,.466192,.594807,.5,.615457,.460234,.617399,.5,.635365,.454915,.637566,.5,.651407,.450628,.653819,.5,.662113,.447768,.664664,.5,.666009,.446727,.66861,.5,.507854,.477737,.524352,.468829,.544215,.458104,.566025,.446327,.588367,.434264,.609824,.422678,.628978,.412336,.644414,.404001,.654714,.398439,.658462,.396415,.505253,.467695,.52071,.454768,.53932,.439205,.559754,.422115,.580687,.40461,.600789,.387798,.618735,.37279,.633197,.360696,.642848,.352625,.646359,.349688,.501755,.458556,.515813,.441973,.532738,.422007,.551323,.400084,.57036,.377626,.588643,.356059,.604964,.336805,.618117,.32129,.626893,.310936,.630087,.307169,.497446,.450456,.509779,.430631,.524627,.406764,.540932,.380555,.557634,.353709,.573674,.327926,.587993,.30491,.599532,.286362,.607232,.273984,.610034,.26948,.492406,.443528,.502723,.420931,.515144,.393726,.528783,.363853,.542754,.333253,.556172,.303865,.56815,.27763,.577802,.256488,.584243,.24238,.586587,.237247,.486721,.437907,.494763,.413061,.504445,.383147,.515077,.350301,.525967,.316654,.536426,.28434,.545763,.255494,.553287,.232248,.558308,.216736,.560135,.211091,.480473,.433726,.486015,.407206,.492687,.375279,.500014,.34022,.507519,.304308,.514727,.269818,.521161,.239029,.526346,.214218,.529806,.197661,.531065,.191636,.473746,.431119,.476596,.403556,.480028,.370373,.483796,.333935,.487656,.29661,.491362,.260764,.494672,.228764,.497338,.202976,.499118,.185768,.499765,.179507,.466623,.43022,.466623,.402298,.466623,.368681,.466623,.331768,.466623,.293956,.466623,.257642,.466623,.225225,.466623,.199101,.466623,.181668,.466623,.175325,.4595,.431119,.45665,.403556,.453219,.370373,.449451,.333935,.445591,.29661,.441884,.260764,.438575,.228764,.435908,.202976,.434129,.185768,.433481,.179507,.452773,.433726,.447231,.407206,.440559,.375279,.433232,.34022,.425727,.304308,.41852,.269818,.412086,.23903,.4069,.214218,.40344,.197661,.402181,.191636,.446525,.437907,.438483,.413061,.428801,.383147,.41817,.350301,.407279,.316654,.39682,.284341,.387483,.255494,.379959,.232248,.374938,.216736,.373111,.211091,.44084,.443528,.430523,.420932,.418102,.393726,.404463,.363853,.390492,.333253,.377075,.303865,.365097,.27763,.355444,.256488,.349003,.242381,.346659,.237247,.435801,.450456,.423468,.430631,.408619,.406764,.392314,.380555,.375613,.353709,.359573,.327926,.345254,.30491,.333715,.286362,.326015,.273985,.323213,.269481,.431491,.458556,.417433,.441973,.400508,.422007,.381924,.400084,.362886,.377626,.344604,.356059,.328282,.336806,.31513,.32129,.306353,.310937,.303159,.307169,.427994,.467695,.412537,.454768,.393927,.439205,.373492,.422115,.35256,.40461,.332457,.387798,.314511,.37279,.300049,.360696,.290399,.352625,.286887,.349688,.425393,.477737,.408894,.468829,.389032,.458104,.367221,.446327,.344879,.434264,.323423,.422678,.304268,.412336,.288833,.404001,.278532,.39844,.274784,.396416,.423771,.48855,.406624,.483969,.38598,.478453,.363311,.472397,.34009,.466192,.31779,.460234,.297882,.454915,.281839,.450629,.271134,.447768,.267238,.446727,.423212,.5,.405841,.5,.384927,.5,.361963,.5,.338439,.5,.315848,.5,.29568,.5,.279428,.5,.268583,.5,.264636,.5,.423771,.51145,.406624,.516031,.38598,.521547,.363311,.527604,.34009,.533808,.31779,.539766,.297882,.545085,.281839,.549372,.271134,.552232,.267238,.553273,.425393,.522263,.408894,.531171,.389032,.541896,.367221,.553673,.344879,.565736,.323423,.577322,.304268,.587664,.288833,.595999,.278532,.601561,.274784,.603584,.427994,.532305,.412537,.545232,.393927,.560795,.373492,.577885,.35256,.59539,.332457,.612202,.314511,.62721,.300049,.639304,.290399,.647375,.286887,.650312,.431491,.541444,.417433,.558027,.400508,.577993,.381924,.599916,.362886,.622374,.344604,.643941,.328282,.663195,.31513,.67871,.306353,.689064,.303159,.692831,.435801,.549544,.423468,.569369,.408619,.593236,.392314,.619445,.375613,.646291,.359573,.672074,.345254,.69509,.333715,.713638,.326015,.726016,.323213,.73052,.44084,.556472,.430523,.579069,.418102,.606274,.404463,.636147,.390492,.666747,.377075,.696135,.365097,.72237,.355444,.743512,.349003,.75762,.346659,.762753,.446525,.562093,.438483,.586939,.428801,.616853,.41817,.649699,.407279,.683346,.39682,.71566,.387483,.744506,.379959,.767752,.374938,.783264,.373111,.788909,.452773,.566274,.447231,.592794,.440559,.624721,.433232,.65978,.425727,.695692,.41852,.730182,.412086,.760971,.406901,.785782,.40344,.802339,.402181,.808364,.4595,.568881,.45665,.596444,.453219,.629627,.449451,.666065,.445591,.70339,.441884,.739236,.438575,.771236,.435908,.797024,.434129,.814232,.433481,.820493,.466623,.56978,.466623,.597702,.466623,.631319,.466623,.668232,.466623,.706044,.466623,.742358,.466623,.774775,.466623,.800899,.466623,.818332,.466623,.824675,.473746,.568881,.476596,.596444,.480028,.629627,.483796,.666065,.487656,.70339,.491363,.739236,.494672,.771236,.497338,.797024,.499118,.814232,.499765,.820493,.480473,.566274,.486015,.592794,.492688,.624721,.500014,.65978,.507519,.695692,.514727,.730182,.521161,.76097,.526346,.785782,.529806,.802339,.531065,.808364,.486721,.562093,.494763,.586939,.504445,.616853,.515077,.649699,.525967,.683346,.536426,.715659,.545763,.744506,.553287,.767752,.558308,.783264,.560135,.788909,.492406,.556472,.502723,.579068,.515144,.606274,.528783,.636147,.542754,.666747,.556172,.696135,.56815,.72237,.577802,.743512,.584243,.757619,.586587,.762753,.497446,.549544,.509779,.569369,.524627,.593236,.540932,.619445,.557634,.646291,.573674,.672074,.587993,.69509,.599532,.713638,.607232,.726015,.610034,.730519,.501755,.541444,.515813,.558027,.532738,.577993,.551323,.599916,.57036,.622374,.588643,.643941,.604964,.663194,.618117,.67871,.626893,.689063,.630087,.692831,.505253,.532305,.52071,.545232,.53932,.560795,.559754,.577885,.580687,.59539,.600789,.612202,.618735,.62721,.633197,.639304,.642848,.647375,.646359,.650312,.507854,.522263,.524352,.531171,.544215,.541896,.566025,.553673,.588367,.565736,.609824,.577322,.628978,.587664,.644414,.595999,.654714,.60156,.658462,.603584,.509476,.51145,.526623,.516031,.547267,.521547,.569936,.527603,.593156,.533808,.615457,.539766,.635365,.545085,.651407,.549371,.662113,.552232,.666009,.553273]),_.setData(i.default.S_INDICES,[0,1,2,3,0,2,3,2,4,4,5,3,5,4,6,6,7,5,7,6,8,8,9,7,9,8,10,10,11,9,11,10,12,12,13,11,13,12,14,14,15,13,15,14,16,16,17,15,17,16,18,18,19,17,19,18,20,20,21,19,1,22,23,23,2,1,2,23,24,24,4,2,4,24,25,25,6,4,6,25,26,26,8,6,8,26,27,27,10,8,10,27,28,28,12,10,12,28,29,29,14,12,14,29,30,30,16,14,16,30,31,31,18,16,18,31,32,32,20,18,22,33,34,34,23,22,23,34,35,35,24,23,24,35,36,36,25,24,25,36,37,37,26,25,26,37,38,38,27,26,27,38,39,39,28,27,28,39,40,40,29,28,29,40,41,41,30,29,30,41,42,42,31,30,31,42,43,43,32,31,33,44,45,45,34,33,34,45,46,46,35,34,35,46,47,47,36,35,36,47,48,48,37,36,37,48,49,49,38,37,38,49,50,50,39,38,39,50,51,51,40,39,40,51,52,52,41,40,41,52,53,53,42,41,42,53,54,54,43,42,44,55,56,56,45,44,45,56,57,57,46,45,46,57,58,58,47,46,47,58,59,59,48,47,48,59,60,60,49,48,49,60,61,61,50,49,50,61,62,62,51,50,51,62,63,63,52,51,52,63,64,64,53,52,53,64,65,65,54,53,55,66,67,67,56,55,56,67,68,68,57,56,57,68,69,69,58,57,58,69,70,70,59,58,59,70,71,71,60,59,60,71,72,72,61,60,61,72,73,73,62,61,62,73,74,74,63,62,63,74,75,75,64,63,64,75,76,76,65,64,66,77,78,78,67,66,67,78,79,79,68,67,68,79,80,80,69,68,69,80,81,81,70,69,70,81,82,82,71,70,71,82,83,83,72,71,72,83,84,84,73,72,73,84,85,85,74,73,74,85,86,86,75,74,75,86,87,87,76,75,77,88,89,89,78,77,78,89,90,90,79,78,79,90,91,91,80,79,80,91,92,92,81,80,81,92,93,93,82,81,82,93,94,94,83,82,83,94,95,95,84,83,84,95,96,96,85,84,85,96,97,97,86,85,86,97,98,98,87,86,88,99,100,100,89,88,89,100,101,101,90,89,90,101,102,102,91,90,91,102,103,103,92,91,92,103,104,104,93,92,93,104,105,105,94,93,94,105,106,106,95,94,95,106,107,107,96,95,96,107,108,108,97,96,97,108,109,109,98,97,99,110,111,111,100,99,100,111,112,112,101,100,101,112,113,113,102,101,102,113,114,114,103,102,103,114,115,115,104,103,104,115,116,116,105,104,105,116,117,117,106,105,106,117,118,118,107,106,107,118,119,119,108,107,108,119,120,120,109,108,110,121,122,122,111,110,111,122,123,123,112,111,112,123,124,124,113,112,113,124,125,125,114,113,114,125,126,126,115,114,115,126,127,127,116,115,116,127,128,128,117,116,117,128,129,129,118,117,118,129,130,130,119,118,119,130,131,131,120,119,121,132,133,133,122,121,122,133,134,134,123,122,123,134,135,135,124,123,124,135,136,136,125,124,125,136,137,137,126,125,126,137,138,138,127,126,127,138,139,139,128,127,128,139,140,140,129,128,129,140,141,141,130,129,130,141,142,142,131,130,132,143,144,144,133,132,133,144,145,145,134,133,134,145,146,146,135,134,135,146,147,147,136,135,136,147,148,148,137,136,137,148,149,149,138,137,138,149,150,150,139,138,139,150,151,151,140,139,140,151,152,152,141,140,141,152,153,153,142,141,143,154,155,155,144,143,144,155,156,156,145,144,145,156,157,157,146,145,146,157,158,158,147,146,147,158,159,159,148,147,148,159,160,160,149,148,149,160,161,161,150,149,150,161,162,162,151,150,151,162,163,163,152,151,152,163,164,164,153,152,154,165,166,166,155,154,155,166,167,167,156,155,156,167,168,168,157,156,157,168,169,169,158,157,158,169,170,170,159,158,159,170,171,171,160,159,160,171,172,172,161,160,161,172,173,173,162,161,162,173,174,174,163,162,163,174,175,175,164,163,165,176,177,177,166,165,166,177,178,178,167,166,167,178,179,179,168,167,168,179,180,180,169,168,169,180,181,181,170,169,170,181,182,182,171,170,171,182,183,183,172,171,172,183,184,184,173,172,173,184,185,185,174,173,174,185,186,186,175,174,176,187,188,188,177,176,177,188,189,189,178,177,178,189,190,190,179,178,179,190,191,191,180,179,180,191,192,192,181,180,181,192,193,193,182,181,182,193,194,194,183,182,183,194,195,195,184,183,184,195,196,196,185,184,185,196,197,197,186,185,187,198,199,199,188,187,188,199,200,200,189,188,189,200,201,201,190,189,190,201,202,202,191,190,191,202,203,203,192,191,192,203,204,204,193,192,193,204,205,205,194,193,194,205,206,206,195,194,195,206,207,207,196,195,196,207,208,208,197,196,198,209,210,210,199,198,199,210,211,211,200,199,200,211,212,212,201,200,201,212,213,213,202,201,202,213,214,214,203,202,203,214,215,215,204,203,204,215,216,216,205,204,205,216,217,217,206,205,206,217,218,218,207,206,207,218,219,219,208,207,209,220,221,221,210,209,210,221,222,222,211,210,211,222,223,223,212,211,212,223,224,224,213,212,213,224,225,225,214,213,214,225,226,226,215,214,215,226,227,227,216,215,216,227,228,228,217,216,217,228,229,229,218,217,218,229,230,230,219,218,220,231,232,232,221,220,221,232,233,233,222,221,222,233,234,234,223,222,223,234,235,235,224,223,224,235,236,236,225,224,225,236,237,237,226,225,226,237,238,238,227,226,227,238,239,239,228,227,228,239,240,240,229,228,229,240,241,241,230,229,231,242,243,243,232,231,232,243,244,244,233,232,233,244,245,245,234,233,234,245,246,246,235,234,235,246,247,247,236,235,236,247,248,248,237,236,237,248,249,249,238,237,238,249,250,250,239,238,239,250,251,251,240,239,240,251,252,252,241,240,242,253,254,254,243,242,243,254,255,255,244,243,244,255,256,256,245,244,245,256,257,257,246,245,246,257,258,258,247,246,247,258,259,259,248,247,248,259,260,260,249,248,249,260,261,261,250,249,250,261,262,262,251,250,251,262,263,263,252,251,253,264,265,265,254,253,254,265,266,266,255,254,255,266,267,267,256,255,256,267,268,268,257,256,257,268,269,269,258,257,258,269,270,270,259,258,259,270,271,271,260,259,260,271,272,272,261,260,261,272,273,273,262,261,262,273,274,274,263,262,264,275,276,276,265,264,265,276,277,277,266,265,266,277,278,278,267,266,267,278,279,279,268,267,268,279,280,280,269,268,269,280,281,281,270,269,270,281,282,282,271,270,271,282,283,283,272,271,272,283,284,284,273,272,273,284,285,285,274,273,275,286,287,287,276,275,276,287,288,288,277,276,277,288,289,289,278,277,278,289,290,290,279,278,279,290,291,291,280,279,280,291,292,292,281,280,281,292,293,293,282,281,282,293,294,294,283,282,283,294,295,295,284,283,284,295,296,296,285,284,286,297,298,298,287,286,287,298,299,299,288,287,288,299,300,300,289,288,289,300,301,301,290,289,290,301,302,302,291,290,291,302,303,303,292,291,292,303,304,304,293,292,293,304,305,305,294,293,294,305,306,306,295,294,295,306,307,307,296,295,297,308,309,309,298,297,298,309,310,310,299,298,299,310,311,311,300,299,300,311,312,312,301,300,301,312,313,313,302,301,302,313,314,314,303,302,303,314,315,315,304,303,304,315,316,316,305,304,305,316,317,317,306,305,306,317,318,318,307,306,308,319,320,320,309,308,309,320,321,321,310,309,310,321,322,322,311,310,311,322,323,323,312,311,312,323,324,324,313,312,313,324,325,325,314,313,314,325,326,326,315,314,315,326,327,327,316,315,316,327,328,328,317,316,317,328,329,329,318,317,319,330,331,331,320,319,320,331,332,332,321,320,321,332,333,333,322,321,322,333,334,334,323,322,323,334,335,335,324,323,324,335,336,336,325,324,325,336,337,337,326,325,326,337,338,338,327,326,327,338,339,339,328,327,328,339,340,340,329,328,330,341,342,342,331,330,331,342,343,343,332,331,332,343,344,344,333,332,333,344,345,345,334,333,334,345,346,346,335,334,335,346,347,347,336,335,336,347,348,348,337,336,337,348,349,349,338,337,338,349,350,350,339,338,339,350,351,351,340,339,341,352,353,353,342,341,342,353,354,354,343,342,343,354,355,355,344,343,344,355,356,356,345,344,345,356,357,357,346,345,346,357,358,358,347,346,347,358,359,359,348,347,348,359,360,360,349,348,349,360,361,361,350,349,350,361,362,362,351,350,352,363,364,364,353,352,353,364,365,365,354,353,354,365,366,366,355,354,355,366,367,367,356,355,356,367,368,368,357,356,357,368,369,369,358,357,358,369,370,370,359,358,359,370,371,371,360,359,360,371,372,372,361,360,361,372,373,373,362,361,363,374,375,375,364,363,364,375,376,376,365,364,365,376,377,377,366,365,366,377,378,378,367,366,367,378,379,379,368,367,368,379,380,380,369,368,369,380,381,381,370,369,370,381,382,382,371,370,371,382,383,383,372,371,372,383,384,384,373,372,374,385,386,386,375,374,375,386,387,387,376,375,376,387,388,388,377,376,377,388,389,389,378,377,378,389,390,390,379,378,379,390,391,391,380,379,380,391,392,392,381,380,381,392,393,393,382,381,382,393,394,394,383,382,383,394,395,395,384,383,385,396,397,397,386,385,386,397,398,398,387,386,387,398,399,399,388,387,388,399,400,400,389,388,389,400,401,401,390,389,390,401,402,402,391,390,391,402,403,403,392,391,392,403,404,404,393,392,393,404,405,405,394,393,394,405,406,406,395,394,396,407,408,408,397,396,397,408,409,409,398,397,398,409,410,410,399,398,399,410,411,411,400,399,400,411,412,412,401,400,401,412,413,413,402,401,402,413,414,414,403,402,403,414,415,415,404,403,404,415,416,416,405,404,405,416,417,417,406,405,407,418,419,419,408,407,408,419,420,420,409,408,409,420,421,421,410,409,410,421,422,422,411,410,411,422,423,423,412,411,412,423,424,424,413,412,413,424,425,425,414,413,414,425,426,426,415,414,415,426,427,427,416,415,416,427,428,428,417,416,418,429,430,430,419,418,419,430,431,431,420,419,420,431,432,432,421,420,421,432,433,433,422,421,422,433,434,434,423,422,423,434,435,435,424,423,424,435,436,436,425,424,425,436,437,437,426,425,426,437,438,438,427,426,427,438,439,439,428,427,429,0,3,3,430,429,430,3,5,5,431,430,431,5,7,7,432,431,432,7,9,9,433,432,433,9,11,11,434,433,434,11,13,13,435,434,435,13,15,15,436,435,436,15,17,17,437,436,437,17,19,19,438,437,438,19,21,21,439,438,21,20,440,440,441,21,441,440,442,442,443,441,443,442,444,444,445,443,445,444,446,446,447,445,447,446,448,448,449,447,449,448,450,450,451,449,451,450,452,452,453,451,453,452,454,454,455,453,455,454,456,456,457,455,457,456,458,458,459,457,20,32,460,460,440,20,440,460,461,461,442,440,442,461,462,462,444,442,444,462,463,463,446,444,446,463,464,464,448,446,448,464,465,465,450,448,450,465,466,466,452,450,452,466,467,467,454,452,454,467,468,468,456,454,456,468,469,469,458,456,32,43,470,470,460,32,460,470,471,471,461,460,461,471,472,472,462,461,462,472,473,473,463,462,463,473,474,474,464,463,464,474,475,475,465,464,465,475,476,476,466,465,466,476,477,477,467,466,467,477,478,478,468,467,468,478,479,479,469,468,43,54,480,480,470,43,470,480,481,481,471,470,471,481,482,482,472,471,472,482,483,483,473,472,473,483,484,484,474,473,474,484,485,485,475,474,475,485,486,486,476,475,476,486,487,487,477,476,477,487,488,488,478,477,478,488,489,489,479,478,54,65,490,490,480,54,480,490,491,491,481,480,481,491,492,492,482,481,482,492,493,493,483,482,483,493,494,494,484,483,484,494,495,495,485,484,485,495,496,496,486,485,486,496,497,497,487,486,487,497,498,498,488,487,488,498,499,499,489,488,65,76,500,500,490,65,490,500,501,501,491,490,491,501,502,502,492,491,492,502,503,503,493,492,493,503,504,504,494,493,494,504,505,505,495,494,495,505,506,506,496,495,496,506,507,507,497,496,497,507,508,508,498,497,498,508,509,509,499,498,76,87,510,510,500,76,500,510,511,511,501,500,501,511,512,512,502,501,502,512,513,513,503,502,503,513,514,514,504,503,504,514,515,515,505,504,505,515,516,516,506,505,506,516,517,517,507,506,507,517,518,518,508,507,508,518,519,519,509,508,87,98,520,520,510,87,510,520,521,521,511,510,511,521,522,522,512,511,512,522,523,523,513,512,513,523,524,524,514,513,514,524,525,525,515,514,515,525,526,526,516,515,516,526,527,527,517,516,517,527,528,528,518,517,518,528,529,529,519,518,98,109,530,530,520,98,520,530,531,531,521,520,521,531,532,532,522,521,522,532,533,533,523,522,523,533,534,534,524,523,524,534,535,535,525,524,525,535,536,536,526,525,526,536,537,537,527,526,527,537,538,538,528,527,528,538,539,539,529,528,109,120,540,540,530,109,530,540,541,541,531,530,531,541,542,542,532,531,532,542,543,543,533,532,533,543,544,544,534,533,534,544,545,545,535,534,535,545,546,546,536,535,536,546,547,547,537,536,537,547,548,548,538,537,538,548,549,549,539,538,120,131,550,550,540,120,540,550,551,551,541,540,541,551,552,552,542,541,542,552,553,553,543,542,543,553,554,554,544,543,544,554,555,555,545,544,545,555,556,556,546,545,546,556,557,557,547,546,547,557,558,558,548,547,548,558,559,559,549,548,131,142,560,560,550,131,550,560,561,561,551,550,551,561,562,562,552,551,552,562,563,563,553,552,553,563,564,564,554,553,554,564,565,565,555,554,555,565,566,566,556,555,556,566,567,567,557,556,557,567,568,568,558,557,558,568,569,569,559,558,142,153,570,570,560,142,560,570,571,571,561,560,561,571,572,572,562,561,562,572,573,573,563,562,563,573,574,574,564,563,564,574,575,575,565,564,565,575,576,576,566,565,566,576,577,577,567,566,567,577,578,578,568,567,568,578,579,579,569,568,153,164,580,580,570,153,570,580,581,581,571,570,571,581,582,582,572,571,572,582,583,583,573,572,573,583,584,584,574,573,574,584,585,585,575,574,575,585,586,586,576,575,576,586,587,587,577,576,577,587,588,588,578,577,578,588,589,589,579,578,164,175,590,590,580,164,580,590,591,591,581,580,581,591,592,592,582,581,582,592,593,593,583,582,583,593,594,594,584,583,584,594,595,595,585,584,585,595,596,596,586,585,586,596,597,597,587,586,587,597,598,598,588,587,588,598,599,599,589,588,175,186,600,600,590,175,590,600,601,601,591,590,591,601,602,602,592,591,592,602,603,603,593,592,593,603,604,604,594,593,594,604,605,605,595,594,595,605,606,606,596,595,596,606,607,607,597,596,597,607,608,608,598,597,598,608,609,609,599,598,186,197,610,610,600,186,600,610,611,611,601,600,601,611,612,612,602,601,602,612,613,613,603,602,603,613,614,614,604,603,604,614,615,615,605,604,605,615,616,616,606,605,606,616,617,617,607,606,607,617,618,618,608,607,608,618,619,619,609,608,197,208,620,620,610,197,610,620,621,621,611,610,611,621,622,622,612,611,612,622,623,623,613,612,613,623,624,624,614,613,614,624,625,625,615,614,615,625,626,626,616,615,616,626,627,627,617,616,617,627,628,628,618,617,618,628,629,629,619,618,208,219,630,630,620,208,620,630,631,631,621,620,621,631,632,632,622,621,622,632,633,633,623,622,623,633,634,634,624,623,624,634,635,635,625,624,625,635,636,636,626,625,626,636,637,637,627,626,627,637,638,638,628,627,628,638,639,639,629,628,219,230,640,640,630,219,630,640,641,641,631,630,631,641,642,642,632,631,632,642,643,643,633,632,633,643,644,644,634,633,634,644,645,645,635,634,635,645,646,646,636,635,636,646,647,647,637,636,637,647,648,648,638,637,638,648,649,649,639,638,230,241,650,650,640,230,640,650,651,651,641,640,641,651,652,652,642,641,642,652,653,653,643,642,643,653,654,654,644,643,644,654,655,655,645,644,645,655,656,656,646,645,646,656,657,657,647,646,647,657,658,658,648,647,648,658,659,659,649,648,241,252,660,660,650,241,650,660,661,661,651,650,651,661,662,662,652,651,652,662,663,663,653,652,653,663,664,664,654,653,654,664,665,665,655,654,655,665,666,666,656,655,656,666,667,667,657,656,657,667,668,668,658,657,658,668,669,669,659,658,252,263,670,670,660,252,660,670,671,671,661,660,661,671,672,672,662,661,662,672,673,673,663,662,663,673,674,674,664,663,664,674,675,675,665,664,665,675,676,676,666,665,666,676,677,677,667,666,667,677,678,678,668,667,668,678,679,679,669,668,263,274,680,680,670,263,670,680,681,681,671,670,671,681,682,682,672,671,672,682,683,683,673,672,673,683,684,684,674,673,674,684,685,685,675,674,675,685,686,686,676,675,676,686,687,687,677,676,677,687,688,688,678,677,678,688,689,689,679,678,274,285,690,690,680,274,680,690,691,691,681,680,681,691,692,692,682,681,682,692,693,693,683,682,683,693,694,694,684,683,684,694,695,695,685,684,685,695,696,696,686,685,686,696,697,697,687,686,687,697,698,698,688,687,688,698,699,699,689,688,285,296,700,700,690,285,690,700,701,701,691,690,691,701,702,702,692,691,692,702,703,703,693,692,693,703,704,704,694,693,694,704,705,705,695,694,695,705,706,706,696,695,696,706,707,707,697,696,697,707,708,708,698,697,698,708,709,709,699,698,296,307,710,710,700,296,700,710,711,711,701,700,701,711,712,712,702,701,702,712,713,713,703,702,703,713,714,714,704,703,704,714,715,715,705,704,705,715,716,716,706,705,706,716,717,717,707,706,707,717,718,718,708,707,708,718,719,719,709,708,307,318,720,720,710,307,710,720,721,721,711,710,711,721,722,722,712,711,712,722,723,723,713,712,713,723,724,724,714,713,714,724,725,725,715,714,715,725,726,726,716,715,716,726,727,727,717,716,717,727,728,728,718,717,718,728,729,729,719,718,318,329,730,730,720,318,720,730,731,731,721,720,721,731,732,732,722,721,722,732,733,733,723,722,723,733,734,734,724,723,724,734,735,735,725,724,725,735,736,736,726,725,726,736,737,737,727,726,727,737,738,738,728,727,728,738,739,739,729,728,329,340,740,740,730,329,730,740,741,741,731,730,731,741,742,742,732,731,732,742,743,743,733,732,733,743,744,744,734,733,734,744,745,745,735,734,735,745,746,746,736,735,736,746,747,747,737,736,737,747,748,748,738,737,738,748,749,749,739,738,340,351,750,750,740,340,740,750,751,751,741,740,741,751,752,752,742,741,742,752,753,753,743,742,743,753,754,754,744,743,744,754,755,755,745,744,745,755,756,756,746,745,746,756,757,757,747,746,747,757,758,758,748,747,748,758,759,759,749,748,351,362,760,760,750,351,750,760,761,761,751,750,751,761,762,762,752,751,752,762,763,763,753,752,753,763,764,764,754,753,754,764,765,765,755,754,755,765,766,766,756,755,756,766,767,767,757,756,757,767,768,768,758,757,758,768,769,769,759,758,362,373,770,770,760,362,760,770,771,771,761,760,761,771,772,772,762,761,762,772,773,773,763,762,763,773,774,774,764,763,764,774,775,775,765,764,765,775,776,776,766,765,766,776,777,777,767,766,767,777,778,778,768,767,768,778,779,779,769,768,373,384,780,780,770,373,770,780,781,781,771,770,771,781,782,782,772,771,772,782,783,783,773,772,773,783,784,784,774,773,774,784,785,785,775,774,775,785,786,786,776,775,776,786,787,787,777,776,777,787,788,788,778,777,778,788,789,789,779,778,384,395,790,790,780,384,780,790,791,791,781,780,781,791,792,792,782,781,782,792,793,793,783,782,783,793,794,794,784,783,784,794,795,795,785,784,785,795,796,796,786,785,786,796,797,797,787,786,787,797,798,798,788,787,788,798,799,799,789,788,395,406,800,800,790,395,790,800,801,801,791,790,791,801,802,802,792,791,792,802,803,803,793,792,793,803,804,804,794,793,794,804,805,805,795,794,795,805,806,806,796,795,796,806,807,807,797,796,797,807,808,808,798,797,798,808,809,809,799,798,406,417,810,810,800,406,800,810,811,811,801,800,801,811,812,812,802,801,802,812,813,813,803,802,803,813,814,814,804,803,804,814,815,815,805,804,805,815,816,816,806,805,806,816,817,817,807,806,807,817,818,818,808,807,808,818,819,819,809,808,417,428,820,820,810,417,810,820,821,821,811,810,811,821,822,822,812,811,812,822,823,823,813,812,813,823,824,824,814,813,814,824,825,825,815,814,815,825,826,826,816,815,816,826,827,827,817,816,817,827,828,828,818,817,818,828,829,829,819,818,428,439,830,830,820,428,820,830,831,831,821,820,821,831,832,832,822,821,822,832,833,833,823,822,823,833,834,834,824,823,824,834,835,835,825,824,825,835,836,836,826,825,826,836,837,837,827,826,827,837,838,838,828,827,828,838,839,839,829,828,439,21,441,441,830,439,830,441,443,443,831,830,831,443,445,445,832,831,832,445,447,447,833,832,833,447,449,449,834,833,834,449,451,451,835,834,835,451,453,453,836,835,836,453,455,455,837,836,837,455,457,457,838,837,838,457,459,459,839,838,459,458,840,840,841,459,841,840,842,842,843,841,843,842,844,844,845,843,845,844,846,846,847,845,847,846,848,848,849,847,849,848,850,850,851,849,851,850,852,852,853,851,853,852,854,854,855,853,855,854,856,856,857,855,857,856,858,858,859,857,458,469,860,860,840,458,840,860,861,861,842,840,842,861,862,862,844,842,844,862,863,863,846,844,846,863,864,864,848,846,848,864,865,865,850,848,850,865,866,866,852,850,852,866,867,867,854,852,854,867,868,868,856,854,856,868,869,869,858,856,469,479,870,870,860,469,860,870,871,871,861,860,861,871,872,872,862,861,862,872,873,873,863,862,863,873,874,874,864,863,864,874,875,875,865,864,865,875,876,876,866,865,866,876,877,877,867,866,867,877,878,878,868,867,868,878,879,879,869,868,479,489,880,880,870,479,870,880,881,881,871,870,871,881,882,882,872,871,872,882,883,883,873,872,873,883,884,884,874,873,874,884,885,885,875,874,875,885,886,886,876,875,876,886,887,887,877,876,877,887,888,888,878,877,878,888,889,889,879,878,489,499,890,890,880,489,880,890,891,891,881,880,881,891,892,892,882,881,882,892,893,893,883,882,883,893,894,894,884,883,884,894,895,895,885,884,885,895,896,896,886,885,886,896,897,897,887,886,887,897,898,898,888,887,888,898,899,899,889,888,499,509,900,900,890,499,890,900,901,901,891,890,891,901,902,902,892,891,892,902,903,903,893,892,893,903,904,904,894,893,894,904,905,905,895,894,895,905,906,906,896,895,896,906,907,907,897,896,897,907,908,908,898,897,898,908,909,909,899,898,509,519,910,910,900,509,900,910,911,911,901,900,901,911,912,912,902,901,902,912,913,913,903,902,903,913,914,914,904,903,904,914,915,915,905,904,905,915,916,916,906,905,906,916,917,917,907,906,907,917,918,918,908,907,908,918,919,919,909,908,519,529,920,920,910,519,910,920,921,921,911,910,911,921,922,922,912,911,912,922,923,923,913,912,913,923,924,924,914,913,914,924,925,925,915,914,915,925,926,926,916,915,916,926,927,927,917,916,917,927,928,928,918,917,918,928,929,929,919,918,529,539,930,930,920,529,920,930,931,931,921,920,921,931,932,932,922,921,922,932,933,933,923,922,923,933,934,934,924,923,924,934,935,935,925,924,925,935,936,936,926,925,926,936,937,937,927,926,927,937,938,938,928,927,928,938,939,939,929,928,539,549,940,940,930,539,930,940,941,941,931,930,931,941,942,942,932,931,932,942,943,943,933,932,933,943,944,944,934,933,934,944,945,945,935,934,935,945,946,946,936,935,936,946,947,947,937,936,937,947,948,948,938,937,938,948,949,949,939,938,549,559,950,950,940,549,940,950,951,951,941,940,941,951,952,952,942,941,942,952,953,953,943,942,943,953,954,954,944,943,944,954,955,955,945,944,945,955,956,956,946,945,946,956,957,957,947,946,947,957,958,958,948,947,948,958,959,959,949,948,559,569,960,960,950,559,950,960,961,961,951,950,951,961,962,962,952,951,952,962,963,963,953,952,953,963,964,964,954,953,954,964,965,965,955,954,955,965,966,966,956,955,956,966,967,967,957,956,957,967,968,968,958,957,958,968,969,969,959,958,569,579,970,970,960,569,960,970,971,971,961,960,961,971,972,972,962,961,962,972,973,973,963,962,963,973,974,974,964,963,964,974,975,975,965,964,965,975,976,976,966,965,966,976,977,977,967,966,967,977,978,978,968,967,968,978,979,979,969,968,579,589,980,980,970,579,970,980,981,981,971,970,971,981,982,982,972,971,972,982,983,983,973,972,973,983,984,984,974,973,974,984,985,985,975,974,975,985,986,986,976,975,976,986,987,987,977,976,977,987,988,988,978,977,978,988,989,989,979,978,589,599,990,990,980,589,980,990,991,991,981,980,981,991,992,992,982,981,982,992,993,993,983,982,983,993,994,994,984,983,984,994,995,995,985,984,985,995,996,996,986,985,986,996,997,997,987,986,987,997,998,998,988,987,988,998,999,999,989,988,599,609,1e3,1e3,990,599,990,1e3,1001,1001,991,990,991,1001,1002,1002,992,991,992,1002,1003,1003,993,992,993,1003,1004,1004,994,993,994,1004,1005,1005,995,994,995,1005,1006,1006,996,995,996,1006,1007,1007,997,996,997,1007,1008,1008,998,997,998,1008,1009,1009,999,998,609,619,1010,1010,1e3,609,1e3,1010,1011,1011,1001,1e3,1001,1011,1012,1012,1002,1001,1002,1012,1013,1013,1003,1002,1003,1013,1014,1014,1004,1003,1004,1014,1015,1015,1005,1004,1005,1015,1016,1016,1006,1005,1006,1016,1017,1017,1007,1006,1007,1017,1018,1018,1008,1007,1008,1018,1019,1019,1009,1008,619,629,1020,1020,1010,619,1010,1020,1021,1021,1011,1010,1011,1021,1022,1022,1012,1011,1012,1022,1023,1023,1013,1012,1013,1023,1024,1024,1014,1013,1014,1024,1025,1025,1015,1014,1015,1025,1026,1026,1016,1015,1016,1026,1027,1027,1017,1016,1017,1027,1028,1028,1018,1017,1018,1028,1029,1029,1019,1018,629,639,1030,1030,1020,629,1020,1030,1031,1031,1021,1020,1021,1031,1032,1032,1022,1021,1022,1032,1033,1033,1023,1022,1023,1033,1034,1034,1024,1023,1024,1034,1035,1035,1025,1024,1025,1035,1036,1036,1026,1025,1026,1036,1037,1037,1027,1026,1027,1037,1038,1038,1028,1027,1028,1038,1039,1039,1029,1028,639,649,1040,1040,1030,639,1030,1040,1041,1041,1031,1030,1031,1041,1042,1042,1032,1031,1032,1042,1043,1043,1033,1032,1033,1043,1044,1044,1034,1033,1034,1044,1045,1045,1035,1034,1035,1045,1046,1046,1036,1035,1036,1046,1047,1047,1037,1036,1037,1047,1048,1048,1038,1037,1038,1048,1049,1049,1039,1038,649,659,1050,1050,1040,649,1040,1050,1051,1051,1041,1040,1041,1051,1052,1052,1042,1041,1042,1052,1053,1053,1043,1042,1043,1053,1054,1054,1044,1043,1044,1054,1055,1055,1045,1044,1045,1055,1056,1056,1046,1045,1046,1056,1057,1057,1047,1046,1047,1057,1058,1058,1048,1047,1048,1058,1059,1059,1049,1048,659,669,1060,1060,1050,659,1050,1060,1061,1061,1051,1050,1051,1061,1062,1062,1052,1051,1052,1062,1063,1063,1053,1052,1053,1063,1064,1064,1054,1053,1054,1064,1065,1065,1055,1054,1055,1065,1066,1066,1056,1055,1056,1066,1067,1067,1057,1056,1057,1067,1068,1068,1058,1057,1058,1068,1069,1069,1059,1058,669,679,1070,1070,1060,669,1060,1070,1071,1071,1061,1060,1061,1071,1072,1072,1062,1061,1062,1072,1073,1073,1063,1062,1063,1073,1074,1074,1064,1063,1064,1074,1075,1075,1065,1064,1065,1075,1076,1076,1066,1065,1066,1076,1077,1077,1067,1066,1067,1077,1078,1078,1068,1067,1068,1078,1079,1079,1069,1068,679,689,1080,1080,1070,679,1070,1080,1081,1081,1071,1070,1071,1081,1082,1082,1072,1071,1072,1082,1083,1083,1073,1072,1073,1083,1084,1084,1074,1073,1074,1084,1085,1085,1075,1074,1075,1085,1086,1086,1076,1075,1076,1086,1087,1087,1077,1076,1077,1087,1088,1088,1078,1077,1078,1088,1089,1089,1079,1078,689,699,1090,1090,1080,689,1080,1090,1091,1091,1081,1080,1081,1091,1092,1092,1082,1081,1082,1092,1093,1093,1083,1082,1083,1093,1094,1094,1084,1083,1084,1094,1095,1095,1085,1084,1085,1095,1096,1096,1086,1085,1086,1096,1097,1097,1087,1086,1087,1097,1098,1098,1088,1087,1088,1098,1099,1099,1089,1088,699,709,1100,1100,1090,699,1090,1100,1101,1101,1091,1090,1091,1101,1102,1102,1092,1091,1092,1102,1103,1103,1093,1092,1093,1103,1104,1104,1094,1093,1094,1104,1105,1105,1095,1094,1095,1105,1106,1106,1096,1095,1096,1106,1107,1107,1097,1096,1097,1107,1108,1108,1098,1097,1098,1108,1109,1109,1099,1098,709,719,1110,1110,1100,709,1100,1110,1111,1111,1101,1100,1101,1111,1112,1112,1102,1101,1102,1112,1113,1113,1103,1102,1103,1113,1114,1114,1104,1103,1104,1114,1115,1115,1105,1104,1105,1115,1116,1116,1106,1105,1106,1116,1117,1117,1107,1106,1107,1117,1118,1118,1108,1107,1108,1118,1119,1119,1109,1108,719,729,1120,1120,1110,719,1110,1120,1121,1121,1111,1110,1111,1121,1122,1122,1112,1111,1112,1122,1123,1123,1113,1112,1113,1123,1124,1124,1114,1113,1114,1124,1125,1125,1115,1114,1115,1125,1126,1126,1116,1115,1116,1126,1127,1127,1117,1116,1117,1127,1128,1128,1118,1117,1118,1128,1129,1129,1119,1118,729,739,1130,1130,1120,729,1120,1130,1131,1131,1121,1120,1121,1131,1132,1132,1122,1121,1122,1132,1133,1133,1123,1122,1123,1133,1134,1134,1124,1123,1124,1134,1135,1135,1125,1124,1125,1135,1136,1136,1126,1125,1126,1136,1137,1137,1127,1126,1127,1137,1138,1138,1128,1127,1128,1138,1139,1139,1129,1128,739,749,1140,1140,1130,739,1130,1140,1141,1141,1131,1130,1131,1141,1142,1142,1132,1131,1132,1142,1143,1143,1133,1132,1133,1143,1144,1144,1134,1133,1134,1144,1145,1145,1135,1134,1135,1145,1146,1146,1136,1135,1136,1146,1147,1147,1137,1136,1137,1147,1148,1148,1138,1137,1138,1148,1149,1149,1139,1138,749,759,1150,1150,1140,749,1140,1150,1151,1151,1141,1140,1141,1151,1152,1152,1142,1141,1142,1152,1153,1153,1143,1142,1143,1153,1154,1154,1144,1143,1144,1154,1155,1155,1145,1144,1145,1155,1156,1156,1146,1145,1146,1156,1157,1157,1147,1146,1147,1157,1158,1158,1148,1147,1148,1158,1159,1159,1149,1148,759,769,1160,1160,1150,759,1150,1160,1161,1161,1151,1150,1151,1161,1162,1162,1152,1151,1152,1162,1163,1163,1153,1152,1153,1163,1164,1164,1154,1153,1154,1164,1165,1165,1155,1154,1155,1165,1166,1166,1156,1155,1156,1166,1167,1167,1157,1156,1157,1167,1168,1168,1158,1157,1158,1168,1169,1169,1159,1158,769,779,1170,1170,1160,769,1160,1170,1171,1171,1161,1160,1161,1171,1172,1172,1162,1161,1162,1172,1173,1173,1163,1162,1163,1173,1174,1174,1164,1163,1164,1174,1175,1175,1165,1164,1165,1175,1176,1176,1166,1165,1166,1176,1177,1177,1167,1166,1167,1177,1178,1178,1168,1167,1168,1178,1179,1179,1169,1168,779,789,1180,1180,1170,779,1170,1180,1181,1181,1171,1170,1171,1181,1182,1182,1172,1171,1172,1182,1183,1183,1173,1172,1173,1183,1184,1184,1174,1173,1174,1184,1185,1185,1175,1174,1175,1185,1186,1186,1176,1175,1176,1186,1187,1187,1177,1176,1177,1187,1188,1188,1178,1177,1178,1188,1189,1189,1179,1178,789,799,1190,1190,1180,789,1180,1190,1191,1191,1181,1180,1181,1191,1192,1192,1182,1181,1182,1192,1193,1193,1183,1182,1183,1193,1194,1194,1184,1183,1184,1194,1195,1195,1185,1184,1185,1195,1196,1196,1186,1185,1186,1196,1197,1197,1187,1186,1187,1197,1198,1198,1188,1187,1188,1198,1199,1199,1189,1188,799,809,1200,1200,1190,799,1190,1200,1201,1201,1191,1190,1191,1201,1202,1202,1192,1191,1192,1202,1203,1203,1193,1192,1193,1203,1204,1204,1194,1193,1194,1204,1205,1205,1195,1194,1195,1205,1206,1206,1196,1195,1196,1206,1207,1207,1197,1196,1197,1207,1208,1208,1198,1197,1198,1208,1209,1209,1199,1198,809,819,1210,1210,1200,809,1200,1210,1211,1211,1201,1200,1201,1211,1212,1212,1202,1201,1202,1212,1213,1213,1203,1202,1203,1213,1214,1214,1204,1203,1204,1214,1215,1215,1205,1204,1205,1215,1216,1216,1206,1205,1206,1216,1217,1217,1207,1206,1207,1217,1218,1218,1208,1207,1208,1218,1219,1219,1209,1208,819,829,1220,1220,1210,819,1210,1220,1221,1221,1211,1210,1211,1221,1222,1222,1212,1211,1212,1222,1223,1223,1213,1212,1213,1223,1224,1224,1214,1213,1214,1224,1225,1225,1215,1214,1215,1225,1226,1226,1216,1215,1216,1226,1227,1227,1217,1216,1217,1227,1228,1228,1218,1217,1218,1228,1229,1229,1219,1218,829,839,1230,1230,1220,829,1220,1230,1231,1231,1221,1220,1221,1231,1232,1232,1222,1221,1222,1232,1233,1233,1223,1222,1223,1233,1234,1234,1224,1223,1224,1234,1235,1235,1225,1224,1225,1235,1236,1236,1226,1225,1226,1236,1237,1237,1227,1226,1227,1237,1238,1238,1228,1227,1228,1238,1239,1239,1229,1228,839,459,841,841,1230,839,1230,841,843,843,1231,1230,1231,843,845,845,1232,1231,1232,845,847,847,1233,1232,1233,847,849,849,1234,1233,1234,849,851,851,1235,1234,1235,851,853,853,1236,1235,1236,853,855,855,1237,1236,1237,855,857,857,1238,1237,1238,857,859,859,1239,1238,859,858,1240,1240,1241,859,1241,1240,1242,1242,1243,1241,1243,1242,1244,1244,1245,1243,1245,1244,1246,1246,1247,1245,1247,1246,1248,1248,1249,1247,1249,1248,1250,1250,1251,1249,1251,1250,1252,1252,1253,1251,1253,1252,1254,1254,1255,1253,1255,1254,1256,1256,1257,1255,1257,1256,1258,858,869,1259,1259,1240,858,1240,1259,1260,1260,1242,1240,1242,1260,1261,1261,1244,1242,1244,1261,1262,1262,1246,1244,1246,1262,1263,1263,1248,1246,1248,1263,1264,1264,1250,1248,1250,1264,1265,1265,1252,1250,1252,1265,1266,1266,1254,1252,1254,1266,1267,1267,1256,1254,1256,1267,1258,869,879,1268,1268,1259,869,1259,1268,1269,1269,1260,1259,1260,1269,1270,1270,1261,1260,1261,1270,1271,1271,1262,1261,1262,1271,1272,1272,1263,1262,1263,1272,1273,1273,1264,1263,1264,1273,1274,1274,1265,1264,1265,1274,1275,1275,1266,1265,1266,1275,1276,1276,1267,1266,1267,1276,1258,879,889,1277,1277,1268,879,1268,1277,1278,1278,1269,1268,1269,1278,1279,1279,1270,1269,1270,1279,1280,1280,1271,1270,1271,1280,1281,1281,1272,1271,1272,1281,1282,1282,1273,1272,1273,1282,1283,1283,1274,1273,1274,1283,1284,1284,1275,1274,1275,1284,1285,1285,1276,1275,1276,1285,1258,889,899,1286,1286,1277,889,1277,1286,1287,1287,1278,1277,1278,1287,1288,1288,1279,1278,1279,1288,1289,1289,1280,1279,1280,1289,1290,1290,1281,1280,1281,1290,1291,1291,1282,1281,1282,1291,1292,1292,1283,1282,1283,1292,1293,1293,1284,1283,1284,1293,1294,1294,1285,1284,1285,1294,1258,899,909,1295,1295,1286,899,1286,1295,1296,1296,1287,1286,1287,1296,1297,1297,1288,1287,1288,1297,1298,1298,1289,1288,1289,1298,1299,1299,1290,1289,1290,1299,1300,1300,1291,1290,1291,1300,1301,1301,1292,1291,1292,1301,1302,1302,1293,1292,1293,1302,1303,1303,1294,1293,1294,1303,1258,909,919,1304,1304,1295,909,1295,1304,1305,1305,1296,1295,1296,1305,1306,1306,1297,1296,1297,1306,1307,1307,1298,1297,1298,1307,1308,1308,1299,1298,1299,1308,1309,1309,1300,1299,1300,1309,1310,1310,1301,1300,1301,1310,1311,1311,1302,1301,1302,1311,1312,1312,1303,1302,1303,1312,1258,919,929,1313,1313,1304,919,1304,1313,1314,1314,1305,1304,1305,1314,1315,1315,1306,1305,1306,1315,1316,1316,1307,1306,1307,1316,1317,1317,1308,1307,1308,1317,1318,1318,1309,1308,1309,1318,1319,1319,1310,1309,1310,1319,1320,1320,1311,1310,1311,1320,1321,1321,1312,1311,1312,1321,1258,929,939,1322,1322,1313,929,1313,1322,1323,1323,1314,1313,1314,1323,1324,1324,1315,1314,1315,1324,1325,1325,1316,1315,1316,1325,1326,1326,1317,1316,1317,1326,1327,1327,1318,1317,1318,1327,1328,1328,1319,1318,1319,1328,1329,1329,1320,1319,1320,1329,1330,1330,1321,1320,1321,1330,1258,939,949,1331,1331,1322,939,1322,1331,1332,1332,1323,1322,1323,1332,1333,1333,1324,1323,1324,1333,1334,1334,1325,1324,1325,1334,1335,1335,1326,1325,1326,1335,1336,1336,1327,1326,1327,1336,1337,1337,1328,1327,1328,1337,1338,1338,1329,1328,1329,1338,1339,1339,1330,1329,1330,1339,1258,949,959,1340,1340,1331,949,1331,1340,1341,1341,1332,1331,1332,1341,1342,1342,1333,1332,1333,1342,1343,1343,1334,1333,1334,1343,1344,1344,1335,1334,1335,1344,1345,1345,1336,1335,1336,1345,1346,1346,1337,1336,1337,1346,1347,1347,1338,1337,1338,1347,1348,1348,1339,1338,1339,1348,1258,959,969,1349,1349,1340,959,1340,1349,1350,1350,1341,1340,1341,1350,1351,1351,1342,1341,1342,1351,1352,1352,1343,1342,1343,1352,1353,1353,1344,1343,1344,1353,1354,1354,1345,1344,1345,1354,1355,1355,1346,1345,1346,1355,1356,1356,1347,1346,1347,1356,1357,1357,1348,1347,1348,1357,1258,969,979,1358,1358,1349,969,1349,1358,1359,1359,1350,1349,1350,1359,1360,1360,1351,1350,1351,1360,1361,1361,1352,1351,1352,1361,1362,1362,1353,1352,1353,1362,1363,1363,1354,1353,1354,1363,1364,1364,1355,1354,1355,1364,1365,1365,1356,1355,1356,1365,1366,1366,1357,1356,1357,1366,1258,979,989,1367,1367,1358,979,1358,1367,1368,1368,1359,1358,1359,1368,1369,1369,1360,1359,1360,1369,1370,1370,1361,1360,1361,1370,1371,1371,1362,1361,1362,1371,1372,1372,1363,1362,1363,1372,1373,1373,1364,1363,1364,1373,1374,1374,1365,1364,1365,1374,1375,1375,1366,1365,1366,1375,1258,989,999,1376,1376,1367,989,1367,1376,1377,1377,1368,1367,1368,1377,1378,1378,1369,1368,1369,1378,1379,1379,1370,1369,1370,1379,1380,1380,1371,1370,1371,1380,1381,1381,1372,1371,1372,1381,1382,1382,1373,1372,1373,1382,1383,1383,1374,1373,1374,1383,1384,1384,1375,1374,1375,1384,1258,999,1009,1385,1385,1376,999,1376,1385,1386,1386,1377,1376,1377,1386,1387,1387,1378,1377,1378,1387,1388,1388,1379,1378,1379,1388,1389,1389,1380,1379,1380,1389,1390,1390,1381,1380,1381,1390,1391,1391,1382,1381,1382,1391,1392,1392,1383,1382,1383,1392,1393,1393,1384,1383,1384,1393,1258,1009,1019,1394,1394,1385,1009,1385,1394,1395,1395,1386,1385,1386,1395,1396,1396,1387,1386,1387,1396,1397,1397,1388,1387,1388,1397,1398,1398,1389,1388,1389,1398,1399,1399,1390,1389,1390,1399,1400,1400,1391,1390,1391,1400,1401,1401,1392,1391,1392,1401,1402,1402,1393,1392,1393,1402,1258,1019,1029,1403,1403,1394,1019,1394,1403,1404,1404,1395,1394,1395,1404,1405,1405,1396,1395,1396,1405,1406,1406,1397,1396,1397,1406,1407,1407,1398,1397,1398,1407,1408,1408,1399,1398,1399,1408,1409,1409,1400,1399,1400,1409,1410,1410,1401,1400,1401,1410,1411,1411,1402,1401,1402,1411,1258,1029,1039,1412,1412,1403,1029,1403,1412,1413,1413,1404,1403,1404,1413,1414,1414,1405,1404,1405,1414,1415,1415,1406,1405,1406,1415,1416,1416,1407,1406,1407,1416,1417,1417,1408,1407,1408,1417,1418,1418,1409,1408,1409,1418,1419,1419,1410,1409,1410,1419,1420,1420,1411,1410,1411,1420,1258,1039,1049,1421,1421,1412,1039,1412,1421,1422,1422,1413,1412,1413,1422,1423,1423,1414,1413,1414,1423,1424,1424,1415,1414,1415,1424,1425,1425,1416,1415,1416,1425,1426,1426,1417,1416,1417,1426,1427,1427,1418,1417,1418,1427,1428,1428,1419,1418,1419,1428,1429,1429,1420,1419,1420,1429,1258,1049,1059,1430,1430,1421,1049,1421,1430,1431,1431,1422,1421,1422,1431,1432,1432,1423,1422,1423,1432,1433,1433,1424,1423,1424,1433,1434,1434,1425,1424,1425,1434,1435,1435,1426,1425,1426,1435,1436,1436,1427,1426,1427,1436,1437,1437,1428,1427,1428,1437,1438,1438,1429,1428,1429,1438,1258,1059,1069,1439,1439,1430,1059,1430,1439,1440,1440,1431,1430,1431,1440,1441,1441,1432,1431,1432,1441,1442,1442,1433,1432,1433,1442,1443,1443,1434,1433,1434,1443,1444,1444,1435,1434,1435,1444,1445,1445,1436,1435,1436,1445,1446,1446,1437,1436,1437,1446,1447,1447,1438,1437,1438,1447,1258,1069,1079,1448,1448,1439,1069,1439,1448,1449,1449,1440,1439,1440,1449,1450,1450,1441,1440,1441,1450,1451,1451,1442,1441,1442,1451,1452,1452,1443,1442,1443,1452,1453,1453,1444,1443,1444,1453,1454,1454,1445,1444,1445,1454,1455,1455,1446,1445,1446,1455,1456,1456,1447,1446,1447,1456,1258,1079,1089,1457,1457,1448,1079,1448,1457,1458,1458,1449,1448,1449,1458,1459,1459,1450,1449,1450,1459,1460,1460,1451,1450,1451,1460,1461,1461,1452,1451,1452,1461,1462,1462,1453,1452,1453,1462,1463,1463,1454,1453,1454,1463,1464,1464,1455,1454,1455,1464,1465,1465,1456,1455,1456,1465,1258,1089,1099,1466,1466,1457,1089,1457,1466,1467,1467,1458,1457,1458,1467,1468,1468,1459,1458,1459,1468,1469,1469,1460,1459,1460,1469,1470,1470,1461,1460,1461,1470,1471,1471,1462,1461,1462,1471,1472,1472,1463,1462,1463,1472,1473,1473,1464,1463,1464,1473,1474,1474,1465,1464,1465,1474,1258,1099,1109,1475,1475,1466,1099,1466,1475,1476,1476,1467,1466,1467,1476,1477,1477,1468,1467,1468,1477,1478,1478,1469,1468,1469,1478,1479,1479,1470,1469,1470,1479,1480,1480,1471,1470,1471,1480,1481,1481,1472,1471,1472,1481,1482,1482,1473,1472,1473,1482,1483,1483,1474,1473,1474,1483,1258,1109,1119,1484,1484,1475,1109,1475,1484,1485,1485,1476,1475,1476,1485,1486,1486,1477,1476,1477,1486,1487,1487,1478,1477,1478,1487,1488,1488,1479,1478,1479,1488,1489,1489,1480,1479,1480,1489,1490,1490,1481,1480,1481,1490,1491,1491,1482,1481,1482,1491,1492,1492,1483,1482,1483,1492,1258,1119,1129,1493,1493,1484,1119,1484,1493,1494,1494,1485,1484,1485,1494,1495,1495,1486,1485,1486,1495,1496,1496,1487,1486,1487,1496,1497,1497,1488,1487,1488,1497,1498,1498,1489,1488,1489,1498,1499,1499,1490,1489,1490,1499,1500,1500,1491,1490,1491,1500,1501,1501,1492,1491,1492,1501,1258,1129,1139,1502,1502,1493,1129,1493,1502,1503,1503,1494,1493,1494,1503,1504,1504,1495,1494,1495,1504,1505,1505,1496,1495,1496,1505,1506,1506,1497,1496,1497,1506,1507,1507,1498,1497,1498,1507,1508,1508,1499,1498,1499,1508,1509,1509,1500,1499,1500,1509,1510,1510,1501,1500,1501,1510,1258,1139,1149,1511,1511,1502,1139,1502,1511,1512,1512,1503,1502,1503,1512,1513,1513,1504,1503,1504,1513,1514,1514,1505,1504,1505,1514,1515,1515,1506,1505,1506,1515,1516,1516,1507,1506,1507,1516,1517,1517,1508,1507,1508,1517,1518,1518,1509,1508,1509,1518,1519,1519,1510,1509,1510,1519,1258,1149,1159,1520,1520,1511,1149,1511,1520,1521,1521,1512,1511,1512,1521,1522,1522,1513,1512,1513,1522,1523,1523,1514,1513,1514,1523,1524,1524,1515,1514,1515,1524,1525,1525,1516,1515,1516,1525,1526,1526,1517,1516,1517,1526,1527,1527,1518,1517,1518,1527,1528,1528,1519,1518,1519,1528,1258,1159,1169,1529,1529,1520,1159,1520,1529,1530,1530,1521,1520,1521,1530,1531,1531,1522,1521,1522,1531,1532,1532,1523,1522,1523,1532,1533,1533,1524,1523,1524,1533,1534,1534,1525,1524,1525,1534,1535,1535,1526,1525,1526,1535,1536,1536,1527,1526,1527,1536,1537,1537,1528,1527,1528,1537,1258,1169,1179,1538,1538,1529,1169,1529,1538,1539,1539,1530,1529,1530,1539,1540,1540,1531,1530,1531,1540,1541,1541,1532,1531,1532,1541,1542,1542,1533,1532,1533,1542,1543,1543,1534,1533,1534,1543,1544,1544,1535,1534,1535,1544,1545,1545,1536,1535,1536,1545,1546,1546,1537,1536,1537,1546,1258,1179,1189,1547,1547,1538,1179,1538,1547,1548,1548,1539,1538,1539,1548,1549,1549,1540,1539,1540,1549,1550,1550,1541,1540,1541,1550,1551,1551,1542,1541,1542,1551,1552,1552,1543,1542,1543,1552,1553,1553,1544,1543,1544,1553,1554,1554,1545,1544,1545,1554,1555,1555,1546,1545,1546,1555,1258,1189,1199,1556,1556,1547,1189,1547,1556,1557,1557,1548,1547,1548,1557,1558,1558,1549,1548,1549,1558,1559,1559,1550,1549,1550,1559,1560,1560,1551,1550,1551,1560,1561,1561,1552,1551,1552,1561,1562,1562,1553,1552,1553,1562,1563,1563,1554,1553,1554,1563,1564,1564,1555,1554,1555,1564,1258,1199,1209,1565,1565,1556,1199,1556,1565,1566,1566,1557,1556,1557,1566,1567,1567,1558,1557,1558,1567,1568,1568,1559,1558,1559,1568,1569,1569,1560,1559,1560,1569,1570,1570,1561,1560,1561,1570,1571,1571,1562,1561,1562,1571,1572,1572,1563,1562,1563,1572,1573,1573,1564,1563,1564,1573,1258,1209,1219,1574,1574,1565,1209,1565,1574,1575,1575,1566,1565,1566,1575,1576,1576,1567,1566,1567,1576,1577,1577,1568,1567,1568,1577,1578,1578,1569,1568,1569,1578,1579,1579,1570,1569,1570,1579,1580,1580,1571,1570,1571,1580,1581,1581,1572,1571,1572,1581,1582,1582,1573,1572,1573,1582,1258,1219,1229,1583,1583,1574,1219,1574,1583,1584,1584,1575,1574,1575,1584,1585,1585,1576,1575,1576,1585,1586,1586,1577,1576,1577,1586,1587,1587,1578,1577,1578,1587,1588,1588,1579,1578,1579,1588,1589,1589,1580,1579,1580,1589,1590,1590,1581,1580,1581,1590,1591,1591,1582,1581,1582,1591,1258,1229,1239,1592,1592,1583,1229,1583,1592,1593,1593,1584,1583,1584,1593,1594,1594,1585,1584,1585,1594,1595,1595,1586,1585,1586,1595,1596,1596,1587,1586,1587,1596,1597,1597,1588,1587,1588,1597,1598,1598,1589,1588,1589,1598,1599,1599,1590,1589,1590,1599,1600,1600,1591,1590,1591,1600,1258,1239,859,1241,1241,1592,1239,1592,1241,1243,1243,1593,1592,1593,1243,1245,1245,1594,1593,1594,1245,1247,1247,1595,1594,1595,1247,1249,1249,1596,1595,1596,1249,1251,1251,1597,1596,1597,1251,1253,1253,1598,1597,1598,1253,1255,1255,1599,1598,1599,1255,1257,1257,1600,1599,1600,1257,1258,1601,1602,1603,1603,1604,1601,1604,1603,1605,1605,1606,1604,1606,1605,1607,1607,1608,1606,1608,1607,1609,1609,1610,1608,1610,1609,1611,1611,1612,1610,1612,1611,1613,1613,1614,1612,1614,1613,1615,1615,1616,1614,1616,1615,1617,1617,1618,1616,1618,1617,1619,1619,1620,1618,1620,1619,1621,1621,1622,1620,1602,1623,1624,1624,1603,1602,1603,1624,1625,1625,1605,1603,1605,1625,1626,1626,1607,1605,1607,1626,1627,1627,1609,1607,1609,1627,1628,1628,1611,1609,1611,1628,1629,1629,1613,1611,1613,1629,1630,1630,1615,1613,1615,1630,1631,1631,1617,1615,1617,1631,1632,1632,1619,1617,1619,1632,1633,1633,1621,1619,1623,1634,1635,1635,1624,1623,1624,1635,1636,1636,1625,1624,1625,1636,1637,1637,1626,1625,1626,1637,1638,1638,1627,1626,1627,1638,1639,1639,1628,1627,1628,1639,1640,1640,1629,1628,1629,1640,1641,1641,1630,1629,1630,1641,1642,1642,1631,1630,1631,1642,1643,1643,1632,1631,1632,1643,1644,1644,1633,1632,1634,1645,1646,1646,1635,1634,1635,1646,1647,1647,1636,1635,1636,1647,1648,1648,1637,1636,1637,1648,1649,1649,1638,1637,1638,1649,1650,1650,1639,1638,1639,1650,1651,1651,1640,1639,1640,1651,1652,1652,1641,1640,1641,1652,1653,1653,1642,1641,1642,1653,1654,1654,1643,1642,1643,1654,1655,1655,1644,1643,1645,1656,1657,1657,1646,1645,1646,1657,1658,1658,1647,1646,1647,1658,1659,1659,1648,1647,1648,1659,1660,1660,1649,1648,1649,1660,1661,1661,1650,1649,1650,1661,1662,1662,1651,1650,1651,1662,1663,1663,1652,1651,1652,1663,1664,1664,1653,1652,1653,1664,1665,1665,1654,1653,1654,1665,1666,1666,1655,1654,1656,1667,1668,1668,1657,1656,1657,1668,1669,1669,1658,1657,1658,1669,1670,1670,1659,1658,1659,1670,1671,1671,1660,1659,1660,1671,1672,1672,1661,1660,1661,1672,1673,1673,1662,1661,1662,1673,1674,1674,1663,1662,1663,1674,1675,1675,1664,1663,1664,1675,1676,1676,1665,1664,1665,1676,1677,1677,1666,1665,1667,1678,1679,1679,1668,1667,1668,1679,1680,1680,1669,1668,1669,1680,1681,1681,1670,1669,1670,1681,1682,1682,1671,1670,1671,1682,1683,1683,1672,1671,1672,1683,1684,1684,1673,1672,1673,1684,1685,1685,1674,1673,1674,1685,1686,1686,1675,1674,1675,1686,1687,1687,1676,1675,1676,1687,1688,1688,1677,1676,1678,1689,1690,1690,1679,1678,1679,1690,1691,1691,1680,1679,1680,1691,1692,1692,1681,1680,1681,1692,1693,1693,1682,1681,1682,1693,1694,1694,1683,1682,1683,1694,1695,1695,1684,1683,1684,1695,1696,1696,1685,1684,1685,1696,1697,1697,1686,1685,1686,1697,1698,1698,1687,1686,1687,1698,1699,1699,1688,1687,1689,1700,1701,1701,1690,1689,1690,1701,1702,1702,1691,1690,1691,1702,1703,1703,1692,1691,1692,1703,1704,1704,1693,1692,1693,1704,1705,1705,1694,1693,1694,1705,1706,1706,1695,1694,1695,1706,1707,1707,1696,1695,1696,1707,1708,1708,1697,1696,1697,1708,1709,1709,1698,1697,1698,1709,1710,1710,1699,1698,1700,1711,1712,1712,1701,1700,1701,1712,1713,1713,1702,1701,1702,1713,1714,1714,1703,1702,1703,1714,1715,1715,1704,1703,1704,1715,1716,1716,1705,1704,1705,1716,1717,1717,1706,1705,1706,1717,1718,1718,1707,1706,1707,1718,1719,1719,1708,1707,1708,1719,1720,1720,1709,1708,1709,1720,1721,1721,1710,1709,1711,1722,1723,1723,1712,1711,1712,1723,1724,1724,1713,1712,1713,1724,1725,1725,1714,1713,1714,1725,1726,1726,1715,1714,1715,1726,1727,1727,1716,1715,1716,1727,1728,1728,1717,1716,1717,1728,1729,1729,1718,1717,1718,1729,1730,1730,1719,1718,1719,1730,1731,1731,1720,1719,1720,1731,1732,1732,1721,1720,1722,1733,1734,1734,1723,1722,1723,1734,1735,1735,1724,1723,1724,1735,1736,1736,1725,1724,1725,1736,1737,1737,1726,1725,1726,1737,1738,1738,1727,1726,1727,1738,1739,1739,1728,1727,1728,1739,1740,1740,1729,1728,1729,1740,1741,1741,1730,1729,1730,1741,1742,1742,1731,1730,1731,1742,1743,1743,1732,1731,1733,1744,1745,1745,1734,1733,1734,1745,1746,1746,1735,1734,1735,1746,1747,1747,1736,1735,1736,1747,1748,1748,1737,1736,1737,1748,1749,1749,1738,1737,1738,1749,1750,1750,1739,1738,1739,1750,1751,1751,1740,1739,1740,1751,1752,1752,1741,1740,1741,1752,1753,1753,1742,1741,1742,1753,1754,1754,1743,1742,1744,1755,1756,1756,1745,1744,1745,1756,1757,1757,1746,1745,1746,1757,1758,1758,1747,1746,1747,1758,1759,1759,1748,1747,1748,1759,1760,1760,1749,1748,1749,1760,1761,1761,1750,1749,1750,1761,1762,1762,1751,1750,1751,1762,1763,1763,1752,1751,1752,1763,1764,1764,1753,1752,1753,1764,1765,1765,1754,1753,1755,1766,1767,1767,1756,1755,1756,1767,1768,1768,1757,1756,1757,1768,1769,1769,1758,1757,1758,1769,1770,1770,1759,1758,1759,1770,1771,1771,1760,1759,1760,1771,1772,1772,1761,1760,1761,1772,1773,1773,1762,1761,1762,1773,1774,1774,1763,1762,1763,1774,1775,1775,1764,1763,1764,1775,1776,1776,1765,1764,1766,1777,1778,1778,1767,1766,1767,1778,1779,1779,1768,1767,1768,1779,1780,1780,1769,1768,1769,1780,1781,1781,1770,1769,1770,1781,1782,1782,1771,1770,1771,1782,1783,1783,1772,1771,1772,1783,1784,1784,1773,1772,1773,1784,1785,1785,1774,1773,1774,1785,1786,1786,1775,1774,1775,1786,1787,1787,1776,1775,1777,1788,1789,1789,1778,1777,1778,1789,1790,1790,1779,1778,1779,1790,1791,1791,1780,1779,1780,1791,1792,1792,1781,1780,1781,1792,1793,1793,1782,1781,1782,1793,1794,1794,1783,1782,1783,1794,1795,1795,1784,1783,1784,1795,1796,1796,1785,1784,1785,1796,1797,1797,1786,1785,1786,1797,1798,1798,1787,1786,1788,1799,1800,1800,1789,1788,1789,1800,1801,1801,1790,1789,1790,1801,1802,1802,1791,1790,1791,1802,1803,1803,1792,1791,1792,1803,1804,1804,1793,1792,1793,1804,1805,1805,1794,1793,1794,1805,1806,1806,1795,1794,1795,1806,1807,1807,1796,1795,1796,1807,1808,1808,1797,1796,1797,1808,1809,1809,1798,1797,1799,1810,1811,1811,1800,1799,1800,1811,1812,1812,1801,1800,1801,1812,1813,1813,1802,1801,1802,1813,1814,1814,1803,1802,1803,1814,1815,1815,1804,1803,1804,1815,1816,1816,1805,1804,1805,1816,1817,1817,1806,1805,1806,1817,1818,1818,1807,1806,1807,1818,1819,1819,1808,1807,1808,1819,1820,1820,1809,1808,1810,1601,1604,1604,1811,1810,1811,1604,1606,1606,1812,1811,1812,1606,1608,1608,1813,1812,1813,1608,1610,1610,1814,1813,1814,1610,1612,1612,1815,1814,1815,1612,1614,1614,1816,1815,1816,1614,1616,1616,1817,1816,1817,1616,1618,1618,1818,1817,1818,1618,1620,1620,1819,1818,1819,1620,1622,1622,1820,1819,1622,1621,1821,1821,1822,1622,1822,1821,1823,1823,1824,1822,1824,1823,1825,1825,1826,1824,1826,1825,1827,1827,1828,1826,1828,1827,1829,1829,1830,1828,1830,1829,1831,1831,1832,1830,1832,1831,1833,1833,1834,1832,1834,1833,1835,1835,1836,1834,1836,1835,1837,1837,1838,1836,1838,1837,1839,1839,649,1838,1621,1633,1840,1840,1821,1621,1821,1840,1841,1841,1823,1821,1823,1841,1842,1842,1825,1823,1825,1842,1843,1843,1827,1825,1827,1843,1844,1844,1829,1827,1829,1844,1845,1845,1831,1829,1831,1845,1846,1846,1833,1831,1833,1846,1847,1847,1835,1833,1835,1847,1848,1848,1837,1835,1837,1848,1849,1849,1839,1837,1633,1644,1850,1850,1840,1633,1840,1850,1851,1851,1841,1840,1841,1851,1852,1852,1842,1841,1842,1852,1853,1853,1843,1842,1843,1853,1854,1854,1844,1843,1844,1854,1855,1855,1845,1844,1845,1855,1856,1856,1846,1845,1846,1856,1857,1857,1847,1846,1847,1857,1858,1858,1848,1847,1848,1858,1859,1859,1849,1848,1644,1655,1860,1860,1850,1644,1850,1860,1861,1861,1851,1850,1851,1861,1862,1862,1852,1851,1852,1862,1863,1863,1853,1852,1853,1863,1864,1864,1854,1853,1854,1864,1865,1865,1855,1854,1855,1865,1866,1866,1856,1855,1856,1866,1867,1867,1857,1856,1857,1867,1868,1868,1858,1857,1858,1868,1869,1869,1859,1858,1655,1666,1870,1870,1860,1655,1860,1870,1871,1871,1861,1860,1861,1871,1872,1872,1862,1861,1862,1872,1873,1873,1863,1862,1863,1873,1874,1874,1864,1863,1864,1874,1875,1875,1865,1864,1865,1875,1876,1876,1866,1865,1866,1876,1877,1877,1867,1866,1867,1877,1878,1878,1868,1867,1868,1878,1879,1879,1869,1868,1666,1677,1880,1880,1870,1666,1870,1880,1881,1881,1871,1870,1871,1881,1882,1882,1872,1871,1872,1882,1883,1883,1873,1872,1873,1883,1884,1884,1874,1873,1874,1884,1885,1885,1875,1874,1875,1885,1886,1886,1876,1875,1876,1886,1887,1887,1877,1876,1877,1887,1888,1888,1878,1877,1878,1888,1889,1889,1879,1878,1677,1688,1890,1890,1880,1677,1880,1890,1891,1891,1881,1880,1881,1891,1892,1892,1882,1881,1882,1892,1893,1893,1883,1882,1883,1893,1894,1894,1884,1883,1884,1894,1895,1895,1885,1884,1885,1895,1896,1896,1886,1885,1886,1896,1897,1897,1887,1886,1887,1897,1898,1898,1888,1887,1888,1898,1899,1899,1889,1888,1688,1699,1900,1900,1890,1688,1890,1900,1901,1901,1891,1890,1891,1901,1902,1902,1892,1891,1892,1902,1903,1903,1893,1892,1893,1903,1904,1904,1894,1893,1894,1904,1905,1905,1895,1894,1895,1905,1906,1906,1896,1895,1896,1906,1907,1907,1897,1896,1897,1907,1908,1908,1898,1897,1898,1908,1909,1909,1899,1898,1699,1710,1910,1910,1900,1699,1900,1910,1911,1911,1901,1900,1901,1911,1912,1912,1902,1901,1902,1912,1913,1913,1903,1902,1903,1913,1914,1914,1904,1903,1904,1914,1915,1915,1905,1904,1905,1915,1916,1916,1906,1905,1906,1916,1917,1917,1907,1906,1907,1917,1918,1918,1908,1907,1908,1918,1919,1919,1909,1908,1710,1721,1920,1920,1910,1710,1910,1920,1921,1921,1911,1910,1911,1921,1922,1922,1912,1911,1912,1922,1923,1923,1913,1912,1913,1923,1924,1924,1914,1913,1914,1924,1925,1925,1915,1914,1915,1925,1926,1926,1916,1915,1916,1926,1927,1927,1917,1916,1917,1927,1928,1928,1918,1917,1918,1928,1929,1929,1919,1918,1721,1732,1930,1930,1920,1721,1920,1930,1931,1931,1921,1920,1921,1931,1932,1932,1922,1921,1922,1932,1933,1933,1923,1922,1923,1933,1934,1934,1924,1923,1924,1934,1935,1935,1925,1924,1925,1935,1936,1936,1926,1925,1926,1936,1937,1937,1927,1926,1927,1937,1938,1938,1928,1927,1928,1938,1939,1939,1929,1928,1732,1743,1940,1940,1930,1732,1930,1940,1941,1941,1931,1930,1931,1941,1942,1942,1932,1931,1932,1942,1943,1943,1933,1932,1933,1943,1944,1944,1934,1933,1934,1944,1945,1945,1935,1934,1935,1945,1946,1946,1936,1935,1936,1946,1947,1947,1937,1936,1937,1947,1948,1948,1938,1937,1938,1948,1949,1949,1939,1938,1743,1754,1950,1950,1940,1743,1940,1950,1951,1951,1941,1940,1941,1951,1952,1952,1942,1941,1942,1952,1953,1953,1943,1942,1943,1953,1954,1954,1944,1943,1944,1954,1955,1955,1945,1944,1945,1955,1956,1956,1946,1945,1946,1956,1957,1957,1947,1946,1947,1957,1958,1958,1948,1947,1948,1958,1959,1959,1949,1948,1754,1765,1960,1960,1950,1754,1950,1960,1961,1961,1951,1950,1951,1961,1962,1962,1952,1951,1952,1962,1963,1963,1953,1952,1953,1963,1964,1964,1954,1953,1954,1964,1965,1965,1955,1954,1955,1965,1966,1966,1956,1955,1956,1966,1967,1967,1957,1956,1957,1967,1968,1968,1958,1957,1958,1968,1969,1969,1959,1958,1765,1776,1970,1970,1960,1765,1960,1970,1971,1971,1961,1960,1961,1971,1972,1972,1962,1961,1962,1972,1973,1973,1963,1962,1963,1973,1974,1974,1964,1963,1964,1974,1975,1975,1965,1964,1965,1975,1976,1976,1966,1965,1966,1976,1977,1977,1967,1966,1967,1977,1978,1978,1968,1967,1968,1978,1979,1979,1969,1968,1776,1787,1980,1980,1970,1776,1970,1980,1981,1981,1971,1970,1971,1981,1982,1982,1972,1971,1972,1982,1983,1983,1973,1972,1973,1983,1984,1984,1974,1973,1974,1984,1985,1985,1975,1974,1975,1985,1986,1986,1976,1975,1976,1986,1987,1987,1977,1976,1977,1987,1988,1988,1978,1977,1978,1988,1989,1989,1979,1978,1787,1798,1990,1990,1980,1787,1980,1990,1991,1991,1981,1980,1981,1991,1992,1992,1982,1981,1982,1992,1993,1993,1983,1982,1983,1993,1994,1994,1984,1983,1984,1994,1995,1995,1985,1984,1985,1995,1996,1996,1986,1985,1986,1996,1997,1997,1987,1986,1987,1997,1998,1998,1988,1987,1988,1998,1999,1999,1989,1988,1798,1809,2e3,2e3,1990,1798,1990,2e3,2001,2001,1991,1990,1991,2001,2002,2002,1992,1991,1992,2002,2003,2003,1993,1992,1993,2003,2004,2004,1994,1993,1994,2004,2005,2005,1995,1994,1995,2005,2006,2006,1996,1995,1996,2006,2007,2007,1997,1996,1997,2007,2008,2008,1998,1997,1998,2008,2009,2009,1999,1998,1809,1820,2010,2010,2e3,1809,2e3,2010,2011,2011,2001,2e3,2001,2011,2012,2012,2002,2001,2002,2012,2013,2013,2003,2002,2003,2013,2014,2014,2004,2003,2004,2014,2015,2015,2005,2004,2005,2015,2016,2016,2006,2005,2006,2016,2017,2017,2007,2006,2007,2017,2018,2018,2008,2007,2008,2018,2019,2019,2009,2008,1820,1622,1822,1822,2010,1820,2010,1822,1824,1824,2011,2010,2011,1824,1826,1826,2012,2011,2012,1826,1828,1828,2013,2012,2013,1828,1830,1830,2014,2013,2014,1830,1832,1832,2015,2014,2015,1832,1834,1834,2016,2015,2016,1834,1836,1836,2017,2016,2017,1836,1838,1838,2018,2017,2018,1838,649,649,2019,2018,2020,2021,2022,2022,2023,2020,2023,2022,2024,2024,2025,2023,2025,2024,2026,2026,2027,2025,2027,2026,2028,2028,2029,2027,2029,2028,2030,2030,2031,2029,2031,2030,2032,2032,2033,2031,2033,2032,2034,2034,2035,2033,2035,2034,2036,2036,2037,2035,2037,2036,2038,2038,2039,2037,2039,2038,2040,2040,2041,2039,2021,2042,2043,2043,2022,2021,2022,2043,2044,2044,2024,2022,2024,2044,2045,2045,2026,2024,2026,2045,2046,2046,2028,2026,2028,2046,2047,2047,2030,2028,2030,2047,2048,2048,2032,2030,2032,2048,2049,2049,2034,2032,2034,2049,2050,2050,2036,2034,2036,2050,2051,2051,2038,2036,2038,2051,2052,2052,2040,2038,2042,2053,2054,2054,2043,2042,2043,2054,2055,2055,2044,2043,2044,2055,2056,2056,2045,2044,2045,2056,2057,2057,2046,2045,2046,2057,2058,2058,2047,2046,2047,2058,2059,2059,2048,2047,2048,2059,2060,2060,2049,2048,2049,2060,2061,2061,2050,2049,2050,2061,2062,2062,2051,2050,2051,2062,2063,2063,2052,2051,2053,2064,2065,2065,2054,2053,2054,2065,2066,2066,2055,2054,2055,2066,2067,2067,2056,2055,2056,2067,2068,2068,2057,2056,2057,2068,2069,2069,2058,2057,2058,2069,2070,2070,2059,2058,2059,2070,2071,2071,2060,2059,2060,2071,2072,2072,2061,2060,2061,2072,2073,2073,2062,2061,2062,2073,2074,2074,2063,2062,2064,2075,2076,2076,2065,2064,2065,2076,2077,2077,2066,2065,2066,2077,2078,2078,2067,2066,2067,2078,2079,2079,2068,2067,2068,2079,2080,2080,2069,2068,2069,2080,2081,2081,2070,2069,2070,2081,2082,2082,2071,2070,2071,2082,2083,2083,2072,2071,2072,2083,2084,2084,2073,2072,2073,2084,2085,2085,2074,2073,2075,2086,2087,2087,2076,2075,2076,2087,2088,2088,2077,2076,2077,2088,2089,2089,2078,2077,2078,2089,2090,2090,2079,2078,2079,2090,2091,2091,2080,2079,2080,2091,2092,2092,2081,2080,2081,2092,2093,2093,2082,2081,2082,2093,2094,2094,2083,2082,2083,2094,2095,2095,2084,2083,2084,2095,2096,2096,2085,2084,2086,2097,2098,2098,2087,2086,2087,2098,2099,2099,2088,2087,2088,2099,2100,2100,2089,2088,2089,2100,2101,2101,2090,2089,2090,2101,2102,2102,2091,2090,2091,2102,2103,2103,2092,2091,2092,2103,2104,2104,2093,2092,2093,2104,2105,2105,2094,2093,2094,2105,2106,2106,2095,2094,2095,2106,2107,2107,2096,2095,2097,2108,2109,2109,2098,2097,2098,2109,2110,2110,2099,2098,2099,2110,2111,2111,2100,2099,2100,2111,2112,2112,2101,2100,2101,2112,2113,2113,2102,2101,2102,2113,2114,2114,2103,2102,2103,2114,2115,2115,2104,2103,2104,2115,2116,2116,2105,2104,2105,2116,2117,2117,2106,2105,2106,2117,2118,2118,2107,2106,2108,2119,2120,2120,2109,2108,2109,2120,2121,2121,2110,2109,2110,2121,2122,2122,2111,2110,2111,2122,2123,2123,2112,2111,2112,2123,2124,2124,2113,2112,2113,2124,2125,2125,2114,2113,2114,2125,2126,2126,2115,2114,2115,2126,2127,2127,2116,2115,2116,2127,2128,2128,2117,2116,2117,2128,2129,2129,2118,2117,2119,2130,2131,2131,2120,2119,2120,2131,2132,2132,2121,2120,2121,2132,2133,2133,2122,2121,2122,2133,2134,2134,2123,2122,2123,2134,2135,2135,2124,2123,2124,2135,2136,2136,2125,2124,2125,2136,2137,2137,2126,2125,2126,2137,2138,2138,2127,2126,2127,2138,2139,2139,2128,2127,2128,2139,2140,2140,2129,2128,2130,2141,2142,2142,2131,2130,2131,2142,2143,2143,2132,2131,2132,2143,2144,2144,2133,2132,2133,2144,2145,2145,2134,2133,2134,2145,2146,2146,2135,2134,2135,2146,2147,2147,2136,2135,2136,2147,2148,2148,2137,2136,2137,2148,2149,2149,2138,2137,2138,2149,2150,2150,2139,2138,2139,2150,2151,2151,2140,2139,2141,2152,2153,2153,2142,2141,2142,2153,2154,2154,2143,2142,2143,2154,2155,2155,2144,2143,2144,2155,2156,2156,2145,2144,2145,2156,2157,2157,2146,2145,2146,2157,2158,2158,2147,2146,2147,2158,2159,2159,2148,2147,2148,2159,2160,2160,2149,2148,2149,2160,2161,2161,2150,2149,2150,2161,2162,2162,2151,2150,2152,2163,2164,2164,2153,2152,2153,2164,2165,2165,2154,2153,2154,2165,2166,2166,2155,2154,2155,2166,2167,2167,2156,2155,2156,2167,2168,2168,2157,2156,2157,2168,2169,2169,2158,2157,2158,2169,2170,2170,2159,2158,2159,2170,2171,2171,2160,2159,2160,2171,2172,2172,2161,2160,2161,2172,2173,2173,2162,2161,2163,2174,2175,2175,2164,2163,2164,2175,2176,2176,2165,2164,2165,2176,2177,2177,2166,2165,2166,2177,2178,2178,2167,2166,2167,2178,2179,2179,2168,2167,2168,2179,2180,2180,2169,2168,2169,2180,2181,2181,2170,2169,2170,2181,2182,2182,2171,2170,2171,2182,2183,2183,2172,2171,2172,2183,2184,2184,2173,2172,2174,2185,2186,2186,2175,2174,2175,2186,2187,2187,2176,2175,2176,2187,2188,2188,2177,2176,2177,2188,2189,2189,2178,2177,2178,2189,2190,2190,2179,2178,2179,2190,2191,2191,2180,2179,2180,2191,2192,2192,2181,2180,2181,2192,2193,2193,2182,2181,2182,2193,2194,2194,2183,2182,2183,2194,2195,2195,2184,2183,2185,2196,2197,2197,2186,2185,2186,2197,2198,2198,2187,2186,2187,2198,2199,2199,2188,2187,2188,2199,2200,2200,2189,2188,2189,2200,2201,2201,2190,2189,2190,2201,2202,2202,2191,2190,2191,2202,2203,2203,2192,2191,2192,2203,2204,2204,2193,2192,2193,2204,2205,2205,2194,2193,2194,2205,2206,2206,2195,2194,2196,2207,2208,2208,2197,2196,2197,2208,2209,2209,2198,2197,2198,2209,2210,2210,2199,2198,2199,2210,2211,2211,2200,2199,2200,2211,2212,2212,2201,2200,2201,2212,2213,2213,2202,2201,2202,2213,2214,2214,2203,2202,2203,2214,2215,2215,2204,2203,2204,2215,2216,2216,2205,2204,2205,2216,2217,2217,2206,2205,2207,2218,2219,2219,2208,2207,2208,2219,2220,2220,2209,2208,2209,2220,2221,2221,2210,2209,2210,2221,2222,2222,2211,2210,2211,2222,2223,2223,2212,2211,2212,2223,2224,2224,2213,2212,2213,2224,2225,2225,2214,2213,2214,2225,2226,2226,2215,2214,2215,2226,2227,2227,2216,2215,2216,2227,2228,2228,2217,2216,2218,2229,2230,2230,2219,2218,2219,2230,2231,2231,2220,2219,2220,2231,2232,2232,2221,2220,2221,2232,2233,2233,2222,2221,2222,2233,2234,2234,2223,2222,2223,2234,2235,2235,2224,2223,2224,2235,2236,2236,2225,2224,2225,2236,2237,2237,2226,2225,2226,2237,2238,2238,2227,2226,2227,2238,2239,2239,2228,2227,2229,2020,2023,2023,2230,2229,2230,2023,2025,2025,2231,2230,2231,2025,2027,2027,2232,2231,2232,2027,2029,2029,2233,2232,2233,2029,2031,2031,2234,2233,2234,2031,2033,2033,2235,2234,2235,2033,2035,2035,2236,2235,2236,2035,2037,2037,2237,2236,2237,2037,2039,2039,2238,2237,2238,2039,2041,2041,2239,2238,2041,2040,2240,2240,2241,2041,2241,2240,2242,2242,2243,2241,2243,2242,2244,2244,2245,2243,2245,2244,2246,2246,2247,2245,2247,2246,2248,2248,2249,2247,2249,2248,2250,2250,2251,2249,2251,2250,2252,2252,2253,2251,2253,2252,2254,2254,2255,2253,2255,2254,2256,2256,2257,2255,2257,2256,2258,2258,2259,2257,2040,2052,2260,2260,2240,2040,2240,2260,2261,2261,2242,2240,2242,2261,2262,2262,2244,2242,2244,2262,2263,2263,2246,2244,2246,2263,2264,2264,2248,2246,2248,2264,2265,2265,2250,2248,2250,2265,2266,2266,2252,2250,2252,2266,2267,2267,2254,2252,2254,2267,2268,2268,2256,2254,2256,2268,2269,2269,2258,2256,2052,2063,2270,2270,2260,2052,2260,2270,2271,2271,2261,2260,2261,2271,2272,2272,2262,2261,2262,2272,2273,2273,2263,2262,2263,2273,2274,2274,2264,2263,2264,2274,2275,2275,2265,2264,2265,2275,2276,2276,2266,2265,2266,2276,2277,2277,2267,2266,2267,2277,2278,2278,2268,2267,2268,2278,2279,2279,2269,2268,2063,2074,2280,2280,2270,2063,2270,2280,2281,2281,2271,2270,2271,2281,2282,2282,2272,2271,2272,2282,2283,2283,2273,2272,2273,2283,2284,2284,2274,2273,2274,2284,2285,2285,2275,2274,2275,2285,2286,2286,2276,2275,2276,2286,2287,2287,2277,2276,2277,2287,2288,2288,2278,2277,2278,2288,2289,2289,2279,2278,2074,2085,2290,2290,2280,2074,2280,2290,2291,2291,2281,2280,2281,2291,2292,2292,2282,2281,2282,2292,2293,2293,2283,2282,2283,2293,2294,2294,2284,2283,2284,2294,2295,2295,2285,2284,2285,2295,2296,2296,2286,2285,2286,2296,2297,2297,2287,2286,2287,2297,2298,2298,2288,2287,2288,2298,2299,2299,2289,2288,2085,2096,2300,2300,2290,2085,2290,2300,2301,2301,2291,2290,2291,2301,2302,2302,2292,2291,2292,2302,2303,2303,2293,2292,2293,2303,2304,2304,2294,2293,2294,2304,2305,2305,2295,2294,2295,2305,2306,2306,2296,2295,2296,2306,2307,2307,2297,2296,2297,2307,2308,2308,2298,2297,2298,2308,2309,2309,2299,2298,2096,2107,2310,2310,2300,2096,2300,2310,2311,2311,2301,2300,2301,2311,2312,2312,2302,2301,2302,2312,2313,2313,2303,2302,2303,2313,2314,2314,2304,2303,2304,2314,2315,2315,2305,2304,2305,2315,2316,2316,2306,2305,2306,2316,2317,2317,2307,2306,2307,2317,2318,2318,2308,2307,2308,2318,2319,2319,2309,2308,2107,2118,2320,2320,2310,2107,2310,2320,2321,2321,2311,2310,2311,2321,2322,2322,2312,2311,2312,2322,2323,2323,2313,2312,2313,2323,2324,2324,2314,2313,2314,2324,2325,2325,2315,2314,2315,2325,2326,2326,2316,2315,2316,2326,2327,2327,2317,2316,2317,2327,2328,2328,2318,2317,2318,2328,2329,2329,2319,2318,2118,2129,2330,2330,2320,2118,2320,2330,2331,2331,2321,2320,2321,2331,2332,2332,2322,2321,2322,2332,2333,2333,2323,2322,2323,2333,2334,2334,2324,2323,2324,2334,2335,2335,2325,2324,2325,2335,2336,2336,2326,2325,2326,2336,2337,2337,2327,2326,2327,2337,2338,2338,2328,2327,2328,2338,2339,2339,2329,2328,2129,2140,2340,2340,2330,2129,2330,2340,2341,2341,2331,2330,2331,2341,2342,2342,2332,2331,2332,2342,2343,2343,2333,2332,2333,2343,2344,2344,2334,2333,2334,2344,2345,2345,2335,2334,2335,2345,2346,2346,2336,2335,2336,2346,2347,2347,2337,2336,2337,2347,2348,2348,2338,2337,2338,2348,2349,2349,2339,2338,2140,2151,2350,2350,2340,2140,2340,2350,2351,2351,2341,2340,2341,2351,2352,2352,2342,2341,2342,2352,2353,2353,2343,2342,2343,2353,2354,2354,2344,2343,2344,2354,2355,2355,2345,2344,2345,2355,2356,2356,2346,2345,2346,2356,2357,2357,2347,2346,2347,2357,2358,2358,2348,2347,2348,2358,2359,2359,2349,2348,2151,2162,2360,2360,2350,2151,2350,2360,2361,2361,2351,2350,2351,2361,2362,2362,2352,2351,2352,2362,2363,2363,2353,2352,2353,2363,2364,2364,2354,2353,2354,2364,2365,2365,2355,2354,2355,2365,2366,2366,2356,2355,2356,2366,2367,2367,2357,2356,2357,2367,2368,2368,2358,2357,2358,2368,2369,2369,2359,2358,2162,2173,2370,2370,2360,2162,2360,2370,2371,2371,2361,2360,2361,2371,2372,2372,2362,2361,2362,2372,2373,2373,2363,2362,2363,2373,2374,2374,2364,2363,2364,2374,2375,2375,2365,2364,2365,2375,2376,2376,2366,2365,2366,2376,2377,2377,2367,2366,2367,2377,2378,2378,2368,2367,2368,2378,2379,2379,2369,2368,2173,2184,2380,2380,2370,2173,2370,2380,2381,2381,2371,2370,2371,2381,2382,2382,2372,2371,2372,2382,2383,2383,2373,2372,2373,2383,2384,2384,2374,2373,2374,2384,2385,2385,2375,2374,2375,2385,2386,2386,2376,2375,2376,2386,2387,2387,2377,2376,2377,2387,2388,2388,2378,2377,2378,2388,2389,2389,2379,2378,2184,2195,2390,2390,2380,2184,2380,2390,2391,2391,2381,2380,2381,2391,2392,2392,2382,2381,2382,2392,2393,2393,2383,2382,2383,2393,2394,2394,2384,2383,2384,2394,2395,2395,2385,2384,2385,2395,2396,2396,2386,2385,2386,2396,2397,2397,2387,2386,2387,2397,2398,2398,2388,2387,2388,2398,2399,2399,2389,2388,2195,2206,2400,2400,2390,2195,2390,2400,2401,2401,2391,2390,2391,2401,2402,2402,2392,2391,2392,2402,2403,2403,2393,2392,2393,2403,2404,2404,2394,2393,2394,2404,2405,2405,2395,2394,2395,2405,2406,2406,2396,2395,2396,2406,2407,2407,2397,2396,2397,2407,2408,2408,2398,2397,2398,2408,2409,2409,2399,2398,2206,2217,2410,2410,2400,2206,2400,2410,2411,2411,2401,2400,2401,2411,2412,2412,2402,2401,2402,2412,2413,2413,2403,2402,2403,2413,2414,2414,2404,2403,2404,2414,2415,2415,2405,2404,2405,2415,2416,2416,2406,2405,2406,2416,2417,2417,2407,2406,2407,2417,2418,2418,2408,2407,2408,2418,2419,2419,2409,2408,2217,2228,2420,2420,2410,2217,2410,2420,2421,2421,2411,2410,2411,2421,2422,2422,2412,2411,2412,2422,2423,2423,2413,2412,2413,2423,2424,2424,2414,2413,2414,2424,2425,2425,2415,2414,2415,2425,2426,2426,2416,2415,2416,2426,2427,2427,2417,2416,2417,2427,2428,2428,2418,2417,2418,2428,2429,2429,2419,2418,2228,2239,2430,2430,2420,2228,2420,2430,2431,2431,2421,2420,2421,2431,2432,2432,2422,2421,2422,2432,2433,2433,2423,2422,2423,2433,2434,2434,2424,2423,2424,2434,2435,2435,2425,2424,2425,2435,2436,2436,2426,2425,2426,2436,2437,2437,2427,2426,2427,2437,2438,2438,2428,2427,2428,2438,2439,2439,2429,2428,2239,2041,2241,2241,2430,2239,2430,2241,2243,2243,2431,2430,2431,2243,2245,2245,2432,2431,2432,2245,2247,2247,2433,2432,2433,2247,2249,2249,2434,2433,2434,2249,2251,2251,2435,2434,2435,2251,2253,2253,2436,2435,2436,2253,2255,2255,2437,2436,2437,2255,2257,2257,2438,2437,2438,2257,2259,2259,2439,2438,2440,2441,2442,2441,2440,2443,2443,2444,2441,2444,2443,2445,2445,2446,2444,2446,2445,2447,2447,2448,2446,2448,2447,2449,2449,2450,2448,2450,2449,2451,2451,2452,2450,2452,2451,2453,2453,2454,2452,2454,2453,2455,2455,2456,2454,2456,2455,2457,2457,2458,2456,2458,2457,2459,2459,2460,2458,2461,2440,2442,2440,2461,2462,2462,2443,2440,2443,2462,2463,2463,2445,2443,2445,2463,2464,2464,2447,2445,2447,2464,2465,2465,2449,2447,2449,2465,2466,2466,2451,2449,2451,2466,2467,2467,2453,2451,2453,2467,2468,2468,2455,2453,2455,2468,2469,2469,2457,2455,2457,2469,2470,2470,2459,2457,2471,2461,2442,2461,2471,2472,2472,2462,2461,2462,2472,2473,2473,2463,2462,2463,2473,2474,2474,2464,2463,2464,2474,2475,2475,2465,2464,2465,2475,2476,2476,2466,2465,2466,2476,2477,2477,2467,2466,2467,2477,2478,2478,2468,2467,2468,2478,2479,2479,2469,2468,2469,2479,2480,2480,2470,2469,2481,2471,2442,2471,2481,2482,2482,2472,2471,2472,2482,2483,2483,2473,2472,2473,2483,2484,2484,2474,2473,2474,2484,2485,2485,2475,2474,2475,2485,2486,2486,2476,2475,2476,2486,2487,2487,2477,2476,2477,2487,2488,2488,2478,2477,2478,2488,2489,2489,2479,2478,2479,2489,2490,2490,2480,2479,2491,2481,2442,2481,2491,2492,2492,2482,2481,2482,2492,2493,2493,2483,2482,2483,2493,2494,2494,2484,2483,2484,2494,2495,2495,2485,2484,2485,2495,2496,2496,2486,2485,2486,2496,2497,2497,2487,2486,2487,2497,2498,2498,2488,2487,2488,2498,2499,2499,2489,2488,2489,2499,2500,2500,2490,2489,2501,2491,2442,2491,2501,2502,2502,2492,2491,2492,2502,2503,2503,2493,2492,2493,2503,2504,2504,2494,2493,2494,2504,2505,2505,2495,2494,2495,2505,2506,2506,2496,2495,2496,2506,2507,2507,2497,2496,2497,2507,2508,2508,2498,2497,2498,2508,2509,2509,2499,2498,2499,2509,2510,2510,2500,2499,2511,2501,2442,2501,2511,2512,2512,2502,2501,2502,2512,2513,2513,2503,2502,2503,2513,2514,2514,2504,2503,2504,2514,2515,2515,2505,2504,2505,2515,2516,2516,2506,2505,2506,2516,2517,2517,2507,2506,2507,2517,2518,2518,2508,2507,2508,2518,2519,2519,2509,2508,2509,2519,2520,2520,2510,2509,2521,2511,2442,2511,2521,2522,2522,2512,2511,2512,2522,2523,2523,2513,2512,2513,2523,2524,2524,2514,2513,2514,2524,2525,2525,2515,2514,2515,2525,2526,2526,2516,2515,2516,2526,2527,2527,2517,2516,2517,2527,2528,2528,2518,2517,2518,2528,2529,2529,2519,2518,2519,2529,2530,2530,2520,2519,2531,2521,2442,2521,2531,2532,2532,2522,2521,2522,2532,2533,2533,2523,2522,2523,2533,2534,2534,2524,2523,2524,2534,2535,2535,2525,2524,2525,2535,2536,2536,2526,2525,2526,2536,2537,2537,2527,2526,2527,2537,2538,2538,2528,2527,2528,2538,2539,2539,2529,2528,2529,2539,2540,2540,2530,2529,2541,2531,2442,2531,2541,2542,2542,2532,2531,2532,2542,2543,2543,2533,2532,2533,2543,2544,2544,2534,2533,2534,2544,2545,2545,2535,2534,2535,2545,2546,2546,2536,2535,2536,2546,2547,2547,2537,2536,2537,2547,2548,2548,2538,2537,2538,2548,2549,2549,2539,2538,2539,2549,2550,2550,2540,2539,2551,2541,2442,2541,2551,2552,2552,2542,2541,2542,2552,2553,2553,2543,2542,2543,2553,2554,2554,2544,2543,2544,2554,2555,2555,2545,2544,2545,2555,2556,2556,2546,2545,2546,2556,2557,2557,2547,2546,2547,2557,2558,2558,2548,2547,2548,2558,2559,2559,2549,2548,2549,2559,2560,2560,2550,2549,2561,2551,2442,2551,2561,2562,2562,2552,2551,2552,2562,2563,2563,2553,2552,2553,2563,2564,2564,2554,2553,2554,2564,2565,2565,2555,2554,2555,2565,2566,2566,2556,2555,2556,2566,2567,2567,2557,2556,2557,2567,2568,2568,2558,2557,2558,2568,2569,2569,2559,2558,2559,2569,2570,2570,2560,2559,2571,2561,2442,2561,2571,2572,2572,2562,2561,2562,2572,2573,2573,2563,2562,2563,2573,2574,2574,2564,2563,2564,2574,2575,2575,2565,2564,2565,2575,2576,2576,2566,2565,2566,2576,2577,2577,2567,2566,2567,2577,2578,2578,2568,2567,2568,2578,2579,2579,2569,2568,2569,2579,2580,2580,2570,2569,2581,2571,2442,2571,2581,2582,2582,2572,2571,2572,2582,2583,2583,2573,2572,2573,2583,2584,2584,2574,2573,2574,2584,2585,2585,2575,2574,2575,2585,2586,2586,2576,2575,2576,2586,2587,2587,2577,2576,2577,2587,2588,2588,2578,2577,2578,2588,2589,2589,2579,2578,2579,2589,2590,2590,2580,2579,2591,2581,2442,2581,2591,2592,2592,2582,2581,2582,2592,2593,2593,2583,2582,2583,2593,2594,2594,2584,2583,2584,2594,2595,2595,2585,2584,2585,2595,2596,2596,2586,2585,2586,2596,2597,2597,2587,2586,2587,2597,2598,2598,2588,2587,2588,2598,2599,2599,2589,2588,2589,2599,2600,2600,2590,2589,2601,2591,2442,2591,2601,2602,2602,2592,2591,2592,2602,2603,2603,2593,2592,2593,2603,2604,2604,2594,2593,2594,2604,2605,2605,2595,2594,2595,2605,2606,2606,2596,2595,2596,2606,2607,2607,2597,2596,2597,2607,2608,2608,2598,2597,2598,2608,2609,2609,2599,2598,2599,2609,2610,2610,2600,2599,2611,2601,2442,2601,2611,2612,2612,2602,2601,2602,2612,2613,2613,2603,2602,2603,2613,2614,2614,2604,2603,2604,2614,2615,2615,2605,2604,2605,2615,2616,2616,2606,2605,2606,2616,2617,2617,2607,2606,2607,2617,2618,2618,2608,2607,2608,2618,2619,2619,2609,2608,2609,2619,2620,2620,2610,2609,2621,2611,2442,2611,2621,2622,2622,2612,2611,2612,2622,2623,2623,2613,2612,2613,2623,2624,2624,2614,2613,2614,2624,2625,2625,2615,2614,2615,2625,2626,2626,2616,2615,2616,2626,2627,2627,2617,2616,2617,2627,2628,2628,2618,2617,2618,2628,2629,2629,2619,2618,2619,2629,2630,2630,2620,2619,2631,2621,2442,2621,2631,2632,2632,2622,2621,2622,2632,2633,2633,2623,2622,2623,2633,2634,2634,2624,2623,2624,2634,2635,2635,2625,2624,2625,2635,2636,2636,2626,2625,2626,2636,2637,2637,2627,2626,2627,2637,2638,2638,2628,2627,2628,2638,2639,2639,2629,2628,2629,2639,2640,2640,2630,2629,2641,2631,2442,2631,2641,2642,2642,2632,2631,2632,2642,2643,2643,2633,2632,2633,2643,2644,2644,2634,2633,2634,2644,2645,2645,2635,2634,2635,2645,2646,2646,2636,2635,2636,2646,2647,2647,2637,2636,2637,2647,2648,2648,2638,2637,2638,2648,2649,2649,2639,2638,2639,2649,2650,2650,2640,2639,2651,2641,2442,2641,2651,2652,2652,2642,2641,2642,2652,2653,2653,2643,2642,2643,2653,2654,2654,2644,2643,2644,2654,2655,2655,2645,2644,2645,2655,2656,2656,2646,2645,2646,2656,2657,2657,2647,2646,2647,2657,2658,2658,2648,2647,2648,2658,2659,2659,2649,2648,2649,2659,2660,2660,2650,2649,2661,2651,2442,2651,2661,2662,2662,2652,2651,2652,2662,2663,2663,2653,2652,2653,2663,2664,2664,2654,2653,2654,2664,2665,2665,2655,2654,2655,2665,2666,2666,2656,2655,2656,2666,2667,2667,2657,2656,2657,2667,2668,2668,2658,2657,2658,2668,2669,2669,2659,2658,2659,2669,2670,2670,2660,2659,2671,2661,2442,2661,2671,2672,2672,2662,2661,2662,2672,2673,2673,2663,2662,2663,2673,2674,2674,2664,2663,2664,2674,2675,2675,2665,2664,2665,2675,2676,2676,2666,2665,2666,2676,2677,2677,2667,2666,2667,2677,2678,2678,2668,2667,2668,2678,2679,2679,2669,2668,2669,2679,2680,2680,2670,2669,2681,2671,2442,2671,2681,2682,2682,2672,2671,2672,2682,2683,2683,2673,2672,2673,2683,2684,2684,2674,2673,2674,2684,2685,2685,2675,2674,2675,2685,2686,2686,2676,2675,2676,2686,2687,2687,2677,2676,2677,2687,2688,2688,2678,2677,2678,2688,2689,2689,2679,2678,2679,2689,2690,2690,2680,2679,2691,2681,2442,2681,2691,2692,2692,2682,2681,2682,2692,2693,2693,2683,2682,2683,2693,2694,2694,2684,2683,2684,2694,2695,2695,2685,2684,2685,2695,2696,2696,2686,2685,2686,2696,2697,2697,2687,2686,2687,2697,2698,2698,2688,2687,2688,2698,2699,2699,2689,2688,2689,2699,2700,2700,2690,2689,2701,2691,2442,2691,2701,2702,2702,2692,2691,2692,2702,2703,2703,2693,2692,2693,2703,2704,2704,2694,2693,2694,2704,2705,2705,2695,2694,2695,2705,2706,2706,2696,2695,2696,2706,2707,2707,2697,2696,2697,2707,2708,2708,2698,2697,2698,2708,2709,2709,2699,2698,2699,2709,2710,2710,2700,2699,2711,2701,2442,2701,2711,2712,2712,2702,2701,2702,2712,2713,2713,2703,2702,2703,2713,2714,2714,2704,2703,2704,2714,2715,2715,2705,2704,2705,2715,2716,2716,2706,2705,2706,2716,2717,2717,2707,2706,2707,2717,2718,2718,2708,2707,2708,2718,2719,2719,2709,2708,2709,2719,2720,2720,2710,2709,2721,2711,2442,2711,2721,2722,2722,2712,2711,2712,2722,2723,2723,2713,2712,2713,2723,2724,2724,2714,2713,2714,2724,2725,2725,2715,2714,2715,2725,2726,2726,2716,2715,2716,2726,2727,2727,2717,2716,2717,2727,2728,2728,2718,2717,2718,2728,2729,2729,2719,2718,2719,2729,2730,2730,2720,2719,2731,2721,2442,2721,2731,2732,2732,2722,2721,2722,2732,2733,2733,2723,2722,2723,2733,2734,2734,2724,2723,2724,2734,2735,2735,2725,2724,2725,2735,2736,2736,2726,2725,2726,2736,2737,2737,2727,2726,2727,2737,2738,2738,2728,2727,2728,2738,2739,2739,2729,2728,2729,2739,2740,2740,2730,2729,2741,2731,2442,2731,2741,2742,2742,2732,2731,2732,2742,2743,2743,2733,2732,2733,2743,2744,2744,2734,2733,2734,2744,2745,2745,2735,2734,2735,2745,2746,2746,2736,2735,2736,2746,2747,2747,2737,2736,2737,2747,2748,2748,2738,2737,2738,2748,2749,2749,2739,2738,2739,2749,2750,2750,2740,2739,2751,2741,2442,2741,2751,2752,2752,2742,2741,2742,2752,2753,2753,2743,2742,2743,2753,2754,2754,2744,2743,2744,2754,2755,2755,2745,2744,2745,2755,2756,2756,2746,2745,2746,2756,2757,2757,2747,2746,2747,2757,2758,2758,2748,2747,2748,2758,2759,2759,2749,2748,2749,2759,2760,2760,2750,2749,2761,2751,2442,2751,2761,2762,2762,2752,2751,2752,2762,2763,2763,2753,2752,2753,2763,2764,2764,2754,2753,2754,2764,2765,2765,2755,2754,2755,2765,2766,2766,2756,2755,2756,2766,2767,2767,2757,2756,2757,2767,2768,2768,2758,2757,2758,2768,2769,2769,2759,2758,2759,2769,2770,2770,2760,2759,2771,2761,2442,2761,2771,2772,2772,2762,2761,2762,2772,2773,2773,2763,2762,2763,2773,2774,2774,2764,2763,2764,2774,2775,2775,2765,2764,2765,2775,2776,2776,2766,2765,2766,2776,2777,2777,2767,2766,2767,2777,2778,2778,2768,2767,2768,2778,2779,2779,2769,2768,2769,2779,2780,2780,2770,2769,2781,2771,2442,2771,2781,2782,2782,2772,2771,2772,2782,2783,2783,2773,2772,2773,2783,2784,2784,2774,2773,2774,2784,2785,2785,2775,2774,2775,2785,2786,2786,2776,2775,2776,2786,2787,2787,2777,2776,2777,2787,2788,2788,2778,2777,2778,2788,2789,2789,2779,2778,2779,2789,2790,2790,2780,2779,2791,2781,2442,2781,2791,2792,2792,2782,2781,2782,2792,2793,2793,2783,2782,2783,2793,2794,2794,2784,2783,2784,2794,2795,2795,2785,2784,2785,2795,2796,2796,2786,2785,2786,2796,2797,2797,2787,2786,2787,2797,2798,2798,2788,2787,2788,2798,2799,2799,2789,2788,2789,2799,2800,2800,2790,2789,2801,2791,2442,2791,2801,2802,2802,2792,2791,2792,2802,2803,2803,2793,2792,2793,2803,2804,2804,2794,2793,2794,2804,2805,2805,2795,2794,2795,2805,2806,2806,2796,2795,2796,2806,2807,2807,2797,2796,2797,2807,2808,2808,2798,2797,2798,2808,2809,2809,2799,2798,2799,2809,2810,2810,2800,2799,2811,2801,2442,2801,2811,2812,2812,2802,2801,2802,2812,2813,2813,2803,2802,2803,2813,2814,2814,2804,2803,2804,2814,2815,2815,2805,2804,2805,2815,2816,2816,2806,2805,2806,2816,2817,2817,2807,2806,2807,2817,2818,2818,2808,2807,2808,2818,2819,2819,2809,2808,2809,2819,2820,2820,2810,2809,2821,2811,2442,2811,2821,2822,2822,2812,2811,2812,2822,2823,2823,2813,2812,2813,2823,2824,2824,2814,2813,2814,2824,2825,2825,2815,2814,2815,2825,2826,2826,2816,2815,2816,2826,2827,2827,2817,2816,2817,2827,2828,2828,2818,2817,2818,2828,2829,2829,2819,2818,2819,2829,2830,2830,2820,2819,2831,2821,2442,2821,2831,2832,2832,2822,2821,2822,2832,2833,2833,2823,2822,2823,2833,2834,2834,2824,2823,2824,2834,2835,2835,2825,2824,2825,2835,2836,2836,2826,2825,2826,2836,2837,2837,2827,2826,2827,2837,2838,2838,2828,2827,2828,2838,2839,2839,2829,2828,2829,2839,2840,2840,2830,2829,2441,2831,2442,2831,2441,2444,2444,2832,2831,2832,2444,2446,2446,2833,2832,2833,2446,2448,2448,2834,2833,2834,2448,2450,2450,2835,2834,2835,2450,2452,2452,2836,2835,2836,2452,2454,2454,2837,2836,2837,2454,2456,2456,2838,2837,2838,2456,2458,2458,2839,2838,2839,2458,2460,2460,2840,2839,2460,2459,2841,2841,2842,2460,2842,2841,2843,2843,2844,2842,2844,2843,2845,2845,2846,2844,2846,2845,2847,2847,2848,2846,2848,2847,2849,2849,2850,2848,2850,2849,2851,2851,2852,2850,2852,2851,2853,2853,2854,2852,2854,2853,2855,2855,2856,2854,2856,2855,2857,2857,2858,2856,2858,2857,2859,2859,2860,2858,2459,2470,2861,2861,2841,2459,2841,2861,2862,2862,2843,2841,2843,2862,2863,2863,2845,2843,2845,2863,2864,2864,2847,2845,2847,2864,2865,2865,2849,2847,2849,2865,2866,2866,2851,2849,2851,2866,2867,2867,2853,2851,2853,2867,2868,2868,2855,2853,2855,2868,2869,2869,2857,2855,2857,2869,2870,2870,2859,2857,2470,2480,2871,2871,2861,2470,2861,2871,2872,2872,2862,2861,2862,2872,2873,2873,2863,2862,2863,2873,2874,2874,2864,2863,2864,2874,2875,2875,2865,2864,2865,2875,2876,2876,2866,2865,2866,2876,2877,2877,2867,2866,2867,2877,2878,2878,2868,2867,2868,2878,2879,2879,2869,2868,2869,2879,2880,2880,2870,2869,2480,2490,2881,2881,2871,2480,2871,2881,2882,2882,2872,2871,2872,2882,2883,2883,2873,2872,2873,2883,2884,2884,2874,2873,2874,2884,2885,2885,2875,2874,2875,2885,2886,2886,2876,2875,2876,2886,2887,2887,2877,2876,2877,2887,2888,2888,2878,2877,2878,2888,2889,2889,2879,2878,2879,2889,2890,2890,2880,2879,2490,2500,2891,2891,2881,2490,2881,2891,2892,2892,2882,2881,2882,2892,2893,2893,2883,2882,2883,2893,2894,2894,2884,2883,2884,2894,2895,2895,2885,2884,2885,2895,2896,2896,2886,2885,2886,2896,2897,2897,2887,2886,2887,2897,2898,2898,2888,2887,2888,2898,2899,2899,2889,2888,2889,2899,2900,2900,2890,2889,2500,2510,2901,2901,2891,2500,2891,2901,2902,2902,2892,2891,2892,2902,2903,2903,2893,2892,2893,2903,2904,2904,2894,2893,2894,2904,2905,2905,2895,2894,2895,2905,2906,2906,2896,2895,2896,2906,2907,2907,2897,2896,2897,2907,2908,2908,2898,2897,2898,2908,2909,2909,2899,2898,2899,2909,2910,2910,2900,2899,2510,2520,2911,2911,2901,2510,2901,2911,2912,2912,2902,2901,2902,2912,2913,2913,2903,2902,2903,2913,2914,2914,2904,2903,2904,2914,2915,2915,2905,2904,2905,2915,2916,2916,2906,2905,2906,2916,2917,2917,2907,2906,2907,2917,2918,2918,2908,2907,2908,2918,2919,2919,2909,2908,2909,2919,2920,2920,2910,2909,2520,2530,2921,2921,2911,2520,2911,2921,2922,2922,2912,2911,2912,2922,2923,2923,2913,2912,2913,2923,2924,2924,2914,2913,2914,2924,2925,2925,2915,2914,2915,2925,2926,2926,2916,2915,2916,2926,2927,2927,2917,2916,2917,2927,2928,2928,2918,2917,2918,2928,2929,2929,2919,2918,2919,2929,2930,2930,2920,2919,2530,2540,2931,2931,2921,2530,2921,2931,2932,2932,2922,2921,2922,2932,2933,2933,2923,2922,2923,2933,2934,2934,2924,2923,2924,2934,2935,2935,2925,2924,2925,2935,2936,2936,2926,2925,2926,2936,2937,2937,2927,2926,2927,2937,2938,2938,2928,2927,2928,2938,2939,2939,2929,2928,2929,2939,2940,2940,2930,2929,2540,2550,2941,2941,2931,2540,2931,2941,2942,2942,2932,2931,2932,2942,2943,2943,2933,2932,2933,2943,2944,2944,2934,2933,2934,2944,2945,2945,2935,2934,2935,2945,2946,2946,2936,2935,2936,2946,2947,2947,2937,2936,2937,2947,2948,2948,2938,2937,2938,2948,2949,2949,2939,2938,2939,2949,2950,2950,2940,2939,2550,2560,2951,2951,2941,2550,2941,2951,2952,2952,2942,2941,2942,2952,2953,2953,2943,2942,2943,2953,2954,2954,2944,2943,2944,2954,2955,2955,2945,2944,2945,2955,2956,2956,2946,2945,2946,2956,2957,2957,2947,2946,2947,2957,2958,2958,2948,2947,2948,2958,2959,2959,2949,2948,2949,2959,2960,2960,2950,2949,2560,2570,2961,2961,2951,2560,2951,2961,2962,2962,2952,2951,2952,2962,2963,2963,2953,2952,2953,2963,2964,2964,2954,2953,2954,2964,2965,2965,2955,2954,2955,2965,2966,2966,2956,2955,2956,2966,2967,2967,2957,2956,2957,2967,2968,2968,2958,2957,2958,2968,2969,2969,2959,2958,2959,2969,2970,2970,2960,2959,2570,2580,2971,2971,2961,2570,2961,2971,2972,2972,2962,2961,2962,2972,2973,2973,2963,2962,2963,2973,2974,2974,2964,2963,2964,2974,2975,2975,2965,2964,2965,2975,2976,2976,2966,2965,2966,2976,2977,2977,2967,2966,2967,2977,2978,2978,2968,2967,2968,2978,2979,2979,2969,2968,2969,2979,2980,2980,2970,2969,2580,2590,2981,2981,2971,2580,2971,2981,2982,2982,2972,2971,2972,2982,2983,2983,2973,2972,2973,2983,2984,2984,2974,2973,2974,2984,2985,2985,2975,2974,2975,2985,2986,2986,2976,2975,2976,2986,2987,2987,2977,2976,2977,2987,2988,2988,2978,2977,2978,2988,2989,2989,2979,2978,2979,2989,2990,2990,2980,2979,2590,2600,2991,2991,2981,2590,2981,2991,2992,2992,2982,2981,2982,2992,2993,2993,2983,2982,2983,2993,2994,2994,2984,2983,2984,2994,2995,2995,2985,2984,2985,2995,2996,2996,2986,2985,2986,2996,2997,2997,2987,2986,2987,2997,2998,2998,2988,2987,2988,2998,2999,2999,2989,2988,2989,2999,3e3,3e3,2990,2989,2600,2610,3001,3001,2991,2600,2991,3001,3002,3002,2992,2991,2992,3002,3003,3003,2993,2992,2993,3003,3004,3004,2994,2993,2994,3004,3005,3005,2995,2994,2995,3005,3006,3006,2996,2995,2996,3006,3007,3007,2997,2996,2997,3007,3008,3008,2998,2997,2998,3008,3009,3009,2999,2998,2999,3009,3010,3010,3e3,2999,2610,2620,3011,3011,3001,2610,3001,3011,3012,3012,3002,3001,3002,3012,3013,3013,3003,3002,3003,3013,3014,3014,3004,3003,3004,3014,3015,3015,3005,3004,3005,3015,3016,3016,3006,3005,3006,3016,3017,3017,3007,3006,3007,3017,3018,3018,3008,3007,3008,3018,3019,3019,3009,3008,3009,3019,3020,3020,3010,3009,2620,2630,3021,3021,3011,2620,3011,3021,3022,3022,3012,3011,3012,3022,3023,3023,3013,3012,3013,3023,3024,3024,3014,3013,3014,3024,3025,3025,3015,3014,3015,3025,3026,3026,3016,3015,3016,3026,3027,3027,3017,3016,3017,3027,3028,3028,3018,3017,3018,3028,3029,3029,3019,3018,3019,3029,3030,3030,3020,3019,2630,2640,3031,3031,3021,2630,3021,3031,3032,3032,3022,3021,3022,3032,3033,3033,3023,3022,3023,3033,3034,3034,3024,3023,3024,3034,3035,3035,3025,3024,3025,3035,3036,3036,3026,3025,3026,3036,3037,3037,3027,3026,3027,3037,3038,3038,3028,3027,3028,3038,3039,3039,3029,3028,3029,3039,3040,3040,3030,3029,2640,2650,3041,3041,3031,2640,3031,3041,3042,3042,3032,3031,3032,3042,3043,3043,3033,3032,3033,3043,3044,3044,3034,3033,3034,3044,3045,3045,3035,3034,3035,3045,3046,3046,3036,3035,3036,3046,3047,3047,3037,3036,3037,3047,3048,3048,3038,3037,3038,3048,3049,3049,3039,3038,3039,3049,3050,3050,3040,3039,2650,2660,3051,3051,3041,2650,3041,3051,3052,3052,3042,3041,3042,3052,3053,3053,3043,3042,3043,3053,3054,3054,3044,3043,3044,3054,3055,3055,3045,3044,3045,3055,3056,3056,3046,3045,3046,3056,3057,3057,3047,3046,3047,3057,3058,3058,3048,3047,3048,3058,3059,3059,3049,3048,3049,3059,3060,3060,3050,3049,2660,2670,3061,3061,3051,2660,3051,3061,3062,3062,3052,3051,3052,3062,3063,3063,3053,3052,3053,3063,3064,3064,3054,3053,3054,3064,3065,3065,3055,3054,3055,3065,3066,3066,3056,3055,3056,3066,3067,3067,3057,3056,3057,3067,3068,3068,3058,3057,3058,3068,3069,3069,3059,3058,3059,3069,3070,3070,3060,3059,2670,2680,3071,3071,3061,2670,3061,3071,3072,3072,3062,3061,3062,3072,3073,3073,3063,3062,3063,3073,3074,3074,3064,3063,3064,3074,3075,3075,3065,3064,3065,3075,3076,3076,3066,3065,3066,3076,3077,3077,3067,3066,3067,3077,3078,3078,3068,3067,3068,3078,3079,3079,3069,3068,3069,3079,3080,3080,3070,3069,2680,2690,3081,3081,3071,2680,3071,3081,3082,3082,3072,3071,3072,3082,3083,3083,3073,3072,3073,3083,3084,3084,3074,3073,3074,3084,3085,3085,3075,3074,3075,3085,3086,3086,3076,3075,3076,3086,3087,3087,3077,3076,3077,3087,3088,3088,3078,3077,3078,3088,3089,3089,3079,3078,3079,3089,3090,3090,3080,3079,2690,2700,3091,3091,3081,2690,3081,3091,3092,3092,3082,3081,3082,3092,3093,3093,3083,3082,3083,3093,3094,3094,3084,3083,3084,3094,3095,3095,3085,3084,3085,3095,3096,3096,3086,3085,3086,3096,3097,3097,3087,3086,3087,3097,3098,3098,3088,3087,3088,3098,3099,3099,3089,3088,3089,3099,3100,3100,3090,3089,2700,2710,3101,3101,3091,2700,3091,3101,3102,3102,3092,3091,3092,3102,3103,3103,3093,3092,3093,3103,3104,3104,3094,3093,3094,3104,3105,3105,3095,3094,3095,3105,3106,3106,3096,3095,3096,3106,3107,3107,3097,3096,3097,3107,3108,3108,3098,3097,3098,3108,3109,3109,3099,3098,3099,3109,3110,3110,3100,3099,2710,2720,3111,3111,3101,2710,3101,3111,3112,3112,3102,3101,3102,3112,3113,3113,3103,3102,3103,3113,3114,3114,3104,3103,3104,3114,3115,3115,3105,3104,3105,3115,3116,3116,3106,3105,3106,3116,3117,3117,3107,3106,3107,3117,3118,3118,3108,3107,3108,3118,3119,3119,3109,3108,3109,3119,3120,3120,3110,3109,2720,2730,3121,3121,3111,2720,3111,3121,3122,3122,3112,3111,3112,3122,3123,3123,3113,3112,3113,3123,3124,3124,3114,3113,3114,3124,3125,3125,3115,3114,3115,3125,3126,3126,3116,3115,3116,3126,3127,3127,3117,3116,3117,3127,3128,3128,3118,3117,3118,3128,3129,3129,3119,3118,3119,3129,3130,3130,3120,3119,2730,2740,3131,3131,3121,2730,3121,3131,3132,3132,3122,3121,3122,3132,3133,3133,3123,3122,3123,3133,3134,3134,3124,3123,3124,3134,3135,3135,3125,3124,3125,3135,3136,3136,3126,3125,3126,3136,3137,3137,3127,3126,3127,3137,3138,3138,3128,3127,3128,3138,3139,3139,3129,3128,3129,3139,3140,3140,3130,3129,2740,2750,3141,3141,3131,2740,3131,3141,3142,3142,3132,3131,3132,3142,3143,3143,3133,3132,3133,3143,3144,3144,3134,3133,3134,3144,3145,3145,3135,3134,3135,3145,3146,3146,3136,3135,3136,3146,3147,3147,3137,3136,3137,3147,3148,3148,3138,3137,3138,3148,3149,3149,3139,3138,3139,3149,3150,3150,3140,3139,2750,2760,3151,3151,3141,2750,3141,3151,3152,3152,3142,3141,3142,3152,3153,3153,3143,3142,3143,3153,3154,3154,3144,3143,3144,3154,3155,3155,3145,3144,3145,3155,3156,3156,3146,3145,3146,3156,3157,3157,3147,3146,3147,3157,3158,3158,3148,3147,3148,3158,3159,3159,3149,3148,3149,3159,3160,3160,3150,3149,2760,2770,3161,3161,3151,2760,3151,3161,3162,3162,3152,3151,3152,3162,3163,3163,3153,3152,3153,3163,3164,3164,3154,3153,3154,3164,3165,3165,3155,3154,3155,3165,3166,3166,3156,3155,3156,3166,3167,3167,3157,3156,3157,3167,3168,3168,3158,3157,3158,3168,3169,3169,3159,3158,3159,3169,3170,3170,3160,3159,2770,2780,3171,3171,3161,2770,3161,3171,3172,3172,3162,3161,3162,3172,3173,3173,3163,3162,3163,3173,3174,3174,3164,3163,3164,3174,3175,3175,3165,3164,3165,3175,3176,3176,3166,3165,3166,3176,3177,3177,3167,3166,3167,3177,3178,3178,3168,3167,3168,3178,3179,3179,3169,3168,3169,3179,3180,3180,3170,3169,2780,2790,3181,3181,3171,2780,3171,3181,3182,3182,3172,3171,3172,3182,3183,3183,3173,3172,3173,3183,3184,3184,3174,3173,3174,3184,3185,3185,3175,3174,3175,3185,3186,3186,3176,3175,3176,3186,3187,3187,3177,3176,3177,3187,3188,3188,3178,3177,3178,3188,3189,3189,3179,3178,3179,3189,3190,3190,3180,3179,2790,2800,3191,3191,3181,2790,3181,3191,3192,3192,3182,3181,3182,3192,3193,3193,3183,3182,3183,3193,3194,3194,3184,3183,3184,3194,3195,3195,3185,3184,3185,3195,3196,3196,3186,3185,3186,3196,3197,3197,3187,3186,3187,3197,3198,3198,3188,3187,3188,3198,3199,3199,3189,3188,3189,3199,3200,3200,3190,3189,2800,2810,3201,3201,3191,2800,3191,3201,3202,3202,3192,3191,3192,3202,3203,3203,3193,3192,3193,3203,3204,3204,3194,3193,3194,3204,3205,3205,3195,3194,3195,3205,3206,3206,3196,3195,3196,3206,3207,3207,3197,3196,3197,3207,3208,3208,3198,3197,3198,3208,3209,3209,3199,3198,3199,3209,3210,3210,3200,3199,2810,2820,3211,3211,3201,2810,3201,3211,3212,3212,3202,3201,3202,3212,3213,3213,3203,3202,3203,3213,3214,3214,3204,3203,3204,3214,3215,3215,3205,3204,3205,3215,3216,3216,3206,3205,3206,3216,3217,3217,3207,3206,3207,3217,3218,3218,3208,3207,3208,3218,3219,3219,3209,3208,3209,3219,3220,3220,3210,3209,2820,2830,3221,3221,3211,2820,3211,3221,3222,3222,3212,3211,3212,3222,3223,3223,3213,3212,3213,3223,3224,3224,3214,3213,3214,3224,3225,3225,3215,3214,3215,3225,3226,3226,3216,3215,3216,3226,3227,3227,3217,3216,3217,3227,3228,3228,3218,3217,3218,3228,3229,3229,3219,3218,3219,3229,3230,3230,3220,3219,2830,2840,3231,3231,3221,2830,3221,3231,3232,3232,3222,3221,3222,3232,3233,3233,3223,3222,3223,3233,3234,3234,3224,3223,3224,3234,3235,3235,3225,3224,3225,3235,3236,3236,3226,3225,3226,3236,3237,3237,3227,3226,3227,3237,3238,3238,3228,3227,3228,3238,3239,3239,3229,3228,3229,3239,3240,3240,3230,3229,2840,2460,2842,2842,3231,2840,3231,2842,2844,2844,3232,3231,3232,2844,2846,2846,3233,3232,3233,2846,2848,2848,3234,3233,3234,2848,2850,2850,3235,3234,3235,2850,2852,2852,3236,3235,3236,2852,2854,2854,3237,3236,3237,2854,2856,2856,3238,3237,3238,2856,2858,2858,3239,3238,3239,2858,2860,2860,3240,3239]);var s=a.default.generatorTangents2(_.getData(i.default.S_INDICES),_.getData(i.default.S_POSITIONS),_.getData(i.default.S_UV0),_.getData(i.default.S_NORMALS));return _.setData(i.default.S_TANGENTS,s),o.setMesh(_),o.updateBound(),o}return n}(o.default);t.default=c},8011:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(4720)),i=_(n(307)),a=_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,r,o=l(_);function _(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),n=o.call(this,e,t);for(var r,s,u,l,f,c,m,h,d,p,g,S,v=t.radius||1,y=t.tube||.3,C=t.segmentsR||32,T=t.segmentsT||24,b=t.arc||2*Math.PI,P=[],E=[],D=[],R=[],w=0;w<=C;w++)for(var M=0;M<=T;M++)r=M/T*b,s=w/C*Math.PI*2,u=v*Math.cos(r),l=v*Math.sin(r),f=(v+y*Math.cos(s))*Math.cos(r),c=(v+y*Math.cos(s))*Math.sin(r),m=y*Math.sin(s),P.push(f),P.push(c),P.push(m),D.push(M/T),D.push(1-w/C),h=n.normalize(n.sub([f,c,m],[u,l,0],[]),[]),E.push(h[0]),E.push(h[1]),E.push(h[2]);for(var x=1;x<=C;x++)for(var A=1;A<=T;A++)d=(T+1)*x+A-1,p=(T+1)*(x-1)+A-1,g=(T+1)*(x-1)+A,S=(T+1)*x+A,R.push(d),R.push(p),R.push(g),R.push(g),R.push(S),R.push(d);var L=new i.default;L.setData(i.default.S_POSITIONS,P),L.setData(i.default.S_NORMALS,E),L.setData(i.default.S_UV0,D),L.setData(i.default.S_INDICES,R);var I=a.default.generatorTangents2(L.getData(i.default.S_INDICES),L.getData(i.default.S_POSITIONS),L.getData(i.default.S_UV0),L.getData(i.default.S_NORMALS));return L.setData(i.default.S_TANGENTS,I),n.setMesh(L),n.updateBound(),n}return t=_,(n=[{key:"normalize",value:function(e,t){var n=1/len(e);return this.mul(e,n,t)}},{key:"len",value:function(e){return Math.sqrt(this.sqLen(e))}},{key:"sqLen",value:function(e){return this.dot(e,e)}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{key:"mul",value:function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}},{key:"sub",value:function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}}])&&s(t.prototype,n),r&&s(t,r),_}(o.default);t.default=m},9468:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(4720)),i=l(n(307)),a=l(n(4008)),_=l(n(5397)),s=l(n(3370)),u=l(n(8113));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,o=m(l);function l(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,e,t);var r=new i.default;r.setData(i.default.S_POSITIONS,[3.4201992,0,-9.396927,2.7669992,2.0103426,-9.396927,1.0568995,3.2528028,-9.396927,-1.0568998,3.2528026,-9.396927,-2.7669995,2.0103424,-9.396927,-3.4201992,-2.9900332e-7,-9.396927,-2.766999,-2.010343,-9.396927,-1.0569,-3.2528026,-9.396927,1.0569001,-3.2528026,-9.396927,2.7670002,-2.0103416,-9.396927,3.4201992,0,-9.396927,6.427875,0,-7.660445,5.20026,3.7782102,-7.660445,1.9863225,6.1132727,-7.660445,-1.9863229,6.113272,-7.660445,-5.2002606,3.7782097,-7.660445,-6.427875,-5.6194267e-7,-7.660445,-5.2002597,-3.7782109,-7.660445,-1.9863232,-6.113272,-7.660445,1.9863235,-6.113272,-7.660445,5.2002616,-3.7782083,-7.660445,6.427875,0,-7.660445,8.6602545,0,-4.9999995,7.0062933,5.0903697,-4.9999995,2.6761656,8.236392,-4.9999995,-2.676166,8.236391,-4.9999995,-7.006294,5.090369,-4.9999995,-8.6602545,-7.5710346e-7,-4.9999995,-7.006293,-5.0903707,-4.9999995,-2.6761668,-8.236391,-4.9999995,2.676167,-8.236391,-4.9999995,7.006295,-5.0903673,-4.9999995,8.6602545,0,-4.9999995,9.848078,0,-1.7364818,7.9672623,5.7885547,-1.7364818,3.0432231,9.366078,-1.7364818,-3.0432239,9.366078,-1.7364818,-7.9672627,5.788554,-1.7364818,-9.848078,-8.6094633e-7,-1.7364818,-7.967262,-5.788556,-1.7364818,-3.0432243,-9.366078,-1.7364818,3.0432246,-9.366078,-1.7364818,7.9672647,-5.788552,-1.7364818,9.848078,0,-1.7364818,9.848078,0,1.7364826,7.9672623,5.7885547,1.7364826,3.0432231,9.366078,1.7364826,-3.0432239,9.366078,1.7364826,-7.9672627,5.788554,1.7364826,-9.848078,-8.6094633e-7,1.7364826,-7.967262,-5.788556,1.7364826,-3.0432243,-9.366078,1.7364826,3.0432246,-9.366078,1.7364826,7.9672647,-5.788552,1.7364826,9.848078,0,1.7364826,8.660254,0,5.0000005,7.0062923,5.090369,5.0000005,2.6761653,8.236391,5.0000005,-2.6761658,8.23639,5.0000005,-7.006293,5.0903687,5.0000005,-8.660254,-7.571034e-7,5.0000005,-7.006292,-5.09037,5.0000005,-2.6761663,-8.23639,5.0000005,2.6761665,-8.23639,5.0000005,7.0062943,-5.090367,5.0000005,8.660254,0,5.0000005,6.427875,0,7.660445,5.20026,3.7782102,7.660445,1.9863225,6.1132727,7.660445,-1.9863229,6.113272,7.660445,-5.2002606,3.7782097,7.660445,-6.427875,-5.6194267e-7,7.660445,-5.2002597,-3.7782109,7.660445,-1.9863232,-6.113272,7.660445,1.9863235,-6.113272,7.660445,5.2002616,-3.7782083,7.660445,6.427875,0,7.660445,3.4201992,0,9.396927,2.7669992,2.0103426,9.396927,1.0568995,3.2528028,9.396927,-1.0568998,3.2528026,9.396927,-2.7669995,2.0103424,9.396927,-3.4201992,-2.9900332e-7,9.396927,-2.766999,-2.010343,9.396927,-1.0569,-3.2528026,9.396927,1.0569001,-3.2528026,9.396927,2.7670002,-2.0103416,9.396927,3.4201992,0,9.396927,0,0,-10,0,0,10]),r.setData(i.default.S_INDICES,[0,11,1,1,11,12,1,12,2,2,12,13,2,13,3,3,13,14,3,14,4,4,14,15,4,15,5,5,15,16,5,16,6,6,16,17,6,17,7,7,17,18,7,18,8,8,18,19,8,19,9,9,19,20,9,20,10,10,20,21,11,22,12,12,22,23,12,23,13,13,23,24,13,24,14,14,24,25,14,25,15,15,25,26,15,26,16,16,26,27,16,27,17,17,27,28,17,28,18,18,28,29,18,29,19,19,29,30,19,30,20,20,30,31,20,31,21,21,31,32,22,33,23,23,33,34,23,34,24,24,34,35,24,35,25,25,35,36,25,36,26,26,36,37,26,37,27,27,37,38,27,38,28,28,38,39,28,39,29,29,39,40,29,40,30,30,40,41,30,41,31,31,41,42,31,42,32,32,42,43,33,44,34,34,44,45,34,45,35,35,45,46,35,46,36,36,46,47,36,47,37,37,47,48,37,48,38,38,48,49,38,49,39,39,49,50,39,50,40,40,50,51,40,51,41,41,51,52,41,52,42,42,52,53,42,53,43,43,53,54,44,55,45,45,55,56,45,56,46,46,56,57,46,57,47,47,57,58,47,58,48,48,58,59,48,59,49,49,59,60,49,60,50,50,60,61,50,61,51,51,61,62,51,62,52,52,62,63,52,63,53,53,63,64,53,64,54,54,64,65,55,66,56,56,66,67,56,67,57,57,67,68,57,68,58,58,68,69,58,69,59,59,69,70,59,70,60,60,70,71,60,71,61,61,71,72,61,72,62,62,72,73,62,73,63,63,73,74,63,74,64,64,74,75,64,75,65,65,75,76,66,77,67,67,77,78,67,78,68,68,78,79,68,79,69,69,79,80,69,80,70,70,80,81,70,81,71,71,81,82,71,82,72,72,82,83,72,83,73,73,83,84,73,84,74,74,84,85,74,85,75,75,85,86,75,86,76,76,86,87,0,1,88,1,2,88,2,3,88,3,4,88,4,5,88,5,6,88,6,7,88,7,8,88,8,9,88,9,10,88,77,89,78,78,89,79,79,89,80,80,89,81,81,89,82,82,89,83,83,89,84,84,89,85,85,89,86,86,89,87]),n.setMesh(r),n.updateBound();var f=new a.default(e,{id:t.id+_.default.nextId(),materialDef:u.default.parse(s.default.S_DEFAULT_SKY_BOX_DEF)});return n.setMaterial(f),n}return t=l,(n=[{key:"getType",value:function(){return"SkyBox"}}])&&f(t.prototype,n),r&&f(t,r),l}(o.default);t.default=p},2482:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(9650)),i=_(n(2949)),a=_(n(3846));_(n(5397));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,r,o=l(_);function _(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),n=o.call(this,e,t),e instanceof i.default||a.default.error("owner必须是Geometry或其子类!"),n._m_LastDistance=0,n._m_LastLodLevel=0,n._m_DistCommonDifference=t.distCommonDifference||1,n._m_LodLevelDists=[],n._m_TrisPerPixel=t.trisPerPixel||1,n._m_NumLodLevels=0,n._m_NumTris=[],n.distr(),n._m_Scene.on("render",(function(e){n._doUpdate()})),n}return t=_,(n=[{key:"getType",value:function(){return"LodControl"}},{key:"distr",value:function(){this._m_NumLodLevels=this._m_Owner.getMesh().getLodLevelCount();for(var e=0;e<this._m_NumLodLevels;e++)this._m_NumTris[e]=this._m_Owner.getMesh().getLodPrimitiveCount(e),this._m_LodLevelDists[e]=this._m_DistCommonDifference*e}},{key:"_update",value:function(){var e=this._m_Owner.getBoundingVolume(),t=this._m_Scene.getMainCamera(),n=Math.atan(t.getTop()*t.getNear()),r=Math.PI/(8*n),o=e.distance(t.getEye())/r,i=0;o>this._m_LastDistance&&Math.abs(o-this._m_LastDistance)<=this._m_DistCommonDifference||this._m_LastDistance>o&&0==this._m_LastLodLevel||this._m_LastDistance<o&&this._m_LastLodLevel==this._m_NumLodLevels-1?i=this._m_LastLodLevel:(i=o>this._m_LastDistance?this._m_LastLodLevel+1:this._m_LastLodLevel-1,i=Math.min(i,this._m_NumLodLevels),i=Math.max(i,0),this._m_LastDistance=this._m_LodLevelDists[i],this._m_LastLodLevel=i),this._m_Owner.lod(i)}}])&&s(t.prototype,n),r&&s(t,r),_}(o.default);t.default=m},9011:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(9650)),i=c(n(2949)),a=c(n(9369)),_=c(n(4720)),s=c(n(3801)),u=c(n(5604)),l=c(n(8583)),f=c(n(3846));function c(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,o=d(c);function c(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=o.call(this,e,t))._m_OctNode=null,e instanceof i.default&&(e.clearCullingFlags(i.default.S_DEFAULT_FRUSTUM_CULLING),n.createOct(e,4),n._m_OctNode)){var r=null,a=null;n._m_Scene.on("render",(function(e){r=n._m_Scene.getRender().getVisDrawables(),a=n._m_Scene.getFrustumCullingCamera(),n.octCulling(a,r)}))}return n}return t=c,(n=[{key:"getType",value:function(){return"OctCullingControl"}},{key:"_debug",value:function(e,t,n){var r=this;if(n.isValid()){var o=new _.default(e,{id:l.default.nextId()+"_oct"});o.setMesh(l.default.createAABBBoundingBoxMeshFromAABBBoundingBox(n.getAABBBoundingBox())),o.setMaterial(t),o.updateBound(),e.addChildren(o),n.getLeafs()&&n.getLeafs().forEach((function(n){r._debug(e,t,n)}))}}},{key:"debug",value:function(e,t){this._m_OctNode&&this._debug(e,t,this._m_OctNode)}},{key:"createOct",value:function(e,t){var n=e.getBoundingVolume();if(n){var r=new s.default,o=n.getXHalf(),i=n.getYHalf(),_=n.getZHalf(),l=Math.max(Math.max(o,i),_),c=n.getCenter();r.fromMinMax(new u.default(-l+c._m_X,-l+c._m_Y,-l+c._m_Z),new u.default(l+c._m_X,l+c._m_Y,l+c._m_Z)),this._m_OctNode=new a.default(null,r),this._m_OctNode.setValid(!0),f.default.debug("开始预建!"),this._preBuilt(this._m_OctNode,t),f.default.debug("预建完成!"),this.distrNode(e,this._m_OctNode)}}},{key:"_preBuiltOctLeaf",value:function(e,t){var n=null,r=e.getLeafs(),o=e.getAABBBoundingBox(),i=o.getMin(),_=o.getMax(),s=o.getCenter();c.S_TEMP_MIN.setToInXYZ(i._m_X,s._m_Y,i._m_Z),c.S_TEMP_MAX.setToInXYZ(s._m_X,_._m_Y,s._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(i._m_X,s._m_Y,s._m_Z),c.S_TEMP_MAX.setToInXYZ(s._m_X,_._m_Y,_._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(s._m_X,s._m_Y,i._m_Z),c.S_TEMP_MAX.setToInXYZ(_._m_X,_._m_Y,s._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(s._m_X,s._m_Y,s._m_Z),c.S_TEMP_MAX.setToInXYZ(_._m_X,_._m_Y,_._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(i._m_X,i._m_Y,i._m_Z),c.S_TEMP_MAX.setToInXYZ(s._m_X,s._m_Y,s._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(i._m_X,i._m_Y,s._m_Z),c.S_TEMP_MAX.setToInXYZ(s._m_X,s._m_Y,_._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(s._m_X,i._m_Y,i._m_Z),c.S_TEMP_MAX.setToInXYZ(_._m_X,s._m_Y,s._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t),c.S_TEMP_MIN.setToInXYZ(s._m_X,i._m_Y,s._m_Z),c.S_TEMP_MAX.setToInXYZ(_._m_X,s._m_Y,_._m_Z),c.S_TEMP_AABBBOUNDINGBOX.fromMinMax(c.S_TEMP_MIN,c.S_TEMP_MAX),n=new a.default(null,c.S_TEMP_AABBBOUNDINGBOX),r.push(n),this._preBuilt(n,t)}},{key:"_preBuilt",value:function(e,t){t>0&&(t--,e.initLeafs(),this._preBuiltOctLeaf(e,t))}},{key:"distrNode",value:function(e,t){var n=this,r=e.getChildren();r&&r.length>0?r.forEach((function(e){n.distrNode(e,t)})):e instanceof _.default&&this.distrOct(e,t)}},{key:"distrOct",value:function(e,t){var n=e.getBoundingVolume();if(t.getAABBBoundingBox().contains(n)){var r=t.getLeafs();if(null!=r){for(var o=!1,i=0;i<8;i++)if(this.distrOct(e,r[i])){o=!0,t.setValid(!0);break}return o||(t.addRef(e),t.setValid(!0)),!0}return t.addRef(e),t.setValid(!0),!0}return!1}},{key:"cullingLeafs",value:function(e,t,n){var r=this;if(e.isValid()&&e.inFrustum(t)){if(e.getRefs()){var o=t.getFrustumMask();e.getRefs().forEach((function(e){e.inFrustum(t)&&n.push(e),t.setFrustumMask(o)}))}if(e.getLeafs()){var i=t.getFrustumMask();e.getLeafs().forEach((function(e){t.setFrustumMask(i),r.cullingLeafs(e,t,n)}))}}}},{key:"octCulling",value:function(e,t){var n=e.getFrustumMask();e.setFrustumMask(0),this.cullingLeafs(this._m_OctNode,e,t),e.setFrustumMask(n)}}])&&m(t.prototype,n),r&&m(t,r),c}(o.default);t.default=v,S(v,"S_TEMP_AABBBOUNDINGBOX",new s.default),S(v,"S_TEMP_MIN",new u.default),S(v,"S_TEMP_MAX",new u.default)},9369:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3801)),o=i(n(1550));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Valid=!1,this._m_Refs=t,this._m_AABBBoundingBox=new r.default,this._m_AABBBoundingBox.setTo(n),this._m_Leafs=null,this._m_FrustumContain=null}var t,n,i;return t=e,(n=[{key:"inFrustum",value:function(e){return this._m_FrustumContain=e.frustumContains(this.getAABBBoundingBox()),this._m_FrustumContain!=o.default.S_FRUSTUM_INTERSECT_OUTSIDE}},{key:"setValid",value:function(e){this._m_Valid=e}},{key:"isValid",value:function(){return this._m_Valid}},{key:"addRef",value:function(e){this._m_Refs||(this._m_Refs=[]),this._m_Refs.push(e)}},{key:"getRefs",value:function(){return this._m_Refs}},{key:"getAABBBoundingBox",value:function(){return this._m_AABBBoundingBox}},{key:"getLeaf",value:function(e){return this._m_Leafs[e]}},{key:"getLeafs",value:function(){return this._m_Leafs}},{key:"initLeafs",value:function(){this._m_Leafs=[]}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=s,_(s,"S_LEAF_TBL",0),_(s,"S_LEAF_TFL",1),_(s,"S_LEAF_TBR",2),_(s,"S_LEAF_TFR",3),_(s,"S_LEAF_BBL",4),_(s,"S_LEAF_BFL",5),_(s,"S_LEAF_BBR",6),_(s,"S_LEAF_BFR",7)},1797:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Scenes=[],this._m_SceneIds={},this._m_Stop=!1}var t,r,o;return t=e,(r=[{key:"addScene",value:function(e){this._m_SceneIds[e.id]||(this._m_SceneIds[e.id]=e,this._m_Scenes.push(e))}},{key:"removeScene",value:function(e){this._m_SceneIds[e.id]&&(this._m_SceneIds[e.id]=null,this._m_Scenes.remove(e))}},{key:"launch",value:function(){var e=this;this._m_Stop=!1;var t=this,n=Date.now();requestAnimationFrame((function r(){var o=Date.now(),i=.001*(o-n);n=o,e._m_Scenes.forEach((function(e){e.update(i),e.render(i)})),t._m_Stop||requestAnimationFrame(r)}))}},{key:"close",value:function(){this._m_Stop=!0}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},7664:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"isDrawable",value:function(){}},{key:"isFramePicture",value:function(){}},{key:"isOpaque",value:function(){}},{key:"isTranslucent",value:function(){}},{key:"isTransparent",value:function(){}},{key:"draw",value:function(e){}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},3370:(e,t)=>{function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};t.default=r,n(r,"S_FXAA_FILTER_DEF_DATA","// Fast Approximate Anti-Aliasing (FXAA)\n// 来自https://www.geeks3d.com/20110405/fxaa-fast-approximate-anti-aliasing-demo-glsl-opengl-test-radeon-geforce/3/\nDef FxaaFilterDef{\n    Params{\n        float spanMax;\n        float reduceMul;\n        float subPixelShift;\n    }\n    SubTechnology Fxaa{\n        Vars{\n            vec4 pos;\n            vec2 resolutionInverse;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                pos.xy = Context.InUv0;\n                #ifdef Params.subPixelShift\n                    float _subPixelShift = Params.subPixelShift;\n                #else\n                    float _subPixelShift = 1.0f / 4.0f;\n                #endif\n                resolutionInverse = Context.ResolutionInverse;\n                pos.zw = Context.InUv0 - (resolutionInverse * vec2(0.5f + _subPixelShift));\n            }\n        }\n        Fs_Shader{\n            #define FxaaTex(t, p) texture(t, p)\n            #define OffsetVec(a, b) ivec2(a, b)\n            #define FxaaTexOff(t, p, o, r) textureOffset(t, p, o)\n            vec3 FXAA(vec4 posPos,sampler2D tex,vec2 rcpFrame){\n\n                #define FXAA_REDUCE_MIN   (1.0f/128.0f)\n                //#define FXAA_REDUCE_MUL   (1.0/8.0)\n                //#define FXAA_SPAN_MAX     8.0\n\n                vec3 rgbNW = FxaaTex(tex, posPos.zw).xyz;\n                vec3 rgbNE = FxaaTexOff(tex, posPos.zw, OffsetVec(1,0), rcpFrame.xy).xyz;\n                vec3 rgbSW = FxaaTexOff(tex, posPos.zw, OffsetVec(0,1), rcpFrame.xy).xyz;\n                vec3 rgbSE = FxaaTexOff(tex, posPos.zw, OffsetVec(1,1), rcpFrame.xy).xyz;\n\n                vec3 rgbM  = FxaaTex(tex, posPos.xy).xyz;\n\n                vec3 luma = vec3(0.299f, 0.587f, 0.114f);\n                float lumaNW = dot(rgbNW, luma);\n                float lumaNE = dot(rgbNE, luma);\n                float lumaSW = dot(rgbSW, luma);\n                float lumaSE = dot(rgbSE, luma);\n                float lumaM  = dot(rgbM,  luma);\n\n                float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n                float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n                vec2 dir;\n                dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n                dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n                #ifdef Params.reduceMul\n                    float _reduceMul = Params.reduceMul;\n                #else\n                    float _reduceMul = 1.0f / 8.0f;\n                #endif\n                float dirReduce = max(\n                    (lumaNW + lumaNE + lumaSW + lumaSE) * (0.25f * _reduceMul),FXAA_REDUCE_MIN);\n                float rcpDirMin = 1.0f/(min(abs(dir.x), abs(dir.y)) + dirReduce);\n                #ifdef Params.spanMax\n                    float _spanMax = Params.spanMax;\n                #else\n                    float _spanMax = 8.0f;\n                #endif\n                dir = min(vec2( _spanMax,  spanMax),max(vec2(-spanMax, -spanMax),dir * rcpDirMin)) * rcpFrame.xy;\n\n                vec3 rgbA = (1.0f/2.0f) * (FxaaTex(tex, posPos.xy + dir * vec2(1.0f/3.0f - 0.5f)).xyz +FxaaTex(tex, posPos.xy + dir * vec2(2.0f/3.0f - 0.5f)).xyz);\n                vec3 rgbB = rgbA * (1.0f/2.0f) + (1.0f/4.0f) * (FxaaTex(tex, posPos.xy + dir * vec2(0.0f/3.0f - 0.5f)).xyz +FxaaTex(tex, posPos.xy + dir * vec2(3.0f/3.0f - 0.5f)).xyz);\n\n                float lumaB = dot(rgbB, luma);\n\n                if ((lumaB < lumaMin) || (lumaB > lumaMax))\n                {\n                    return rgbA;\n                }\n                else\n                {\n                    return rgbB;\n                }\n            }\n            void main(){\n                Context.OutColor = vec4(FXAA(pos, Context.InScreen, resolutionInverse), 1.0f);\n            }\n        }\n    }\n    Technology{\n        Sub_Pass PostFilter{\n            Pass Fxaa{\n            }\n        }\n    }\n}\n"),n(r,"S_BLOOM_FILTER_DEF_DATA","// Bloom\nDef BloomFilterDef{\n    Globals BloomExtract{\n        color0 vec4 extractTexture;\n        depth24_stencil8 inner depthAndStencil;\n    }\n    Globals VBlur{\n        color0 vec4 color;\n        depth24_stencil8 inner depthAndStencil;\n    }\n    Globals HBlur{\n        color0 vec4 color;\n        depth24_stencil8 inner depthAndStencil;\n    }\n    Params{\n        // 辉光阈值\n        float extractThreshold;\n        // 曝光程度(默认2)\n        float exposurePower;\n        // 辉光强度\n        float bloomIntensity;\n        // 模糊缩放(默认1.5)\n        float blurScale;\n\n\n        // 使用辉光纹理(应该继承具体的Def下只需,后续完善)\n        bool useGlowMap;\n    }\n    SubTechnology ExtractPass{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            const vec3 DEFAULT_GRAY = vec3(0.2126f, 0.7152f, 0.0722f);\n            #define DEFAULT_EXTRACT_THRESHOLD 0.5f\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                ivec2 iTexC = ivec2(uv0 * vec2(textureSize(Context.InScreen, 0)));\n                vec4 screenColor = texelFetch(Context.InScreen, iTexC, 0);\n\n                float threshold = 0.0f;\n                float power = 2.0f;\n                #ifdef Params.extractThreshold\n                    threshold = Params.extractThreshold;\n                #else\n                    threshold = DEFAULT_EXTRACT_THRESHOLD;\n                #endif\n                #ifdef Params.exposurePower\n                    power = Params.exposurePower;\n                #endif\n\n                if( (screenColor.r + screenColor.g + screenColor.b) / 3.0f < threshold ){\n                    GlobalsBloomExtract.OutextractTexture = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                }\n                else{\n                    GlobalsBloomExtract.OutextractTexture = pow( screenColor, vec4(power) );\n                }\n\n                //vec4 screenColor = texture(Context.InScreen, uv0);\n                //screenColor.rgb = pow(screenColor.rgb, vec3(GAMMA));\n                // 记住我们在线性空间计算,所以这里需要映射回来\n                //float threshold = dot(screenColor.rgb, DEFAULT_GRAY);\n                //#ifdef Params.extractThreshold\n                //    if(threshold > Params.extractThreshold){\n                //        GlobalsBloomExtract.OutextractTexture = screenColor;\n                //    }\n                //    else{\n                //        GlobalsBloomExtract.OutextractTexture = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                //    }\n                //#else\n                //    if(threshold > DEFAULT_EXTRACT_THRESHOLD){\n                //        GlobalsBloomExtract.OutextractTexture = screenColor;\n                //    }\n                //    else{\n                //        GlobalsBloomExtract.OutextractTexture = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                //    }\n                //#endif\n            }\n        }\n    }\n    SubTechnology FirstHBlurPass{\n            Vars{\n                vec2 uv0;\n            }\n            Vs_Shader{\n                void main(){\n                    Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                    uv0 = Context.InUv0;\n                }\n            }\n            Fs_Shader{\n                #define DEFAULT_BLUR_SCALE 1.5f\n                void main(){\n                    #ifdef Params.blurScale\n                        float blurSize = Params.blurScale / float(textureSize(GlobalsBloomExtract.InextractTexture, 0).x);\n                    #else\n                        float blurSize = DEFAULT_BLUR_SCALE / float(textureSize(GlobalsBloomExtract.InextractTexture, 0).x);\n                    #endif\n                    vec4 sum = vec4(0.0f);\n\n                    // 水平方向模糊\n                    // 采样9个部分\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x - 4.0f*blurSize, uv0.y )) * 0.06f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x - 3.0f*blurSize, uv0.y )) * 0.09f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x - 2.0f*blurSize, uv0.y)) * 0.12f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x - blurSize, uv0.y )) * 0.15f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x, uv0.y)) * 0.16f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x + blurSize, uv0.y )) * 0.15f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x + 2.0f*blurSize, uv0.y )) * 0.12f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x + 3.0f*blurSize, uv0.y )) * 0.09f;\n                    sum += texture(GlobalsBloomExtract.InextractTexture, vec2(uv0.x + 4.0f*blurSize, uv0.y )) * 0.06f;\n\n                    GlobalsHBlur.Outcolor = sum;\n                }\n            }\n        }\n    SubTechnology HBlurPass{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            #define DEFAULT_BLUR_SCALE 1.5f\n            void main(){\n                #ifdef Params.blurScale\n                    float blurSize = Params.blurScale / float(textureSize(GlobalsVBlur.Incolor, 0).x);\n                #else\n                    float blurSize = DEFAULT_BLUR_SCALE / float(textureSize(GlobalsVBlur.Incolor, 0).x);\n                #endif\n\n                vec4 sum = vec4(0.0f);\n\n                // 水平方向模糊\n                // 采样9个部分\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x - 4.0f*blurSize, uv0.y )) * 0.06f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x - 3.0f*blurSize, uv0.y )) * 0.09f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x - 2.0f*blurSize, uv0.y)) * 0.12f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x - blurSize, uv0.y )) * 0.15f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x, uv0.y)) * 0.16f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x + blurSize, uv0.y )) * 0.15f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x + 2.0f*blurSize, uv0.y )) * 0.12f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x + 3.0f*blurSize, uv0.y )) * 0.09f;\n                sum += texture(GlobalsVBlur.Incolor, vec2(uv0.x + 4.0f*blurSize, uv0.y )) * 0.06f;\n\n                GlobalsHBlur.Outcolor = sum;\n            }\n        }\n    }\n    SubTechnology VBlurPass{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            #define DEFAULT_BLUR_SCALE 1.5f\n            void main(){\n                #ifdef Params.blurScale\n                    float blurSize = Params.blurScale / float(textureSize(GlobalsHBlur.Incolor, 0).y);\n                #else\n                    float blurSize = DEFAULT_BLUR_SCALE / float(textureSize(GlobalsHBlur.Incolor, 0).y);\n                #endif\n                vec4 sum = vec4(0.0f);\n\n                // 垂直方向模糊\n                // 采样9个部分\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y - 4.0f*blurSize)) * 0.06f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y - 3.0f*blurSize)) * 0.09f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y - 2.0f*blurSize)) * 0.12f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y - blurSize)) * 0.15f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y)) * 0.16f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y + blurSize)) * 0.15f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y + 2.0f*blurSize)) * 0.12f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y + 3.0f*blurSize)) * 0.09f;\n                sum += texture(GlobalsHBlur.Incolor, vec2(uv0.x, uv0.y + 4.0f*blurSize)) * 0.06f;\n\n                GlobalsVBlur.Outcolor = sum;\n            }\n        }\n    }\n    SubTechnology BloomPass{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                // 1.对ExtractTexture应用某种模糊(Blur)处理\n                // 2.结合ExtractTexture和ScreenColor实现bloom\n                vec4 screenColor = texture(Context.InScreen, uv0);\n                vec3 blurColor = texture(GlobalsVBlur.Incolor, uv0).rgb;\n                screenColor.rgb += blurColor;\n                const float exposure = 0.5f;\n                //vec3 result = vec3(1.0f) - exp(-screenColor.rgb * exposure);\n                //result = pow(result, vec3(GAMMA_T));\n                //Context.OutColor = vec4(result, screenColor.a);\n                Context.OutColor = screenColor;\n            }\n        }\n    }\n    SubTechnology FastBloomPass{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                vec4 screenColor = texture(Context.InScreen, uv0);\n                //vec3 blurColor = pow(texture(GlobalsVBlur.Incolor, uv0).rgb, vec3(1.0f / 2.0f));\n                //blurColor = vec3(1.0f) - exp(-blurColor.rgb * 0.5f);\n                vec3 blurColor = texture(GlobalsVBlur.Incolor, uv0).rgb;\n\n                float _bInd = 2.0f;\n                #ifdef Params.bloomIntensity\n                    _bInd = Params.bloomIntensity;\n                #endif\n\n                screenColor.rgb += blurColor * _bInd;\n                Context.OutColor = screenColor;\n                //测试\n                //Context.OutColor = vec4(blurColor, 1.0f);\n            }\n        }\n    }\n    Technology{\n        Sub_Pass PostFilter{\n            Pass ExtractPass{\n            }\n            Pass FirstHBlurPass{\n            }\n            Pass VBlurPass{\n            }\n            Pass FastBloomPass{\n            }\n        }\n    }\n    Technology MultiBloom{\n        //Sub_Pass PreFrame{\n        //    Pass ExtractPass{\n        //    }\n        //}\n        Sub_Pass PostFilter{\n            Pass ExtractPass{\n            }\n            Pass FirstHBlurPass{\n            }\n            Pass VBlurPass{\n            }\n            Pass HBlurPass{\n            }\n            Pass VBlurPass{\n            }\n            Pass HBlurPass{\n            }\n            Pass VBlurPass{\n            }\n            Pass BloomPass{\n            }\n        }\n    }\n}\n"),n(r,"S_WIREFRAME_DEF_DATA","// 由于webGL基于openGLES3.x,其不存在openGL线框模式,所以在这里通过shader实现线框\nDef WireframeDef{\n    Params{\n        vec4 color;\n        float wireframeWidth;\n    }\n    SubTechnology Wireframe{\n        Vars{\n            vec3 bary;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n                bary = Context.InBarycentric;\n\n\n\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                #ifdef Params.color\n                    vec4 _wireframeColor = Params.color;\n                #else\n                    vec4 _wireframeColor = vec4(0.2f, 0.2f, 0.2f, 1.0f);\n                #endif\n                #ifdef Params.wireframeWidth\n                    float _wireframeWidth = Params.wireframeWidth;\n                #else\n                    float _wireframeWidth = 0.01f;\n                #endif\n                if(any(lessThan(bary, vec3(_wireframeWidth)))){\n                    Context.OutColor = _wireframeColor;\n                }\n                else{\n                    discard;\n                }\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass Wireframe{\n            }\n        }\n    }\n}\n"),n(r,"S_COLOR_DEF_DATA","// 颜色材质,提供指定颜色或颜色纹理并渲染\nDef ColorDef{\n    Params{\n        vec4 color;\n        sampler2D colorMap;\n        float alphaDiscard;\n    }\n    SubTechnology ScalePass{\n        Vars{\n            vec4 wordPosition;\n        }\n        Vs_Shader{\n            void main(){\n                //Context.OutPosition = Context.ProjectViewModelMatrix * vec4(Context.InPosition, 1.0f);\n                mat4 scaleMat4 = mat4(\n                    0.2f, 0.0f, 0.0f, 0.0f,\n                    0.0f, 0.2f, 0.0f, 0.0f,\n                    0.0f, 0.0f, 0.2f, 0.0f,\n                    0.0f, 0.0f, 0.0f, 1.0f\n                );\n                Context.OutPosition = Context.ProjectMatrix * Context.ViewMatrix * Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                // 使用自定义颜色输出\n                #ifdef Params.color\n                    Context.OutColor = Params.color;\n                #else\n                    // 使用纹理\n                    #ifdef Params.colorMap\n                        Context.OutColor = texture(Params.colorMap, Context.InUv0);\n                        #ifdef Params.alphaDiscard\n                            if(Context.OutColor.a < Params.alphaDiscard){\n                                discard;\n                            }\n                        #endif\n                    #else\n                        Context.OutColor = vec4(1.0f, 1.0f, 0.0f, 1.0f);\n                    #endif\n                #endif\n                vec4 wPosition = wordPosition;\n            }\n        }\n    }\n    SubTechnology ColorPass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                //Context.OutPosition = Context.ProjectViewModelMatrix * vec4(Context.InPosition, 1.0f);\n                Context.OutPosition = Context.ProjectMatrix * Context.ViewMatrix * Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                // 使用自定义颜色输出\n                #ifdef Params.color\n                    Context.OutColor = Params.color;\n                #else\n                    // 使用纹理\n                    #ifdef Params.colorMap\n                        Context.OutColor = texture(Params.colorMap, uv0);\n                        #ifdef Params.alphaDiscard\n                            if(Context.OutColor.a < Params.alphaDiscard){\n                                discard;\n                            }\n                        #endif\n                    #else\n                        Context.OutColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);\n                    #endif\n                #endif\n            }\n        }\n    }\n    SubTechnology GreenPass{\n        Vars{\n            vec4 wordPosition;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = Context.ProjectMatrix * Context.ViewMatrix * Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                // 先判断Params.color是否有值\n                #ifdef Params.color\n                    Context.OutColor = Params.color;\n                #else\n                    Context.OutColor = vec4(0.0f, 1.0f, 0.0f, 1.0f);\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass ColorPass{\n            }\n        }\n    }\n    Technology Green{\n        Sub_Pass{\n            Pass GreenPass{\n            }\n        }\n    }\n    // ScaleColorPass\n    Technology ScaleColor{\n        Sub_Pass{\n            //第一个pass不应该写入深度,否则第二个pass被剔除\n            //可以指定每个pass的写入状态,比如关闭深度,开启深度之类的\n            Pass ScalePass{\n                // 这个pass剔除前面\n                FaceCull Front;\n            }\n            Pass ColorPass{\n                // 这个pass剔除背面\n                FaceCull Back;\n            }\n        }\n    }\n}\n"),n(r,"S_POST_SHADOW_DEF_DATA","// PostShadowDef\nDef PostShadowDef{\n    Params{\n        // ShadowInfo\n        float shadowIntensity;\n        int filterMode;\n        bool hardwareShadow;\n        bool backfaceShadows;\n        float pcfEdge;\n        vec2 fadeInfo;\n    }\n    SubTechnology PostShadowPass{\n        Vars{\n            vec2 wUv0;\n            mat4 pvInverse;\n            vec4 pvRow2;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                pvInverse = inverse(Context.ProjectViewMatrix);\n                // glsl是列矩阵,这里我获取第二行(只需要变换得到z即可测试PSSM)\n                pvRow2 = vec4(Context.ProjectViewMatrix[0][2], Context.ProjectViewMatrix[1][2], Context.ProjectViewMatrix[2][2], Context.ProjectViewMatrix[3][2]);\n                wUv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            //#extension GL_ARB_gpu_shader5 : enable\n            float shadowBorderScale = 1.0f;\n            #ifdef HARDWARE_SHADOWS\n                #define SHADOWMAP sampler2DShadow\n                #define SHADOWCOMPAREOFFSET(tex,coord,offset) textureProjOffset(tex, coord, offset)\n                #define SHADOWCOMPARE(tex,coord) textureProj(tex, coord)\n                #define SHADOWGATHER(tex,coord) textureGather(tex, coord.xy, coord.z)\n            #else\n                #define SHADOWMAP sampler2D\n                #define SHADOWCOMPAREOFFSET(tex,coord,offset) step(coord.z, textureProjOffset(tex, coord, offset).r)\n                #define SHADOWCOMPARE(tex,coord) step(coord.z, textureProj(tex, coord).r)\n                #define SHADOWGATHER(tex,coord) step(coord.z, textureGather(tex, coord.xy))\n            #endif\n\n            #define FILTER_MODE 1\n\n            #if FILTER_MODE == 10\n                #define GETSHADOW Shadow_Nearest\n                #define KERNEL 1.0\n            #elif FILTER_MODE == 1\n                #ifdef HARDWARE_SHADOWS\n                    #define GETSHADOW Shadow_Nearest\n                #else\n                    #define GETSHADOW Shadow_DoBilinear_2x2\n                #endif\n                #define KERNEL 1.0\n            #endif\n\n            #if (FILTER_MODE == 2)\n                #define GETSHADOW Shadow_DoDither_2x2\n                #define KERNEL 1.0\n            #elif FILTER_MODE == 3\n                #define GETSHADOW Shadow_DoPCF\n                #define KERNEL 4.0\n            #elif FILTER_MODE == 4\n                #define GETSHADOW Shadow_DoPCFPoisson\n                #define KERNEL 4.0\n            #elif FILTER_MODE == 5\n                #define GETSHADOW Shadow_DoPCF\n                #define KERNEL 8.0\n            #endif\n\n            float Shadow_DoShadowCompare(in SHADOWMAP tex,in vec4 projCoord){\n                return SHADOWCOMPARE(tex, projCoord);\n            }\n\n            float Shadow_BorderCheck(in vec2 coord){\n                // 最快的“hack”方法（使用 4-5 条指令）\n                vec4 t = vec4(coord.xy, 0.0f, 1.0f);\n                t = step(t.wwxy, t.xyzz);\n                return dot(t,t);\n            }\n\n            float Shadow_Nearest(in SHADOWMAP tex,in vec4 projCoord){\n                float border = Shadow_BorderCheck(projCoord.xy);\n                if (border > 0.0f){\n                    return 1.0f;\n                }\n                return SHADOWCOMPARE(tex, projCoord);\n            }\n\n            //----------------------------------ShadowFilter--------------------------------------\n            float Shadow_DoShadowCompareOffset(in SHADOWMAP tex,in vec4 projCoord,in vec2 offset){\n                vec4 coord = vec4(projCoord.xy + offset.xy * Context.SMapSizeInverse * shadowBorderScale, projCoord.zw);\n                return SHADOWCOMPARE(tex, coord);\n            }\n\n\n            float Shadow_DoDither_2x2(in SHADOWMAP tex, in vec4 projCoord){\n                float border = Shadow_BorderCheck(projCoord.xy);\n                if (border > 0.0f)\n                    return 1.0f;\n\n                float shadow = 0.0f;\n                vec2 o = vec2(ivec2(mod(floor(gl_FragCoord.xy), 2.0f))); //Strict type checking in GLSL ES\n                shadow += Shadow_DoShadowCompareOffset(tex, projCoord, (vec2(-1.5f, 1.5f)+o));\n                shadow += Shadow_DoShadowCompareOffset(tex, projCoord, (vec2( 0.5f, 1.5f)+o));\n                shadow += Shadow_DoShadowCompareOffset(tex, projCoord, (vec2(-1.5f, -0.5f)+o));\n                shadow += Shadow_DoShadowCompareOffset(tex, projCoord, (vec2( 0.5f, -0.5f)+o));\n                shadow *= 0.25f;\n                return shadow;\n            }\n\n            float Shadow_DoBilinear_2x2(in SHADOWMAP tex, in vec4 projCoord){\n                float border = Shadow_BorderCheck(projCoord.xy);\n                if (border > 0.0f){\n                    return 1.0f;\n                }\n\n                vec4 gather = vec4(0.0f);\n                #if defined GL_ARB_gpu_shader5 || defined GL_OES_gpu_shader5\n                    vec4 coord = vec4(projCoord.xyz / projCoord.www, 0.0f);\n                    gather = SHADOWGATHER(tex, coord);\n                #else\n                    gather.x = SHADOWCOMPAREOFFSET(tex, projCoord, ivec2(0, 1));\n                    gather.y = SHADOWCOMPAREOFFSET(tex, projCoord, ivec2(1, 1));\n                    gather.z = SHADOWCOMPAREOFFSET(tex, projCoord, ivec2(1, 0));\n                    gather.w = SHADOWCOMPAREOFFSET(tex, projCoord, ivec2(0, 0));\n                #endif\n\n               vec2 f = fract( projCoord.xy * Context.ShadowMapSize );\n               vec2 mx = mix( gather.wx, gather.zy, f.x );\n               return mix( mx.x, mx.y, f.y );\n            }\n\n            float Shadow_DoPCF(in SHADOWMAP tex,in vec4 projCoord){\n\n                float shadow = 0.0f;\n                float border = Shadow_BorderCheck(projCoord.xy);\n                if (border > 0.0f)\n                    return 1.0f;\n\n                float bound = KERNEL * 0.5f - 0.5f;\n                bound *= Params.pcfEdge;\n                for (float y = -bound; y <= bound; y += Params.pcfEdge){\n                    for (float x = -bound; x <= bound; x += Params.pcfEdge){\n                        shadow += Shadow_DoShadowCompareOffset(tex, projCoord, vec2(x,y));\n                    }\n                }\n\n                shadow = shadow / (KERNEL * KERNEL);\n                return shadow;\n            }\n\n            //12 tap poisson disk\n            const vec2 poissonDisk0 =  vec2(-0.1711046f, -0.425016f);\n            const vec2 poissonDisk1 =  vec2(-0.7829809f, 0.2162201f);\n            const vec2 poissonDisk2 =  vec2(-0.2380269f, -0.8835521f);\n            const vec2 poissonDisk3 =  vec2(0.4198045f, 0.1687819f);\n            const vec2 poissonDisk4 =  vec2(-0.684418f, -0.3186957f);\n            const vec2 poissonDisk5 =  vec2(0.6026866f, -0.2587841f);\n            const vec2 poissonDisk6 =  vec2(-0.2412762f, 0.3913516f);\n            const vec2 poissonDisk7 =  vec2(0.4720655f, -0.7664126f);\n            const vec2 poissonDisk8 =  vec2(0.9571564f, 0.2680693f);\n            const vec2 poissonDisk9 =  vec2(-0.5238616f, 0.802707f);\n            const vec2 poissonDisk10 = vec2(0.5653144f, 0.60262f);\n            const vec2 poissonDisk11 = vec2(0.0123658f, 0.8627419f);\n\n\n            float Shadow_DoPCFPoisson(in SHADOWMAP tex, in vec4 projCoord){\n                float shadow = 0.0f;\n                float border = Shadow_BorderCheck(projCoord.xy);\n                if (border > 0.0f){\n                    return 1.0f;\n                }\n\n                vec2 texelSize = Context.SMapSizeInverse * 4.0f * Params.pcfEdge * shadowBorderScale;\n\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk0 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk1 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk2 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk3 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk4 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk5 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk6 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk7 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk8 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk9 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk10 * texelSize, projCoord.zw));\n                shadow += SHADOWCOMPARE(tex, vec4(projCoord.xy + poissonDisk11 * texelSize, projCoord.zw));\n\n                // 除以 12\n                return shadow * 0.08333333333f;\n            }\n            //----------------------------------ShadowFilter--------------------------------------\n\n\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0f)) - vec2(1.0f);\n                pos.z  = depth * 2.0f - 1.0f;\n                pos.w  = 1.0f;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            #ifdef Context.Pssm\n                // 基于PSSM实现的DirectionalLightShadows\n                float getDirectionalLightShadows(in vec4 splits,in float shadowPosition, in SHADOWMAP shadowMap0, in SHADOWMAP shadowMap1, in SHADOWMAP shadowMap2,in SHADOWMAP shadowMap3, in vec4 projCoord0,in vec4 projCoord1,in vec4 projCoord2,in vec4 projCoord3){\n                    float shadow = 1.0f;\n                    if(shadowPosition < splits.x){\n                        shadow = GETSHADOW(shadowMap0, projCoord0 );\n                    }\n                    else if( shadowPosition <  splits.y){\n                        shadowBorderScale = 0.5f;\n                        shadow = GETSHADOW(shadowMap1, projCoord1);\n                    }\n                    else if( shadowPosition <  splits.z){\n                        shadowBorderScale = 0.25f;\n                        shadow = GETSHADOW(shadowMap2, projCoord2);\n                    }\n                    else if( shadowPosition <  splits.w){\n                        shadowBorderScale = 0.125f;\n                        shadow = GETSHADOW(shadowMap3, projCoord3);\n                    }\n                    return shadow;\n                }\n            #endif\n            #ifdef Context.PointLightShadows\n                float getPointLightShadows(in vec4 worldPos,in vec3 lightPos, in SHADOWMAP shadowMap0, in SHADOWMAP shadowMap1, in SHADOWMAP shadowMap2, in SHADOWMAP shadowMap3, in SHADOWMAP shadowMap4, in SHADOWMAP shadowMap5, in vec4 projCoord0,in vec4 projCoord1,in vec4 projCoord2,in vec4 projCoord3,in vec4 projCoord4,in vec4 projCoord5){\n                    float shadow = 1.0f;\n                    vec3 vect = worldPos.xyz - lightPos;\n                    vec3 absv = abs(vect);\n                    float maxComp = max(absv.x,max(absv.y,absv.z));\n                    if(maxComp == absv.y){\n                       if(vect.y < 0.0f){\n                           shadow = GETSHADOW(shadowMap0, projCoord0 / projCoord0.w);\n                       }\n                       else{\n                           shadow = GETSHADOW(shadowMap1, projCoord1 / projCoord1.w);\n                       }\n                    }\n                    else if(maxComp == absv.z){\n                       if(vect.z < 0.0f){\n                           shadow = GETSHADOW(shadowMap2, projCoord2 / projCoord2.w);\n                       }\n                       else{\n                           shadow = GETSHADOW(shadowMap3, projCoord3 / projCoord3.w);\n                       }\n                    }\n                    else if(maxComp == absv.x){\n                       if(vect.x < 0.0f){\n                           shadow = GETSHADOW(shadowMap4, projCoord4 / projCoord4.w);\n                       }\n                       else{\n                           shadow = GETSHADOW(shadowMap5, projCoord5 / projCoord5.w);\n                       }\n                    }\n                    return shadow;\n                }\n            #endif\n            #ifdef Context.SpotLightShadows\n                float getSpotLightShadows(in SHADOWMAP shadowMap, in  vec4 projCoord){\n                    float shadow = 1.0f;\n                    projCoord /= projCoord.w;\n                    shadow = GETSHADOW(shadowMap, projCoord);\n\n                    // 一个小的衰减，使阴影很好地融入暗部，将纹理坐标值转换为 -1,1 范围，因此纹理坐标向量的长度实际上是地面上变亮区域的半径\n                    projCoord = projCoord * 2.0f - 1.0f;\n                    float fallOff = ( length(projCoord.xy) - 0.9f ) / 0.1f;\n                    return mix(shadow, 1.0f, clamp(fallOff, 0.0f, 1.0f));\n                }\n            #endif\n            vec3 approximateNormal(in vec4 worldPos,in vec2 texCoord, in sampler2D depthMap, in vec2 resolutionInverse){\n                float step = resolutionInverse.x;\n                float stepy = resolutionInverse.y;\n                float depth2 = texture(depthMap, texCoord + vec2(step, -stepy)).r;\n                float depth3 = texture(depthMap, texCoord + vec2(-step, -stepy)).r;\n                vec4 worldPos2 = vec4(getPosition(depth2, texCoord + vec2(step, -stepy)),1.0f);\n                vec4 worldPos3 = vec4(getPosition(depth3, texCoord + vec2(-step, -stepy)),1.0f);\n\n                vec3 v1 = (worldPos - worldPos2).xyz;\n                vec3 v2 = (worldPos3 - worldPos2).xyz;\n                return normalize(cross(v1, v2));\n            }\n            const mat4 biasMat = mat4(0.5f, 0.0f, 0.0f, 0.0f,\n                                      0.0f, 0.5f, 0.0f, 0.0f,\n                                      0.0f, 0.0f, 0.5f, 0.0f,\n                                      0.5f, 0.5f, 0.5f, 1.0f);\n            void main(){\n                float depth = texture(Context.InDepth, wUv0).r;\n                Context.OutColor = texture(Context.InScreen, wUv0);\n\n                // 跳过不需要的部分,depth为1.0的基本上是背景或sky部分\n                if(depth >= 1.0f){\n                    return;\n                }\n\n                // 深度重建世界坐标\n                vec4 wPosition = vec4(getPosition(depth, wUv0), 1.0f);\n\n                vec3 lightDir;\n                #ifdef Context.Pssm\n                    lightDir = Context.LightDir;\n                #else\n                    lightDir = wPosition.xyz - Context.LightPos;\n                #endif\n\n                #ifdef Params.backfaceShadows\n                    // 丢弃背面时,由于在forward pipeline下无法获取该点法线,所以只能通过近似算法获取法线\n                    // 该近似算法依赖于深度信息,所以很容易造成Shadow Acne\n                    if(!Params.backfaceShadows){\n                        vec3 normal = approximateNormal(wPosition, wUv0, Context.InDepth, Context.ResolutionInverse);\n                        float ndotl = dot(normal, lightDir);\n                        if(ndotl > 0.0f){\n                            return;\n                        }\n                    }\n                #endif\n\n                #if !defined(Context.PointLightShadows)\n                    #if !defined(Context.Pssm)\n                        if( dot(Context.LightDir, lightDir) < 0.0f){\n                            return;\n                        }\n                    #endif\n                #endif\n\n                // 将坐标转换到光源空间\n                vec4 projCoord0 = biasMat * Context.LightViewProjectMatrix0 * wPosition;\n                vec4 projCoord1 = biasMat * Context.LightViewProjectMatrix1 * wPosition;\n                vec4 projCoord2 = biasMat * Context.LightViewProjectMatrix2 * wPosition;\n                vec4 projCoord3 = biasMat * Context.LightViewProjectMatrix3 * wPosition;\n                #ifdef Context.PointLightShadows\n                   vec4 projCoord4 = biasMat * Context.LightViewProjectMatrix4 * wPosition;\n                   vec4 projCoord5 = biasMat * Context.LightViewProjectMatrix5 * wPosition;\n                #endif\n\n                // 计算阴影\n                float shadow = 1.0f;\n\n                #if defined(Context.Pssm)\n                    float shadowPosition = pvRow2.x * wPosition.x +  pvRow2.y * wPosition.y +  pvRow2.z * wPosition.z +  pvRow2.w;\n                #else\n                    #if defined(Params.fadeInfo)\n                        float shadowPosition = pvRow2.x * wPosition.x +  pvRow2.y * wPosition.y +  pvRow2.z * wPosition.z +  pvRow2.w;\n                    #endif\n                #endif\n\n                #ifdef Context.PointLightShadows\n                    // pointLight shadow\n                    shadow = getPointLightShadows(wPosition, Context.LightPos, Context.InShadowMap0, Context.InShadowMap1, Context.InShadowMap2, Context.InShadowMap3, Context.InShadowMap4, Context.InShadowMap5, projCoord0, projCoord1, projCoord2, projCoord3, projCoord4, projCoord5);\n                #else\n                    #ifdef Context.Pssm\n                        // directionalLight shadow\n                        shadow = getDirectionalLightShadows(Context.Splits, shadowPosition, Context.InShadowMap0, Context.InShadowMap1, Context.InShadowMap2, Context.InShadowMap3, projCoord0, projCoord1, projCoord2, projCoord3);\n                    #else\n                        #ifdef Context.SpotLightShadows\n                            // spotLight shadow\n                            shadow = getSpotLightShadows(Context.InShadowMap0, projCoord0);\n                        #endif\n                    #endif\n                #endif\n\n                #ifdef Params.fadeInfo\n                    shadow = clamp(max(0.0f, mix(shadow, 1.0f,(shadowPosition - Params.fadeInfo.x) * Params.fadeInfo.y)), 0.0f, 1.0f);\n                #endif\n                #ifdef Params.shadowIntensity\n                    shadow = shadow * Params.shadowIntensity + (1.0f - Params.shadowIntensity);\n                #else\n                    shadow = shadow * 0.7f + 0.3f;\n                #endif\n                Context.OutColor = Context.OutColor * vec4(shadow, shadow, shadow, 1.0f);\n            }\n        }\n    }\n    Technology{\n        Sub_Pass PostFilter{\n            Pass PostShadowPass{\n            }\n        }\n    }\n}\n"),n(r,"S_PRE_SHADOW_DEF_DATA","// PreShadowDef\n// 这个材质定义用于捕获ShadowMap,因此,它很简单,只是简单的将深度信息渲染到指定缓冲中\nDef PreShadowDef{\n    Params{\n        bool debug;\n    }\n    SubTechnology PreShadowPass{\n        Vars{\n            vec2 wUv0;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n                wUv0 = Context.InUv0;\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                #ifdef Params.debug\n                    if(Params.debug){\n                        Context.OutColor = vec4(vec3(gl_FragCoord.z), 1.0f);\n                    }\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass PreFrame{\n            Pass PreShadowPass{\n            }\n        }\n    }\n}\n"),n(r,"S_FOG_FILTER_DEF_DATA","// 雾化\nDef FogFilterDef{\n    Params{\n        // 雾化距离(默认1000.0f)\n        float fogDistance;\n        // 通常为1.0\n        float fogDensity;\n        // 视锥near\n        float vNear;\n        // 视锥far\n        float vFar;\n        // 雾化near\n        float fogNear;\n        // 雾化far\n        float fogFar;\n        // 雾化颜色\n        vec4 fogColor;\n    }\n    SubTechnology Fog{\n        Vars{\n            vec2 wUv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wUv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            const float LOG2 = 1.442695f;\n            void main(){\n                Context.OutColor = texture(Context.InScreen, wUv0);\n                float depth = texture(Context.InDepth, wUv0).r;\n\n                #ifdef Params.fogDistance\n                    float _fogDistance = Params.fogDistance;\n                #else\n                    float _fogDistance = 1000.0f;\n                #endif\n                #ifdef Params.fogDensity\n                    float _fogDensity = Params.fogDensity;\n                #else\n                    float _fogDensity = 1.0f;\n                #endif\n                #ifdef Params.fogColor\n                    vec4 _fogColor = Params.fogColor;\n                #else\n                    vec4 _fogColor = vec4(1.0f);\n                #endif\n\n                // 可以简单的将视锥范围作为雾化过渡范围，如下：\n                // 此时，越靠近相机，dis越接近0，fog越接近1.0f，最终混合下Context.OutColor越清晰，远离相机时，dis小于0，fog逐渐变小，最终混合下_fogColor逐渐清晰\n                // 但是这种雾化计算dis在一个很小的非线性范围内变化\n                // float dis = (0.5f * depth + 0.5f);\n                // 所以这里变化到线性深度范围(假设near恒定为1.0)\n                float dis = 2.0f / (_fogDistance + 1.0f - depth * (_fogDistance - 1.0f));\n\n                // 一个经典的浓度过渡方程\n                float fog = exp2(-_fogDensity * _fogDensity * dis * dis * LOG2);\n                // 雾化规范到(0.0f,1.0f)\n                fog = clamp(fog, 0.0f, 1.0f);\n\n                // 混合结果\n                Context.OutColor = mix(_fogColor, Context.OutColor, fog);\n            }\n        }\n    }\n    SubTechnology LinearFog{\n        Vars{\n            vec2 wUv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wUv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            const float LOG2 = 1.442695f;\n            void main(){\n                Context.OutColor = texture(Context.InScreen, wUv0);\n                float depth = texture(Context.InDepth, wUv0).r;\n\n                #ifdef Params.vNear\n                    float _vNear = Params.vNear;\n                #else\n                    float _vNear = 0.1f;\n                #endif\n                #ifdef Params.vFar\n                    float _vFar = Params.vFar;\n                #else\n                    float _vFar = 1000.0f;\n                #endif\n                #ifdef Params.fogNear\n                    float _fogNear = Params.fogNear;\n                #else\n                    float _fogNear = 1.0f;\n                #endif\n                #ifdef Params.fogFar\n                    float _fogFar = Params.fogFar;\n                #else\n                    float _fogFar = 1000.0f;\n                #endif\n                #ifdef Params.fogColor\n                    vec4 _fogColor = Params.fogColor;\n                #else\n                    vec4 _fogColor = vec4(1.0f);\n                #endif\n\n\n                // 线性雾化相对来说比较简单,仅考虑指定near,far内的过渡\n                float dis = (2.0f * _vNear) / (_vFar + _vNear - depth * (_vFar - _vNear));\n\n                // 雾化规范到(0.0f,1.0f)\n                float fog = smoothstep(_fogNear, _fogFar, dis * (_vFar - _vNear));\n\n                // 混合结果\n                Context.OutColor = mix(Context.OutColor, _fogColor, fog);\n            }\n        }\n    }\n    Technology{\n        Sub_Pass PostFilter{\n            Pass Fog{\n            }\n        }\n    }\n    Technology LinearFog{\n\n        Sub_Pass PostFilter{\n            Pass LinearFog{\n            }\n        }\n    }\n}\n"),n(r,"S_PICTURE_DEF_DATA","// 颜色材质,提供指定颜色或颜色纹理并渲染\nDef PictureDef{\n    Params{\n        vec4 color;\n        sampler2D colorMap;\n        float alphaDiscard;\n    }\n    SubTechnology DefaultPass{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                // 使用自定义颜色输出\n                #ifdef Params.color\n                    Context.OutColor = Params.color;\n                #else\n                    // 使用纹理\n                    #ifdef Params.colorMap\n                        Context.OutColor = texture(Params.colorMap, uv0);\n                        #ifdef Params.alphaDiscard\n                            if(Context.OutColor.a < Params.alphaDiscard){\n                                discard;\n                            }\n                        #endif\n                    #else\n                        Context.OutColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);\n                    #endif\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass DefaultPass{\n            }\n        }\n    }\n}\n"),n(r,"S_GAMMA_CORRECTION_DEF_DATA","// gamma矫正\n// 由于webGL不支持硬件gamma矫正,只能通过后处理进行\nDef GammaCorrectionFilterDef{\n    Params{\n        float gammaFactor;\n        bool toneMapping;\n    }\n    SubTechnology GammaCorrectionFilter{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                Context.OutColor = texture(Context.InScreen, uv0);\n                #ifdef Params.toneMapping\n                    if(Params.toneMapping){\n                        Context.OutColor.rgb = Context.OutColor.rgb / (Context.OutColor.rgb + vec3(1.0f));\n                    }\n                #endif\n                #ifdef Params.gammaFactor\n                    Context.OutColor.rgb = pow(Context.OutColor.rgb, vec3(Params.gammaFactor));\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass PostFilter{\n            Pass GammaCorrectionFilter{\n            }\n        }\n    }\n}\n"),n(r,"S_DEFAULT_OUT_COLOR_DEF_DATA","// 输出颜色缓冲材质\nDef DefaultOutColorDef{\n    Params{\n        float gammaFactor;\n        bool toneMapping;\n    }\n    SubTechnology DefaultOutColor{\n        Vars{\n            vec2 uv0;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                uv0 = Context.InUv0;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                Context.OutColor = texture(Context.InForwardColorMap, uv0);\n                #ifdef Params.toneMapping\n                    if(Params.toneMapping){\n                        Context.OutColor.rgb = Context.OutColor.rgb / (Context.OutColor.rgb + vec3(1.0f));\n                    }\n                #endif\n                #ifdef Params.gammaFactor\n                    Context.OutColor.rgb = pow(Context.OutColor.rgb, vec3(Params.gammaFactor));\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass DefaultOutColor{\n            }\n        }\n    }\n}\n"),n(r,"S_DEFAULT_SKY_BOX_DEF","// 天空盒材质定义\nDef SkyBoxDef{\n    Params{\n        // 启用cubeMap通道\n        bool useCubeMap;\n        // 启用envMap通道\n        bool useEnvMap;\n        // 启用高动态映射\n        bool useHDR;\n        samplerCube cubeMap;\n        sampler2D envMap;\n    }\n    SubTechnology SkyBox{\n        Vars{\n            vec3 wPosition;\n        }\n        Vs_Shader{\n            void main(){\n                wPosition = Context.InPosition;\n                // 只需要旋转部分\n                vec4 pos = Context.ViewMatrix * vec4(Context.InPosition, 0.0f);\n                // 应用投影变换\n                pos.w = 1.0f;\n                pos = Context.ProjectMatrix * pos;\n                Context.OutPosition = pos.xyww;\n            }\n        }\n        Fs_Shader{\n            vec2 Optics_SphereCoord(in vec3 dir){\n                float dzplus1 = dir.z + 1.0f;\n\n                // 计算 1/2p\n                // NOTE: 仅当dir归一化时，此简化才有效。\n                float inv_two_p = 1.414f * sqrt(dzplus1);\n                //float inv_two_p = sqrt(dir.x * dir.x + dir.y * dir.y + dzplus1 * dzplus1);\n                inv_two_p *= 2.0f;\n                inv_two_p = 1.0f / inv_two_p;\n\n                // 计算texcoord\n                return (dir.xy * vec2(inv_two_p)) + vec2(0.5f);\n            }\n            const vec2 invAtan = vec2(0.159154943091895f, 0.318309886183790f);\n            #define PI 3.14159265358979323846264\n            // 转换环境纹理映射纹理坐标\n            vec2 fractTexcoord(const in vec3 v)\n            {\n                vec2 uv = vec2(atan(v.z, v.x) + PI, acos(v.y));\n                uv *= invAtan;\n                return uv;\n            }\n            void main(){\n                #ifdef Params.useCubeMap\n                    // 立方体纹理\n                    Context.OutColor = texture( Params.cubeMap, normalize( wPosition ) );\n                #else\n                    #ifdef Params.useEnvMap\n                        // 环境纹理\n                        vec2 uv = fractTexcoord( normalize( wPosition ) );\n                        #ifdef Params.useHDR\n                            // 解码hdr数据,也可以使用硬件RGB9_E5\n                            vec4 rgbe = texture( Params.envMap, uv );\n                            //rgbe.rgb *= pow(2.0f,rgbe.a*255.0f-128.0f);\n                            // 色调映射(后续在后处理统一进行)\n                            //rgbe.rgb = rgbe.rgb / (rgbe.rgb + vec3(1.0f));\n                            // 伽马(后续在后处理统一进行)\n                            //rgbe.rgb = pow(rgbe.rgb, vec3(1.0f / 2.2f));\n                            Context.OutColor.rgb = rgbe.rgb;\n                            Context.OutColor.a = 1.0f;\n                        #else\n                            Context.OutColor = texture( Params.envMap, uv );\n                        #endif\n                    #endif\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass SkyBox{\n            }\n        }\n    }\n}\n"),n(r,"S_PREFILTER_DEF","// 预过滤EnvMap\nDef PrefilterDef{\n    Params{\n        float roughness;\n        float resolution;\n        samplerCube envMap;\n    }\n    SubTechnology Prefilter{\n        Vars{\n            vec3 wPosition;\n        }\n        Vs_Shader{\n            void main(){\n                wPosition = Context.InPosition;\n                // 只需要旋转部分\n                vec4 pos = Context.ViewMatrix * vec4(Context.InPosition, 0.0f);\n                // 应用投影变换\n                pos.w = 1.0f;\n                pos = Context.ProjectMatrix * pos;\n                Context.OutPosition = pos.xyww;\n            }\n        }\n\n        Fs_Shader{\n            const float PI = 3.14159265359f;\n            // ----------------------------------------------------------------------------\n            float DistributionGGX(vec3 N, vec3 H, float roughness)\n            {\n                float a = roughness*roughness;\n                float a2 = a*a;\n                float NdotH = max(dot(N, H), 0.0f);\n                float NdotH2 = NdotH*NdotH;\n\n                float nom   = a2;\n                float denom = (NdotH2 * (a2 - 1.0f) + 1.0f);\n                denom = PI * denom * denom;\n\n                return nom / denom;\n            }\n            // ----------------------------------------------------------------------------\n            // http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\n            // 高效的VanDerCorpus计算。\n            float RadicalInverse_VdC(uint bits)\n            {\n                 bits = (bits << 16u) | (bits >> 16u);\n                 bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n                 bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n                 bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n                 bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n                 return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n            }\n            // ----------------------------------------------------------------------------\n            vec2 Hammersley(uint i, uint N)\n            {\n                return vec2(float(i)/float(N), RadicalInverse_VdC(i));\n            }\n            // ----------------------------------------------------------------------------\n            vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness)\n            {\n                float a = roughness*roughness;\n\n                float phi = 2.0f * PI * Xi.x;\n                float cosTheta = sqrt((1.0 - Xi.y) / (1.0f + (a*a - 1.0f) * Xi.y));\n                float sinTheta = sqrt(1.0 - cosTheta*cosTheta);\n\n                // 从球坐标到笛卡尔坐标-半角向量\n                vec3 H;\n                H.x = cos(phi) * sinTheta;\n                H.y = sin(phi) * sinTheta;\n                H.z = cosTheta;\n\n                // 从切线空间H向量到世界空间样本向量\n                vec3 up          = abs(N.z) < 0.999 ? vec3(0.0f, 0.0f, 1.0f) : vec3(1.0f, 0.0f, 0.0f);\n                vec3 tangent   = normalize(cross(up, N));\n                vec3 bitangent = cross(N, tangent);\n\n                vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\n                return normalize(sampleVec);\n            }\n            void main(){\n                vec3 N = normalize(wPosition);\n\n                // 做出简化的假设，即V等于R等于法线\n                vec3 R = N;\n                vec3 V = R;\n\n                const uint SAMPLE_COUNT = 1024u;\n                vec3 prefilteredColor = vec3(0.0f);\n                float totalWeight = 0.0f;\n\n                for(uint i = 0u; i < SAMPLE_COUNT; ++i)\n                {\n                    // 生成偏向首选对齐方向的采样矢量（重要性采样）。\n                    vec2 Xi = Hammersley(i, SAMPLE_COUNT);\n                    vec3 H = ImportanceSampleGGX(Xi, N, Params.roughness);\n                    vec3 L  = normalize(2.0 * dot(V, H) * H - V);\n\n                    float NdotL = max(dot(N, L), 0.0f);\n                    if(NdotL > 0.0)\n                    {\n                        // 基于粗糙度/ pdf从环境的mip级别采样\n                        float D   = DistributionGGX(N, H, Params.roughness);\n                        float NdotH = max(dot(N, H), 0.0f);\n                        float HdotV = max(dot(H, V), 0.0f);\n                        float pdf = D * NdotH / (4.0f * HdotV) + 0.0001f;\n\n                        float saTexel  = 4.0f * PI / (6.0f * Params.resolution * Params.resolution);\n                        float saSample = 1.0f / (float(SAMPLE_COUNT) * pdf + 0.0001f);\n\n                        float mipLevel = Params.roughness == 0.0f ? 0.0f : 0.5f * log2(saSample / saTexel);\n\n                        prefilteredColor += textureLod(Params.envMap, L, mipLevel).rgb * NdotL;\n                        totalWeight      += NdotL;\n                    }\n                }\n\n                prefilteredColor = prefilteredColor / totalWeight;\n\n                Context.OutColor = vec4(prefilteredColor, 1.0f);\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass Prefilter{\n            }\n        }\n    }\n}\n"),n(r,"S_ENV_CAPTURE_OUT_DEF","// 将环境捕捉数据渲染并查看\n// 同时,也支持将IBL作为SkyEnv进行场景环境渲染\nDef EnvCaptureOutDef{\n    Params{\n        samplerCube envCaptureMap;\n        float lod;\n    }\n    SubTechnology EnvCaptureOut{\n        Vars{\n            vec3 wPosition;\n        }\n        Vs_Shader{\n            void main(){\n                wPosition = Context.InPosition;\n                Context.OutPosition = Context.ProjectMatrix * Context.ViewMatrix * Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n            }\n        }\n        Fs_Shader{\n            void main(){\n                #ifdef Params.envCaptureMap\n                    #ifdef Params.lod\n                        Context.OutColor = textureLod(Params.envCaptureMap, normalize(wPosition), Params.lod);\n                    #else\n                        Context.OutColor = texture(Params.envCaptureMap, normalize(wPosition));\n                    #endif\n                #else\n                    Context.OutColor = vec4(1.0f);\n                #endif\n            }\n        }\n    }\n    SubTechnology EnvSkyOut{\n        Vars{\n            vec3 wPosition;\n        }\n        Vs_Shader{\n            void main(){\n                wPosition = Context.InPosition;\n                // 只需要旋转部分\n                vec4 pos = Context.ViewMatrix * vec4(Context.InPosition, 0.0f);\n                // 应用投影变换\n                pos.w = 1.0f;\n                pos = Context.ProjectMatrix * pos;\n                Context.OutPosition = pos.xyww;\n            }\n        }\n        Fs_Shader{\n            void main(){\n                #ifdef Params.envCaptureMap\n                    #ifdef Params.lod\n                        Context.OutColor = textureLod(Params.envCaptureMap, normalize(wPosition), Params.lod);\n                    #else\n                        Context.OutColor = texture(Params.envCaptureMap, normalize(wPosition));\n                    #endif\n                #else\n                    Context.OutColor = vec4(1.0f);\n                #endif\n            }\n        }\n    }\n    Technology{\n        Sub_Pass{\n            Pass EnvCaptureOut{\n            }\n        }\n    }\n    Technology EnvSky{\n        Sub_Pass{\n            Pass EnvSkyOut{\n            }\n        }\n    }\n}\n"),n(r,"S_BASIC_LIGHTING_DEF_DATA","// 基础光照材质定义\nDef BasicLightingDef{\n    Params{\n        sampler2D diffuseMap;\n        sampler2D normalMap;\n        sampler2D specularMap;\n        vec4 ambientColor;\n        vec4 diffuseColor;\n        vec4 specularColor;\n        float shininess;\n        // lightMap或AO或OCC\n        sampler2D lightMap;\n        bool lightMapTexCoord;\n        // 完全透明剔除因子(0-1),低于该值的透明片段被完全剔除而不进行混合\n        float alphaDiscard;\n    }\n    SubTechnology MultiPassBlinnPhongLighting{\n        Vars{\n            vec3 wNormal;\n            vec4 wTangent;\n            vec3 wPosition;\n            vec2 wUv0;\n            vec2 wUv1;\n            // 三种成分用于调和光照,可来自材质颜色的定义,也可以来自vertex_light\n            vec3 ambientSumAdjust;\n            vec4 diffuseSumAdjust;\n            vec3 specularSumAdjust;\n        }\n        Advanced{\n            RenderProgram MultiPassLighting;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n\n\n                wPosition = (Context.ModelMatrix * vec4(Context.InPosition, 1.0f)).xyz;\n                mat3 nMat = mat3(transpose(inverse(Context.ModelMatrix)));\n                vec3 norm = normalize(nMat * Context.InNormal);\n                wTangent = vec4(normalize(nMat * Context.InTangent.xyz), Context.InTangent.w);\n                //t = normalize(t - dot(t, norm) * norm);\n                //vec3 b = cross(norm, t);\n                //tbnMat = mat3(t, b, norm);\n                wNormal = norm;\n                wUv0 = Context.InUv0;\n\n                // lightMap/AO/OCC\n                #ifdef Params.lightMapTexCoord\n                    wUv1 = Context.InUv1;\n                #endif\n\n\n                // 如果是顶点光照,则在这里将光源变化到切线空间\n                ambientSumAdjust = Params.ambientColor.rgb * Context.AmbientLightColor;\n                diffuseSumAdjust = vec4(1.0f);\n                specularSumAdjust = vec3(1.0f);\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n        Fs_Shader{\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                // 对于DirLight,lightDir.w = 1.0f\n                //lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n\n                lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            // 基于BlinnPhong光照模型计算光照因子\n            // brdf.x保存漫反射部分;brdf.y保存镜面反射部分\n            void ComputeLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in float attenuation, in float shininess, out vec2 brdf){\n                // diffuse部分\n                float diffuseBRDF = max(0.0f, dot(normal, lightDir));\n                // specular部分\n                // 半角向量代替viewDir参与光照计算\n                vec3 H = normalize(viewDir + lightDir);\n                float HdotN = max(0.0f, dot(H, normal));\n                float specularBRDF = pow( HdotN, shininess );\n\n                // 衰减,对于PointLight和SpotLight来说有效,对于DirLight而言,attenuation一直为1\n                brdf.x = diffuseBRDF * attenuation;\n                brdf.y = specularBRDF * attenuation;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            void main(){\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec2 lightBRDF = vec2(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                vec4 _diffuseColor = vec4(1.0f);\n                vec4 _specularColor = vec4(1.0f);\n\n                #ifdef Params.diffuseColor\n                    _diffuseColor = Params.diffuseColor;\n                #endif\n                #ifdef Params.diffuseMap\n                    _diffuseColor = _diffuseColor * texture(Params.diffuseMap, wUv0);\n                    #ifdef Params.alphaDiscard\n                        // discard性能比较差,建议还是使用半透明渲染比较合适s\n                        if(_diffuseColor.a < Params.alphaDiscard){\n                            discard;\n                        }\n                    #endif\n                #endif\n\n                #ifdef Params.specularColor\n                    _specularColor = Params.specularColor;\n                #endif\n                #ifdef Params.specularMap\n                    _specularColor = _specularColor * texture(Params.specularMap, wUv0);\n                #endif\n\n                vec3 normal = normalize( wNormal );\n                #ifdef Params.normalMap\n                    vec3 normalHeight = texture(Params.normalMap, wUv0).xyz;\n                    vec3 tangent = normalize(wTangent.xyz);\n                    mat3 tbnMat = mat3(tangent, wTangent.w * cross(normal, tangent), normal);\n                    normal = normalize(tbnMat * ( normalHeight * 2.0f - 1.0f ));\n                #endif\n\n                float _shininess = 32.0;\n                #ifdef Params.shininess\n                    _shininess = Params.shininess;\n                #endif\n\n                // lightMap/AO/OCC\n                #ifdef Params.lightMap\n                    #ifdef Params.lightMapTexCoord\n                        vec3 lightMapColor = texture(Params.lightMap, wUv1).rgb;\n                    #else\n                        vec3 lightMapColor = texture(Params.lightMap, wUv0).rgb;\n                    #endif\n                    _specularColor.rgb *= lightMapColor;\n                    _diffuseColor.rgb  *= lightMapColor;\n                #endif\n\n\n                Context.OutColor.rgb = _diffuseColor.rgb * ambientSumAdjust;\n\n\n                // 不必担心这个分支，不会影响性能\n                if(Context.MultiId == 0){\n                    for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                        // 后期改为Context.GetLightDir(Context.LightData[i]);\n                        lightColor = Context.WLightData[i];\n                        lightData1 = Context.WLightData[i + 1];\n                        ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                        //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                        // BlinnPhongLighting\n                        //vec3 h = normalize( viewDir + lightDir.xzy );\n                        //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                        // 标准PhongLighting\n                        //vec3 refDir = reflect( lightData1.xyz, normal );\n                        //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                        // 计算SpotLight的衰减\n                        float spotFallOff = 1.0;\n                        if( lightColor.w > 1.0f )\n                        {\n                            // 计算SpotLight的范围衰减\n                            spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                        }\n\n                        // 如果存在法线纹理,则进一步计算lightDir\n\n                        // 计算反射率\n                        ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                        // 最终光照值\n                        //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb * diffuseSumAdjust.rgb + vec3(lightBRDF.y) * _specularColor.rgb * specularSumAdjust.rgb);\n                        Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * diffuseSumAdjust.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * specularSumAdjust.rgb * vec3( lightBRDF.y ));\n                        //Context.OutColor.rgb = vec3(spotFallOff);\n                    }\n                }\n                else{\n                    // point和spot\n                    vec4 lightColor = Context.WLight_Data_0;\n                    vec4 lightData1 = Context.WLight_Data_1;\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                    //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                    // BlinnPhongLighting\n                    //vec3 h = normalize( viewDir + lightDir.xzy );\n                    //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                    // 标准PhongLighting\n                    //vec3 refDir = reflect( lightData1.xyz, normal );\n                    //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                    // 计算SpotLight的衰减\n                    float spotFallOff = 1.0;\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLight_Data_2, lightDir.xyz );\n                    }\n\n                    // 如果存在法线纹理,则进一步计算lightDir\n\n                    // 计算反射率\n                    ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                    // 最终光照值\n                    //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb * diffuseSumAdjust.rgb + vec3(lightBRDF.y) * _specularColor.rgb * specularSumAdjust.rgb);\n                    Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * diffuseSumAdjust.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * specularSumAdjust.rgb * vec3( lightBRDF.y ));\n                }\n                Context.OutColor.a = diffuseSumAdjust.a * _diffuseColor.a;\n            }\n        }\n    }\n\n    SubTechnology SingleBlinnPhongLighting{\n        Vars{\n            vec3 wNormal;\n            vec4 wTangent;\n            vec3 wPosition;\n            vec2 wUv0;\n            vec2 wUv1;\n            // 三种成分用于调和光照,可来自材质颜色的定义,也可以来自vertex_light\n            vec3 ambientSumAdjust;\n            vec4 diffuseSumAdjust;\n            vec3 specularSumAdjust;\n        }\n        Advanced{\n            RenderProgram SinglePassLighting;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n\n\n                wPosition = (Context.ModelMatrix * vec4(Context.InPosition, 1.0f)).xyz;\n                mat3 nMat = mat3(transpose(inverse(Context.ModelMatrix)));\n                vec3 norm = normalize(nMat * Context.InNormal);\n                wTangent = vec4(normalize(nMat * Context.InTangent.xyz), Context.InTangent.w);\n                //t = normalize(t - dot(t, norm) * norm);\n                //vec3 b = cross(norm, t);\n                //tbnMat = mat3(t, b, norm);\n                wNormal = norm;\n                wUv0 = Context.InUv0;\n\n                // lightMap/AO/OCC\n                #ifdef Params.lightMapTexCoord\n                    wUv1 = Context.InUv1;\n                #endif\n\n\n                // 如果是顶点光照,则在这里将光源变化到切线空间\n                ambientSumAdjust = Params.ambientColor.rgb * Context.AmbientLightColor;\n                diffuseSumAdjust = vec4(1.0f);\n                specularSumAdjust = vec3(1.0f);\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n        Fs_Shader{\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                // 对于DirLight,lightDir.w = 1.0f\n                //lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n\n                lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            // 基于BlinnPhong光照模型计算光照因子\n            // brdf.x保存漫反射部分;brdf.y保存镜面反射部分\n            void ComputeLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in float attenuation, in float shininess, out vec2 brdf){\n                // diffuse部分\n                float diffuseBRDF = max(0.0f, dot(normal, lightDir));\n                // specular部分\n                // 半角向量代替viewDir参与光照计算\n                vec3 H = normalize(viewDir + lightDir);\n                float HdotN = max(0.0f, dot(H, normal));\n                float specularBRDF = pow( HdotN, shininess );\n\n                // 衰减,对于PointLight和SpotLight来说有效,对于DirLight而言,attenuation一直为1\n                brdf.x = diffuseBRDF * attenuation;\n                brdf.y = specularBRDF * attenuation;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n                float falloff = clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f);\n                //if(curAngleCos > innerMinusOuter)\n                //    falloff = 1.0f;\n                //else\n                //    falloff = 0.0f;\n\n                #ifdef SRGB\n                    // Use quadratic falloff (notice the ^4)\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0, 1.0), 4.0);\n                #else\n                    // Use linear falloff\n                    return falloff;\n                #endif\n            }\n            void main(){\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec2 lightBRDF = vec2(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                vec4 _diffuseColor = vec4(1.0f);\n                vec4 _specularColor = vec4(1.0f);\n\n                #ifdef Params.diffuseColor\n                    _diffuseColor = Params.diffuseColor;\n                #endif\n                #ifdef Params.diffuseMap\n                    _diffuseColor = _diffuseColor * texture(Params.diffuseMap, wUv0);\n                    #ifdef Params.alphaDiscard\n                        // discard性能比较差,建议还是使用半透明渲染比较合适s\n                        if(_diffuseColor.a < Params.alphaDiscard){\n                            discard;\n                        }\n                    #endif\n                #endif\n\n                #ifdef Params.specularColor\n                    _specularColor = Params.specularColor;\n                #endif\n                #ifdef Params.specularMap\n                    _specularColor = _specularColor * texture(Params.specularMap, wUv0);\n                #endif\n\n                vec3 normal = normalize( wNormal );\n                #ifdef Params.normalMap\n                    vec3 normalHeight = texture(Params.normalMap, wUv0).xyz;\n                    vec3 tangent = normalize(wTangent.xyz);\n                    mat3 tbnMat = mat3(tangent, wTangent.w * cross(normal, tangent), normal);\n                    normal = normalize(tbnMat * ( normalHeight * 2.0f - 1.0f ));\n                #endif\n\n                float _shininess = 32.0;\n                #ifdef Params.shininess\n                    _shininess = Params.shininess;\n                #endif\n\n                // lightMap/AO/OCC\n                #ifdef Params.lightMap\n                    #ifdef Params.lightMapTexCoord\n                        vec3 lightMapColor = texture(Params.lightMap, wUv1).rgb;\n                    #else\n                        vec3 lightMapColor = texture(Params.lightMap, wUv0).rgb;\n                    #endif\n                    _specularColor.rgb *= lightMapColor;\n                    _diffuseColor.rgb  *= lightMapColor;\n                #endif\n\n\n                Context.OutColor.rgb = _diffuseColor.rgb * ambientSumAdjust;\n                for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                    // 后期改为Context.GetLightDir(Context.LightData[i]);\n                    lightColor = Context.WLightData[i];\n                    lightData1 = Context.WLightData[i + 1];\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                    //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                    // BlinnPhongLighting\n                    //vec3 h = normalize( viewDir + lightDir.xzy );\n                    //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                    // 标准PhongLighting\n                    //vec3 refDir = reflect( lightData1.xyz, normal );\n                    //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                    // 计算SpotLight的衰减\n                    float spotFallOff = 1.0;\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                    }\n\n                    // 如果存在法线纹理,则进一步计算lightDir\n\n                    // 计算反射率\n                    ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                    // 最终光照值\n                    //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb * diffuseSumAdjust.rgb + vec3(lightBRDF.y) * _specularColor.rgb * specularSumAdjust.rgb);\n                    Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * diffuseSumAdjust.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * specularSumAdjust.rgb * vec3( lightBRDF.y ));\n                    //Context.OutColor.rgb = vec3(spotFallOff);\n                }\n                Context.OutColor.a = diffuseSumAdjust.a * _diffuseColor.a;\n            }\n        }\n    }\n\n    SubTechnology ColorSubTechnology{\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = Context.ProjectViewMatrix * Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n            }\n        }\n        Fs_Shader{\n            void main(){\n                Context.OutColor = vec4(1.0f, 0.0f, 0.0f, 1.0f);\n            }\n        }\n    }\n    // 默认为SinglePass\n    Technology {\n        Sub_Pass Forward{\n            Pass SingleBlinnPhongLighting{\n            }\n        }\n    }\n    Technology MultiPass{\n        Sub_Pass Forward{\n            Pass MultiPassBlinnPhongLighting{\n            }\n        }\n    }\n    Technology Color{\n        Sub_Pass Forward{\n            Pass ColorSubTechnology{\n            }\n        }\n    }\n}\n"),n(r,"S_DEFERRED_LIGHTING_DEF_DATA","// 默认的延迟光照材质定义\nDef DeferredLightingDef{\n    Params{\n        sampler2D diffuseMap;\n        sampler2D normalMap;\n        sampler2D specularMap;\n        sampler2D normalMap;\n        vec4 ambientColor;\n        vec4 diffuseColor;\n        vec4 specularColor;\n        float shininess;\n        // 完全透明剔除因子(0-1),低于该值的透明片段被完全剔除而不进行混合\n        float alphaDiscard;\n    }\n    SubTechnology GBufferPass{\n        Vars{\n            vec3 wNormal;\n            vec4 wTangent;\n            vec3 wPosition;\n            vec2 wUv0;\n            // 三种成分用于调和光照,可来自材质颜色的定义,也可以来自vertex_light\n            vec3 ambientSumAdjust;\n            vec4 diffuseSumAdjust;\n            vec3 specularSumAdjust;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n\n\n                wPosition = (Context.ModelMatrix * vec4(Context.InPosition, 1.0f)).xyz;\n                mat3 nMat = mat3(transpose(inverse(Context.ModelMatrix)));\n                vec3 norm = normalize(nMat * Context.InNormal);\n                wTangent = vec4(normalize(nMat * Context.InTangent.xyz), Context.InTangent.w);\n                //t = normalize(t - dot(t, norm) * norm);\n                //vec3 b = cross(norm, t);\n                //tbnMat = mat3(t, b, norm);\n                wNormal = norm;\n                wUv0 = Context.InUv0;\n\n\n                // 如果是顶点光照,则在这里将光源变化到切线空间\n                ambientSumAdjust = Params.ambientColor.rgb;\n                diffuseSumAdjust = vec4(1.0f);\n                specularSumAdjust = vec3(1.0f);\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n        Fs_Shader{\n            void main(){\n\n                vec4 _diffuseColor = vec4(1.0f);\n                vec4 _specularColor = vec4(1.0f);\n\n                #ifdef Params.diffuseColor\n                    _diffuseColor = Params.diffuseColor;\n                #endif\n                #ifdef Params.diffuseMap\n                    _diffuseColor = _diffuseColor * texture(Params.diffuseMap, wUv0);\n                    #ifdef Params.alphaDiscard\n                        // discard性能比较差,建议还是使用半透明渲染比较合适s\n                        if(_diffuseColor.a < Params.alphaDiscard){\n                            discard;\n                        }\n                    #endif\n                #endif\n\n                #ifdef Params.specularColor\n                    _specularColor = Params.specularColor;\n                #endif\n                #ifdef Params.specularMap\n                    _specularColor = _specularColor * texture(Params.specularMap, wUv0);\n                #endif\n\n                vec3 normal = normalize( wNormal );\n                #ifdef Params.normalMap\n                    vec3 normalHeight = texture(Params.normalMap, wUv0).xyz;\n                    vec3 tangent = normalize(wTangent.xyz);\n                    mat3 tbnMat = mat3(tangent, wTangent.w * cross(normal, tangent), normal);\n                    normal = normalize(tbnMat * ( normalHeight * 2.0f - 1.0f ));\n                #endif\n\n                float _shininess = 32.0;\n                #ifdef Params.shininess\n                    _shininess = Params.shininess;\n                #endif\n\n\n\n\n                Context.OutGBuffer0.xyz = _diffuseColor.rgb * diffuseSumAdjust.rgb;\n                Context.OutGBuffer0.w   = diffuseSumAdjust.a * _diffuseColor.a * 0.1f + _shininess;\n                Context.OutGBuffer1.xyz = normal.xyz;\n                Context.OutGBuffer2.rgb = _specularColor.rgb * specularSumAdjust.rgb * 10.0f + ambientSumAdjust * 0.1f;\n                Context.OutGBuffer2.a = _shininess;\n            }\n        }\n    }\n    SubTechnology DeferredShadingPass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram SinglePassLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                // 对于DirLight,lightDir.w = 1.0f\n                //lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n\n                lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            // 基于BlinnPhong光照模型计算光照因子\n            // brdf.x保存漫反射部分;brdf.y保存镜面反射部分\n            void ComputeLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in float attenuation, in float shininess, out vec2 brdf){\n                // diffuse部分\n                float diffuseBRDF = max(0.0f, dot(normal, lightDir));\n                // specular部分\n                // 半角向量代替viewDir参与光照计算\n                vec3 H = normalize(viewDir + lightDir);\n                float HdotN = max(0.0f, dot(H, normal));\n                float specularBRDF = pow( HdotN, shininess );\n\n                // 衰减,对于PointLight和SpotLight来说有效,对于DirLight而言,attenuation一直为1\n                brdf.x = diffuseBRDF * attenuation;\n                brdf.y = specularBRDF * attenuation;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 _diffuseColor = texture(Context.InGBuffer0, uv0);\n                vec4 _specularColorDecode = texture(Context.InGBuffer2, uv0);\n                vec3 _specularColor = floor(_specularColorDecode.rgb) * 0.1f;\n                vec3 _ambientColor = min(fract(_specularColorDecode.rgb) * 10.0f, vec3(1.0f));\n                float _shininess = floor(_diffuseColor.w);\n                float alpha     = min(fract(_diffuseColor.w) * 10.0f, 1.0f);\n                vec3 normal = texture(Context.InGBuffer1, uv0).xyz;\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec2 lightBRDF = vec2(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                Context.OutColor.rgb = _diffuseColor.rgb * Context.AmbientLightColor * _ambientColor;\n                for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                    // 后期改为Context.GetLightDir(Context.LightData[i]);\n                    lightColor = Context.WLightData[i];\n                    lightData1 = Context.WLightData[i + 1];\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                    //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                    // BlinnPhongLighting\n                    //vec3 h = normalize( viewDir + lightDir.xzy );\n                    //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                    // 标准PhongLighting\n                    //vec3 refDir = reflect( lightData1.xyz, normal );\n                    //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                    // 计算SpotLight的衰减\n                    float spotFallOff = 1.0;\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                    }\n\n                    // 如果存在法线纹理,则进一步计算lightDir\n\n                    // 计算反射率\n                    ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                    // 最终光照值\n                    //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb + vec3(lightBRDF.y) * _specularColor.rgb);\n                    Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * vec3( lightBRDF.y ));\n                    //Context.OutColor.rgb = vec3(spotFallOff);\n                }\n                Context.OutColor.a = alpha;\n            }\n        }\n    }\n    SubTechnology DeferredShadingPass2{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram MultiPassLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                // 对于DirLight,lightDir.w = 1.0f\n                //lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n\n                lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            // 基于BlinnPhong光照模型计算光照因子\n            // brdf.x保存漫反射部分;brdf.y保存镜面反射部分\n            void ComputeLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in float attenuation, in float shininess, out vec2 brdf){\n                // diffuse部分\n                float diffuseBRDF = max(0.0f, dot(normal, lightDir));\n                // specular部分\n                // 半角向量代替viewDir参与光照计算\n                vec3 H = normalize(viewDir + lightDir);\n                float HdotN = max(0.0f, dot(H, normal));\n                float specularBRDF = pow( HdotN, shininess );\n\n                // 衰减,对于PointLight和SpotLight来说有效,对于DirLight而言,attenuation一直为1\n                brdf.x = diffuseBRDF * attenuation;\n                brdf.y = specularBRDF * attenuation;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 _diffuseColor = texture(Context.InGBuffer0, uv0);\n                vec4 _specularColorDecode = texture(Context.InGBuffer2, uv0);\n                vec3 _specularColor = floor(_specularColorDecode.rgb) * 0.1f;\n                vec3 _ambientColor = min(fract(_specularColorDecode.rgb) * 10.0f, vec3(1.0f));\n                float _shininess = floor(_diffuseColor.w);\n                float alpha     = min(fract(_diffuseColor.w) * 10.0f, 1.0f);\n                vec3 normal = texture(Context.InGBuffer1, uv0).xyz;\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec2 lightBRDF = vec2(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                Context.OutColor.rgb = _diffuseColor.rgb * Context.AmbientLightColor * _ambientColor;\n\n\n                // 不必担心这个分支，不会影响性能\n                if(Context.MultiId == 0){\n                    for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                        // 后期改为Context.GetLightDir(Context.LightData[i]);\n                        lightColor = Context.WLightData[i];\n                        lightData1 = Context.WLightData[i + 1];\n                        ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                        //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                        // BlinnPhongLighting\n                        //vec3 h = normalize( viewDir + lightDir.xzy );\n                        //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                        // 标准PhongLighting\n                        //vec3 refDir = reflect( lightData1.xyz, normal );\n                        //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                        // 计算SpotLight的衰减\n                        float spotFallOff = 1.0;\n                        if( lightColor.w > 1.0f )\n                        {\n                            // 计算SpotLight的范围衰减\n                            spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                        }\n\n                        // 如果存在法线纹理,则进一步计算lightDir\n\n                        // 计算反射率\n                        ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                        // 最终光照值\n                        //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb + vec3(lightBRDF.y) * _specularColor.rgb);\n                        Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * vec3( lightBRDF.y ));\n                        //Context.OutColor.rgb = vec3(spotFallOff);\n                    }\n                }\n                else{\n                    // point和spot\n                    lightColor = Context.WLight_Data_0;\n                    lightData1 = Context.WLight_Data_1;\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                    //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                    // BlinnPhongLighting\n                    //vec3 h = normalize( viewDir + lightDir.xzy );\n                    //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                    // 标准PhongLighting\n                    //vec3 refDir = reflect( lightData1.xyz, normal );\n                    //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                    // 计算SpotLight的衰减\n                    float spotFallOff = 1.0;\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLight_Data_2, lightDir.xyz );\n                    }\n\n                    // 如果存在法线纹理,则进一步计算lightDir\n\n                    // 计算反射率\n                    ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                    // 最终光照值\n                    //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb + vec3(lightBRDF.y) * _specularColor.rgb);\n                    Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * vec3( lightBRDF.y ));\n                }\n\n\n                Context.OutColor.a = alpha;\n            }\n        }\n    }\n    SubTechnology GlobalPass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram TilePassLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                // 对于DirLight,lightDir.w = 1.0f\n                //lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n\n                lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            // 基于BlinnPhong光照模型计算光照因子\n            // brdf.x保存漫反射部分;brdf.y保存镜面反射部分\n            void ComputeLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in float attenuation, in float shininess, out vec2 brdf){\n                // diffuse部分\n                float diffuseBRDF = max(0.0f, dot(normal, lightDir));\n                // specular部分\n                // 半角向量代替viewDir参与光照计算\n                vec3 H = normalize(viewDir + lightDir);\n                float HdotN = max(0.0f, dot(H, normal));\n                float specularBRDF = pow( HdotN, shininess );\n\n                // 衰减,对于PointLight和SpotLight来说有效,对于DirLight而言,attenuation一直为1\n                brdf.x = diffuseBRDF * attenuation;\n                brdf.y = specularBRDF * attenuation;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n                float falloff = clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f);\n                //if(curAngleCos > innerMinusOuter)\n                //    falloff = 1.0f;\n                //else\n                //    falloff = 0.0f;\n\n                #ifndef Context.Srgb\n                    // Use quadratic falloff (notice the ^4)\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0, 1.0), 4.0);\n                #else\n                    // Use linear falloff\n                    return falloff;\n                #endif\n            }\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 _diffuseColor = texture(Context.InGBuffer0, uv0);\n                vec4 _specularColorDecode = texture(Context.InGBuffer2, uv0);\n                vec3 _specularColor = floor(_specularColorDecode.rgb) * 0.1f;\n                vec3 _ambientColor = min(fract(_specularColorDecode.rgb) * 10.0f, vec3(1.0f));\n                float _shininess = floor(_diffuseColor.w);\n                float alpha     = min(fract(_diffuseColor.w) * 10.0f, 1.0f);\n                vec3 normal = texture(Context.InGBuffer1, uv0).xyz;\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec2 lightBRDF = vec2(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                Context.OutColor.rgb = _diffuseColor.rgb * Context.AmbientLightColor * _ambientColor;\n                for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                    // 后期改为Context.GetLightDir(Context.LightData[i]);\n                    lightColor = Context.WLightData[i];\n                    lightData1 = Context.WLightData[i + 1];\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                    //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                    // BlinnPhongLighting\n                    //vec3 h = normalize( viewDir + lightDir.xzy );\n                    //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                    // 标准PhongLighting\n                    //vec3 refDir = reflect( lightData1.xyz, normal );\n                    //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                    // 计算SpotLight的衰减\n                    float spotFallOff = 1.0;\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                    }\n\n                    // 如果存在法线纹理,则进一步计算lightDir\n\n                    // 计算反射率\n                    ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                    // 最终光照值\n                    //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb + vec3(lightBRDF.y) * _specularColor.rgb);\n                    Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * vec3( lightBRDF.y ));\n                    //Context.OutColor.rgb = vec3(spotFallOff);\n                }\n                Context.OutColor.a = alpha;\n            }\n        }\n    }\n    SubTechnology TilePass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram TilePassLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                // 对于DirLight,lightDir.w = 1.0f\n                //lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n\n                lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            // 基于BlinnPhong光照模型计算光照因子\n            // brdf.x保存漫反射部分;brdf.y保存镜面反射部分\n            void ComputeLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in float attenuation, in float shininess, out vec2 brdf){\n                // diffuse部分\n                float diffuseBRDF = max(0.0f, dot(normal, lightDir));\n                // specular部分\n                // 半角向量代替viewDir参与光照计算\n                vec3 H = normalize(viewDir + lightDir);\n                float HdotN = max(0.0f, dot(H, normal));\n                float specularBRDF = pow( HdotN, shininess );\n\n                // 衰减,对于PointLight和SpotLight来说有效,对于DirLight而言,attenuation一直为1\n                brdf.x = diffuseBRDF * attenuation;\n                brdf.y = specularBRDF * attenuation;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n                float falloff = clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f);\n                //if(curAngleCos > innerMinusOuter)\n                //    falloff = 1.0f;\n                //else\n                //    falloff = 0.0f;\n\n                #ifndef Context.Srgb\n                    // Use quadratic falloff (notice the ^4)\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0, 1.0), 4.0);\n                #else\n                    // Use linear falloff\n                    return falloff;\n                #endif\n            }\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 _diffuseColor = texture(Context.InGBuffer0, uv0);\n                vec4 _specularColorDecode = texture(Context.InGBuffer2, uv0);\n                vec3 _specularColor = floor(_specularColorDecode.rgb) * 0.1f;\n                vec3 _ambientColor = min(fract(_specularColorDecode.rgb) * 10.0f, vec3(1.0f));\n                float _shininess = floor(_diffuseColor.w);\n                float alpha     = min(fract(_diffuseColor.w) * 10.0f, 1.0f);\n                vec3 normal = texture(Context.InGBuffer1, uv0).xyz;\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec2 lightBRDF = vec2(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                Context.OutColor.rgb = vec3(0.0f);\n                // Tile Based Shading\n                // 获取tile信息\n                vec3 tile = texture(Context.InTileLightDecode, uv0).xyz;\n                int uoffset = int(tile.x);\n                int voffset = int(tile.z);\n                int count = int(tile.y);\n                if(count > 0){\n                    int lightId;\n                    float temp;\n                    int offset;\n                    // lightIndex采样范围规范化单位\n                    float uvSize = 1.0f / (Context.TileLightOffsetSize - 1.0f);\n                    vec2 lightUV;\n                    // lightData采样范围规范单位\n                    float lightUVSize = 1.0f / (float(Context.TileLightNum) - 1.0f);\n                    vec2 lightDataUV;\n                    for(int i = 0;i < count;i++){\n                        temp = float(uoffset + i);\n                        offset = 0;\n\n                        if(temp >= Context.TileLightOffsetSize){\n                            temp -= Context.TileLightOffsetSize;\n                            offset++;\n                        }\n                        if(temp == Context.TileLightOffsetSize){\n                            temp = 0.0f;\n                        }\n\n                        // lightIndexUV\n                        lightUV = vec2(temp * uvSize, float(voffset + offset) * uvSize);\n                        lightId = int(texture(Context.InTileLightIndex, lightUV).x);\n\n                        // 光源信息\n                        lightDataUV = vec2(float(lightId) * lightUVSize);\n                        lightColor = texture(Context.InTileWLightData0, lightDataUV);\n                        lightData1 = texture(Context.InTileWLightData1, lightDataUV);\n\n                        // point和spot\n                        ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n                        //lightBRDF.x = max( 0.0f, dot( normal, lightDir.xyz ) );\n\n                        // BlinnPhongLighting\n                        //vec3 h = normalize( viewDir + lightDir.xzy );\n                        //lightBRDF.y = pow( max( 0.0f, dot( normal, h ) ), 32.0f );\n                        // 标准PhongLighting\n                        //vec3 refDir = reflect( lightData1.xyz, normal );\n                        //lightBRDF.y = pow( max( 0.0f, dot( viewDir, refDir ) ), 32.0f);\n\n                        // 计算SpotLight的衰减\n                        float spotFallOff = 1.0;\n                        if( lightColor.w > 1.0f )\n                        {\n                            // 计算SpotLight的范围衰减\n                            spotFallOff = ComputeSpotFalloff( texture(Context.InTileWLightData2, lightDataUV), lightDir.xyz );\n                        }\n\n                        // 如果存在法线纹理,则进一步计算lightDir\n\n                        // 计算反射率\n                        ComputeLighting(normal, viewDir, lightDir.xyz, lightDir.w * spotFallOff, _shininess, lightBRDF);\n\n                        // 最终光照值\n                        //Context.OutColor.rgb += lightColor.rgb * (vec3(lightBRDF.x) * _diffuseColor.rgb + vec3(lightBRDF.y) * _specularColor.rgb);\n                        Context.OutColor.rgb += lightColor.rgb * ( _diffuseColor.rgb * vec3( lightBRDF.x ) + _specularColor.rgb * vec3( lightBRDF.y ));\n                    }\n                }\n                Context.OutColor.a = alpha;\n            }\n        }\n    }\n    Technology{\n        Sub_Pass DeferredShading{\n            Pass GBufferPass{\n            }\n            Pass DeferredShadingPass{\n            }\n        }\n    }\n    Technology MultiPassDeferred{\n        Sub_Pass DeferredShading{\n            Pass GBufferPass{\n            }\n            Pass DeferredShadingPass2{\n            }\n        }\n    }\n    Technology TileDeferred{\n        Sub_Pass TileDeferredShading{\n            Pass GBufferPass{\n            }\n            Pass GlobalPass{\n            }\n            Pass TilePass{\n            }\n        }\n    }\n}\n"),n(r,"S_PRINCIPLED_DEFERRED_LIGHTING_DEF_DATA","// 默认的延迟光照材质定义,实现PBR材质\nDef DeferredLightingDef{\n    Params{\n        // 基础参数\n        vec4 baseColor;\n        sampler2D baseColorMap;\n        sampler2D normalMap;\n\n        // lightMap或AO\n        sampler2D lightMap;\n        bool aoMap;\n        bool lightMapTexCoord;\n\n        // 自发光\n        vec4 emissive;\n        float emissivePower;\n        float emissiveIntensity;\n\n        // metallic管线\n        float metallic;\n        float roughness;\n        sampler2D metallicRoughnessMap;\n        sampler2D metallicMap;\n        sampler2D roughnessMap;\n\n        // specular管线\n        bool useSpecGloss;\n        sampler2D specularGlossinessMap;\n        sampler2D specularMap;\n        sampler2D glossinessMap;\n        vec4 specular;\n        float glossiness;\n\n        // alphaDiscard\n        float alphaDiscard;\n    }\n    SubTechnology GBufferPass{\n        Vars{\n            vec3 wNormal;\n            vec4 wTangent;\n            vec3 wPosition;\n            vec2 wUv0;\n            vec2 wUv1;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n\n\n                wPosition = (Context.ModelMatrix * vec4(Context.InPosition, 1.0f)).xyz;\n                mat3 nMat = mat3(transpose(inverse(Context.ModelMatrix)));\n                vec3 norm = normalize(nMat * Context.InNormal);\n                //vec3 t = normalize(nMat * Context.InTangent);\n                wTangent = vec4(normalize(nMat * Context.InTangent.xyz), Context.InTangent.w);\n                //t = normalize(t - dot(t, norm) * norm);\n                //vec3 b = cross(norm, t);\n                //tbnMat = mat3(t, b, norm);\n                wNormal = norm;\n                wUv0 = Context.InUv0;\n                #ifdef Params.lightMapTexCoord\n                    wUv1 = Context.InUv1;\n                #endif\n\n\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n        Fs_Shader{\n            #define GAMMA 2.2f\n            void main(){\n\n                #ifdef Params.baseColor\n                    #ifdef Params.baseColorMap\n                        vec4 albedo = texture(Params.baseColorMap, wUv0) * Params.baseColor;\n                    #else\n                        vec4 albedo = Params.baseColor;\n                    #endif\n                #else\n                    #ifdef Params.baseColorMap\n                        vec4 albedo = texture(Params.baseColorMap, wUv0);\n                    #else\n                        vec4 albedo = vec4(1.0f);\n                    #endif\n                #endif\n\n                #ifdef Params.alphaDiscard\n                    if(albedo.a < Params.alphaDiscard){\n                        discard;\n                    }\n                #endif\n\n                vec3 normal = wNormal;\n                #ifdef Params.normalMap\n                    // 这里做了一种简化,理论上应该在fs阶段计算tbn,但是从插值的角度来看,可以简化为tbn插值,减少在fs阶段计算tbn开销(虽然这么做不精确,但是折中下可以接受)\n                    vec3 normalHeight = texture(Params.normalMap, wUv0).xyz;\n                    vec3 tangent = normalize(wTangent.xyz);\n                    mat3 tbnMat = mat3(tangent, wTangent.w * cross(normal, tangent), normal);\n                    normal = normalize(tbnMat * ( normalHeight * 2.0f - 1.0f ));\n                #endif\n\n                #ifdef Params.metallicRoughnessMap\n                    vec2 rm = texture(Params.metallicRoughnessMap, wUv0).gb;\n                    #ifdef Params.roughness\n                        float _roughness = rm.x * max(Params.roughness, 1e-4);\n                    #else\n                        float _roughness = rm.x;\n                    #endif\n                    #ifdef Params.metallic\n                        float _metallic = rm.y * max(Params.metallic, 0.0f);\n                    #else\n                        float _metallic = rm.y;\n                    #endif\n                #else\n                    #ifdef Params.roughnessMap\n                        #ifdef Params.roughness\n                            float _roughness = texture(Params.roughnessMap, wUv0).r * max(Params.roughness, 1e-4);\n                        #else\n                            float _roughness = texture(Params.roughnessMap, wUv0).r;\n                        #endif\n                    #else\n                        #ifdef Params.roughness\n                            float _roughness = max(Params.roughness, 1e-4);\n                        #else\n                            float _roughness = 1.0f;\n                        #endif\n                    #endif\n                    #ifdef Params.metallicMap\n                        #ifdef Params.metallic\n                            float _metallic = texture(Params.metallicMap, wUv0).r * max(Params.metallic, 0.0f);\n                        #else\n                            float _metallic = texture(Params.metallicMap, wUv0).r;\n                        #endif\n                    #else\n                        #ifdef Params.metallic\n                            float _metallic = max(Params.metallic, 0.0f);\n                        #else\n                            float _metallic = 1.0f;\n                        #endif\n                    #endif\n                #endif\n\n                #ifdef Params.useSpecGloss\n                    #ifdef Params.specularGlossinessMap\n                        vec4 _specularColor = texture(Params.specularGlossinessMap, wUv0);\n                        #ifdef Params.glossiness\n                            float _glossiness = _specularColor.a * Params.glossiness;\n                        #else\n                            float _glossiness = _specularColor.a;\n                        #endif\n                        #ifdef Params.specular\n                            _specularColor *= Params.specular;\n                        #endif\n                    #else\n                        #ifdef Params.specularMap\n                            vec4 _specularColor = texture(Params.specularMap, wUv0);\n                        #else\n                            vec4 _specularColor = vec4(1.0f);\n                        #endif\n                        #ifdef Params.specular\n                            _specularColor *= Params.specular;\n                        #endif\n                        #ifdef Params.glossinessMap\n                            #ifdef Params.glossiness\n                                float _glossiness = texture(Params.glossinessMap, wUv0).r * Params.glossiness;\n                            #else\n                                float _glossiness = texture(Params.glossinessMap, wUv0).r;\n                            #endif\n                        #else\n                            #ifdef Params.glossiness\n                                float _glossiness = Params.glossiness;\n                            #else\n                                float _glossiness = 1.0f;\n                            #endif\n                        #endif\n                    #endif\n                    vec4 _diffuseColor = albedo;\n                    _roughness = 1.0f - _glossiness;\n                    vec3 fZero = _specularColor.rgb;\n                #else\n                    float nonMetalSpec = 0.04f;\n                    vec4 _specularColor = (nonMetalSpec - nonMetalSpec * _metallic) + albedo * _metallic;\n                    vec4 _diffuseColor = albedo - albedo * _metallic;\n                    vec3 fZero = vec3( 0.5f );\n                #endif\n\n                #ifdef Params.lightMap\n                    vec3 _lightMapColor;\n                    #ifdef Params.lightMapTexCoord\n                        _lightMapColor = texture(Params.lightMap, wUv1).rgb;\n                    #else\n                        _lightMapColor = texture(Params.lightMap, wUv0).rgb;\n                    #endif\n                    #ifdef Params.aoMap\n                        _lightMapColor.gb = _lightMapColor.rr;\n                        vec3 ao = _lightMapColor;\n                    #else\n                        _specularColor.rgb *= _lightMapColor;\n                        _diffuseColor.rgb  *= _lightMapColor;\n                        vec3 ao = vec3(1.0f);\n                    #endif\n                #else\n                    vec3 ao = vec3(1.0f);\n                #endif\n\n\n\n\n                Context.OutGBuffer0.xyz = floor(_diffuseColor.rgb * 100.0f) + ao * 0.1f;\n                Context.OutGBuffer0.w   = albedo.a;\n                Context.OutGBuffer1.xyz = floor(normal.xyz * 1000.0f) + wNormal * 0.001f;\n                Context.OutGBuffer2.rgb = floor(_specularColor.rgb * 100.0f) + fZero * 0.1f;\n                Context.OutGBuffer2.a = floor(_roughness * 100.0f) + _metallic * 0.1f;\n            }\n        }\n    }\n    SubTechnology DeferredShadingPass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram SinglePassIBLLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                #ifndef Context.Srgb\n                    lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                    lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n                #else\n                    // 对于DirLight,lightDir.w = 1.0f\n                    lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n                #endif\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            #define PI 3.14159265358979323846264\n            // 镜面反射菲涅尔计算\n            vec3 F_Shlick(float vh,\tvec3 F0){\n                float fresnelFact = pow(2.0f, (-5.55473f * vh - 6.98316f) * vh);\n                return mix(F0, vec3(1.0f, 1.0f, 1.0f), fresnelFact);\n            }\n            vec3 F_Schlick2(float cosTheta, vec3 F0)\n            {\n                return F0 + (1.0f - F0) * pow(1.0f - cosTheta, 5.0f);\n            }\n            // 计算直接光照\n            void ComputeDirectLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 diffuseColor, in vec3 fZero, in float roughness, in float ndotv, out vec3 directLighting){\n                vec3 h = normalize(lightDir + viewDir);\n                float ndotl = max( dot( normal, lightDir ), 0.0f );\n                float ndoth = max( dot( normal, h), 0.0f );\n                float hdotv = max( dot( h, viewDir ), 0.0f );\n\n                // 这里,不使用c/Π计算diffuse fr(x, wi, wo)\n                // 而假设恒定\n                vec3 diffuse = vec3( ndotl ) * lightColor * diffuseColor;\n\n                // cook-torrence,BRDF : http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n                float alpha = roughness * roughness;\n\n                // D, GGX 法线分布函数\n                float alpha2 = alpha * alpha;\n                float sum = (( ndoth * ndoth ) * ( alpha2 - 1.0f ) + 1.0f);\n                float denom = PI * sum * sum;\n                float D = alpha2 / denom;\n\n                // F, 菲涅尔项\n                vec3 F = F_Shlick( hdotv, fZero );\n\n                // G, 几何遮挡项\n                float k = alpha * 0.5f;\n                float G_V = ndotv + sqrt( ( ndotv - ndotv * k ) * ndotv + k );\n                float G_L = ndotl + sqrt( ( ndotl - ndotl * k ) * ndotl + k );\n                float G = 1.0f / max( G_V * G_L ,0.01f );\n\n                // specularBRDF\n                float t = D * G * ndotl;\n                vec3 specular =  vec3( t ) * F * lightColor;\n\n                directLighting = diffuse + specular;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            // 球谐函数\n            vec3 sphericalHarmonics( const in vec3 normal, const vec3 sph[9] ){\n                float x = normal.x;\n                float y = normal.y;\n                float z = normal.z;\n\n                vec3 result = (\n                    sph[0] +\n\n                    sph[1] * y +\n                    sph[2] * z +\n                    sph[3] * x +\n\n                    sph[4] * y * x +\n                    sph[5] * y * z +\n                    sph[6] * (3.0f * z * z - 1.0f) +\n                    sph[7] * (z * x) +\n                    sph[8] * (x*x - y*y)\n                );\n\n                return max(result, vec3(0.0f));\n            }\n            // 镜面反射趋势朝向\n            vec3 getSpecularDominantDir(const in vec3 N, const in vec3 R, const in float realRoughness){\n\n                float smoothness = 1.0f - realRoughness;\n                float lerpFactor = smoothness * (sqrt(smoothness) + realRoughness);\n                // 当我们在立方体贴图中获取时，结果未规范化\n                vec3 dominant = mix(N, R, lerpFactor);\n\n                return dominant;\n            }\n            // 拟合方程\n            // 关于镜面部分，有很多优化地方，除了常见的优化，还有很多可以替代方案，几乎可以在保证画质的前提下，在移动端35帧率提升到60帧率，详细可参考我的笔记:https://www.cnblogs.com/JhonKkk/p/14313882.html\n            vec3 integrateBRDFApprox( const in vec3 specular, in float roughness, in float NoV ){\n                const vec4 c0 = vec4( -1.0f, -0.0275f, -0.572f, 0.022f );\n                const vec4 c1 = vec4( 1.0f, 0.0425f, 1.04f, -0.04f );\n                vec4 r = roughness * c0 + c1;\n                float a004 = min( r.x * r.x, exp2( -9.28f * NoV ) ) * r.x + r.y;\n                vec2 ab = vec2( -1.04f, 1.04f ) * a004 + r.zw;\n                return specular * ab.x + ab.y;\n            }\n            // 近似镜面IBL多项式\n            vec3 approximateSpecularIBLPolynomial(in samplerCube envMap, in vec3 specularColor , in float roughness, in float ndotv, in vec3 refVec, in float mipMaps){\n                float lod = sqrt( roughness ) * (mipMaps - 1.0f);\n                vec3 prefilteredColor = textureLod(envMap, refVec.xyz, lod).rgb;\n                return prefilteredColor * integrateBRDFApprox(specularColor, roughness, ndotv);\n            }\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 buff0 = texture(Context.InGBuffer0, uv0);\n                vec4 buff2 = texture(Context.InGBuffer2, uv0);\n                vec3 _diffuseColor = floor(buff0.rgb) * 0.01f * Context.AmbientLightColor;\n                vec3 _specularColor = floor(buff2.rgb) * 0.01f;\n                vec3 ao = min(fract(buff0.rgb) * 10.0f, vec3(1.0f));\n                vec3 fZero = min(fract(buff2.rgb) * 10.0f, vec3(0.5f));\n                float _roughness = floor(buff2.w) * 0.01f;\n                vec3 n = texture(Context.InGBuffer1, uv0).xyz;\n                vec3 normal = normalize(floor(n) * 0.001f);\n                vec3 wNormal = normalize(fract(n) * 1000.0f);\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec3 directLighting = vec3(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                float ndotv = max( dot( normal, viewDir ), 0.0f );\n                for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                    lightColor = Context.WLightData[i];\n                    lightData1 = Context.WLightData[i + 1];\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n\n                    // 计算PointLight的衰减\n                    float spotFallOff = 1.0 * lightDir.w;\n                    // 计算SpotLight的衰减\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                    }\n\n                    ComputeDirectLighting(normal, viewDir, lightDir.xyz, lightColor.rgb, _diffuseColor.rgb, fZero, _roughness, ndotv, directLighting);\n                    Context.OutColor.rgb += directLighting * spotFallOff;\n                }\n\n                if(Context.BlendGiProbes){\n                    #ifdef Context.GIProbes\n                        // 作为webGL项目,暂时不实现探针混合(但作为可拓展,仍然加结尾s命名)\n\n                        // 计算反射视线\n                        vec3 _rv = reflect( -viewDir.xyz, normal.xyz );\n                        float _r = fract( Context.WGIProbe.w );\n                        float _mipMaps = Context.WGIProbe.w - _r;\n                        _rv = _r * ( wPosition.xyz - Context.WGIProbe.xyz ) + _rv;\n\n                        // 使用球谐计算diffuse( 避免Irr采样 )\n                        vec3 giLighting = sphericalHarmonics(normal.xyz, Context.ShCoeffs) * _diffuseColor.rgb;\n\n                        float horiz = dot(_rv, wNormal);\n                        float horizFadePower = 1.0f - _roughness;\n                        horiz = clamp( 1.0f + horizFadePower * horiz, 0.0f, 1.0f );\n                        horiz *= horiz;\n\n                        vec3 _dominantR = getSpecularDominantDir( normal, _rv.xyz, _roughness * _roughness );\n                        giLighting += approximateSpecularIBLPolynomial(Context.InPrefEnvMap, _specularColor.rgb, _roughness, ndotv, _dominantR, _mipMaps) * vec3( horiz );\n                        giLighting *= ao;\n\n                        Context.OutColor.rgb += giLighting * step( 0.0f, Context.WGIProbe.w );\n                        // Context.OutColor.rgb = textureLod(Context.InPrefEnvMap, normal.xyz, 0.0f).rgb;\n                    #endif\n                }\n\n                Context.OutColor.a = buff0.a;\n            }\n        }\n    }\n    SubTechnology DeferredShadingPass2{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram MultiPassIBLLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                #ifndef Context.Srgb\n                    lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                    lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n                #else\n                    // 对于DirLight,lightDir.w = 1.0f\n                    lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n                #endif\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            #define PI 3.14159265358979323846264\n            // 镜面反射菲涅尔计算\n            vec3 F_Shlick(float vh,\tvec3 F0){\n                float fresnelFact = pow(2.0f, (-5.55473f * vh - 6.98316f) * vh);\n                return mix(F0, vec3(1.0f, 1.0f, 1.0f), fresnelFact);\n            }\n            vec3 F_Schlick2(float cosTheta, vec3 F0)\n            {\n                return F0 + (1.0f - F0) * pow(1.0f - cosTheta, 5.0f);\n            }\n            // 计算直接光照\n            void ComputeDirectLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 diffuseColor, in vec3 fZero, in float roughness, in float ndotv, out vec3 directLighting){\n                vec3 h = normalize(lightDir + viewDir);\n                float ndotl = max( dot( normal, lightDir ), 0.0f );\n                float ndoth = max( dot( normal, h), 0.0f );\n                float hdotv = max( dot( h, viewDir ), 0.0f );\n\n                // 这里,不使用c/Π计算diffuse fr(x, wi, wo)\n                // 而假设恒定\n                vec3 diffuse = vec3( ndotl ) * lightColor * diffuseColor;\n\n                // cook-torrence,BRDF : http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n                float alpha = roughness * roughness;\n\n                // D, GGX 法线分布函数\n                float alpha2 = alpha * alpha;\n                float sum = (( ndoth * ndoth ) * ( alpha2 - 1.0f ) + 1.0f);\n                float denom = PI * sum * sum;\n                float D = alpha2 / denom;\n\n                // F, 菲涅尔项\n                vec3 F = F_Shlick( hdotv, fZero );\n\n                // G, 几何遮挡项\n                float k = alpha * 0.5f;\n                float G_V = ndotv + sqrt( ( ndotv - ndotv * k ) * ndotv + k );\n                float G_L = ndotl + sqrt( ( ndotl - ndotl * k ) * ndotl + k );\n                float G = 1.0f / max( G_V * G_L ,0.01f );\n\n                // specularBRDF\n                float t = D * G * ndotl;\n                vec3 specular =  vec3( t ) * F * lightColor;\n\n                directLighting = diffuse + specular;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            // 球谐函数\n            vec3 sphericalHarmonics( const in vec3 normal, const vec3 sph[9] ){\n                float x = normal.x;\n                float y = normal.y;\n                float z = normal.z;\n\n                vec3 result = (\n                    sph[0] +\n\n                    sph[1] * y +\n                    sph[2] * z +\n                    sph[3] * x +\n\n                    sph[4] * y * x +\n                    sph[5] * y * z +\n                    sph[6] * (3.0f * z * z - 1.0f) +\n                    sph[7] * (z * x) +\n                    sph[8] * (x*x - y*y)\n                );\n\n                return max(result, vec3(0.0f));\n            }\n            // 镜面反射趋势朝向\n            vec3 getSpecularDominantDir(const in vec3 N, const in vec3 R, const in float realRoughness){\n\n                float smoothness = 1.0f - realRoughness;\n                float lerpFactor = smoothness * (sqrt(smoothness) + realRoughness);\n                // 当我们在立方体贴图中获取时，结果未规范化\n                vec3 dominant = mix(N, R, lerpFactor);\n\n                return dominant;\n            }\n            // 拟合方程\n            // 关于镜面部分，有很多优化地方，除了常见的优化，还有很多可以替代方案，几乎可以在保证画质的前提下，在移动端35帧率提升到60帧率，详细可参考我的笔记:https://www.cnblogs.com/JhonKkk/p/14313882.html\n            vec3 integrateBRDFApprox( const in vec3 specular, in float roughness, in float NoV ){\n                const vec4 c0 = vec4( -1.0f, -0.0275f, -0.572f, 0.022f );\n                const vec4 c1 = vec4( 1.0f, 0.0425f, 1.04f, -0.04f );\n                vec4 r = roughness * c0 + c1;\n                float a004 = min( r.x * r.x, exp2( -9.28f * NoV ) ) * r.x + r.y;\n                vec2 ab = vec2( -1.04f, 1.04f ) * a004 + r.zw;\n                return specular * ab.x + ab.y;\n            }\n            // 近似镜面IBL多项式\n            vec3 approximateSpecularIBLPolynomial(in samplerCube envMap, in vec3 specularColor , in float roughness, in float ndotv, in vec3 refVec, in float mipMaps){\n                float lod = sqrt( roughness ) * (mipMaps - 1.0f);\n                vec3 prefilteredColor = textureLod(envMap, refVec.xyz, lod).rgb;\n                return prefilteredColor * integrateBRDFApprox(specularColor, roughness, ndotv);\n            }\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 buff0 = texture(Context.InGBuffer0, uv0);\n                vec4 buff2 = texture(Context.InGBuffer2, uv0);\n                vec3 _diffuseColor = floor(buff0.rgb) * 0.01f * Context.AmbientLightColor;\n                vec3 _specularColor = floor(buff2.rgb) * 0.01f;\n                vec3 ao = min(fract(buff0.rgb) * 10.0f, vec3(1.0f));\n                vec3 fZero = min(fract(buff2.rgb) * 10.0f, vec3(1.0f));\n                float _roughness = floor(buff2.w) * 0.01f;\n                vec3 n = texture(Context.InGBuffer1, uv0).xyz;\n                vec3 normal = normalize(floor(n) * 0.001f);\n                vec3 wNormal = normalize(fract(n) * 1000.0f);\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec3 directLighting = vec3(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                float ndotv = max( dot( normal, viewDir ), 0.0f );\n                if(Context.MultiId == 0){\n                    for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                        lightColor = Context.WLightData[i];\n                        lightData1 = Context.WLightData[i + 1];\n                        ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n\n                        // 计算PointLight的衰减\n                        float spotFallOff = 1.0 * lightDir.w;\n                        // 计算SpotLight的衰减\n                        if( lightColor.w > 1.0f )\n                        {\n                            // 计算SpotLight的范围衰减\n                            spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                        }\n\n                        ComputeDirectLighting(normal, viewDir, lightDir.xyz, lightColor.rgb, _diffuseColor.rgb, fZero, _roughness, ndotv, directLighting);\n                        Context.OutColor.rgb += directLighting * spotFallOff;\n                    }\n                }\n                else{\n                    lightColor = Context.WLight_Data_0;\n                    lightData1 = Context.WLight_Data_1;\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n\n                    // 计算PointLight的衰减\n                    float spotFallOff = 1.0 * lightDir.w;\n                    // 计算SpotLight的衰减\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLight_Data_2, lightDir.xyz );\n                    }\n\n                    ComputeDirectLighting(normal, viewDir, lightDir.xyz, lightColor.rgb, _diffuseColor.rgb, fZero, _roughness, ndotv, directLighting);\n                    Context.OutColor.rgb += directLighting * spotFallOff;\n                }\n\n                if(Context.BlendGiProbes){\n                    #ifdef Context.GIProbes\n                        // 作为webGL项目,暂时不实现探针混合(但作为可拓展,仍然加结尾s命名)\n\n                        // 计算反射视线\n                        vec3 _rv = reflect( -viewDir.xyz, normal.xyz );\n                        float _r = fract( Context.WGIProbe.w );\n                        float _mipMaps = Context.WGIProbe.w - _r;\n                        _rv = _r * ( wPosition.xyz - Context.WGIProbe.xyz ) + _rv;\n\n                        // 使用球谐计算diffuse( 避免Irr采样 )\n                        vec3 giLighting = sphericalHarmonics(normal.xyz, Context.ShCoeffs) * _diffuseColor.rgb;\n\n                        float horiz = dot(_rv, wNormal);\n                        float horizFadePower = 1.0f - _roughness;\n                        horiz = clamp( 1.0f + horizFadePower * horiz, 0.0f, 1.0f );\n                        horiz *= horiz;\n\n                        vec3 _dominantR = getSpecularDominantDir( normal, _rv.xyz, _roughness * _roughness );\n                        giLighting += approximateSpecularIBLPolynomial(Context.InPrefEnvMap, _specularColor.rgb, _roughness, ndotv, _dominantR, _mipMaps) * vec3( horiz );\n                        giLighting *= ao;\n\n                        Context.OutColor.rgb += giLighting * step( 0.0f, Context.WGIProbe.w );\n                        // Context.OutColor.rgb = textureLod(Context.InPrefEnvMap, normal.xyz, 0.0f).rgb;\n                    #endif\n                }\n\n                Context.OutColor.a = buff0.a;\n            }\n        }\n    }\n    SubTechnology GlobalPass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram TilePassIBLLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                #ifndef Context.Srgb\n                    lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                    lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n                #else\n                    // 对于DirLight,lightDir.w = 1.0f\n                    lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n                #endif\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            #define PI 3.14159265358979323846264\n            // 镜面反射菲涅尔计算\n            vec3 F_Shlick(float vh,\tvec3 F0){\n                float fresnelFact = pow(2.0f, (-5.55473f * vh - 6.98316f) * vh);\n                return mix(F0, vec3(1.0f, 1.0f, 1.0f), fresnelFact);\n            }\n            vec3 F_Schlick2(float cosTheta, vec3 F0)\n            {\n                return F0 + (1.0f - F0) * pow(1.0f - cosTheta, 5.0f);\n            }\n            // 计算直接光照\n            void ComputeDirectLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 diffuseColor, in vec3 fZero, in float roughness, in float ndotv, out vec3 directLighting){\n                vec3 h = normalize(lightDir + viewDir);\n                float ndotl = max( dot( normal, lightDir ), 0.0f );\n                float ndoth = max( dot( normal, h), 0.0f );\n                float hdotv = max( dot( h, viewDir ), 0.0f );\n\n                // 这里,不使用c/Π计算diffuse fr(x, wi, wo)\n                // 而假设恒定\n                vec3 diffuse = vec3( ndotl ) * lightColor * diffuseColor;\n\n                // cook-torrence,BRDF : http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n                float alpha = roughness * roughness;\n\n                // D, GGX 法线分布函数\n                float alpha2 = alpha * alpha;\n                float sum = (( ndoth * ndoth ) * ( alpha2 - 1.0f ) + 1.0f);\n                float denom = PI * sum * sum;\n                float D = alpha2 / denom;\n\n                // F, 菲涅尔项\n                vec3 F = F_Shlick( hdotv, fZero );\n\n                // G, 几何遮挡项\n                float k = alpha * 0.5f;\n                float G_V = ndotv + sqrt( ( ndotv - ndotv * k ) * ndotv + k );\n                float G_L = ndotl + sqrt( ( ndotl - ndotl * k ) * ndotl + k );\n                float G = 1.0f / max( G_V * G_L ,0.01f );\n\n                // specularBRDF\n                float t = D * G * ndotl;\n                vec3 specular =  vec3( t ) * F * lightColor;\n\n                directLighting = diffuse + specular;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            // 球谐函数\n            vec3 sphericalHarmonics( const in vec3 normal, const vec3 sph[9] ){\n                float x = normal.x;\n                float y = normal.y;\n                float z = normal.z;\n\n                vec3 result = (\n                    sph[0] +\n\n                    sph[1] * y +\n                    sph[2] * z +\n                    sph[3] * x +\n\n                    sph[4] * y * x +\n                    sph[5] * y * z +\n                    sph[6] * (3.0f * z * z - 1.0f) +\n                    sph[7] * (z * x) +\n                    sph[8] * (x*x - y*y)\n                );\n\n                return max(result, vec3(0.0f));\n            }\n            // 镜面反射趋势朝向\n            vec3 getSpecularDominantDir(const in vec3 N, const in vec3 R, const in float realRoughness){\n\n                float smoothness = 1.0f - realRoughness;\n                float lerpFactor = smoothness * (sqrt(smoothness) + realRoughness);\n                // 当我们在立方体贴图中获取时，结果未规范化\n                vec3 dominant = mix(N, R, lerpFactor);\n\n                return dominant;\n            }\n            // 拟合方程\n            // 关于镜面部分，有很多优化地方，除了常见的优化，还有很多可以替代方案，几乎可以在保证画质的前提下，在移动端35帧率提升到60帧率，详细可参考我的笔记:https://www.cnblogs.com/JhonKkk/p/14313882.html\n            vec3 integrateBRDFApprox( const in vec3 specular, in float roughness, in float NoV ){\n                const vec4 c0 = vec4( -1.0f, -0.0275f, -0.572f, 0.022f );\n                const vec4 c1 = vec4( 1.0f, 0.0425f, 1.04f, -0.04f );\n                vec4 r = roughness * c0 + c1;\n                float a004 = min( r.x * r.x, exp2( -9.28f * NoV ) ) * r.x + r.y;\n                vec2 ab = vec2( -1.04f, 1.04f ) * a004 + r.zw;\n                return specular * ab.x + ab.y;\n            }\n            // 近似镜面IBL多项式\n            vec3 approximateSpecularIBLPolynomial(in samplerCube envMap, in vec3 specularColor , in float roughness, in float ndotv, in vec3 refVec, in float mipMaps){\n                float lod = sqrt( roughness ) * (mipMaps - 1.0f);\n                vec3 prefilteredColor = textureLod(envMap, refVec.xyz, lod).rgb;\n                return prefilteredColor * integrateBRDFApprox(specularColor, roughness, ndotv);\n            }\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 buff0 = texture(Context.InGBuffer0, uv0);\n                vec4 buff2 = texture(Context.InGBuffer2, uv0);\n                vec3 _diffuseColor = floor(buff0.rgb) * 0.01f * Context.AmbientLightColor;\n                vec3 _specularColor = floor(buff2.rgb) * 0.01f;\n                vec3 ao = min(fract(buff0.rgb) * 10.0f, vec3(1.0f));\n                vec3 fZero = min(fract(buff2.rgb) * 10.0f, vec3(0.5f));\n                float _roughness = floor(buff2.w) * 0.01f;\n                vec3 n = texture(Context.InGBuffer1, uv0).xyz;\n                vec3 normal = normalize(floor(n) * 0.001f);\n                vec3 wNormal = normalize(fract(n) * 1000.0f);\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec3 directLighting = vec3(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                float ndotv = max( dot( normal, viewDir ), 0.0f );\n                for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                    lightColor = Context.WLightData[i];\n                    lightData1 = Context.WLightData[i + 1];\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n\n                    // 计算PointLight的衰减\n                    float spotFallOff = 1.0 * lightDir.w;\n                    // 计算SpotLight的衰减\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                    }\n\n                    ComputeDirectLighting(normal, viewDir, lightDir.xyz, lightColor.rgb, _diffuseColor.rgb, fZero, _roughness, ndotv, directLighting);\n                    Context.OutColor.rgb += directLighting * spotFallOff;\n                }\n\n                if(Context.BlendGiProbes){\n                    #ifdef Context.GIProbes\n                        // 作为webGL项目,暂时不实现探针混合(但作为可拓展,仍然加结尾s命名)\n\n                        // 计算反射视线\n                        vec3 _rv = reflect( -viewDir.xyz, normal.xyz );\n                        float _r = fract( Context.WGIProbe.w );\n                        float _mipMaps = Context.WGIProbe.w - _r;\n                        _rv = _r * ( wPosition.xyz - Context.WGIProbe.xyz ) + _rv;\n\n                        // 使用球谐计算diffuse( 避免Irr采样 )\n                        vec3 giLighting = sphericalHarmonics(normal.xyz, Context.ShCoeffs) * _diffuseColor.rgb;\n\n                        float horiz = dot(_rv, wNormal);\n                        float horizFadePower = 1.0f - _roughness;\n                        horiz = clamp( 1.0f + horizFadePower * horiz, 0.0f, 1.0f );\n                        horiz *= horiz;\n\n                        vec3 _dominantR = getSpecularDominantDir( normal, _rv.xyz, _roughness * _roughness );\n                        giLighting += approximateSpecularIBLPolynomial(Context.InPrefEnvMap, _specularColor.rgb, _roughness, ndotv, _dominantR, _mipMaps) * vec3( horiz );\n                        giLighting *= ao;\n\n                        Context.OutColor.rgb += giLighting * step( 0.0f, Context.WGIProbe.w );\n                        // Context.OutColor.rgb = textureLod(Context.InPrefEnvMap, normal.xyz, 0.0f).rgb;\n                    #endif\n                }\n                Context.OutColor.a = buff0.a;\n            }\n        }\n    }\n    SubTechnology TilePass{\n        Vars{\n            vec4 wordPosition;\n            vec2 uv0;\n            mat4 pvInverse;\n        }\n        Advanced{\n            RenderProgram TilePassIBLLighting;\n        }\n        Vs_Shader{\n            void main(){\n                Context.OutPosition = vec4(Context.InPosition, 1.0f);\n                wordPosition = Context.OutPosition;\n                uv0 = Context.InUv0;\n                pvInverse = inverse(Context.ProjectViewMatrix);\n            }\n        }\n        Fs_Shader{\n            vec3 getPosition(in float depth, in vec2 newTexCoord){\n\n                vec4 pos;\n                pos.xy = (newTexCoord * vec2(2.0)) - vec2(1.0);\n                pos.z  = depth * 2.0 - 1.0;\n                pos.w  = 1.0;\n                pos    = pvInverse * pos;\n                pos.xyz /= pos.w;\n                return pos.xyz;\n            }\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                #ifndef Context.Srgb\n                    lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                    lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n                #else\n                    // 对于DirLight,lightDir.w = 1.0f\n                    lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n                #endif\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            #define PI 3.14159265358979323846264\n            // 镜面反射菲涅尔计算\n            vec3 F_Shlick(float vh,\tvec3 F0){\n                float fresnelFact = pow(2.0f, (-5.55473f * vh - 6.98316f) * vh);\n                return mix(F0, vec3(1.0f, 1.0f, 1.0f), fresnelFact);\n            }\n            vec3 F_Schlick2(float cosTheta, vec3 F0)\n            {\n                return F0 + (1.0f - F0) * pow(1.0f - cosTheta, 5.0f);\n            }\n            // 计算直接光照\n            void ComputeDirectLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 diffuseColor, in vec3 fZero, in float roughness, in float ndotv, out vec3 directLighting){\n                vec3 h = normalize(lightDir + viewDir);\n                float ndotl = max( dot( normal, lightDir ), 0.0f );\n                float ndoth = max( dot( normal, h), 0.0f );\n                float hdotv = max( dot( h, viewDir ), 0.0f );\n\n                // 这里,不使用c/Π计算diffuse fr(x, wi, wo)\n                // 而假设恒定\n                vec3 diffuse = vec3( ndotl ) * lightColor * diffuseColor;\n\n                // cook-torrence,BRDF : http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n                float alpha = roughness * roughness;\n\n                // D, GGX 法线分布函数\n                float alpha2 = alpha * alpha;\n                float sum = (( ndoth * ndoth ) * ( alpha2 - 1.0f ) + 1.0f);\n                float denom = PI * sum * sum;\n                float D = alpha2 / denom;\n\n                // F, 菲涅尔项\n                vec3 F = F_Shlick( hdotv, fZero );\n\n                // G, 几何遮挡项\n                float k = alpha * 0.5f;\n                float G_V = ndotv + sqrt( ( ndotv - ndotv * k ) * ndotv + k );\n                float G_L = ndotl + sqrt( ( ndotl - ndotl * k ) * ndotl + k );\n                float G = 1.0f / max( G_V * G_L ,0.01f );\n\n                // specularBRDF\n                float t = D * G * ndotl;\n                vec3 specular =  vec3( t ) * F * lightColor;\n\n                directLighting = diffuse + specular;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            // 球谐函数\n            vec3 sphericalHarmonics( const in vec3 normal, const vec3 sph[9] ){\n                float x = normal.x;\n                float y = normal.y;\n                float z = normal.z;\n\n                vec3 result = (\n                    sph[0] +\n\n                    sph[1] * y +\n                    sph[2] * z +\n                    sph[3] * x +\n\n                    sph[4] * y * x +\n                    sph[5] * y * z +\n                    sph[6] * (3.0f * z * z - 1.0f) +\n                    sph[7] * (z * x) +\n                    sph[8] * (x*x - y*y)\n                );\n\n                return max(result, vec3(0.0f));\n            }\n            // 镜面反射趋势朝向\n            vec3 getSpecularDominantDir(const in vec3 N, const in vec3 R, const in float realRoughness){\n\n                float smoothness = 1.0f - realRoughness;\n                float lerpFactor = smoothness * (sqrt(smoothness) + realRoughness);\n                // 当我们在立方体贴图中获取时，结果未规范化\n                vec3 dominant = mix(N, R, lerpFactor);\n\n                return dominant;\n            }\n            // 拟合方程\n            // 关于镜面部分，有很多优化地方，除了常见的优化，还有很多可以替代方案，几乎可以在保证画质的前提下，在移动端35帧率提升到60帧率，详细可参考我的笔记:https://www.cnblogs.com/JhonKkk/p/14313882.html\n            vec3 integrateBRDFApprox( const in vec3 specular, in float roughness, in float NoV ){\n                const vec4 c0 = vec4( -1.0f, -0.0275f, -0.572f, 0.022f );\n                const vec4 c1 = vec4( 1.0f, 0.0425f, 1.04f, -0.04f );\n                vec4 r = roughness * c0 + c1;\n                float a004 = min( r.x * r.x, exp2( -9.28f * NoV ) ) * r.x + r.y;\n                vec2 ab = vec2( -1.04f, 1.04f ) * a004 + r.zw;\n                return specular * ab.x + ab.y;\n            }\n            // 近似镜面IBL多项式\n            vec3 approximateSpecularIBLPolynomial(in samplerCube envMap, in vec3 specularColor , in float roughness, in float ndotv, in vec3 refVec, in float mipMaps){\n                float lod = sqrt( roughness ) * (mipMaps - 1.0f);\n                vec3 prefilteredColor = textureLod(envMap, refVec.xyz, lod).rgb;\n                return prefilteredColor * integrateBRDFApprox(specularColor, roughness, ndotv);\n            }\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                float depth = texture(Context.InGDepth, uv0).r;\n                if(depth >= 1.0){\n                    Context.OutColor = vec4(0.0f, 0.0f, 0.0f, 1.0f);\n                    return;\n                }\n                vec3 wPosition = getPosition(depth, uv0);\n                vec4 buff0 = texture(Context.InGBuffer0, uv0);\n                vec4 buff2 = texture(Context.InGBuffer2, uv0);\n                vec3 _diffuseColor = floor(buff0.rgb) * 0.01f * Context.AmbientLightColor;\n                vec3 _specularColor = floor(buff2.rgb) * 0.01f;\n                vec3 ao = min(fract(buff0.rgb) * 10.0f, vec3(1.0f));\n                vec3 fZero = min(fract(buff2.rgb) * 10.0f, vec3(0.5f));\n                float _roughness = floor(buff2.w) * 0.01f;\n                vec3 n = texture(Context.InGBuffer1, uv0).xyz;\n                vec3 normal = normalize(floor(n) * 0.001f);\n                vec3 wNormal = normalize(fract(n) * 1000.0f);\n                // 计算光照\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec3 directLighting = vec3(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                Context.OutColor.rgb = vec3(0.0f);\n                // Tile Based Shading\n                // 获取tile信息\n                vec3 tile = texture(Context.InTileLightDecode, uv0).xyz;\n                int uoffset = int(tile.x);\n                int voffset = int(tile.z);\n                int count = int(tile.y);\n                if(count > 0){\n                    int lightId;\n                    float temp;\n                    int offset;\n                    // lightIndex采样范围规范化单位\n                    float uvSize = 1.0f / (Context.TileLightOffsetSize - 1.0f);\n                    vec2 lightUV;\n                    // lightData采样范围规范单位\n                    float lightUVSize = 1.0f / (float(Context.TileLightNum) - 1.0f);\n                    vec2 lightDataUV;\n                    for(int i = 0;i < count;i++){\n                        temp = float(uoffset + i);\n                        offset = 0;\n\n                        if(temp >= Context.TileLightOffsetSize){\n                            temp -= Context.TileLightOffsetSize;\n                            offset++;\n                        }\n                        if(temp == Context.TileLightOffsetSize){\n                            temp = 0.0f;\n                        }\n\n                        // lightIndexUV\n                        lightUV = vec2(temp * uvSize, float(voffset + offset) * uvSize);\n                        lightId = int(texture(Context.InTileLightIndex, lightUV).x);\n\n                        // 光源信息\n                        lightDataUV = vec2(float(lightId) * lightUVSize);\n                        lightColor = texture(Context.InTileWLightData0, lightDataUV);\n                        lightData1 = texture(Context.InTileWLightData1, lightDataUV);\n\n                        float ndotv = max( dot( normal, viewDir ), 0.0f );\n                        ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n\n                        // 计算PointLight的衰减\n                        float spotFallOff = 1.0 * lightDir.w;\n                        // 计算SpotLight的衰减\n                        if( lightColor.w > 1.0f )\n                        {\n                            // 计算SpotLight的范围衰减\n                            spotFallOff = ComputeSpotFalloff( texture(Context.InTileWLightData2, lightDataUV), lightDir.xyz );\n                        }\n\n                        ComputeDirectLighting(normal, viewDir, lightDir.xyz, lightColor.rgb, _diffuseColor.rgb, fZero, _roughness, ndotv, directLighting);\n                        Context.OutColor.rgb += directLighting * spotFallOff;\n                    }\n                }\n                Context.OutColor.a = buff0.a;\n            }\n        }\n    }\n    Technology{\n        Sub_Pass DeferredShading{\n            Pass GBufferPass{\n            }\n            Pass DeferredShadingPass{\n            }\n        }\n    }\n    Technology MultiPassDeferred{\n        Sub_Pass DeferredShading{\n            Pass GBufferPass{\n            }\n            Pass DeferredShadingPass2{\n            }\n        }\n    }\n    Technology TileDeferred{\n        Sub_Pass TileDeferredShading{\n            Pass GBufferPass{\n            }\n            Pass GlobalPass{\n            }\n            Pass TilePass{\n            }\n        }\n    }\n}\n"),n(r,"S_PRINCIPLED_LIGHTING_DEF","// 原理化光照材质定义\nDef PrincipledLightingDef{\n    Params{\n        // 基础参数\n        vec4 baseColor;\n        sampler2D baseColorMap;\n        sampler2D normalMap;\n\n        // lightMap或AO\n        sampler2D lightMap;\n        bool aoMap;\n        bool lightMapTexCoord;\n\n        // 自发光\n        sampler2D emissiveMap;\n        vec4 emissive;\n        float emissivePower;\n        float emissiveIntensity;\n\n        // metallic管线\n        float metallic;\n        float roughness;\n        sampler2D metallicRoughnessMap;\n        sampler2D metallicMap;\n        sampler2D roughnessMap;\n\n        // specular管线\n        bool useSpecGloss;\n        sampler2D specularGlossinessMap;\n        sampler2D specularMap;\n        sampler2D glossinessMap;\n        vec4 specular;\n        float glossiness;\n\n        // alphaDiscard\n        float alphaDiscard;\n    }\n    SubTechnology SPPrincipledLighting{\n        Vars{\n            vec3 wNormal;\n            vec4 wTangent;\n            vec3 wPosition;\n            vec2 wUv0;\n            vec2 wUv1;\n        }\n        Advanced{\n            RenderProgram SinglePassIBLLighting;\n        }\n        Vs_Shader{\n            void main(){\n                #ifdef Context.Skins\n                    mat4 skinMat =\n                            Context.InWeight0.x * Context.Joints[int(Context.InJoint0.x)] +\n                            Context.InWeight0.y * Context.Joints[int(Context.InJoint0.y)] +\n                            Context.InWeight0.z * Context.Joints[int(Context.InJoint0.z)] +\n                            Context.InWeight0.w * Context.Joints[int(Context.InJoint0.w)];\n                    // vec4 pos = Context.ModelMatrix * skinMat * vec4(Context.InPosition, 1.0f);\n                    vec4 pos = skinMat * vec4(Context.InPosition, 1.0f);\n                #else\n                    vec4 pos = Context.ModelMatrix * vec4(Context.InPosition, 1.0f);\n                #endif\n\n\n                wPosition = (Context.ModelMatrix * vec4(Context.InPosition, 1.0f)).xyz;\n                mat3 nMat = mat3(transpose(inverse(Context.ModelMatrix)));\n                vec3 norm = normalize(nMat * Context.InNormal);\n                //vec3 t = normalize(nMat * Context.InTangent);\n                wTangent = vec4(normalize(nMat * Context.InTangent.xyz), Context.InTangent.w);\n                //t = normalize(t - dot(t, norm) * norm);\n                //vec3 b = cross(norm, t);\n                //tbnMat = mat3(t, b, norm);\n                wNormal = norm;\n                wUv0 = Context.InUv0;\n                #ifdef Params.lightMapTexCoord\n                    wUv1 = Context.InUv1;\n                #endif\n\n\n                Context.OutPosition = Context.ProjectViewMatrix * pos;\n            }\n        }\n\n        Fs_Shader{\n            // 计算光照方向\n            // 对于DirLight,PointLight以及SpotLight,lightType依次为0.0,1.0,2.0\n            // 输出光照方向\n            // lightDir.w存储衰减率(对于DirLight,衰减值一直为1,对于Point或Spot,衰减值随着半径而变小,衰减值越小,表示衰减度越大)\n            void ComputeLightDir(in vec3 worldPos, in float lightType, in vec4 position, out vec4 lightDir, out vec3 lightVec){\n                // 只有lightType = 0.0时,posLight为0.0,否则posLight为1.0\n                float posLight = step(0.5f, lightType);\n\n                // 计算光照位置\n                // 对于DirLight,lightVec = position.xyz * sign(-0.5f) = position.xyz * -1.0f;其中position代表DirLight的方向\n                // 对于PointLight和SpotLight,lightVec = position.xyz * sign(1.0f - 0.5f) - (worldPos * 1.0f) = positions.xyz * 1.0f - worldPos;其中position代表Light的位置\n                lightVec = position.xyz * sign(posLight - 0.5f) - (worldPos * posLight);\n                float dist = length(lightVec);\n\n                #ifndef Context.Srgb\n                    lightDir.w = (1.0f - position.w * dist) / (1.0f + position.w * dist * dist);\n                    lightDir.w = clamp(lightDir.w, 1.0f - posLight, 1.0f);\n                #else\n                    // 对于DirLight,lightDir.w = 1.0f\n                    lightDir.w = clamp(1.0f - position.w * dist * posLight, 0.0f, 1.0f);\n                #endif\n\n                // 归一化\n                lightDir.xyz = lightVec / vec3(dist);\n            }\n            #define PI 3.14159265358979323846264\n            // 镜面反射菲涅尔计算\n            vec3 F_Shlick(float vh,\tvec3 F0){\n            \tfloat fresnelFact = pow(2.0f, (-5.55473f * vh - 6.98316f) * vh);\n            \treturn mix(F0, vec3(1.0f, 1.0f, 1.0f), fresnelFact);\n            }\n            vec3 F_Schlick2(float cosTheta, vec3 F0)\n            {\n                return F0 + (1.0f - F0) * pow(1.0f - cosTheta, 5.0f);\n            }\n            // 计算直接光照\n            void ComputeDirectLighting(in vec3 normal, in vec3 viewDir, in vec3 lightDir, in vec3 lightColor, in vec3 diffuseColor, in vec3 fZero, in float roughness, in float ndotv, out vec3 directLighting){\n                vec3 h = normalize(lightDir + viewDir);\n                float ndotl = max( dot( normal, lightDir ), 0.0f );\n                float ndoth = max( dot( normal, h), 0.0f );\n                float hdotv = max( dot( h, viewDir ), 0.0f );\n\n                // 这里,不使用c/Π计算diffuse fr(x, wi, wo)\n                // 而假设恒定\n                vec3 diffuse = vec3( ndotl ) * lightColor * diffuseColor;\n\n                // cook-torrence,BRDF : http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n                float alpha = roughness * roughness;\n\n                // D, GGX 法线分布函数\n                float alpha2 = alpha * alpha;\n                float sum = (( ndoth * ndoth ) * ( alpha2 - 1.0f ) + 1.0f);\n                float denom = PI * sum * sum;\n                float D = alpha2 / denom;\n\n                // F, 菲涅尔项\n                vec3 F = F_Shlick( hdotv, fZero );\n\n                // G, 几何遮挡项\n                float k = alpha * 0.5f;\n                float G_V = ndotv + sqrt( ( ndotv - ndotv * k ) * ndotv + k );\n                float G_L = ndotl + sqrt( ( ndotl - ndotl * k ) * ndotl + k );\n                float G = 1.0f / max( G_V * G_L ,0.01f );\n\n                // specularBRDF\n                float t = D * G * ndotl;\n                vec3 specular =  vec3( t ) * F * lightColor;\n\n                directLighting = diffuse + specular;\n            }\n            // 返回Spot范围衰减\n            float ComputeSpotFalloff(in vec4 spotDirection, in vec3 lightDir){\n                float curAngleCos = dot(lightDir, -spotDirection.xyz);\n                float innerAngleCos = floor(spotDirection.w) * 0.001f;\n                float outerAngleCos = fract(spotDirection.w);\n                float innerMinusOuter = innerAngleCos - outerAngleCos;\n\n                #ifndef Context.Srgb\n                    // 使用二次衰减（请注意^ 4）\n                    return pow(clamp((curAngleCos - outerAngleCos) / innerMinusOuter, 0.0f, 1.0f), 4.0f);\n                #else\n                    // 线性空间衰减\n                    return clamp((curAngleCos - outerAngleCos) / innerMinusOuter, step(spotDirection.w, 0.001f), 1.0f);\n                #endif\n            }\n            // 球谐函数\n            vec3 sphericalHarmonics( const in vec3 normal, const vec3 sph[9] ){\n                float x = normal.x;\n                float y = normal.y;\n                float z = normal.z;\n\n                vec3 result = (\n                    sph[0] +\n\n                    sph[1] * y +\n                    sph[2] * z +\n                    sph[3] * x +\n\n                    sph[4] * y * x +\n                    sph[5] * y * z +\n                    sph[6] * (3.0f * z * z - 1.0f) +\n                    sph[7] * (z * x) +\n                    sph[8] * (x*x - y*y)\n                );\n\n                return max(result, vec3(0.0f));\n            }\n            // 镜面反射趋势朝向\n            vec3 getSpecularDominantDir(const in vec3 N, const in vec3 R, const in float realRoughness){\n\n                float smoothness = 1.0f - realRoughness;\n                float lerpFactor = smoothness * (sqrt(smoothness) + realRoughness);\n                // 当我们在立方体贴图中获取时，结果未规范化\n                vec3 dominant = mix(N, R, lerpFactor);\n\n                return dominant;\n            }\n            // 拟合方程\n            // 关于镜面部分，有很多优化地方，除了常见的优化，还有很多可以替代方案，几乎可以在保证画质的前提下，在移动端35帧率提升到60帧率，详细可参考我的笔记:https://www.cnblogs.com/JhonKkk/p/14313882.html\n            vec3 integrateBRDFApprox( const in vec3 specular, in float roughness, in float NoV ){\n                const vec4 c0 = vec4( -1.0f, -0.0275f, -0.572f, 0.022f );\n                const vec4 c1 = vec4( 1.0f, 0.0425f, 1.04f, -0.04f );\n                vec4 r = roughness * c0 + c1;\n                float a004 = min( r.x * r.x, exp2( -9.28f * NoV ) ) * r.x + r.y;\n                vec2 ab = vec2( -1.04f, 1.04f ) * a004 + r.zw;\n                return specular * ab.x + ab.y;\n            }\n            // 近似镜面IBL多项式\n            vec3 approximateSpecularIBLPolynomial(in samplerCube envMap, in vec3 specularColor , in float roughness, in float ndotv, in vec3 refVec, in float mipMaps){\n                float lod = sqrt( roughness ) * (mipMaps - 1.0f);\n                vec3 prefilteredColor = textureLod(envMap, refVec.xyz, lod).rgb;\n                return prefilteredColor * integrateBRDFApprox(specularColor, roughness, ndotv);\n            }\n            #define GAMMA 2.2f\n            #define GAMMA_T 1.0f / GAMMA\n            void main(){\n                vec4 lightColor;\n                vec4 lightData1;\n                vec4 lightDir = vec4(0.0f);\n                vec3 lightVec = vec3(0.0f);\n                vec3 directLighting = vec3(0.0f);\n                vec3 viewDir = normalize(Context.CameraPosition.xyz - wPosition.xyz);\n\n                #ifdef Params.baseColor\n                    #ifdef Params.baseColorMap\n                        vec4 albedo = texture(Params.baseColorMap, wUv0) * Params.baseColor * vec4(Context.AmbientLightColor, 1.0);\n                    #else\n                        vec4 albedo = Params.baseColor * vec4(Context.AmbientLightColor, 1.0);\n                    #endif\n                #else\n                    #ifdef Params.baseColorMap\n                        vec4 albedo = texture(Params.baseColorMap, wUv0) * vec4(Context.AmbientLightColor, 1.0);\n                    #else\n                        vec4 albedo = vec4(1.0f) * vec4(Context.AmbientLightColor, 1.0);\n                    #endif\n                #endif\n\n                #ifdef Params.alphaDiscard\n                    if(albedo.a < Params.alphaDiscard){\n                        discard;\n                    }\n                #endif\n\n                vec3 normal = wNormal;\n                #ifdef Params.normalMap\n                    // 这里做了一种简化,理论上应该在fs阶段计算tbn,但是从插值的角度来看,可以简化为tbn插值,减少在fs阶段计算tbn开销(虽然这么做不精确,但是折中下可以接受)\n                    vec3 normalHeight = texture(Params.normalMap, wUv0).xyz;\n                    vec3 tangent = normalize(wTangent.xyz);\n                    mat3 tbnMat = mat3(tangent, wTangent.w * cross(normal, tangent), normal);\n                    normal = normalize(tbnMat * ( normalHeight * 2.0f - 1.0f ));\n                #endif\n\n                #ifdef Params.metallicRoughnessMap\n                    vec2 rm = texture(Params.metallicRoughnessMap, wUv0).gb;\n                    #ifdef Params.roughness\n                        float _roughness = rm.x * max(Params.roughness, 1e-4);\n                    #else\n                        float _roughness = rm.x;\n                    #endif\n                    #ifdef Params.metallic\n                        float _metallic = rm.y * max(Params.metallic, 0.0f);\n                    #else\n                        float _metallic = rm.y;\n                    #endif\n                #else\n                    #ifdef Params.roughnessMap\n                        #ifdef Params.roughness\n                            float _roughness = texture(Params.roughnessMap, wUv0).r * max(Params.roughness, 1e-4);\n                        #else\n                            float _roughness = texture(Params.roughnessMap, wUv0).r;\n                        #endif\n                    #else\n                        #ifdef Params.roughness\n                            float _roughness = max(Params.roughness, 1e-4);\n                        #else\n                            float _roughness = 1.0f;\n                        #endif\n                    #endif\n                    #ifdef Params.metallicMap\n                        #ifdef Params.metallic\n                            float _metallic = texture(Params.metallicMap, wUv0).r * max(Params.metallic, 0.0f);\n                        #else\n                            float _metallic = texture(Params.metallicMap, wUv0).r;\n                        #endif\n                    #else\n                        #ifdef Params.metallic\n                            float _metallic = max(Params.metallic, 0.0f);\n                        #else\n                            float _metallic = 1.0f;\n                        #endif\n                    #endif\n                #endif\n\n                #ifdef Params.useSpecGloss\n                    #ifdef Params.specularGlossinessMap\n                        vec4 _specularColor = texture(Params.specularGlossinessMap, wUv0);\n                        #ifdef Params.glossiness\n                            float _glossiness = _specularColor.a * Params.glossiness;\n                        #else\n                            float _glossiness = _specularColor.a;\n                        #endif\n                        #ifdef Params.specular\n                            _specularColor *= Params.specular;\n                        #endif\n                    #else\n                        #ifdef Params.specularMap\n                            vec4 _specularColor = texture(Params.specularMap, wUv0);\n                        #else\n                            vec4 _specularColor = vec4(1.0f);\n                        #endif\n                        #ifdef Params.specular\n                            _specularColor *= Params.specular;\n                        #endif\n                        #ifdef Params.glossinessMap\n                            #ifdef Params.glossiness\n                                float _glossiness = texture(Params.glossinessMap, wUv0).r * Params.glossiness;\n                            #else\n                                float _glossiness = texture(Params.glossinessMap, wUv0).r;\n                            #endif\n                        #else\n                            #ifdef Params.glossiness\n                                float _glossiness = Params.glossiness;\n                            #else\n                                float _glossiness = 1.0f;\n                            #endif\n                        #endif\n                    #endif\n                    vec4 _diffuseColor = albedo;\n                    _roughness = 1.0f - _glossiness;\n                    vec3 fZero = _specularColor.rgb;\n                #else\n                    float nonMetalSpec = 0.04f;\n                    vec4 _specularColor = (nonMetalSpec - nonMetalSpec * _metallic) + albedo * _metallic;\n                    vec4 _diffuseColor = albedo - albedo * _metallic;\n                    vec3 fZero = vec3( 0.5f );\n                #endif\n\n                #ifdef Params.lightMap\n                    vec3 _lightMapColor;\n                    #ifdef Params.lightMapTexCoord\n                        _lightMapColor = texture(Params.lightMap, wUv1).rgb;\n                    #else\n                        _lightMapColor = texture(Params.lightMap, wUv0).rgb;\n                    #endif\n                    #ifdef Params.aoMap\n                        _lightMapColor.gb = _lightMapColor.rr;\n                        vec3 ao = _lightMapColor;\n                    #else\n                        _specularColor.rgb *= _lightMapColor;\n                        _diffuseColor.rgb  *= _lightMapColor;\n                        vec3 ao = vec3(1.0f);\n                    #endif\n                #else\n                    vec3 ao = vec3(1.0f);\n                #endif\n\n                float ndotv = max( dot( normal, viewDir ), 0.0f );\n                for( int i = 0;i < Context.CurLightCount;i+=3 ){\n                    lightColor = Context.WLightData[i];\n                    lightData1 = Context.WLightData[i + 1];\n                    ComputeLightDir(wPosition, lightColor.w, lightData1, lightDir, lightVec);\n\n                    // 计算PointLight的衰减\n                    float spotFallOff = 1.0 * lightDir.w;\n                    // 计算SpotLight的衰减\n                    if( lightColor.w > 1.0f )\n                    {\n                        // 计算SpotLight的范围衰减\n                        spotFallOff = ComputeSpotFalloff( Context.WLightData[i + 2], lightDir.xyz );\n                    }\n\n                    ComputeDirectLighting(normal, viewDir, lightDir.xyz, lightColor.rgb, _diffuseColor.rgb, fZero, _roughness, ndotv, directLighting);\n                    Context.OutColor.rgb += directLighting * spotFallOff;\n                }\n\n                if(Context.BlendGiProbes){\n                    #ifdef Context.GIProbes\n                        // 作为webGL项目,暂时不实现探针混合(但作为可拓展,仍然加结尾s命名)\n\n                        // 计算反射视线\n                        vec3 _rv = reflect( -viewDir.xyz, normal.xyz );\n                        float _r = fract( Context.WGIProbe.w );\n                        float _mipMaps = Context.WGIProbe.w - _r;\n                        _rv = _r * ( wPosition.xyz - Context.WGIProbe.xyz ) + _rv;\n\n                        // 使用球谐计算diffuse( 避免Irr采样 )\n                        vec3 giLighting = sphericalHarmonics(normal.xyz, Context.ShCoeffs) * _diffuseColor.rgb;\n\n                        float horiz = dot(_rv, wNormal);\n                        float horizFadePower = 1.0f - _roughness;\n                        horiz = clamp( 1.0f + horizFadePower * horiz, 0.0f, 1.0f );\n                        horiz *= horiz;\n\n                        vec3 _dominantR = getSpecularDominantDir( normal, _rv.xyz, _roughness * _roughness );\n                        giLighting += approximateSpecularIBLPolynomial(Context.InPrefEnvMap, _specularColor.rgb, _roughness, ndotv, _dominantR, _mipMaps) * vec3( horiz );\n                        giLighting *= ao;\n\n                        Context.OutColor.rgb += giLighting * step( 0.0f, Context.WGIProbe.w );\n                        // Context.OutColor.rgb = textureLod(Context.InPrefEnvMap, normal.xyz, 0.0f).rgb;\n                    #endif\n                }\n\n                #ifdef Params.emissive\n                    float _emissivePower = 3.0f;\n                    #ifdef Params.emissivePower\n                        _emissivePower = Params.emissivePower;\n                    #endif\n                    float _emissiveIntensity = 2.0f;\n                    #ifdef Params.emissiveIntensity\n                        _emissiveIntensity = Params.emissiveIntensity;\n                    #endif\n                    #ifdef Params.emissiveMap\n                        vec4 eMap = texture(Params.emissiveMap, wUv0);\n                        Context.OutColor.rgb += Params.emissive.rgb * eMap.rgb * pow(Params.emissive.a * eMap.a, _emissivePower) * _emissiveIntensity;\n                    #else\n                        Context.OutColor.rgb += Params.emissive.rgb * pow(Params.emissive.a, _emissivePower) * _emissiveIntensity;\n                    #endif\n                #else\n                    #ifdef Params.emissiveMap\n                        float _emissivePower = 3.0f;\n                        #ifdef Params.emissivePower\n                            _emissivePower = Params.emissivePower;\n                        #endif\n                        float _emissiveIntensity = 2.0f;\n                        #ifdef Params.emissiveIntensity\n                            _emisiveIntensity = Params.emissiveIntensity;\n                        #endif\n                        vec4 eMap = texture(Params.emissiveMap, wUv0);\n                        Context.OutColor.rgb += eMap.rgb * pow(eMap.a, _emissivePower) * _emissiveIntensity;\n                    #endif\n                #endif\n\n                Context.OutColor.a = albedo.a;\n\n            }\n        }\n    }\n\n    Technology{\n        Sub_Pass{\n            Pass SPPrincipledLighting{\n            }\n        }\n    }\n}\n")},512:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=null,(r="_m_Render")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._m_Render=t.render}var t,r,o;return t=e,(r=[{key:"render",value:function(e){}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},6528:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e)}return t=s,(n=[{key:"render",value:function(e){}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(870))&&o.__esModule?o:{default:o}).default);t.default=l},870:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(512)),i=_(n(8435)),a=_(n(3061));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,r,o=l(_);function _(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),o.call(this,e)}return t=_,(n=[{key:"render",value:function(e){var t=this,n=e.frameContext,r=e.gl,o=e.scene,s=e.lights,u=!1,l=null,f=!1,c=null,m=!1,h=function(i){n.getRenderState().store();var s=null;e.bucket[i].forEach((function(e){u=!1;var m=o.getComponent(i),h=m.getCurrentTechnology().getSubPasss(a.default.DEFERRED_SHADING);if(h){if(l=h.getSubShaderMaps(),s=_.S_DEFERRED_SHADING_PASS_GROUP[0],null==l[s]&&(s=_.S_DEFERRED_SHADING_PASS_GROUP_2[0]),f)n.m_LastFrameBuffer!=n.getFrameBuffer(l[s].subShader.getFBId()||a.default.DEFAULT_DEFERRED_SHADING_FRAMEBUFFER)&&console.error("使用了不同的dfb>>>");else{f=!0;var d=n.getFrameBuffer(l[s].subShader.getFBId()||a.default.DEFAULT_DEFERRED_SHADING_FRAMEBUFFER);r.bindFramebuffer(r.FRAMEBUFFER,d.getFrameBuffer()),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n.m_LastFrameBuffer=d}l[s].renderState&&(u=t._m_Render._checkRenderState(r,l[s].renderState,n.getRenderState())),m._selectSubShader(l[s].subShader),e.draw(n),s=_.S_DEFERRED_SHADING_PASS_GROUP[1],c=l[s]?l[s]:l[_.S_DEFERRED_SHADING_PASS_GROUP_2[1]]}u&&t._checkRenderState(r,n.getRenderState().restore(),n.getRenderState())}))};for(var d in e.bucket)h(d);if(f&&c){m=!0;var p=n.m_LastFrameBuffer;r.bindFramebuffer(r.FRAMEBUFFER,n._m_DefaultFrameBuffer),n.m_LastFrameBuffer=n._m_DefaultFrameBuffer,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n.m_LastSubShaderId!=c.subShader.getDefId()&&(c.subShader.needCompile()&&c.subShader._compile(r,n),c.subShader.use(r),n.m_LastSubShaderId=c.subShader.getDefId()),n.m_LastSubShader!=c.subShader&&(n.m_LastSubShader=c.subShader),c.renderState&&this._m_Render._checkRenderState(r,c.renderState,n.getRenderState());var g=p.getFramePicture(),S=c.subShader.getRenderDatas();for(var v in S)r.activeTexture(r.TEXTURE0+S[v].loc),r.bindTexture(r.TEXTURE_2D,n.getFrameBuffer(S[v].refId).getTexture(S[v].dataId).getLoc());"On"==n.getRenderState().getFlag(i.default.S_STATES[3])&&r.disable(r.DEPTH_TEST),this._m_Render._m_RenderPrograms[c.subShader.getRenderProgramType()].draw(r,o,n,g,s),"On"==n.getRenderState().getFlag(i.default.S_STATES[3])&&r.enable(r.DEPTH_TEST),r.bindFramebuffer(r.READ_FRAMEBUFFER,p.getFrameBuffer()),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n._m_DefaultFrameBuffer),r.blitFramebuffer(0,0,o.getCanvas().getWidth(),o.getCanvas().getHeight(),0,0,o.getCanvas().getWidth(),o.getCanvas().getHeight(),r.DEPTH_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,n._m_DefaultFrameBuffer)}return m}}])&&s(t.prototype,n),r&&s(t,r),_}(o.default);t.default=h,m(h,"S_DEFERRED_SHADING_G_BUFFER_PASS","GBufferPass"),m(h,"S_DEFERRED_SHADING_DEFERRED_SHADING_PASS","DeferredShadingPass"),m(h,"S_DEFERRED_SHADING_PASS_GROUP",[h.S_DEFERRED_SHADING_G_BUFFER_PASS,h.S_DEFERRED_SHADING_DEFERRED_SHADING_PASS]),m(h,"S_DEFERRED_SHADING_PASS_GROUP_2",[0,1])},5734:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(512)),i=a(n(3061));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r,o=u(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"render",value:function(e){var t=this,n=e.frameContext,r=e.gl,o=e.scene,a=e.lights,_=!1,s=null;if(n.getRenderState().store(),e.opaque)for(var u in e.bucket){_=!1;var l=o.getComponent(u),f=l.getCurrentTechnology().getSubPasss(i.default.FORWARD);if(f)for(var c in s=f.getSubShaders())s[c].renderState&&(_=this._m_Render._checkRenderState(r,s[c].renderState,n.getRenderState())),l._selectSubShader(s[c].subShader),this._m_Render._m_RenderPrograms[s[c].subShader.getRenderProgramType()].drawArrays(r,o,n,e.bucket[u],a);_&&this._m_Render._checkRenderState(r,n.getRenderState().restore(),n.getRenderState())}else e.translucent&&e.bucket.forEach((function(e){_=!1;var u=e.getMaterial(),l=u.getCurrentTechnology().getSubPasss(i.default.FORWARD);if(l)for(var f in s=l.getSubShaders())s[f].renderState&&(_=t._checkRenderState(r,s[f].renderState,n.getRenderState())),u._selectSubShader(s[f].subShader),t._m_Render._m_RenderPrograms[s[f].subShader.getRenderProgramType()].draw(r,o,n,e,a);_&&t._m_Render._checkRenderState(r,n.restore(),n.getRenderState())}))}}])&&_(t.prototype,n),r&&_(t,r),a}(o.default);t.default=c},9526:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return n}(((o=n(512))&&o.__esModule?o:{default:o}).default);t.default=u},6987:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(3061)),i=a(n(8435));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,r,a=u(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e))._init(),t}return t=l,(n=[{key:"_init",value:function(){}},{key:"render",value:function(e){var t=this,n=e.frameContext,r=e.gl,a=e.scene,_=e.lights,s=!1,u=null,f=!1,c=null,m=null,h=!1,d=function(i){n.getRenderState().store();var _=null;e.bucket[i].forEach((function(e){s=!1;var h=a.getComponent(i),d=h.getCurrentTechnology().getSubPasss(o.default.TILE_DEFERRED_SHADING);if(d){if(u=d.getSubShaderMaps(),_=l.S_TILE_DEFERRED_SHADING_PASS_GROUP[0],null==u[_]&&(_=l.S_TILE_DEFERRED_SHADING_PASS_GROUP_2[0]),f)n.m_LastFrameBuffer!=n.getFrameBuffer(u[_].subShader.getFBId()||o.default.DEFAULT_DEFERRED_SHADING_FRAMEBUFFER)&&console.error("使用了不同的dfb>>>");else{f=!0;var p=n.getFrameBuffer(u[_].subShader.getFBId()||o.default.DEFAULT_DEFERRED_SHADING_FRAMEBUFFER);r.bindFramebuffer(r.FRAMEBUFFER,p.getFrameBuffer()),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n.m_LastFrameBuffer=p}u[_].renderState&&(s=t._m_Render._checkRenderState(r,u[_].renderState,n.getRenderState())),h._selectSubShader(u[_].subShader),e.draw(n),_=l.S_TILE_DEFERRED_SHADING_PASS_GROUP[1],c=u[_]?u[_]:u[l.S_TILE_DEFERRED_SHADING_PASS_GROUP_2[1]],_=l.S_TILE_DEFERRED_SHADING_PASS_GROUP[2],m=u[_]?u[_]:u[l.S_TILE_DEFERRED_SHADING_PASS_GROUP_2[2]]}s&&t._checkRenderState(r,n.getRenderState().restore(),n.getRenderState())}))};for(var p in e.bucket)d(p);if(f&&c&&m){h=!0;var g=n.m_LastFrameBuffer;r.bindFramebuffer(r.FRAMEBUFFER,n._m_DefaultFrameBuffer),n.m_LastFrameBuffer=n._m_DefaultFrameBuffer,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),"On"==n.getRenderState().getFlag(i.default.S_STATES[3])&&r.disable(r.DEPTH_TEST);var S=[],v=[],y=null;_.forEach((function(e){"DirectionalLight"==(y=e.getType())?S.push(e):"PointLight"!=y&&"SpotLight"!=y||v.push(e)})),n.m_LastSubShaderId!=c.subShader.getDefId()&&(c.subShader.needCompile()&&c.subShader._compile(r,n),c.subShader.use(r),n.m_LastSubShaderId=c.subShader.getDefId()),n.m_LastSubShader!=c.subShader&&(n.m_LastSubShader=c.subShader),c.renderState&&this._m_Render._checkRenderState(r,c.renderState,n.getRenderState());var C=g.getFramePicture(),T=c.subShader.getRenderDatas();for(var b in T)r.activeTexture(r.TEXTURE0+T[b].loc),r.bindTexture(r.TEXTURE_2D,n.getFrameBuffer(T[b].refId).getTexture(T[b].dataId).getLoc());for(var P in this._m_Render._m_RenderPrograms[c.subShader.getRenderProgramType()].draw(r,a,n,C,S,0),n.m_LastSubShaderId!=m.subShader.getDefId()&&(m.subShader.needCompile()&&m.subShader._compile(r,n),m.subShader.use(r),n.m_LastSubShaderId=m.subShader.getDefId()),n.m_LastSubShader!=m.subShader&&(n.m_LastSubShader=m.subShader),m.renderState&&this._m_Render._checkRenderState(r,m.renderState,n.getRenderState()),T)r.activeTexture(r.TEXTURE0+T[P].loc),r.bindTexture(r.TEXTURE_2D,n.getFrameBuffer(T[P].refId).getTexture(T[P].dataId).getLoc());this._m_Render._m_RenderPrograms[m.subShader.getRenderProgramType()].draw(r,a,n,C,v,1),"On"==n.getRenderState().getFlag(i.default.S_STATES[3])&&r.enable(r.DEPTH_TEST),r.bindFramebuffer(r.READ_FRAMEBUFFER,g.getFrameBuffer()),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,n._m_DefaultFrameBuffer),r.blitFramebuffer(0,0,a.getCanvas().getWidth(),a.getCanvas().getHeight(),0,0,a.getCanvas().getWidth(),a.getCanvas().getHeight(),r.DEPTH_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,n._m_DefaultFrameBuffer)}return h}}])&&_(t.prototype,n),r&&_(t,r),l}(a(n(870)).default);t.default=m,c(m,"S_TILE_DEFERRED_SHADING_G_BUFFER_PASS","GBufferPass"),c(m,"S_TILE_DEFERRED_SHADING_GLOBAL_PASS","GlobalPass"),c(m,"S_TILE_DEFERRED_SHADING_TILE_PASS","TilePass"),c(m,"S_TILE_DEFERRED_SHADING_PASS_GROUP",[m.S_TILE_DEFERRED_SHADING_G_BUFFER_PASS,m.S_TILE_DEFERRED_SHADING_GLOBAL_PASS,m.S_TILE_DEFERRED_SHADING_TILE_PASS]),c(m,"S_TILE_DEFERRED_SHADING_PASS_GROUP_2",[0,1,2])},1393:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"reset",value:function(){}},{key:"draw",value:function(e,t,n,r,o){r.draw(n)}},{key:"drawArrays",value:function(e,t,n,r,o){r.forEach((function(e){e.draw(n)}))}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=a,i=null,(o="PROGRAM_TYPE")in(r=a)?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i},8388:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(1393)),i=f(n(8435)),a=(f(n(7539)),f(n(2475))),_=f(n(2320)),s=(f(n(3846)),f(n(9784))),u=f(n(5604)),l=f(n(7141));function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,r,o=h(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),S(p(t=o.call(this,e)),"_m_PV",null),S(p(t),"_m_Temp_Vec3",new u.default),S(p(t),"_m_Temp_Vec4",new l.default),S(p(t),"_m_Temp_Vec4_2",new l.default),S(p(t),"_m_Temp_Vec4_3",new l.default),S(p(t),"_m_Cam_Up",new l.default),S(p(t),"_m_Cam_Left",new l.default),S(p(t),"_m_Light_Left",new l.default),S(p(t),"_m_Light_Up",new l.default),S(p(t),"_m_Light_Center",new l.default),S(p(t),"_m_ViewPortWidth",-1),S(p(t),"_m_ViewPortHeight",-1),S(p(t),"_m_CamLeftCoeff",-1),S(p(t),"_m_CamTopCoeff",-1),t._m_AccumulationLights=new i.default,t._m_AccumulationLights.setFlag(i.default.S_STATES[4],"On"),t._m_AccumulationLights.setFlag(i.default.S_STATES[1],"Off"),t._m_AccumulationLights.setFlag(i.default.S_STATES[5],["SRC_ALPHA","ONE"]),t._m_ClipLights=new i.default,t._m_ClipLights.setFlag(i.default.S_STATES[6],"On"),t._m_m_LastSubShader=null,t}return t=f,(n=[{key:"reset",value:function(){this._m_m_LastSubShader=null}},{key:"_blendGIProbes",value:function(e,t,n){var r=n.m_LastSubShader.getContextVars();if(null!=r[f.S_WGIPROBE_SRC]){if(this._m_m_LastSubShader!=n.m_LastSubShader){var o=t.getGIProbes()[0],i=a.default.S_TEMP_VEC4;i.setToInXYZW(o.getPosition()._m_X,o.getPosition()._m_Y,o.getPosition()._m_Z,1/o.getRadius()+o.getPrefilterMipmap()),e.uniform4fv(r[f.S_WGIPROBE_SRC].loc,i.getBufferData(),0,4),i=o.getShCoeffsBufferData(),null!=r[f.S_SH_COEFFS_SRC]&&e.uniform3fv(r[f.S_SH_COEFFS_SRC].loc,i.getBufferData(),0,27),null!=r[f.S_PREF_ENV_MAP_SRC]&&o.getPrefilterEnvMap()._upload(e,r[f.S_PREF_ENV_MAP_SRC].loc),this._m_m_LastSubShader=n.m_LastSubShader}}else{var _=t.getGIProbes();_&&_.length>0&&n.m_LastMaterial.addDefine(s.default.S_GIPROBES_SRC,!0)}}},{key:"_lightClip",value:function(e,t,n){var r=t.getBoundingVolume(),o=r.getRadius(),i=o*this._m_CamLeftCoeff,a=o*this._m_CamTopCoeff,s=r.getCenter(this._m_Temp_Vec3);s=this._m_Temp_Vec4.setToInXYZW(s._m_X,s._m_Y,s._m_Z,1),this._m_Temp_Vec4._m_W=1,this._m_Temp_Vec4_2._m_W=1,this._m_Temp_Vec4_3._m_W=1;var u=this._m_Cam_Left.multLength(i,this._m_Temp_Vec4_2).add(s),l=this._m_Cam_Up.multLength(a,this._m_Temp_Vec4_3).add(s);_.default.multiplyMV(this._m_Light_Left,u,this._m_PV),_.default.multiplyMV(this._m_Light_Up,l,this._m_PV),_.default.multiplyMV(this._m_Light_Center,s,this._m_PV),this._m_Light_Left._m_X/=this._m_Light_Left._m_W,this._m_Light_Left._m_Y/=this._m_Light_Left._m_W,this._m_Light_Up._m_X/=this._m_Light_Up._m_W,this._m_Light_Up._m_Y/=this._m_Light_Up._m_W,this._m_Light_Center._m_X/=this._m_Light_Center._m_W,this._m_Light_Center._m_Y/=this._m_Light_Center._m_W,this._m_Light_Left._m_X=this._m_ViewPortWidth*(1+this._m_Light_Left._m_X),this._m_Light_Up._m_X=this._m_ViewPortWidth*(1+this._m_Light_Up._m_X),this._m_Light_Center._m_X=this._m_ViewPortWidth*(1+this._m_Light_Center._m_X),this._m_Light_Left._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Left._m_Y),this._m_Light_Up._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Up._m_Y),this._m_Light_Center._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Center._m_Y);var f=Math.abs(this._m_Light_Left._m_X-this._m_Light_Center._m_X),c=Math.abs(this._m_Light_Center._m_Y-this._m_Light_Up._m_Y),m=-1,h=-1;return this._m_Light_Center._m_Z<-this._m_Light_Center._m_W?(m=-this._m_Light_Center._m_X-f,h=-this._m_Light_Center._m_Y+c):(m=this._m_Light_Center._m_X-f,h=this._m_Light_Center._m_Y+c),e.scissor(m,2*this._m_ViewPortHeight-h,2*f,2*c),!0}},{key:"_uploadLights",value:function(e,t,n,r,o,i,s,u,l){var c=n.m_LastSubShader.getContextVars(),m=t.enableGIProbes();if(null!=c[f.S_MULTI_ID_SRC]&&e.uniform1i(c[f.S_MULTI_ID_SRC].loc,u),null!=c[f.S_BLEND_GI_PROBES]&&e.uniform1i(c[f.S_BLEND_GI_PROBES].loc,l&&m),0==u){if(null!=c[f.S_AMBIENT_LIGHT_COLOR])if(0==i){var h=t.AmbientLightColor;e.uniform3f(c[f.S_AMBIENT_LIGHT_COLOR].loc,h._m_X,h._m_Y,h._m_Z)}else e.uniform3f(c[f.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());m&&this._blendGIProbes(e,t,n);var d=null,p=null;null!=c[f.S_V_LIGHT_DATA]?(p=1,d=c[f.S_V_LIGHT_DATA].loc):null!=c[f.S_W_LIGHT_DATA]&&(p=0,d=c[f.S_W_LIGHT_DATA].loc);var g=o+i>r.length?r.length-i:o;if(null==d)return g+i;for(var S=null,v=null,y=a.default.S_LIGHT_DATA_4,C=y.getArray(),T=a.default.S_TEMP_VEC4,b=a.default.S_TEMP_VEC4_2,P=i,E=0,D=g+i;P<D;P++,E+=12)v=(S=r[P]).getColor(),C[E]=v._m_X,C[E+1]=v._m_Y,C[E+2]=v._m_Z,C[E+3]=S.getTypeId(),"DirectionalLight"===S.getType()&&(p?(b.setToInXYZW(S.getDirection()._m_X,S.getDirection()._m_Y,S.getDirection()._m_Z,0),_.default.multiplyMV(T,b,t.getMainCamera().getViewMatrix()),C[E+4]=T._m_X,C[E+5]=T._m_Y,C[E+6]=T._m_Z,C[E+7]=-1):(C[E+4]=S.getDirection()._m_X,C[E+5]=S.getDirection()._m_Y,C[E+6]=S.getDirection()._m_Z,C[E+7]=-1),C[E+8]=0,C[E+9]=0,C[E+10]=0,C[E+11]=0);return e.uniform4fv(d,y.getBufferData(),0,12*g),null!=c[f.S_CUR_LIGHT_COUNT]&&e.uniform1i(c[f.S_CUR_LIGHT_COUNT].loc,3*g),g+i}if(1==u){var R,w=null;if(w=r[s],i>0&&!this._lightClip(e,w,!0))return i<=0?-1:0;if(null!=c[f.S_AMBIENT_LIGHT_COLOR])if(i<=0){var M=t.AmbientLightColor;e.uniform3f(c[f.S_AMBIENT_LIGHT_COLOR].loc,M._m_X,M._m_Y,M._m_Z)}else e.uniform3f(c[f.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());m&&this._blendGIProbes(e,t,n);var x=null,A=null,L=null,I=null,O=a.default.S_TEMP_VEC4,F=a.default.S_TEMP_VEC4_2,k=a.default.S_TEMP_VEC4_3;if(null!=c[f.S_V_LIGHT_DATA0]?(I=1,x=c[f.S_V_LIGHT_DATA0].loc,A=c[f.S_V_LIGHT_DATA1].loc,L=c[f.S_V_LIGHT_DATA2].loc):null!=c[f.S_W_LIGHT_DATA0]&&(I=0,x=c[f.S_W_LIGHT_DATA0].loc,A=c[f.S_W_LIGHT_DATA1].loc,L=c[f.S_W_LIGHT_DATA2].loc),null==I)return 1;switch(R=w.getColor(),O.setToInXYZW(R._m_X,R._m_Y,R._m_Z,w.getTypeId()),w.getType()){case"PointLight":I||F.setToInXYZW(w.getPosition()._m_X,w.getPosition()._m_Y,w.getPosition()._m_Z,w.getInRadius()),k.setToInXYZW(0,0,0,0);break;case"SpotLight":I||F.setToInXYZW(w.getPosition()._m_X,w.getPosition()._m_Y,w.getPosition()._m_Z,w.getInvSpotRange()),k.setToInXYZW(w.getDirection()._m_X,w.getDirection()._m_Y,w.getDirection()._m_Z,w.getPackedAngleCos())}return null!=x&&e.uniform4f(x,O._m_X,O._m_Y,O._m_Z,O._m_W),null!=A&&e.uniform4f(A,F._m_X,F._m_Y,F._m_Z,F._m_W),null!=L&&e.uniform4f(L,k._m_X,k._m_Y,k._m_Z,k._m_W),1}return 0}},{key:"draw",value:function(e,t,n,r,o){if(0==o.length){var i=n.m_LastSubShader.getContextVars(),a=t.enableGIProbes();if(a&&this._blendGIProbes(e,t,n),null!=i[f.S_BLEND_GI_PROBES]&&e.uniform1i(i[f.S_BLEND_GI_PROBES].loc,a),null!=i[f.S_MULTI_ID_SRC]&&e.uniform1i(i[f.S_MULTI_ID_SRC].loc,0),null!=i[f.S_AMBIENT_LIGHT_COLOR]){var _=t.AmbientLightColor;e.uniform3f(i[f.S_AMBIENT_LIGHT_COLOR].loc,_._m_X,_._m_Y,_._m_Z)}return null!=i[f.S_CUR_LIGHT_COUNT]&&e.uniform1i(i[f.S_CUR_LIGHT_COUNT].loc,0),void r.draw(n)}var s=t.getRender().getBatchLightSize();n.getRenderState().store();var u=[],l=[],c=null;o.forEach((function(e){"DirectionalLight"==(c=e.getType())?u.push(e):"PointLight"!=c&&"SpotLight"!=c||l.push(e)}));for(var m=0;m<u.length;)m=this._uploadLights(e,t,n,u,s,m,-1,0,0==m),r.draw(n);var h=0;if(l.length>0){t.getRender()._checkRenderState(e,this._m_ClipLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),e.scissor(0,0,2*this._m_ViewPortWidth,2*this._m_ViewPortHeight),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var d=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(d.m[0],d.m[4],d.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(d.m[1],d.m[5],d.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(d.m[0],d.m[4],d.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(d.m[1],d.m[5],d.m[9],1)}for(;h<l.length;)m=this._uploadLights(e,t,n,l,s,0!=m?m:h,h,1,0==m&&0==h),h++,1==m&&r.draw(n);t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=m}},{key:"drawArrays",value:function(e,t,n,r,o){if(0==o.length){var i=n.m_LastSubShader.getContextVars(),a=t.enableGIProbes();if(a&&this._blendGIProbes(e,t,n),null!=i[f.S_BLEND_GI_PROBES]&&e.uniform1i(i[f.S_BLEND_GI_PROBES].loc,a),null!=i[f.S_MULTI_ID_SRC]&&e.uniform1i(i[f.S_MULTI_ID_SRC].loc,0),null!=i[f.S_AMBIENT_LIGHT_COLOR]){var _=t.AmbientLightColor;e.uniform3f(i[f.S_AMBIENT_LIGHT_COLOR].loc,_._m_X,_._m_Y,_._m_Z)}return null!=i[f.S_CUR_LIGHT_COUNT]&&e.uniform1i(i[f.S_CUR_LIGHT_COUNT].loc,0),void r.forEach((function(e){e.draw(n)}))}var s=t.getRender().getBatchLightSize();n.getRenderState().store();var u=[],l=[],c=null;o.forEach((function(e){"DirectionalLight"==(c=e.getType())?u.push(e):"PointLight"!=c&&"SpotLight"!=c||l.push(e)}));for(var m=0;m<u.length;)m=this._uploadLights(e,t,n,u,s,m,-1,0,0==m),iDrawable.draw(n);var h=0;if(l.length>0){t.getRender()._checkRenderState(e,this._m_ClipLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),e.scissor(0,0,2*this._m_ViewPortWidth,2*this._m_ViewPortHeight),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var d=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(d.m[0],d.m[4],d.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(d.m[1],d.m[5],d.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(d.m[0],d.m[4],d.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(d.m[1],d.m[5],d.m[9],1)}for(;h<l.length;)m=this._uploadLights(e,t,n,l,s,0!=m?m:h,h,1,0==m&&0==h),h++,1==m&&r.forEach((function(e){e.draw(n)}));t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=m}}])&&c(t.prototype,n),r&&c(t,r),f}(o.default);t.default=v,S(v,"PROGRAM_TYPE","MultiPassIBLLighting"),S(v,"S_CUR_LIGHT_COUNT","_curLightCount"),S(v,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),S(v,"S_BLEND_GI_PROBES","_blend_gi_probes"),S(v,"S_MULTI_ID_SRC","_multiId"),S(v,"S_V_LIGHT_DATA","_vLightData"),S(v,"S_W_LIGHT_DATA","_wLightData"),S(v,"S_V_LIGHT_DATA0","_vLight_Data_0"),S(v,"S_V_LIGHT_DATA1","_vLight_Data_1"),S(v,"S_V_LIGHT_DATA2","_vLight_Data_2"),S(v,"S_W_LIGHT_DATA0","_wLight_Data_0"),S(v,"S_W_LIGHT_DATA1","_wLight_Data_1"),S(v,"S_W_LIGHT_DATA2","_wLight_Data_2"),S(v,"S_PREF_ENV_MAP_SRC","_prefEnvMap"),S(v,"S_WGIPROBE_SRC","_wGIProbe"),S(v,"S_SH_COEFFS_SRC","_ShCoeffs")},4658:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(1393)),i=l(n(8435)),a=(l(n(7539)),l(n(2475))),_=l(n(2320)),s=l(n(7141)),u=l(n(5604));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,o=m(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),g(d(t=o.call(this,e)),"_m_PV",null),g(d(t),"_m_Temp_Vec3",new u.default),g(d(t),"_m_Temp_Vec4",new s.default),g(d(t),"_m_Temp_Vec4_2",new s.default),g(d(t),"_m_Temp_Vec4_3",new s.default),g(d(t),"_m_Cam_Up",new s.default),g(d(t),"_m_Cam_Left",new s.default),g(d(t),"_m_Light_Left",new s.default),g(d(t),"_m_Light_Up",new s.default),g(d(t),"_m_Light_Center",new s.default),g(d(t),"_m_ViewPortWidth",-1),g(d(t),"_m_ViewPortHeight",-1),g(d(t),"_m_CamLeftCoeff",-1),g(d(t),"_m_CamTopCoeff",-1),t._m_AccumulationLights=new i.default,t._m_AccumulationLights.setFlag(i.default.S_STATES[4],"On"),t._m_AccumulationLights.setFlag(i.default.S_STATES[1],"Off"),t._m_AccumulationLights.setFlag(i.default.S_STATES[5],["SRC_ALPHA","ONE"]),t._m_ClipLights=new i.default,t._m_ClipLights.setFlag(i.default.S_STATES[6],"On"),t}return t=l,(n=[{key:"_uploadLights",value:function(e,t,n,r,o,i,s,u){var f=n.m_LastSubShader.getContextVars();if(null!=f[l.S_MULTI_ID_SRC]&&e.uniform1i(f[l.S_MULTI_ID_SRC].loc,u),0==u){if(null!=f[l.S_AMBIENT_LIGHT_COLOR])if(0==i){var c=t.AmbientLightColor;e.uniform3f(f[l.S_AMBIENT_LIGHT_COLOR].loc,c._m_X,c._m_Y,c._m_Z)}else e.uniform3f(f[l.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());var m=null,h=null;null!=f[l.S_V_LIGHT_DATA]?(h=1,m=f[l.S_V_LIGHT_DATA].loc):null!=f[l.S_W_LIGHT_DATA]&&(h=0,m=f[l.S_W_LIGHT_DATA].loc);var d=o+i>r.length?r.length-i:o,p=null,g=null;if(null==m)return d+i;for(var S=a.default.S_LIGHT_DATA,v=S.getArray(),y=a.default.S_TEMP_VEC4,C=a.default.S_TEMP_VEC4_2,T=i,b=0,P=d+i;T<P;T++,b+=12)g=(p=r[T]).getColor(),v[b]=g._m_X,v[b+1]=g._m_Y,v[b+2]=g._m_Z,v[b+3]=p.getTypeId(),"DirectionalLight"===p.getType()&&(h?(C.setToInXYZW(p.getDirection()._m_X,p.getDirection()._m_Y,p.getDirection()._m_Z,0),_.default.multiplyMV(y,C,t.getMainCamera().getViewMatrix()),v[b+4]=y._m_X,v[b+5]=y._m_Y,v[b+6]=y._m_Z,v[b+7]=-1):(v[b+4]=p.getDirection()._m_X,v[b+5]=p.getDirection()._m_Y,v[b+6]=p.getDirection()._m_Z,v[b+7]=-1),v[b+8]=0,v[b+9]=0,v[b+10]=0,v[b+11]=0);return e.uniform4fv(m,S.getBufferData(),0,12*d),null!=f[l.S_CUR_LIGHT_COUNT]&&e.uniform1i(f[l.S_CUR_LIGHT_COUNT].loc,3*d),d+i}if(1==u){var E,D=null;if(D=r[s],i>0&&!this._lightClip(e,D,!0))return i<=0?-1:0;if(null!=f[l.S_AMBIENT_LIGHT_COLOR])if(i<=0){var R=t.AmbientLightColor;e.uniform3f(f[l.S_AMBIENT_LIGHT_COLOR].loc,R._m_X,R._m_Y,R._m_Z)}else e.uniform3f(f[l.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());var w=null,M=null,x=null,A=null,L=a.default.S_TEMP_VEC4,I=a.default.S_TEMP_VEC4_2,O=a.default.S_TEMP_VEC4_3;if(null!=f[l.S_V_LIGHT_DATA0]?(A=1,w=f[l.S_V_LIGHT_DATA0].loc,M=f[l.S_V_LIGHT_DATA1].loc,x=f[l.S_V_LIGHT_DATA2].loc):null!=f[l.S_W_LIGHT_DATA0]&&(A=0,w=f[l.S_W_LIGHT_DATA0].loc,M=f[l.S_W_LIGHT_DATA1].loc,x=f[l.S_W_LIGHT_DATA2].loc),null==A)return 1;switch(E=D.getColor(),L.setToInXYZW(E._m_X,E._m_Y,E._m_Z,D.getTypeId()),D.getType()){case"PointLight":A||I.setToInXYZW(D.getPosition()._m_X,D.getPosition()._m_Y,D.getPosition()._m_Z,D.getInRadius()),O.setToInXYZW(0,0,0,0);break;case"SpotLight":A||I.setToInXYZW(D.getPosition()._m_X,D.getPosition()._m_Y,D.getPosition()._m_Z,D.getInvSpotRange()),O.setToInXYZW(D.getDirection()._m_X,D.getDirection()._m_Y,D.getDirection()._m_Z,D.getPackedAngleCos())}return null!=w&&e.uniform4f(w,L._m_X,L._m_Y,L._m_Z,L._m_W),null!=M&&e.uniform4f(M,I._m_X,I._m_Y,I._m_Z,I._m_W),null!=x&&e.uniform4f(x,O._m_X,O._m_Y,O._m_Z,O._m_W),1}return 0}},{key:"_lightClip",value:function(e,t,n){var r=t.getBoundingVolume(),o=r.getRadius(),i=o*this._m_CamLeftCoeff,a=o*this._m_CamTopCoeff,s=r.getCenter(this._m_Temp_Vec3);s=this._m_Temp_Vec4.setToInXYZW(s._m_X,s._m_Y,s._m_Z,1),this._m_Temp_Vec4._m_W=1,this._m_Temp_Vec4_2._m_W=1,this._m_Temp_Vec4_3._m_W=1;var u=this._m_Cam_Left.multLength(i,this._m_Temp_Vec4_2).add(s),l=this._m_Cam_Up.multLength(a,this._m_Temp_Vec4_3).add(s);_.default.multiplyMV(this._m_Light_Left,u,this._m_PV),_.default.multiplyMV(this._m_Light_Up,l,this._m_PV),_.default.multiplyMV(this._m_Light_Center,s,this._m_PV),this._m_Light_Left._m_X/=this._m_Light_Left._m_W,this._m_Light_Left._m_Y/=this._m_Light_Left._m_W,this._m_Light_Up._m_X/=this._m_Light_Up._m_W,this._m_Light_Up._m_Y/=this._m_Light_Up._m_W,this._m_Light_Center._m_X/=this._m_Light_Center._m_W,this._m_Light_Center._m_Y/=this._m_Light_Center._m_W,this._m_Light_Left._m_X=this._m_ViewPortWidth*(1+this._m_Light_Left._m_X),this._m_Light_Up._m_X=this._m_ViewPortWidth*(1+this._m_Light_Up._m_X),this._m_Light_Center._m_X=this._m_ViewPortWidth*(1+this._m_Light_Center._m_X),this._m_Light_Left._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Left._m_Y),this._m_Light_Up._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Up._m_Y),this._m_Light_Center._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Center._m_Y);var f=Math.abs(this._m_Light_Left._m_X-this._m_Light_Center._m_X),c=Math.abs(this._m_Light_Center._m_Y-this._m_Light_Up._m_Y),m=-1,h=-1;return this._m_Light_Center._m_Z<-this._m_Light_Center._m_W?(m=-this._m_Light_Center._m_X-f,h=-this._m_Light_Center._m_Y+c):(m=this._m_Light_Center._m_X-f,h=this._m_Light_Center._m_Y+c),e.scissor(m,2*this._m_ViewPortHeight-h,2*f,2*c),!0}},{key:"_lightCvvTest",value:function(e,t,n,r,o,i){return r<-i||e>n||o>i||t<-n}},{key:"draw",value:function(e,t,n,r,o){if(0==o.length){var i=n.m_LastSubShader.getContextVars();if(null!=i[l.S_MULTI_ID_SRC]&&e.uniform1i(i[l.S_MULTI_ID_SRC].loc,0),null!=i[l.S_AMBIENT_LIGHT_COLOR]){var a=t.AmbientLightColor;e.uniform3f(i[l.S_AMBIENT_LIGHT_COLOR].loc,a._m_X,a._m_Y,a._m_Z)}return null!=i[l.S_CUR_LIGHT_COUNT]&&e.uniform1i(i[l.S_CUR_LIGHT_COUNT].loc,0),void r.draw(n)}var _=t.getRender().getBatchLightSize();n.getRenderState().store();var s=[],u=[];o.forEach((function(e){"DirectionalLight"==e.getType()?s.push(e):u.push(e)}));for(var f=0;f<s.length;)f=this._uploadLights(e,t,n,s,_,f,-1,0),r.draw(n);var c=0;if(u.length>0){t.getRender()._checkRenderState(e,this._m_ClipLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),e.scissor(0,0,2*this._m_ViewPortWidth,2*this._m_ViewPortHeight),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var m=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(m.m[0],m.m[4],m.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(m.m[1],m.m[5],m.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(m.m[0],m.m[4],m.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(m.m[1],m.m[5],m.m[9],1)}for(;c<u.length;)f=this._uploadLights(e,t,n,u,_,0!=f?f:c,c,1),c++,1==f&&r.draw(n);t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=f}},{key:"drawArrays",value:function(e,t,n,r,o){if(0==o.length){var i=n.m_LastSubShader.getContextVars();if(null!=i[l.S_MULTI_ID_SRC]&&e.uniform1i(i[l.S_MULTI_ID_SRC].loc,0),null!=i[l.S_AMBIENT_LIGHT_COLOR]){var a=t.AmbientLightColor;e.uniform3f(i[l.S_AMBIENT_LIGHT_COLOR].loc,a._m_X,a._m_Y,a._m_Z)}return null!=i[l.S_CUR_LIGHT_COUNT]&&e.uniform1i(i[l.S_CUR_LIGHT_COUNT].loc,0),void r.forEach((function(e){e.draw(n)}))}var _=t.getRender().getBatchLightSize();n.getRenderState().store();var s=[],u=[];o.forEach((function(e){"DirectionalLight"==e.getType()?s.push(e):u.push(e)}));for(var f=0;f<s.length;)f=this._uploadLights(e,t,n,s,_,f,-1,0),r.forEach((function(e){e.draw(n)}));var c=0;if(u.length>0){t.getRender()._checkRenderState(e,this._m_ClipLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),e.scissor(0,0,2*this._m_ViewPortWidth,2*this._m_ViewPortHeight),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var m=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(m.m[0],m.m[4],m.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(m.m[1],m.m[5],m.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(m.m[0],m.m[4],m.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(m.m[1],m.m[5],m.m[9],1)}for(;c<u.length;)f=this._uploadLights(e,t,n,u,_,0!=f?f:c,c,1),c++,1==f&&r.forEach((function(e){e.draw(n)}));t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=f}}])&&f(t.prototype,n),r&&f(t,r),l}(o.default);t.default=S,g(S,"PROGRAM_TYPE","MultiPassLighting"),g(S,"S_CUR_LIGHT_COUNT","_curLightCount"),g(S,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),g(S,"S_MULTI_ID_SRC","_multiId"),g(S,"S_V_LIGHT_DATA","_vLightData"),g(S,"S_W_LIGHT_DATA","_wLightData"),g(S,"S_V_LIGHT_DATA0","_vLight_Data_0"),g(S,"S_V_LIGHT_DATA1","_vLight_Data_1"),g(S,"S_V_LIGHT_DATA2","_vLight_Data_2"),g(S,"S_W_LIGHT_DATA0","_wLight_Data_0"),g(S,"S_W_LIGHT_DATA1","_wLight_Data_1"),g(S,"S_W_LIGHT_DATA2","_wLight_Data_2")},8546:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(1393)),i=u(n(8435)),a=(u(n(7539)),u(n(2475))),_=u(n(2320)),s=(u(n(3846)),u(n(9784)));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,o=c(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this,e))._m_AccumulationLights=new i.default,t._m_AccumulationLights.setFlag(i.default.S_STATES[4],"On"),t._m_AccumulationLights.setFlag(i.default.S_STATES[1],"Off"),t._m_AccumulationLights.setFlag(i.default.S_STATES[5],["ONE","ONE"]),t._m_m_LastSubShader=null,t}return t=u,(n=[{key:"reset",value:function(){this._m_m_LastSubShader=null}},{key:"_blendGIProbes",value:function(e,t,n){var r=n.m_LastSubShader.getContextVars();if(null!=r[u.S_WGIPROBE_SRC]){if(this._m_m_LastSubShader!=n.m_LastSubShader){var o=t.getGIProbes()[0],i=a.default.S_TEMP_VEC4;i.setToInXYZW(o.getPosition()._m_X,o.getPosition()._m_Y,o.getPosition()._m_Z,1/o.getRadius()+o.getPrefilterMipmap()),e.uniform4fv(r[u.S_WGIPROBE_SRC].loc,i.getBufferData(),0,4),i=o.getShCoeffsBufferData(),null!=r[u.S_SH_COEFFS_SRC]&&e.uniform3fv(r[u.S_SH_COEFFS_SRC].loc,i.getBufferData(),0,27),null!=r[u.S_PREF_ENV_MAP_SRC]&&o.getPrefilterEnvMap()._upload(e,r[u.S_PREF_ENV_MAP_SRC].loc),this._m_m_LastSubShader=n.m_LastSubShader}}else{var _=t.getGIProbes();_&&_.length>0&&n.m_LastMaterial.addDefine(s.default.S_GIPROBES_SRC,!0)}}},{key:"_uploadLights",value:function(e,t,n,r,o,i,s){var l=n.m_LastSubShader.getContextVars(),f=t.enableGIProbes();if(null!=l[u.S_BLEND_GI_PROBES]&&e.uniform1i(l[u.S_BLEND_GI_PROBES].loc,s&&f),null!=l[u.S_AMBIENT_LIGHT_COLOR])if(0==i){var c=t.AmbientLightColor;e.uniform3f(l[u.S_AMBIENT_LIGHT_COLOR].loc,c._m_X,c._m_Y,c._m_Z)}else e.uniform3f(l[u.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());f&&this._blendGIProbes(e,t,n);var m=null,h=null;null!=l[u.S_V_LIGHT_DATA]?(h=1,m=l[u.S_V_LIGHT_DATA].loc):null!=l[u.S_W_LIGHT_DATA]&&(h=0,m=l[u.S_W_LIGHT_DATA].loc);var d=o+i>r.length?r.length-i:o;if(null==m)return d+i;for(var p=null,g=null,S=a.default.S_LIGHT_DATA_4,v=S.getArray(),y=a.default.S_TEMP_VEC4,C=a.default.S_TEMP_VEC4_2,T=i,b=0,P=d+i;T<P;T++,b+=12)switch(g=(p=r[T]).getColor(),v[b]=g._m_X,v[b+1]=g._m_Y,v[b+2]=g._m_Z,v[b+3]=p.getTypeId(),p.getType()){case"DirectionalLight":h?(C.setToInXYZW(p.getDirection()._m_X,p.getDirection()._m_Y,p.getDirection()._m_Z,0),_.default.multiplyMV(y,C,t.getMainCamera().getViewMatrix()),v[b+4]=y._m_X,v[b+5]=y._m_Y,v[b+6]=y._m_Z,v[b+7]=-1):(v[b+4]=p.getDirection()._m_X,v[b+5]=p.getDirection()._m_Y,v[b+6]=p.getDirection()._m_Z,v[b+7]=-1),v[b+8]=0,v[b+9]=0,v[b+10]=0,v[b+11]=0;break;case"PointLight":h||(v[b+4]=p.getPosition()._m_X,v[b+5]=p.getPosition()._m_Y,v[b+6]=p.getPosition()._m_Z,v[b+7]=p.getInRadius()),v[b+8]=0,v[b+9]=0,v[b+10]=0,v[b+11]=0;break;case"SpotLight":h||(v[b+4]=p.getPosition()._m_X,v[b+5]=p.getPosition()._m_Y,v[b+6]=p.getPosition()._m_Z,v[b+7]=p.getInvSpotRange()),v[b+8]=p.getDirection()._m_X,v[b+9]=p.getDirection()._m_Y,v[b+10]=p.getDirection()._m_Z,v[b+11]=p.getPackedAngleCos()}return e.uniform4fv(m,S.getBufferData(),0,12*d),null!=l[u.S_CUR_LIGHT_COUNT]&&e.uniform1i(l[u.S_CUR_LIGHT_COUNT].loc,3*d),d+i}},{key:"draw",value:function(e,t,n,r,o){if(0!=o.length){var i=t.getRender().getBatchLightSize(),a=0;for(n.getRenderState().store();a<o.length;)a=this._uploadLights(e,t,n,o,i,a,0==a),r.draw(n);t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=a}else{var _=n.m_LastSubShader.getContextVars(),s=t.enableGIProbes();if(s&&this._blendGIProbes(e,t,n),null!=_[u.S_BLEND_GI_PROBES]&&e.uniform1i(_[u.S_BLEND_GI_PROBES].loc,s),null!=_[u.S_CUR_LIGHT_COUNT]&&e.uniform1i(_[u.S_CUR_LIGHT_COUNT].loc,0),null!=_[u.S_AMBIENT_LIGHT_COLOR]){var l=t.AmbientLightColor;e.uniform3f(_[u.S_AMBIENT_LIGHT_COLOR].loc,l._m_X,l._m_Y,l._m_Z)}r.draw(n)}}},{key:"drawArrays",value:function(e,t,n,r,o){if(0!=o.length){var i=t.getRender().getBatchLightSize(),a=0;for(n.getRenderState().store();a<o.length;)a=this._uploadLights(e,t,n,o,i,a,0==a),r.forEach((function(e){e.draw(n)}));t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=a}else{var _=n.m_LastSubShader.getContextVars(),s=t.enableGIProbes();if(s&&this._blendGIProbes(e,t,n),null!=_[u.S_BLEND_GI_PROBES]&&e.uniform1i(_[u.S_BLEND_GI_PROBES].loc,s),null!=_[u.S_CUR_LIGHT_COUNT]&&e.uniform1i(_[u.S_CUR_LIGHT_COUNT].loc,0),null!=_[u.S_AMBIENT_LIGHT_COLOR]){var l=t.AmbientLightColor;e.uniform3f(_[u.S_AMBIENT_LIGHT_COLOR].loc,l._m_X,l._m_Y,l._m_Z)}r.forEach((function(e){e.draw(n)}))}}}])&&l(t.prototype,n),r&&l(t,r),u}(o.default);t.default=p,d(p,"PROGRAM_TYPE","SinglePassIBLLighting"),d(p,"S_CUR_LIGHT_COUNT","_curLightCount"),d(p,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),d(p,"S_BLEND_GI_PROBES","_blend_gi_probes"),d(p,"S_V_LIGHT_DATA","_vLightData"),d(p,"S_W_LIGHT_DATA","_wLightData"),d(p,"S_PREF_ENV_MAP_SRC","_prefEnvMap"),d(p,"S_WGIPROBE_SRC","_wGIProbe"),d(p,"S_SH_COEFFS_SRC","_ShCoeffs")},6148:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n(1393)),i=s(n(8435)),a=(s(n(7539)),s(n(2475))),_=s(n(2320));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,o=f(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e))._m_AccumulationLights=new i.default,t._m_AccumulationLights.setFlag(i.default.S_STATES[4],"On"),t._m_AccumulationLights.setFlag(i.default.S_STATES[1],"Off"),t._m_AccumulationLights.setFlag(i.default.S_STATES[5],["ONE","ONE"]),t}return t=s,(n=[{key:"_uploadLights",value:function(e,t,n,r,o,i){var u=n.m_LastSubShader.getContextVars();if(null!=u[s.S_AMBIENT_LIGHT_COLOR])if(0==i){var l=t.AmbientLightColor;e.uniform3f(u[s.S_AMBIENT_LIGHT_COLOR].loc,l._m_X,l._m_Y,l._m_Z)}else e.uniform3f(u[s.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());var f=null,c=null;null!=u[s.S_V_LIGHT_DATA]?(c=1,f=u[s.S_V_LIGHT_DATA].loc):null!=u[s.S_W_LIGHT_DATA]&&(c=0,f=u[s.S_W_LIGHT_DATA].loc);var m=o+i>r.length?r.length-i:o;if(null==f)return m+i;for(var h=null,d=null,p=a.default.S_LIGHT_DATA,g=p.getArray(),S=a.default.S_TEMP_VEC4,v=a.default.S_TEMP_VEC4_2,y=i,C=0,T=m+i;y<T;y++,C+=12)switch(d=(h=r[y]).getColor(),g[C]=d._m_X,g[C+1]=d._m_Y,g[C+2]=d._m_Z,g[C+3]=h.getTypeId(),h.getType()){case"DirectionalLight":c?(v.setToInXYZW(h.getDirection()._m_X,h.getDirection()._m_Y,h.getDirection()._m_Z,0),_.default.multiplyMV(S,v,t.getMainCamera().getViewMatrix()),g[C+4]=S._m_X,g[C+5]=S._m_Y,g[C+6]=S._m_Z,g[C+7]=-1):(g[C+4]=h.getDirection()._m_X,g[C+5]=h.getDirection()._m_Y,g[C+6]=h.getDirection()._m_Z,g[C+7]=-1),g[C+8]=0,g[C+9]=0,g[C+10]=0,g[C+11]=0;break;case"PointLight":c||(g[C+4]=h.getPosition()._m_X,g[C+5]=h.getPosition()._m_Y,g[C+6]=h.getPosition()._m_Z,g[C+7]=h.getInRadius()),g[C+8]=0,g[C+9]=0,g[C+10]=0,g[C+11]=0;break;case"SpotLight":c||(g[C+4]=h.getPosition()._m_X,g[C+5]=h.getPosition()._m_Y,g[C+6]=h.getPosition()._m_Z,g[C+7]=h.getInvSpotRange()),g[C+8]=h.getDirection()._m_X,g[C+9]=h.getDirection()._m_Y,g[C+10]=h.getDirection()._m_Z,g[C+11]=h.getPackedAngleCos()}return e.uniform4fv(f,p.getBufferData(),0,12*m),null!=u[s.S_CUR_LIGHT_COUNT]&&e.uniform1i(u[s.S_CUR_LIGHT_COUNT].loc,3*m),m+i}},{key:"draw",value:function(e,t,n,r,o){if(0==o.length){var i=n.m_LastSubShader.getContextVars();if(null!=i[s.S_AMBIENT_LIGHT_COLOR]){var a=t.AmbientLightColor;e.uniform3f(i[s.S_AMBIENT_LIGHT_COLOR].loc,a._m_X,a._m_Y,a._m_Z)}return null!=i[s.S_CUR_LIGHT_COUNT]&&e.uniform1i(i[s.S_CUR_LIGHT_COUNT].loc,0),void r.draw(n)}for(var _=t.getRender().getBatchLightSize(),u=0;u<o.length;)u=this._uploadLights(e,t,n,o,_,u),r.draw(n);t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=u}},{key:"drawArrays",value:function(e,t,n,r,o){if(0==o.length){var i=n.m_LastSubShader.getContextVars();if(null!=i[s.S_AMBIENT_LIGHT_COLOR]){var a=t.AmbientLightColor;e.uniform3f(i[s.S_AMBIENT_LIGHT_COLOR].loc,a._m_X,a._m_Y,a._m_Z)}return null!=i[s.S_CUR_LIGHT_COUNT]&&e.uniform1i(i[s.S_CUR_LIGHT_COUNT].loc,0),void r.forEach((function(e){e.draw(n)}))}var _=t.getRender().getBatchLightSize(),u=0;for(n.getRenderState().store();u<o.length;)u=this._uploadLights(e,t,n,o,_,u),r.forEach((function(e){e.draw(n)}));t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState()),n.BatchLightLastIndex=u}}])&&u(t.prototype,n),r&&u(t,r),s}(o.default);t.default=d,h(d,"PROGRAM_TYPE","SinglePassLighting"),h(d,"S_CUR_LIGHT_COUNT","_curLightCount"),h(d,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),h(d,"S_V_LIGHT_DATA","_vLightData"),h(d,"S_W_LIGHT_DATA","_wLightData")},2987:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(1393)),i=c(n(2320)),a=c(n(8435)),_=c(n(9784)),s=c(n(2475)),u=c(n(5604)),l=c(n(7141)),f=c(n(5141));function c(e){return e&&e.__esModule?e:{default:e}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,o=d(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),v(g(t=o.call(this,e)),"_m_Tiles",[]),v(g(t),"_m_LightsIndex",[]),v(g(t),"_m_LightsDecode",[]),v(g(t),"_m_LightsDecodeData",null),v(g(t),"_m_LightsIndexData",null),v(g(t),"_m_LightsData0",null),v(g(t),"_m_LightsData1",null),v(g(t),"_m_LightsData2",null),v(g(t),"_m_LightsData0Array",[]),v(g(t),"_m_LightsData1Array",[]),v(g(t),"_m_LightsData2Array",[]),v(g(t),"_m_PV",null),v(g(t),"_m_Temp_Vec3",new u.default),v(g(t),"_m_Temp_Vec4",new l.default),v(g(t),"_m_Temp_Vec4_2",new l.default),v(g(t),"_m_Temp_Vec4_3",new l.default),v(g(t),"_m_Cam_Up",new l.default),v(g(t),"_m_Cam_Left",new l.default),v(g(t),"_m_Light_Left",new l.default),v(g(t),"_m_Light_Up",new l.default),v(g(t),"_m_Light_Center",new l.default),v(g(t),"_m_ViewPortWidth",-1),v(g(t),"_m_ViewPortHeight",-1),v(g(t),"_m_CamLeftCoeff",-1),v(g(t),"_m_CamTopCoeff",-1),t._m_AccumulationLights=new a.default,t._m_AccumulationLights.setFlag(a.default.S_STATES[4],"On"),t._m_AccumulationLights.setFlag(a.default.S_STATES[1],"Off"),t._m_AccumulationLights.setFlag(a.default.S_STATES[5],["ONE","ONE"]),t}return t=c,(n=[{key:"reset",value:function(){this._m_m_LastSubShader=null}},{key:"_blendGIProbes",value:function(e,t,n){var r=n.m_LastSubShader.getContextVars();if(null!=r[c.S_WGIPROBE_SRC]){if(this._m_m_LastSubShader!=n.m_LastSubShader){var o=t.getGIProbes()[0],i=s.default.S_TEMP_VEC4;i.setToInXYZW(o.getPosition()._m_X,o.getPosition()._m_Y,o.getPosition()._m_Z,1/o.getRadius()+o.getPrefilterMipmap()),e.uniform4fv(r[c.S_WGIPROBE_SRC].loc,i.getBufferData(),0,4),i=o.getShCoeffsBufferData(),null!=r[c.S_SH_COEFFS_SRC]&&e.uniform3fv(r[c.S_SH_COEFFS_SRC].loc,i.getBufferData(),0,27),null!=r[c.S_PREF_ENV_MAP_SRC]&&o.getPrefilterEnvMap()._upload(e,r[c.S_PREF_ENV_MAP_SRC].loc),this._m_m_LastSubShader=n.m_LastSubShader}}else{var a=t.getGIProbes();a&&a.length>0&&n.m_LastMaterial.addDefine(_.default.S_GIPROBES_SRC,!0)}}},{key:"_createTexture",value:function(e,t,n,r){var o=new f.default(e);return e.getCanvas().getGLContext(),o.setTextureFormat(t,n,r),o.setWrap(e,f.default.S_WRAPS.S_CLAMP_TO_EDGE,f.default.S_WRAPS.S_CLAMP_TO_EDGE),o.setFilter(e,f.default.S_FILTERS.S_NEAREST,f.default.S_FILTERS.S_NEAREST),o.updateTextureFilter(),o.setAlignment(1),o}},{key:"_reset",value:function(e,t,n){this._m_LightsIndexData||(this._m_LightsIndexData=this._createTexture(t,e.RGB32F,e.RGB,e.FLOAT)),this._m_LightsDecodeData||(this._m_LightsDecodeData=this._createTexture(t,e.RGB32F,e.RGB,e.FLOAT)),this._m_LightsData0||(this._m_LightsData0=this._createTexture(t,e.RGBA32F,e.RGBA,e.FLOAT)),this._m_LightsData0Array.length=0,this._m_LightsData1||(this._m_LightsData1=this._createTexture(t,e.RGBA32F,e.RGBA,e.FLOAT)),this._m_LightsData1Array.length=0,this._m_LightsData2||(this._m_LightsData2=this._createTexture(t,e.RGBA32F,e.RGBA,e.FLOAT)),this._m_LightsData2Array.length=0;for(var r=0;r<n;r++)this._m_Tiles[r]=[];this._m_LightsDecode.length=0,this._m_LightsIndex.length=0}},{key:"_lightClip",value:function(e,t){var n=t.getBoundingVolume(),r=n.getRadius(),o=r*this._m_CamLeftCoeff,a=r*this._m_CamTopCoeff,_=n.getCenter(this._m_Temp_Vec3);_=this._m_Temp_Vec4.setToInXYZW(_._m_X,_._m_Y,_._m_Z,1),this._m_Temp_Vec4._m_W=1,this._m_Temp_Vec4_2._m_W=1,this._m_Temp_Vec4_3._m_W=1;var s=this._m_Cam_Left.multLength(o,this._m_Temp_Vec4_2).add(_),u=this._m_Cam_Up.multLength(a,this._m_Temp_Vec4_3).add(_);i.default.multiplyMV(this._m_Light_Left,s,this._m_PV),i.default.multiplyMV(this._m_Light_Up,u,this._m_PV),i.default.multiplyMV(this._m_Light_Center,_,this._m_PV),this._m_Light_Left._m_X/=this._m_Light_Left._m_W,this._m_Light_Left._m_Y/=this._m_Light_Left._m_W,this._m_Light_Up._m_X/=this._m_Light_Up._m_W,this._m_Light_Up._m_Y/=this._m_Light_Up._m_W,this._m_Light_Center._m_X/=this._m_Light_Center._m_W,this._m_Light_Center._m_Y/=this._m_Light_Center._m_W,this._m_Light_Left._m_X=this._m_ViewPortWidth*(1+this._m_Light_Left._m_X),this._m_Light_Up._m_X=this._m_ViewPortWidth*(1+this._m_Light_Up._m_X),this._m_Light_Center._m_X=this._m_ViewPortWidth*(1+this._m_Light_Center._m_X),this._m_Light_Left._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Left._m_Y),this._m_Light_Up._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Up._m_Y),this._m_Light_Center._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Center._m_Y);var l=Math.abs(this._m_Light_Left._m_X-this._m_Light_Center._m_X),f=Math.abs(this._m_Light_Center._m_Y-this._m_Light_Up._m_Y),c=-1,m=-1;this._m_Light_Center._m_Z<-this._m_Light_Center._m_W?(c=-this._m_Light_Center._m_X-l,m=-this._m_Light_Center._m_Y+f):(c=this._m_Light_Center._m_X-l,m=this._m_Light_Center._m_Y+f);var h=2*this._m_ViewPortHeight-m;return{left:c,right:2*l+c,top:2*f+h,bottom:h}}},{key:"_tile",value:function(e,t,n,r,o,i,a){for(var _=Math.max(Math.floor(i.left/e),0),s=Math.min(Math.ceil(i.right/e),t),u=Math.max(Math.floor(i.bottom/e),0),l=Math.min(Math.ceil(i.top/e),n),f=0,c=_;c<s;c++)for(var m=u;m<l;m++)(f=c+m*t)>=0&&f<r&&o[f].push(a)}},{key:"_tileLightDecode",value:function(e,t,n,r,o,i,a){var _=t.m_LastSubShader.getContextVars(),s=-1;s=a.length;var u=null;if(null!=_[c.S_LIGHT_NUM_SRC]&&e.uniform1i(_[c.S_LIGHT_NUM_SRC].loc,s),null!=_[c.S_TILE_V_LIGHT_DATA_0])u=1;else{if(null==_[c.S_TILE_W_LIGHT_DATA_0])return 0;u=0}for(var l=0,f=0,m=null;l<n;l++){s=(m=r[l]).length;for(var h=0;h<s;h++)this._m_LightsIndex.push(m[h]),this._m_LightsIndex.push(0),this._m_LightsIndex.push(0);this._m_LightsDecode.push(f),this._m_LightsDecode.push(s),this._m_LightsDecode.push(-1),f+=s}var d=Math.ceil(Math.sqrt(this._m_LightsIndex.length/3));null!=_[c.S_TILE_LIGHT_OFFSET_SIZE]&&e.uniform1f(_[c.S_TILE_LIGHT_OFFSET_SIZE].loc,d);for(var p=this._m_LightsIndex.length,g=d*d*3;p<g;p++)this._m_LightsIndex.push(-1);for(var S=0,v=this._m_LightsDecode.length;S<v;S+=3)this._m_LightsDecode[S+2]=this._m_LightsDecode[S]/d,this._m_LightsDecode[S]%=d;null!=_[c.S_TILE_LIGHT_DECODE_SRC]&&this._m_LightsDecodeData.uploadArrayData(_[c.S_TILE_LIGHT_DECODE_SRC].loc,o,i,new Float32Array(this._m_LightsDecode)),null!=_[c.S_TILE_LIGHT_INDEX_SRC]&&this._m_LightsIndexData.uploadArrayData(_[c.S_TILE_LIGHT_INDEX_SRC].loc,d,d,new Float32Array(this._m_LightsIndex));var y=null,C=null;s=a.length;for(var T=0;T<s;T++)switch(C=(y=a[T]).getColor(),this._m_LightsData0Array.push(C._m_X),this._m_LightsData0Array.push(C._m_Y),this._m_LightsData0Array.push(C._m_Z),this._m_LightsData0Array.push(y.getTypeId()),y.getType()){case"PointLight":u||(this._m_LightsData1Array.push(y.getPosition()._m_X),this._m_LightsData1Array.push(y.getPosition()._m_Y),this._m_LightsData1Array.push(y.getPosition()._m_Z),this._m_LightsData1Array.push(y.getInRadius())),this._m_LightsData2Array.push(0),this._m_LightsData2Array.push(0),this._m_LightsData2Array.push(0),this._m_LightsData2Array.push(0);break;case"SpotLight":u||(this._m_LightsData1Array.push(y.getPosition()._m_X),this._m_LightsData1Array.push(y.getPosition()._m_Y),this._m_LightsData1Array.push(y.getPosition()._m_Z),this._m_LightsData1Array.push(y.getInvSpotRange())),this._m_LightsData2Array.push(y.getDirection()._m_X),this._m_LightsData2Array.push(y.getDirection()._m_Y),this._m_LightsData2Array.push(y.getDirection()._m_Z),this._m_LightsData2Array.push(y.getPackedAngleCos())}var b=_[c.S_TILE_W_LIGHT_DATA_0]?_[c.S_TILE_W_LIGHT_DATA_0]:_[c.S_TILE_V_LIGHT_DATA_0];return b&&this._m_LightsData0.uploadArrayData(b.loc,this._m_LightsData0Array.length/4,1,new Float32Array(this._m_LightsData0Array)),(b=_[c.S_TILE_W_LIGHT_DATA_1]?_[c.S_TILE_W_LIGHT_DATA_1]:_[c.S_TILE_V_LIGHT_DATA_1])&&this._m_LightsData1.uploadArrayData(b.loc,this._m_LightsData1Array.length/4,1,new Float32Array(this._m_LightsData1Array)),(b=_[c.S_TILE_W_LIGHT_DATA_2]?_[c.S_TILE_W_LIGHT_DATA_2]:_[c.S_TILE_V_LIGHT_DATA_2])&&this._m_LightsData2.uploadArrayData(b.loc,this._m_LightsData2Array.length/4,1,new Float32Array(this._m_LightsData2Array)),1}},{key:"_uploadLights",value:function(e,t,n,r,o,a,_){var u=n.m_LastSubShader.getContextVars(),l=t.enableGIProbes();if(null!=u[c.S_BLEND_GI_PROBES]&&e.uniform1i(u[c.S_BLEND_GI_PROBES].loc,_&&l),null!=u[c.S_AMBIENT_LIGHT_COLOR])if(0==a){var f=t.AmbientLightColor;e.uniform3f(u[c.S_AMBIENT_LIGHT_COLOR].loc,f._m_X,f._m_Y,f._m_Z)}else e.uniform3f(u[c.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());l&&this._blendGIProbes(e,t,n);var m=null,h=null;null!=u[c.S_V_LIGHT_DATA]?(h=1,m=u[c.S_V_LIGHT_DATA].loc):null!=u[c.S_W_LIGHT_DATA]&&(h=0,m=u[c.S_W_LIGHT_DATA].loc);var d=o+a>r.length?r.length-a:o;if(null==m)return d+a;for(var p=null,g=null,S=s.default.S_LIGHT_DATA_4,v=S.getArray(),y=s.default.S_TEMP_VEC4,C=s.default.S_TEMP_VEC4_2,T=a,b=0,P=d+a;T<P;T++,b+=12)g=(p=r[T]).getColor(),v[b]=g._m_X,v[b+1]=g._m_Y,v[b+2]=g._m_Z,v[b+3]=p.getTypeId(),"DirectionalLight"===p.getType()&&(h?(C.setToInXYZW(p.getDirection()._m_X,p.getDirection()._m_Y,p.getDirection()._m_Z,0),i.default.multiplyMV(y,C,t.getMainCamera().getViewMatrix()),v[b+4]=y._m_X,v[b+5]=y._m_Y,v[b+6]=y._m_Z,v[b+7]=-1):(v[b+4]=p.getDirection()._m_X,v[b+5]=p.getDirection()._m_Y,v[b+6]=p.getDirection()._m_Z,v[b+7]=-1),v[b+8]=0,v[b+9]=0,v[b+10]=0,v[b+11]=0);return e.uniform4fv(m,S.getBufferData(),0,12*d),null!=u[c.S_CUR_LIGHT_COUNT]&&e.uniform1i(u[c.S_CUR_LIGHT_COUNT].loc,3*d),d+a}},{key:"draw",value:function(e,t,n,r,o,i){if(n.getRenderState().store(),0==i){if(0==o.length){var a=n.m_LastSubShader.getContextVars(),_=t.enableGIProbes();if(_&&this._blendGIProbes(e,t,n),null!=a[c.S_BLEND_GI_PROBES]&&e.uniform1i(a[c.S_BLEND_GI_PROBES].loc,_),null!=a[c.S_AMBIENT_LIGHT_COLOR]){var s=t.AmbientLightColor;e.uniform3f(a[c.S_AMBIENT_LIGHT_COLOR].loc,s._m_X,s._m_Y,s._m_Z)}return null!=a[c.S_CUR_LIGHT_COUNT]&&e.uniform1i(a[c.S_CUR_LIGHT_COUNT].loc,0),void r.draw(n)}for(var u=t.getRender().getBatchLightSize(),l=0;l<o.length;)l=this._uploadLights(e,t,n,o,u,l,0==l),r.draw(n)}else if(1==i){if(0==o.length)return;var f=null,m=t.getRender().getTileInfo(),h=m.tileSize,d=m.tileWidth,p=m.tileHeight,g=m.tileNum;if(this._reset(e,t,g),o.length>0){t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var S=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(S.m[0],S.m[4],S.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(S.m[1],S.m[5],S.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(S.m[0],S.m[4],S.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(S.m[1],S.m[5],S.m[9],1)}for(var v=0,y=o.length;v<y;v++)(f=this._lightClip(e,o[v]))&&this._tile(h,d,p,g,this._m_Tiles,f,v);this._tileLightDecode(e,n,g,this._m_Tiles,d,p,o),r.draw(n)}t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState())}},{key:"drawArrays",value:function(e,t,n,r,o,i){if(n.getRenderState().store(),0==i){if(0==o.length){var a=n.m_LastSubShader.getContextVars(),_=t.enableGIProbes();if(_&&this._blendGIProbes(e,t,n),null!=a[c.S_BLEND_GI_PROBES]&&e.uniform1i(a[c.S_BLEND_GI_PROBES].loc,_),null!=a[c.S_AMBIENT_LIGHT_COLOR]){var s=t.AmbientLightColor;e.uniform3f(a[c.S_AMBIENT_LIGHT_COLOR].loc,s._m_X,s._m_Y,s._m_Z)}return null!=a[c.S_CUR_LIGHT_COUNT]&&e.uniform1i(a[c.S_CUR_LIGHT_COUNT].loc,0),void r.forEach((function(e){e.draw(n)}))}for(var u=t.getRender().getBatchLightSize(),l=0;l<o.length;)l=this._uploadLights(e,t,n,o,u,l,0==l),r.forEach((function(e){e.draw(n)}))}else if(1==i){if(0==o.length)return;var f=null,m=t.getRender().getTileInfo(),h=m.tileSize,d=m.tileWidth,p=m.tileHeight,g=m.tileNum;if(this._reset(e,t,g),o.length>0){t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var S=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(S.m[0],S.m[4],S.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(S.m[1],S.m[5],S.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(S.m[0],S.m[4],S.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(S.m[1],S.m[5],S.m[9],1)}for(var v=0,y=o.length;v<y;v++)(f=this._lightClip(e,o[v]))&&this._tile(h,d,p,g,this._m_Tiles,f,v);this._tileLightDecode(e,n,g,this._m_Tiles,d,p,o),r.forEach((function(e){e.draw(n)}))}t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState())}}])&&m(t.prototype,n),r&&m(t,r),c}(o.default);t.default=y,v(y,"PROGRAM_TYPE","TilePassIBLLighting"),v(y,"S_CUR_LIGHT_COUNT","_curLightCount"),v(y,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),v(y,"S_V_LIGHT_DATA","_vLightData"),v(y,"S_W_LIGHT_DATA","_wLightData"),v(y,"S_LIGHT_NUM_SRC","_lightNum"),v(y,"S_TILE_LIGHT_DECODE_SRC","_tileLightDecode"),v(y,"S_TILE_LIGHT_INDEX_SRC","_tileLightIndex"),v(y,"S_TILE_LIGHT_OFFSET_SIZE","_tileLightOffsetSize"),v(y,"S_TILE_W_LIGHT_DATA_0","_tileWLightData0"),v(y,"S_TILE_V_LIGHT_DATA_0","_tileVLightData0"),v(y,"S_TILE_W_LIGHT_DATA_1","_tileWLightData1"),v(y,"S_TILE_V_LIGHT_DATA_1","_tileVLightData1"),v(y,"S_TILE_W_LIGHT_DATA_2","_tileWLightData2"),v(y,"S_TILE_V_LIGHT_DATA_2","_tileVLightData2"),v(y,"S_PREF_ENV_MAP_SRC","_prefEnvMap"),v(y,"S_WGIPROBE_SRC","_wGIProbe"),v(y,"S_SH_COEFFS_SRC","_ShCoeffs"),v(y,"S_BLEND_GI_PROBES","_blend_gi_probes")},2390:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(1393)),i=f(n(2320)),a=f(n(8435)),_=f(n(2475)),s=f(n(5604)),u=f(n(7141)),l=f(n(5141));function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,r,o=h(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),S(p(t=o.call(this,e)),"_m_Tiles",[]),S(p(t),"_m_LightsIndex",[]),S(p(t),"_m_LightsDecode",[]),S(p(t),"_m_LightsDecodeData",null),S(p(t),"_m_LightsIndexData",null),S(p(t),"_m_LightsData0",null),S(p(t),"_m_LightsData1",null),S(p(t),"_m_LightsData2",null),S(p(t),"_m_LightsData0Array",[]),S(p(t),"_m_LightsData1Array",[]),S(p(t),"_m_LightsData2Array",[]),S(p(t),"_m_PV",null),S(p(t),"_m_Temp_Vec3",new s.default),S(p(t),"_m_Temp_Vec4",new u.default),S(p(t),"_m_Temp_Vec4_2",new u.default),S(p(t),"_m_Temp_Vec4_3",new u.default),S(p(t),"_m_Cam_Up",new u.default),S(p(t),"_m_Cam_Left",new u.default),S(p(t),"_m_Light_Left",new u.default),S(p(t),"_m_Light_Up",new u.default),S(p(t),"_m_Light_Center",new u.default),S(p(t),"_m_ViewPortWidth",-1),S(p(t),"_m_ViewPortHeight",-1),S(p(t),"_m_CamLeftCoeff",-1),S(p(t),"_m_CamTopCoeff",-1),t._m_AccumulationLights=new a.default,t._m_AccumulationLights.setFlag(a.default.S_STATES[4],"On"),t._m_AccumulationLights.setFlag(a.default.S_STATES[1],"Off"),t._m_AccumulationLights.setFlag(a.default.S_STATES[5],["ONE","ONE"]),t}return t=f,(n=[{key:"_createTexture",value:function(e,t,n,r){var o=new l.default(e);return e.getCanvas().getGLContext(),o.setTextureFormat(t,n,r),o.setWrap(e,l.default.S_WRAPS.S_CLAMP_TO_EDGE,l.default.S_WRAPS.S_CLAMP_TO_EDGE),o.setFilter(e,l.default.S_FILTERS.S_NEAREST,l.default.S_FILTERS.S_NEAREST),o.updateTextureFilter(),o.setAlignment(1),o}},{key:"_reset",value:function(e,t,n){this._m_LightsIndexData||(this._m_LightsIndexData=this._createTexture(t,e.RGB32F,e.RGB,e.FLOAT)),this._m_LightsDecodeData||(this._m_LightsDecodeData=this._createTexture(t,e.RGB32F,e.RGB,e.FLOAT)),this._m_LightsData0||(this._m_LightsData0=this._createTexture(t,e.RGBA32F,e.RGBA,e.FLOAT)),this._m_LightsData0Array.length=0,this._m_LightsData1||(this._m_LightsData1=this._createTexture(t,e.RGBA32F,e.RGBA,e.FLOAT)),this._m_LightsData1Array.length=0,this._m_LightsData2||(this._m_LightsData2=this._createTexture(t,e.RGBA32F,e.RGBA,e.FLOAT)),this._m_LightsData2Array.length=0;for(var r=0;r<n;r++)this._m_Tiles[r]=[];this._m_LightsDecode.length=0,this._m_LightsIndex.length=0}},{key:"_lightClip",value:function(e,t){var n=t.getBoundingVolume(),r=n.getRadius(),o=r*this._m_CamLeftCoeff,a=r*this._m_CamTopCoeff,_=n.getCenter(this._m_Temp_Vec3);_=this._m_Temp_Vec4.setToInXYZW(_._m_X,_._m_Y,_._m_Z,1),this._m_Temp_Vec4._m_W=1,this._m_Temp_Vec4_2._m_W=1,this._m_Temp_Vec4_3._m_W=1;var s=this._m_Cam_Left.multLength(o,this._m_Temp_Vec4_2).add(_),u=this._m_Cam_Up.multLength(a,this._m_Temp_Vec4_3).add(_);i.default.multiplyMV(this._m_Light_Left,s,this._m_PV),i.default.multiplyMV(this._m_Light_Up,u,this._m_PV),i.default.multiplyMV(this._m_Light_Center,_,this._m_PV),this._m_Light_Left._m_X/=this._m_Light_Left._m_W,this._m_Light_Left._m_Y/=this._m_Light_Left._m_W,this._m_Light_Up._m_X/=this._m_Light_Up._m_W,this._m_Light_Up._m_Y/=this._m_Light_Up._m_W,this._m_Light_Center._m_X/=this._m_Light_Center._m_W,this._m_Light_Center._m_Y/=this._m_Light_Center._m_W,this._m_Light_Left._m_X=this._m_ViewPortWidth*(1+this._m_Light_Left._m_X),this._m_Light_Up._m_X=this._m_ViewPortWidth*(1+this._m_Light_Up._m_X),this._m_Light_Center._m_X=this._m_ViewPortWidth*(1+this._m_Light_Center._m_X),this._m_Light_Left._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Left._m_Y),this._m_Light_Up._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Up._m_Y),this._m_Light_Center._m_Y=this._m_ViewPortHeight*(1-this._m_Light_Center._m_Y);var l=Math.abs(this._m_Light_Left._m_X-this._m_Light_Center._m_X),f=Math.abs(this._m_Light_Center._m_Y-this._m_Light_Up._m_Y),c=-1,m=-1;this._m_Light_Center._m_Z<-this._m_Light_Center._m_W?(c=-this._m_Light_Center._m_X-l,m=-this._m_Light_Center._m_Y+f):(c=this._m_Light_Center._m_X-l,m=this._m_Light_Center._m_Y+f);var h=2*this._m_ViewPortHeight-m;return{left:c,right:2*l+c,top:2*f+h,bottom:h}}},{key:"_tile",value:function(e,t,n,r,o,i,a){for(var _=Math.max(Math.floor(i.left/e),0),s=Math.min(Math.ceil(i.right/e),t),u=Math.max(Math.floor(i.bottom/e),0),l=Math.min(Math.ceil(i.top/e),n),f=0,c=_;c<s;c++)for(var m=u;m<l;m++)(f=c+m*t)>=0&&f<r&&o[f].push(a)}},{key:"_tileLightDecode",value:function(e,t,n,r,o,i,a){var _=t.m_LastSubShader.getContextVars(),s=-1;s=a.length;var u=null;if(null!=_[f.S_LIGHT_NUM_SRC]&&e.uniform1i(_[f.S_LIGHT_NUM_SRC].loc,s),null!=_[f.S_TILE_V_LIGHT_DATA_0])u=1;else{if(null==_[f.S_TILE_W_LIGHT_DATA_0])return 0;u=0}for(var l=0,c=0,m=null;l<n;l++){s=(m=r[l]).length;for(var h=0;h<s;h++)this._m_LightsIndex.push(m[h]),this._m_LightsIndex.push(0),this._m_LightsIndex.push(0);this._m_LightsDecode.push(c),this._m_LightsDecode.push(s),this._m_LightsDecode.push(-1),c+=s}var d=Math.ceil(Math.sqrt(this._m_LightsIndex.length/3));null!=_[f.S_TILE_LIGHT_OFFSET_SIZE]&&e.uniform1f(_[f.S_TILE_LIGHT_OFFSET_SIZE].loc,d);for(var p=this._m_LightsIndex.length,g=d*d*3;p<g;p++)this._m_LightsIndex.push(-1);for(var S=0,v=this._m_LightsDecode.length;S<v;S+=3)this._m_LightsDecode[S+2]=this._m_LightsDecode[S]/d,this._m_LightsDecode[S]%=d;null!=_[f.S_TILE_LIGHT_DECODE_SRC]&&this._m_LightsDecodeData.uploadArrayData(_[f.S_TILE_LIGHT_DECODE_SRC].loc,o,i,new Float32Array(this._m_LightsDecode)),null!=_[f.S_TILE_LIGHT_INDEX_SRC]&&this._m_LightsIndexData.uploadArrayData(_[f.S_TILE_LIGHT_INDEX_SRC].loc,d,d,new Float32Array(this._m_LightsIndex));var y=null,C=null;s=a.length;for(var T=0;T<s;T++)switch(C=(y=a[T]).getColor(),this._m_LightsData0Array.push(C._m_X),this._m_LightsData0Array.push(C._m_Y),this._m_LightsData0Array.push(C._m_Z),this._m_LightsData0Array.push(y.getTypeId()),y.getType()){case"PointLight":u||(this._m_LightsData1Array.push(y.getPosition()._m_X),this._m_LightsData1Array.push(y.getPosition()._m_Y),this._m_LightsData1Array.push(y.getPosition()._m_Z),this._m_LightsData1Array.push(y.getInRadius())),this._m_LightsData2Array.push(0),this._m_LightsData2Array.push(0),this._m_LightsData2Array.push(0),this._m_LightsData2Array.push(0);break;case"SpotLight":u||(this._m_LightsData1Array.push(y.getPosition()._m_X),this._m_LightsData1Array.push(y.getPosition()._m_Y),this._m_LightsData1Array.push(y.getPosition()._m_Z),this._m_LightsData1Array.push(y.getInvSpotRange())),this._m_LightsData2Array.push(y.getDirection()._m_X),this._m_LightsData2Array.push(y.getDirection()._m_Y),this._m_LightsData2Array.push(y.getDirection()._m_Z),this._m_LightsData2Array.push(y.getPackedAngleCos())}var b=_[f.S_TILE_W_LIGHT_DATA_0]?_[f.S_TILE_W_LIGHT_DATA_0]:_[f.S_TILE_V_LIGHT_DATA_0];return b&&this._m_LightsData0.uploadArrayData(b.loc,this._m_LightsData0Array.length/4,1,new Float32Array(this._m_LightsData0Array)),(b=_[f.S_TILE_W_LIGHT_DATA_1]?_[f.S_TILE_W_LIGHT_DATA_1]:_[f.S_TILE_V_LIGHT_DATA_1])&&this._m_LightsData1.uploadArrayData(b.loc,this._m_LightsData1Array.length/4,1,new Float32Array(this._m_LightsData1Array)),(b=_[f.S_TILE_W_LIGHT_DATA_2]?_[f.S_TILE_W_LIGHT_DATA_2]:_[f.S_TILE_V_LIGHT_DATA_2])&&this._m_LightsData2.uploadArrayData(b.loc,this._m_LightsData2Array.length/4,1,new Float32Array(this._m_LightsData2Array)),1}},{key:"_uploadLights",value:function(e,t,n,r,o,a){var s=n.m_LastSubShader.getContextVars();if(null!=s[f.S_AMBIENT_LIGHT_COLOR])if(0==a){var u=t.AmbientLightColor;e.uniform3f(s[f.S_AMBIENT_LIGHT_COLOR].loc,u._m_X,u._m_Y,u._m_Z)}else e.uniform3f(s[f.S_AMBIENT_LIGHT_COLOR].loc,0,0,0),t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState());var l=null,c=null;null!=s[f.S_V_LIGHT_DATA]?(c=1,l=s[f.S_V_LIGHT_DATA].loc):null!=s[f.S_W_LIGHT_DATA]&&(c=0,l=s[f.S_W_LIGHT_DATA].loc);var m=o+a>r.length?r.length-a:o;if(null==l)return m+a;for(var h=null,d=null,p=_.default.S_LIGHT_DATA,g=p.getArray(),S=_.default.S_TEMP_VEC4,v=_.default.S_TEMP_VEC4_2,y=a,C=0,T=m+a;y<T;y++,C+=12)d=(h=r[y]).getColor(),g[C]=d._m_X,g[C+1]=d._m_Y,g[C+2]=d._m_Z,g[C+3]=h.getTypeId(),"DirectionalLight"===h.getType()&&(c?(v.setToInXYZW(h.getDirection()._m_X,h.getDirection()._m_Y,h.getDirection()._m_Z,0),i.default.multiplyMV(S,v,t.getMainCamera().getViewMatrix()),g[C+4]=S._m_X,g[C+5]=S._m_Y,g[C+6]=S._m_Z,g[C+7]=-1):(g[C+4]=h.getDirection()._m_X,g[C+5]=h.getDirection()._m_Y,g[C+6]=h.getDirection()._m_Z,g[C+7]=-1),g[C+8]=0,g[C+9]=0,g[C+10]=0,g[C+11]=0);return e.uniform4fv(l,p.getBufferData(),0,12*m),null!=s[f.S_CUR_LIGHT_COUNT]&&e.uniform1i(s[f.S_CUR_LIGHT_COUNT].loc,3*m),m+a}},{key:"draw",value:function(e,t,n,r,o,i){if(n.getRenderState().store(),0==i){if(0==o.length){var a=n.m_LastSubShader.getContextVars();if(null!=a[f.S_AMBIENT_LIGHT_COLOR]){var _=t.AmbientLightColor;e.uniform3f(a[f.S_AMBIENT_LIGHT_COLOR].loc,_._m_X,_._m_Y,_._m_Z)}return null!=a[f.S_CUR_LIGHT_COUNT]&&e.uniform1i(a[f.S_CUR_LIGHT_COUNT].loc,0),void r.draw(n)}for(var s=t.getRender().getBatchLightSize(),u=0;u<o.length;)u=this._uploadLights(e,t,n,o,s,u),r.draw(n)}else if(1==i){if(0==o.length)return;var l=null,c=t.getRender().getTileInfo(),m=c.tileSize,h=c.tileWidth,d=c.tileHeight,p=c.tileNum;if(this._reset(e,t,p),o.length>0){t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var g=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(g.m[0],g.m[4],g.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(g.m[1],g.m[5],g.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(g.m[0],g.m[4],g.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(g.m[1],g.m[5],g.m[9],1)}for(var S=0,v=o.length;S<v;S++)(l=this._lightClip(e,o[S]))&&this._tile(m,h,d,p,this._m_Tiles,l,S);this._tileLightDecode(e,n,p,this._m_Tiles,h,d,o),r.draw(n)}t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState())}},{key:"drawArrays",value:function(e,t,n,r,o,i){if(n.getRenderState().store(),0==i){if(0==o.length){var a=n.m_LastSubShader.getContextVars();if(null!=a[f.S_AMBIENT_LIGHT_COLOR]){var _=t.AmbientLightColor;e.uniform3f(a[f.S_AMBIENT_LIGHT_COLOR].loc,_._m_X,_._m_Y,_._m_Z)}return null!=a[f.S_CUR_LIGHT_COUNT]&&e.uniform1i(a[f.S_CUR_LIGHT_COUNT].loc,0),void r.forEach((function(e){e.draw(n)}))}for(var s=t.getRender().getBatchLightSize(),u=0;u<o.length;)u=this._uploadLights(e,t,n,o,s,u),r.forEach((function(e){e.draw(n)}))}else if(1==i){if(0==o.length)return;var l=null,c=t.getRender().getTileInfo(),m=c.tileSize,h=c.tileWidth,d=c.tileHeight,p=c.tileNum;if(this._reset(e,t,p),o.length>0){t.getRender()._checkRenderState(e,this._m_AccumulationLights,n.getRenderState()),this._m_ViewPortWidth=.5*t.getMainCamera().getWidth(),this._m_ViewPortHeight=.5*t.getMainCamera().getHeight(),this._m_PV=t.getMainCamera().getProjectViewMatrix(!0);var g=t.getMainCamera().getViewMatrix();this._m_Temp_Vec3.setToInXYZ(g.m[0],g.m[4],g.m[8]),this._m_CamLeftCoeff=1/t.getMainCamera().getFrustumPlane(1).getNormal().dot(this._m_Temp_Vec3),this._m_Temp_Vec3.setToInXYZ(g.m[1],g.m[5],g.m[9]),this._m_CamTopCoeff=1/t.getMainCamera().getFrustumPlane(2).getNormal().dot(this._m_Temp_Vec3),this._m_Cam_Left.setToInXYZW(g.m[0],g.m[4],g.m[8],1).multLength(-1),this._m_Cam_Up.setToInXYZW(g.m[1],g.m[5],g.m[9],1)}for(var S=0,v=o.length;S<v;S++)(l=this._lightClip(e,o[S]))&&this._tile(m,h,d,p,this._m_Tiles,l,S);this._tileLightDecode(e,n,p,this._m_Tiles,h,d,o),r.forEach((function(e){e.draw(n)}))}t.getRender()._checkRenderState(e,n.getRenderState().restore(),n.getRenderState())}}])&&c(t.prototype,n),r&&c(t,r),f}(o.default);t.default=v,S(v,"PROGRAM_TYPE","TilePassLighting"),S(v,"S_CUR_LIGHT_COUNT","_curLightCount"),S(v,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),S(v,"S_V_LIGHT_DATA","_vLightData"),S(v,"S_W_LIGHT_DATA","_wLightData"),S(v,"S_LIGHT_NUM_SRC","_lightNum"),S(v,"S_TILE_LIGHT_DECODE_SRC","_tileLightDecode"),S(v,"S_TILE_LIGHT_INDEX_SRC","_tileLightIndex"),S(v,"S_TILE_LIGHT_OFFSET_SIZE","_tileLightOffsetSize"),S(v,"S_TILE_W_LIGHT_DATA_0","_tileWLightData0"),S(v,"S_TILE_V_LIGHT_DATA_0","_tileVLightData0"),S(v,"S_TILE_W_LIGHT_DATA_1","_tileWLightData1"),S(v,"S_TILE_V_LIGHT_DATA_1","_tileVLightData1"),S(v,"S_TILE_W_LIGHT_DATA_2","_tileWLightData2"),S(v,"S_TILE_V_LIGHT_DATA_2","_tileVLightData2")},3061:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=R(n(6798)),i=R(n(9650)),a=R(n(8435)),_=R(n(7341)),s=R(n(9784)),u=R(n(4008)),l=R(n(8113)),f=R(n(1393)),c=R(n(6148)),m=R(n(8546)),h=R(n(3846)),d=R(n(3370)),p=R(n(9510)),g=R(n(2475)),S=R(n(5734)),v=R(n(870)),y=R(n(4658)),C=R(n(8388)),T=R(n(2390)),b=R(n(6987)),P=R(n(2987)),E=R(n(1759)),D=R(n(1491));function R(e){return e&&e.__esModule?e:{default:e}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(R,e);var t,n,r,i=x(R);function R(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,R),(n=i.call(this,e,t))._m_Drawables=[],n._m_DrawableIDs={},n._m_VisDrawables=[],n._m_FramePictures=[],n._m_FramePictureIDs=[],n._m_Sky=null,n._m_Pipeline={},n._m_PipelineConfig={},n._m_PriorityTechnology="",n._m_FrameContext=new o.default,n._m_RenderPrograms={},n._m_OpaqueRenderState=new a.default,n._m_TranslucentRenderState=new a.default,n._m_TranslucentRenderState.setFlag(a.default.S_STATES[4],"On"),n._m_TranslucentRenderState.setFlag(a.default.S_STATES[5],["SRC_ALPHA","ONE_MINUS_SRC_ALPHA"]),n._m_BatchLightSize=4,n._m_GammaCorrection=!0,n._m_GammaFactor=.45,n._m_ToneMapping=!1,n._m_TileInfo={tileSize:0,tileWidth:0,tileHeight:0,tileNum:0},n._m_Scene.getCanvas().on("resize",(function(e,t){n.updateTileInfo(e,t)})),n.setTileSize(32),n}return t=R,(n=[{key:"getType",value:function(){return"Render"}},{key:"updateTileInfo",value:function(e,t){var n=this._m_TileInfo.tileSize;this._m_TileInfo.tileWidth=Math.floor(e/n),this._m_TileInfo.tileHeight=Math.floor(t/n),this._m_TileInfo.tileNum=this._m_TileInfo.tileWidth*this._m_TileInfo.tileHeight}},{key:"setTileSize",value:function(e){e!=this._m_TileInfo.tileSize&&(this._m_TileInfo.tileSize=e,this.updateTileInfo(this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight()))}},{key:"getTileInfo",value:function(){return this._m_TileInfo}},{key:"setPriorityTechnology",value:function(e){this._m_PriorityTechnology=e}},{key:"getPriorityTechnology",value:function(){return this._m_PriorityTechnology}},{key:"setBatchLightSize",value:function(e){e!=this._m_BatchLightSize&&(e>50&&(e=50),g.default.mallocLightData(e),this._m_BatchLightSize=e,s.default.resizeBatchLightSize(e))}},{key:"getBatchLightSize",value:function(){return this._m_BatchLightSize}},{key:"startUp",value:function(){var e=this,t=this._m_Scene.getCanvas().getGLContext(),n=t.getExtension("WEBKIT_WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture");h.default.debug("depthEXT:",n);var r=this._m_Scene.getCanvas().getWidth(),o=this._m_Scene.getCanvas().getHeight(),i=new _.default(t,R.DEFAULT_DEFERRED_SHADING_FRAMEBUFFER,r,o);this._m_FrameContext.addFrameBuffer(R.DEFAULT_DEFERRED_SHADING_FRAMEBUFFER,i),i.addTexture(t,s.default.S_G_BUFFER0_SRC,t.RGBA16F,0,t.RGBA,t.FLOAT,t.COLOR_ATTACHMENT0,!0),i.addTexture(t,s.default.S_G_BUFFER1_SRC,t.RGBA32F,0,t.RGBA,t.FLOAT,t.COLOR_ATTACHMENT1,!0),i.addTexture(t,s.default.S_G_BUFFER2_SRC,t.RGBA16F,0,t.RGBA,t.FLOAT,t.COLOR_ATTACHMENT2,!0),i.addTexture(t,s.default.S_G_DEPTH_SRC,t.DEPTH_COMPONENT24,0,t.DEPTH_COMPONENT,t.UNSIGNED_INT,t.DEPTH_ATTACHMENT,!1),i.finish(t,this._m_Scene,!0);var a=new _.default(t,R.DEFAULT_FORWARD_SHADING_FRAMEBUFFER,r,o);this._m_FrameContext.addFrameBuffer(R.DEFAULT_FORWARD_SHADING_FRAMEBUFFER,a),a.addTexture(t,s.default.S_FORWARD_COLOR_MAP_SRC,t.RGBA16F,0,t.RGBA,t.FLOAT,t.COLOR_ATTACHMENT0,!1),a.addBuffer(t,"depth",t.DEPTH_COMPONENT24,t.DEPTH_ATTACHMENT),a.finish(t,this._m_Scene,!0);var p=new u.default(this._m_Scene,{id:"for_m",frameContext:this.getFrameContext(),materialDef:l.default.parse(d.default.S_DEFAULT_OUT_COLOR_DEF_DATA)});p.setParam("gammaFactor",(new E.default).valueOf(this._m_GammaFactor)),a.getFramePicture().setMaterial(p),this._m_FrameContext._m_DefaultFrameBuffer=a.getFrameBuffer();var g=new _.default(t,R.DEFAULT_POST_FILTER_SHADING_FRAMEBUFFER,r,o);this._m_FrameContext.addFrameBuffer(R.DEFAULT_POST_FILTER_SHADING_FRAMEBUFFER,g),g.addTexture(t,s.default.S_IN_SCREEN_SRC,t.RGBA16F,0,t.RGBA,t.FLOAT,t.COLOR_ATTACHMENT0,!1),g.addTexture(t,s.default.S_IN_DEPTH_SRC,t.DEPTH_COMPONENT24,0,t.DEPTH_COMPONENT,t.UNSIGNED_INT,t.DEPTH_ATTACHMENT,!1),g.finish(t,this._m_Scene,!1),this._m_FrameContext._m_DefaultPostFilterFrameBuffer=g.getFrameBuffer(),this._m_RenderPrograms[f.default.PROGRAM_TYPE]=new f.default,this._m_RenderPrograms[c.default.PROGRAM_TYPE]=new c.default,this._m_RenderPrograms[y.default.PROGRAM_TYPE]=new y.default,this._m_RenderPrograms[m.default.PROGRAM_TYPE]=new m.default,this._m_RenderPrograms[C.default.PROGRAM_TYPE]=new C.default,this._m_RenderPrograms[T.default.PROGRAM_TYPE]=new T.default,this._m_RenderPrograms[P.default.PROGRAM_TYPE]=new P.default,this._m_PipelineConfig[R.FORWARD]=new S.default({render:this}),this._m_PipelineConfig[R.DEFERRED_SHADING]=new v.default({render:this}),this._m_PipelineConfig[R.TILE_DEFERRED_SHADING]=new b.default({render:this}),this.enablePipeline(R.FORWARD),this.enablePipeline(R.DEFERRED_SHADING),this._m_Scene.getCanvas().on("resize",(function(n,r){e._m_FrameContext.resize(t,n,r),e._m_FrameContext._m_DefaultFrameBuffer=e._m_FrameContext.getFrameBuffer(R.DEFAULT_FORWARD_SHADING_FRAMEBUFFER).getFrameBuffer(),e._m_FrameContext._m_DefaultPostFilterFrameBuffer=e._m_FrameContext.getFrameBuffer(R.DEFAULT_POST_FILTER_SHADING_FRAMEBUFFER).getFrameBuffer()}))}},{key:"beginPostFilter",value:function(){var e=this._m_Scene.getCanvas().getGLContext();e.bindFramebuffer(e.READ_FRAMEBUFFER,this._m_FrameContext._m_DefaultFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._m_FrameContext._m_DefaultPostFilterFrameBuffer),e.blitFramebuffer(0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight(),0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight(),e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._m_FrameContext._m_DefaultFrameBuffer),"On"==this._m_FrameContext.getRenderState().getFlag(a.default.S_STATES[3])&&e.disable(e.DEPTH_TEST)}},{key:"swapPostFilter",value:function(){var e=this._m_Scene.getCanvas().getGLContext();e.bindFramebuffer(e.READ_FRAMEBUFFER,this._m_FrameContext._m_DefaultFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._m_FrameContext._m_DefaultPostFilterFrameBuffer),e.blitFramebuffer(0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight(),0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight(),e.COLOR_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(e.FRAMEBUFFER,this._m_FrameContext._m_DefaultFrameBuffer)}},{key:"finishPostFilter",value:function(){}},{key:"enablePipeline",value:function(e){var t=-1;switch(e){case R.FORWARD:t=0;break;case R.DEFERRED_SHADING:case R.TILE_DEFERRED_SHADING:t=1}t>=0?this._m_Pipeline[t]=this._m_PipelineConfig[e]:h.default.warn("无效pipeline!")}},{key:"getVisDrawables",value:function(){return this._m_VisDrawables}},{key:"getDrawableIDs",value:function(){return this._m_DrawableIDs}},{key:"getFrameContext",value:function(){return this._m_FrameContext}},{key:"setSky",value:function(e){this._m_Sky!=e&&(this._m_Sky=e)}},{key:"getSky",value:function(){return this._m_Sky}},{key:"addDrawable",value:function(e){e.isFramePicture&&e.isFramePicture()?this._m_FramePictureIDs[e.getId()]||(this._m_FramePictureIDs[e.getId()]=e,this._m_FramePictures.push(e)):e.isSky&&e.isSky()||this._m_DrawableIDs[e.getId()]||(this._m_DrawableIDs[e.getId()]=e,this._m_Drawables.push(e))}},{key:"removeDrawable",value:function(e){this._m_DrawableIDs[e.getId()]&&(this._m_DrawableIDs[e.getId()]=null,this._m_Drawables.remove(e))}},{key:"_checkRenderState",value:function(e,t,n){var r=t.getState(),o=!1;for(var i in r)if(n.getFlag(i)!=r[i])switch(o=!0,n.setFlag(i,r[i]),i){case a.default.S_STATES[0]:switch(r[i]){case a.default.S_FACE_CULL_BACK:e.enable(e.CULL_FACE),e.cullFace(e.BACK);break;case a.default.S_FACE_CULL_FRONT:e.enable(e.CULL_FACE),e.cullFace(e.FRONT);break;case a.default.S_FACE_CULL_FRONT_AND_BACK:e.enable(e.CULL_FACE),e.cullFace(e.FRONT_AND_BACK);break;case a.default.S_FACE_CULL_OFF:e.disable(e.CULL_FACE)}break;case a.default.S_STATES[1]:"On"==r[i]?e.depthMask(!0):"Off"==r[i]&&e.depthMask(!1);break;case a.default.S_STATES[2]:"On"==r[i]?e.colorMask(!0,!0,!0,!0):"Off"==r[i]&&e.colorMask(!1,!1,!1,!1);break;case a.default.S_STATES[3]:"On"==r[i]?e.enable(e.DEPTH_TEST):"Off"==r[i]&&e.disable(e.DEPTH_TEST);break;case a.default.S_STATES[4]:"On"==r[i]?e.enable(e.BLEND):"Off"==r[i]&&e.disable(e.BLEND);break;case a.default.S_STATES[5]:var _=null,s=null;switch(r[i][0]){case"SRC_ALPHA":_=e.SRC_ALPHA;break;case"ONE":_=e.ONE}switch(r[i][1]){case"SRC_ALPHA":s=e.SRC_ALPHA;case"ONE_MINUS_SRC_COLOR":s=e.ONE_MINUS_SRC_COLOR;break;case"ONE_MINUS_SRC_ALPHA":s=e.ONE_MINUS_SRC_ALPHA;break;case"ONE":s=e.ONE}null!=_&&null!=s&&e.blendFunc(_,s);break;case a.default.S_STATES[6]:"On"==r[i]?e.enable(e.SCISSOR_TEST):"Off"==r[i]&&e.disable(e.SCISSOR_TEST);break;case a.default.S_STATES[7]:"On"==r[i]?e.enable(e.POLYGON_OFFSET_FILL):"Off"==r[i]&&e.disable(e.POLYGON_OFFSET_FILL);break;case a.default.S_STATES[8]:e.polygonOffset(r[i][0],r[i][1])}return o}},{key:"_resetFrameContext",value:function(){this._m_FrameContext.reset()}},{key:"_resetRenderContext",value:function(){for(var e in this._m_RenderPrograms)this._m_RenderPrograms[e].reset()}},{key:"_drawFrame",value:function(e){var t=this._m_Scene.getCanvas().getGLContext();this.fire(R.PRE_FRAME,[e]),this._resetFrameContext(),this._resetRenderContext(),this._checkRenderState(t,this._m_FrameContext.getRenderState().reset(),this._m_FrameContext.getRenderState());var n=this._m_VisDrawables,r=!1,o=!1,i=!1,_=!1,s=this._m_Scene.getVisLights(),u={},l=[],f=[];n.forEach((function(e){e.isGUI()?(i=!0,f[e.getMaterial().getId()]||(f[e.getMaterial().getId()]=[]),f[e.getMaterial().getId()].push(e)):e.isOpaque()?(r=!0,u[e.getMaterial().getId()]||(u[e.getMaterial().getId()]=[]),u[e.getMaterial().getId()].push(e)):e.isTranslucent()&&(o=!0,l.push(e))})),this.fire(R.POST_QUEUE,[e]),r&&this._checkRenderState(t,this._m_OpaqueRenderState,this._m_FrameContext.getRenderState()),_=this._m_Pipeline[1].render({gl:t,scene:this._m_Scene,frameContext:this._m_FrameContext,lights:s,bucket:u});var c=this._m_Scene.getMainCamera().demandFilter();if(_||((this._m_GammaCorrection||c)&&(_=!0,t.bindFramebuffer(t.FRAMEBUFFER,this._m_FrameContext._m_DefaultFrameBuffer),this._m_FrameContext.m_LastFrameBuffer=this._m_FrameContext._m_DefaultFrameBuffer),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)),this._m_Pipeline[0].render({gl:t,scene:this._m_Scene,frameContext:this._m_FrameContext,lights:s,opaque:!0,bucket:u}),this._drawEnv(t,s),o&&(this._checkRenderState(t,this._m_TranslucentRenderState,this._m_FrameContext.getRenderState()),l=p.default.sortTranslucentBucket(this._m_Scene.getMainCamera(),l),this._m_Pipeline[0].render({gl:t,scene:this._m_Scene,frameContext:this._m_FrameContext,lights:s,translucent:!0,bucket:l})),c&&this.beginPostFilter(),this.fire(R.POST_FRAME,[e]),c&&("On"==this._m_FrameContext.getRenderState().getFlag(a.default.S_STATES[3])&&t.enable(t.DEPTH_TEST),this.finishPostFilter()),i&&(this._checkRenderState(t,this._m_TranslucentRenderState,this._m_FrameContext.getRenderState()),this._m_Pipeline[0].render({gl:t,scene:this._m_Scene,frameContext:this._m_FrameContext,lights:s,opaque:!0,bucket:f})),_){t.bindFramebuffer(t.FRAMEBUFFER,null);var m=this._m_FrameContext.getFrameBuffer(R.DEFAULT_FORWARD_SHADING_FRAMEBUFFER).getFramePicture(),h=m.getMaterial().getCurrentTechnology().getSubPasss(R.FORWARD);m.getMaterial()._selectSubShader(h.getSubShaders()[0].subShader);var d=h.getSubShaders()[0].subShader.getRenderDatas();for(var g in"On"==this._m_FrameContext.getRenderState().getFlag(a.default.S_STATES[3])&&t.disable(t.DEPTH_TEST),d)t.activeTexture(t.TEXTURE0+d[g].loc),t.bindTexture(t.TEXTURE_2D,this._m_FrameContext.getFrameBuffer(d[g].refId).getTexture(d[g].dataId).getLoc());m.draw(this._m_FrameContext),"On"==this._m_FrameContext.getRenderState().getFlag(a.default.S_STATES[3])&&t.enable(t.DEPTH_TEST),this._m_FrameContext.m_LastFrameBuffer=null}}},{key:"useDefaultFrame",value:function(){if(null!=this._m_FrameContext.m_LastFrameBuffer){var e=this._m_Scene.getCanvas().getGLContext();e.bindFramebuffer(e.FRAMEBUFFER,null),this._m_FrameContext.m_LastFrameBuffer=null}}},{key:"setViewPort",value:function(e,t,n,r,o){e.viewport(t,n,r,o)}},{key:"useForcedMat",value:function(e,t,n){var r=t.getCurrentTechnology().getSubPasss(e);if(r){var o=r.getSubShaders(),i=0;for(var a in o){if(i==n){t._selectSubShader(o[a].subShader);var _=o[a].subShader.getRenderDatas(),s=this._m_Scene.getCanvas().getGLContext();for(var u in _)s.activeTexture(s.TEXTURE0+_[u].loc),s.bindTexture(s.TEXTURE_2D,this._m_FrameContext.getFrameBuffer(_[u].refId).getTexture(_[u].dataId).getLoc());break}i++}}}},{key:"draw",value:function(e,t,n,r){var o=null,i=null,a=null;if(n){var _=this._m_FrameContext.m_LastFrameBuffer,s=null;for(var u in n)if(a=(i=this._m_Scene.getComponent(u)).getCurrentTechnology().getSubPasss(t))for(var l in o=a.getSubShaders()){i._selectSubShader(o[l].subShader),null!=o[l].subShader.getFBId()?(s=this._m_FrameContext.getFrameBuffer(o[l].subShader.getFBId()),this._m_FrameContext.m_LastFrameBuffer!=s&&(this._m_FrameContext.m_LastFrameBuffer=s,e.bindFramebuffer(e.FRAMEBUFFER,s.getFrameBuffer()),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))):this._m_FrameContext.m_LastFrameBuffer!=_&&(e.bindFramebuffer(e.FRAMEBUFFER,_),this._m_FrameContext.m_LastFrameBuffer=_);var f=o[l].subShader.getRenderDatas();for(var c in f)e.activeTexture(e.TEXTURE0+f[c].loc),e.bindTexture(e.TEXTURE_2D,this._m_FrameContext.getFrameBuffer(f[c].refId).getTexture(f[c].dataId).getLoc());o[l].renderState&&this._checkRenderState(e,o[l].renderState,this._m_FrameContext.getRenderState()),this._m_RenderPrograms[o[l].subShader.getRenderProgramType()].drawArrays(e,this._m_Scene,this._m_FrameContext,n[u],r)}this._m_FrameContext.m_LastFrameBuffer!=_&&(e.bindFramebuffer(e.FRAMEBUFFER,_),this._m_FrameContext.m_LastFrameBuffer=_)}}},{key:"_drawEnv",value:function(e,t){if(this._m_Sky){var n=null,r=this._m_Sky.getMaterial(),o=r.getCurrentTechnology().getSubPasss(R.FORWARD);if(o)for(var i in n=o.getSubShaders())n[i].renderState&&this._checkRenderState(e,n[i].renderState,this._m_FrameContext.getRenderState()),r._selectSubShader(n[i].subShader),this._m_RenderPrograms[n[i].subShader.getRenderProgramType()].draw(e,this._m_Scene,this._m_FrameContext,this._m_Sky,t)}}},{key:"enableGammaCorrection",value:function(e){this._m_GammaCorrection=e}},{key:"enableToneMapping",value:function(e){e!=this._m_ToneMapping&&(this._m_ToneMapping=e,this._m_FrameContext.getFrameBuffer(R.DEFAULT_FORWARD_SHADING_FRAMEBUFFER).getFramePicture().getMaterial().setParam("toneMapping",(new D.default).valueOf(this._m_ToneMapping)))}},{key:"setGammaFactor",value:function(e){e!=this._m_GammaFactor&&(this._m_GammaFactor=e,this._m_FrameContext.getFrameBuffer(R.DEFAULT_FORWARD_SHADING_FRAMEBUFFER).getFramePicture().getMaterial().setParam("gammaFactor",(new E.default).valueOf(this._m_GammaFactor)))}},{key:"render",value:function(e){this._drawFrame(e)}},{key:"_sortDrawList",value:function(){}}])&&w(t.prototype,n),r&&w(t,r),R}(i.default);t.default=O,I(O,"FORWARD","Forward"),I(O,"DEFERRED_SHADING","DeferredShading"),I(O,"TILE_DEFERRED_SHADING","TileDeferredShading"),I(O,"DEFAULT_DEFERRED_SHADING_FRAMEBUFFER","DefaultDeferredShadingFrameBuffer"),I(O,"DEFAULT_FORWARD_SHADING_FRAMEBUFFER","DefaultForwardShadingFrameBuffer"),I(O,"DEFAULT_POST_FILTER_SHADING_FRAMEBUFFER","DefaultPostFilterShadingFrameBuffer"),I(O,"PRE_FRAME","preFrame"),I(O,"POST_QUEUE","postQueue"),I(O,"POST_FRAME","postFrame")},9510:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m_OpaqueBucket={},this.m_TranslucentBucket={}}var t,r,o;return t=e,o=[{key:"sortTranslucentBucket",value:function(t,n){var r=e._TEMP_BUCKET_ARRAY;r.length=0;var o=e._TEMP_ARRAY;o.length=0;var i=t.getEye();return n.forEach((function(e){o.push([e.getLocalTranslation().distanceSq(i),e])})),o.sort((function(e,t){return t[0]-e[0]})),o.forEach((function(e){r.push(e[1])})),r}}],(r=[{key:"addToOpaque",value:function(e){}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o,r(o,"_TEMP_BUCKET_ARRAY",[]),r(o,"_TEMP_ARRAY",[])},1550:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=d(n(9650)),i=d(n(5604)),a=d(n(2320)),_=d(n(2475)),s=d(n(9784)),u=d(n(7088)),l=d(n(431)),f=d(n(3846)),c=d(n(3061)),m=d(n(7120)),h=d(n(9271));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(d,e);var t,n,r,o=S(d);function d(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(n=o.call(this,e,t))._m_Eye=new i.default(0,0,10),n._m_At=new i.default(0,0,-10),n._m_Up=new i.default(0,1,0),n._m_Dir=new i.default,n._m_ViewMatrix=new a.default,n._m_ProjectMatrix=new a.default,n._m_ProjectViewMatrix=new a.default,n._m_ViewMatrixUpdate=!1,n._m_ProjectMatrixUpdate=!1,n._m_ProjectViewMatrixUpdate=!1,n._m_ParallelProjection=null!=t.parallelProjection&&t.parallelProjection,n._m_Fovy=t.fovy||45,n._m_FixedAspect=null!=t.aspect&&t.aspect,n._m_IsRenderingCamera=!1,n._m_FrustumPlane=[];for(var r=0;r<6;r++)n._m_FrustumPlane.push(new u.default);n._m_FrustumNear=.1,n._m_FrustumFar=1e3,n._m_FrustumLeft=0,n._m_FrustumRight=0,n._m_FrustumTop=0,n._m_FrustumBottom=0,n._m_ResolutionInverse=new h.default,n._m_CoeffLeft=new Array(2).fill(0),n._m_CoeffRight=new Array(2).fill(0),n._m_CoeffBottom=new Array(2).fill(0),n._m_CoeffTop=new Array(2).fill(0),n._m_FrustumMask=0;var _=n._m_Scene.getCanvas(),l=_.getGLContext();return n._m_Width=t.width||_.getWidth(),n._m_Height=t.height||_.getHeight(),n._m_FixedSize=null!=t.fixedSize&&t.fixedSize,n._m_ViewMatrix.lookAt(n._m_Eye,n._m_At,n._m_Up),n._m_ViewMatrixUpdate=!0,n._m_ProjectMatrixUpdate=!0,n._m_UpdateCameraPosition=!0,l.viewport(0,0,n._m_Width,n._m_Height),n._init(),_.on("resize",(function(){if(!n._m_FixedSize){if(n._m_Width=_.getWidth(),n._m_Height=_.getHeight(),n._m_IsRenderingCamera)l.viewport(0,0,n._m_Width,n._m_Height),n._m_ResolutionInverse.setToInXY(1/n._m_Width,1/n._m_Height),n._m_Scene.getRender().getFrameContext().getContext(s.default.S_RESOLUTION_INVERSE)&&(l.bindBuffer(l.UNIFORM_BUFFER,n.VIEW_PORT),l.bufferSubData(l.UNIFORM_BUFFER,0,n._m_ResolutionInverse.getBufferData()),l.bindBuffer(l.UNIFORM_BUFFER,null));n._m_ParallelProjection?n._m_ProjectMatrix.parallelM(n._m_FrustumLeft,n._m_FrustumRight,n._m_FrustumTop,n._m_FrustumBottom,n._m_FrustumNear,n._m_FrustumFar):n._m_ProjectMatrix.perspectiveM(n._m_Fovy,n._m_FixedAspect?n._m_FixedAspect:1*n._m_Width/n._m_Height,n._m_FrustumNear,n._m_FrustumFar),n._m_ProjectMatrixUpdate=!0}n._doUpdate()})),n._m_Filters=[],n._m_Scene.getRender().on(c.default.POST_QUEUE,(function(e){n._m_IsRenderingCamera&&n.demandFilter()&&n._m_Filters.forEach((function(e){e.isEnable()&&e.preFrame()}))})),n._m_Scene.getRender().on(c.default.POST_FRAME,(function(e){if(n._m_IsRenderingCamera&&n.demandFilter()){var t=n._m_Filters.length,r=0;n._m_Filters.forEach((function(e){r++,e.isEnable()&&(e.postFilter(),r<t&&n._m_Scene.getRender().swapPostFilter())}))}})),n}return t=d,(n=[{key:"_init",value:function(){if(this._m_ParallelProjection)this._m_FrustumNear=1,this._m_FrustumFar=2,this._m_FrustumLeft=-.5,this._m_FrustumRight=.5,this._m_FrustumTop=.5,this._m_FrustumBottom=-.5,this._m_ProjectMatrix.parallelM(this._m_FrustumLeft,this._m_FrustumRight,this._m_FrustumTop,this._m_FrustumBottom,this._m_FrustumNear,this._m_FrustumFar);else{var e=1*this._m_Width/this._m_Height,t=.1*Math.tan(.5*l.default.toRadians(this._m_Fovy)),n=t*e;f.default.debug("w:"+n+";h:"+t+";as:"+e),this._m_FrustumLeft=-n,this._m_FrustumRight=n,this._m_FrustumBottom=-t,this._m_FrustumTop=t,this._m_FrustumNear=.1,this._m_FrustumFar=1e3,this._m_ProjectMatrix.perspectiveM(this._m_Fovy,this._m_FixedAspect?this._m_FixedAspect:1*this._m_Width/this._m_Height,this._m_FrustumNear,this._m_FrustumFar)}var r=this._m_Scene.getRender().getFrameContext(),o=this._m_Scene.getCanvas().getGLContext();if(r.getContextBlock("MAT"))this.MAT=r.getContextBlock("MAT");else{var i=o.createBuffer();this.MAT=i,o.bindBuffer(o.UNIFORM_BUFFER,i),o.bufferData(o.UNIFORM_BUFFER,192,o.STATIC_DRAW),o.bindBuffer(o.UNIFORM_BUFFER,null),o.bindBufferRange(o.UNIFORM_BUFFER,s.default.BLOCKS.MAT.blockIndex,i,0,192),r.addContextBlock("MAT",this.MAT)}if(r.getContextBlock("VIEW"))this.VIEW=r.getContextBlock("VIEW");else{var a=o.createBuffer();this.VIEW=a,o.bindBuffer(o.UNIFORM_BUFFER,a),o.bufferData(o.UNIFORM_BUFFER,12,o.STATIC_DRAW),o.bindBuffer(o.UNIFORM_BUFFER,null),o.bindBufferRange(o.UNIFORM_BUFFER,s.default.BLOCKS.VIEW.blockIndex,a,0,12),r.addContextBlock("VIEW",this.VIEW)}if(r.getContextBlock("VIEW_PORT"))this.VIEW_PORT=r.getContextBlock("VIEW_PORT");else{var _=o.createBuffer();this.VIEW_PORT=_,o.bindBuffer(o.UNIFORM_BUFFER,_),o.bufferData(o.UNIFORM_BUFFER,8,o.STATIC_DRAW),o.bindBuffer(o.UNIFORM_BUFFER,null),o.bindBufferRange(o.UNIFORM_BUFFER,s.default.BLOCKS.VIEW_PORT.blockIndex,_,0,8),r.addContextBlock("VIEW_PORT",this.VIEW_PORT)}this._m_ResolutionInverse.setToInXY(1/this._m_Width,1/this._m_Height),r.getContext(s.default.S_RESOLUTION_INVERSE)&&(o.bindBuffer(o.UNIFORM_BUFFER,this.VIEW_PORT),o.bufferSubData(o.UNIFORM_BUFFER,0,this._m_ResolutionInverse.getBufferData()),o.bindBuffer(o.UNIFORM_BUFFER,null)),this._doUpdate()}},{key:"setFrustum",value:function(e,t,n,r,o,i){this._m_FrustumNear=o,this._m_FrustumFar=i,this._m_FrustumLeft=e,this._m_FrustumRight=t,this._m_FrustumTop=n,this._m_FrustumBottom=r,this._m_ProjectMatrix.parallelM(this._m_FrustumLeft,this._m_FrustumRight,this._m_FrustumTop,this._m_FrustumBottom,this._m_FrustumNear,this._m_FrustumFar)}},{key:"setFrustumPerspective",value:function(e,t,n,r){this._m_ParallelProjection=!1,this._m_Fovy=e,this._m_FixedAspect=t;var o=Math.tan(.5*l.default.toRadians(this._m_Fovy))*n,i=o*this._m_FixedAspect;this._m_FrustumLeft=-i,this._m_FrustumRight=i,this._m_FrustumBottom=-o,this._m_FrustumTop=o,this._m_FrustumNear=n,this._m_FrustumFar=r,this._m_ProjectMatrix.perspectiveM(this._m_Fovy,this._m_FixedAspect?this._m_FixedAspect:1*this._m_Width/this._m_Height,this._m_FrustumNear,this._m_FrustumFar)}},{key:"forceUpdateProjection",value:function(){this._m_ParallelProjection?this._m_ProjectMatrix.parallelM(this._m_FrustumLeft,this._m_FrustumRight,this._m_FrustumTop,this._m_FrustumBottom,this._m_FrustumNear,this._m_FrustumFar):this._m_ProjectMatrix.perspectiveM(this._m_Fovy,this._m_FixedAspect?this._m_FixedAspect:1*this._m_Width/this._m_Height,this._m_FrustumNear,this._m_FrustumFar)}},{key:"addFilterFromMaterial",value:function(e){var t=m.default.newFilterFromMaterial(this,e);return this._m_Filters.push(t),t}},{key:"addFilter",value:function(e,t){for(var n=[],r=0,o=Math.min(t,this._m_Filters.length);r<o;r++)n.push(this._m_Filters[r]);n.push(e);for(var i=this._m_Filters.length;r<i;r++)n.push(this._m_Filters[r]);this._m_Filters=n}},{key:"getFilters",value:function(){return this._m_Filters}},{key:"demandFilter",value:function(){return null!=this._m_Filters&&this._m_Filters.length>0}},{key:"getLeft",value:function(){return this._m_FrustumLeft}},{key:"getRight",value:function(){return this._m_FrustumRight}},{key:"getTop",value:function(){return this._m_FrustumTop}},{key:"getBottom",value:function(){return this._m_FrustumBottom}},{key:"getNear",value:function(){return this._m_FrustumNear}},{key:"getFar",value:function(){return this._m_FrustumFar}},{key:"setFar",value:function(e){this._m_FrustumFar=e}},{key:"setIsRenderingCamera",value:function(e){this._m_IsRenderingCamera=e,this._m_UpdateCameraPosition=!0,this._m_ViewMatrixUpdate=!0,this._m_ProjectMatrixUpdate=!0,this._m_ProjectViewMatrixUpdate=!0,e&&this._doUpdate(!0)}},{key:"getFrustumPlane",value:function(e){return this._m_FrustumPlane[e]}},{key:"getFrustumMask",value:function(){return this._m_FrustumMask}},{key:"setFrustumMask",value:function(e){this._m_FrustumMask=e}},{key:"getAt",value:function(){return this._m_At}},{key:"setAt",value:function(e){this._m_At.setTo(e)}},{key:"getEye",value:function(){return this._m_Eye}},{key:"setEye",value:function(e){this._m_Eye.setTo(e)}},{key:"getUp",value:function(){return this._m_Up}},{key:"setUp",value:function(e){this._m_Up.setTo(e)}},{key:"getDir",value:function(){return this._m_Dir}},{key:"lookAt",value:function(e,t,n){this._m_Eye.setTo(e),this._m_At.setTo(t),this._m_At.sub(this._m_Eye,this._m_Dir),this._m_Dir.normal(),n.cross(this._m_Dir,d.S_TEMP_VEC3).normal(),this._m_Dir.cross(d.S_TEMP_VEC3,this._m_Up).normal(),this._m_ViewMatrix.lookAt(this._m_Eye,this._m_At,this._m_Up),this._m_ViewMatrixUpdate=!0,this._doUpdate()}},{key:"isParallelProjection",value:function(){return this._m_ParallelProjection}},{key:"_updateFrustum",value:function(){if(this._m_ParallelProjection)this._m_CoeffLeft[0]=1,this._m_CoeffLeft[1]=0,this._m_CoeffRight[0]=-1,this._m_CoeffRight[1]=0,this._m_CoeffBottom[0]=1,this._m_CoeffBottom[1]=0,this._m_CoeffTop[0]=-1,this._m_CoeffTop[1]=0;else{var e=this._m_FrustumNear*this._m_FrustumNear,t=this._m_FrustumLeft*this._m_FrustumLeft,n=this._m_FrustumRight*this._m_FrustumRight,r=this._m_FrustumBottom*this._m_FrustumBottom,o=this._m_FrustumTop*this._m_FrustumTop,i=1/Math.sqrt(e+t);this._m_CoeffLeft[0]=-this._m_FrustumNear*i,this._m_CoeffLeft[1]=-this._m_FrustumLeft*i,i=1/Math.sqrt(e+n),this._m_CoeffRight[0]=this._m_FrustumNear*i,this._m_CoeffRight[1]=this._m_FrustumRight*i,i=1/Math.sqrt(e+r),this._m_CoeffBottom[0]=this._m_FrustumNear*i,this._m_CoeffBottom[1]=-this._m_FrustumBottom*i,i=1/Math.sqrt(e+o),this._m_CoeffTop[0]=-this._m_FrustumNear*i,this._m_CoeffTop[1]=this._m_FrustumTop*i}d.S_TEMP_VEC3.setToInXYZ(-this._m_ViewMatrix.m[0],-this._m_ViewMatrix.m[4],-this._m_ViewMatrix.m[8]),d.S_TEMP_VEC3_2.setToInXYZ(this._m_ViewMatrix.m[1],this._m_ViewMatrix.m[5],this._m_ViewMatrix.m[9]),d.S_TEMP_VEC3_3.setTo(this._m_Dir);var a=d.S_TEMP_VEC3_3.dot(this._m_Eye),_=this._m_FrustumPlane[d.S_LEFT_PLANE].getNormal();_._m_X=d.S_TEMP_VEC3._m_X*this._m_CoeffLeft[0],_._m_Y=d.S_TEMP_VEC3._m_Y*this._m_CoeffLeft[0],_._m_Z=d.S_TEMP_VEC3._m_Z*this._m_CoeffLeft[0],_.addInXYZ(d.S_TEMP_VEC3_3._m_X*this._m_CoeffLeft[1],d.S_TEMP_VEC3_3._m_Y*this._m_CoeffLeft[1],d.S_TEMP_VEC3_3._m_Z*this._m_CoeffLeft[1]),this._m_FrustumPlane[d.S_LEFT_PLANE].setD(this._m_Eye.dot(_));var s=this._m_FrustumPlane[d.S_RIGHT_PLANE].getNormal();s._m_X=d.S_TEMP_VEC3._m_X*this._m_CoeffRight[0],s._m_Y=d.S_TEMP_VEC3._m_Y*this._m_CoeffRight[0],s._m_Z=d.S_TEMP_VEC3._m_Z*this._m_CoeffRight[0],s.addInXYZ(d.S_TEMP_VEC3_3._m_X*this._m_CoeffRight[1],d.S_TEMP_VEC3_3._m_Y*this._m_CoeffRight[1],d.S_TEMP_VEC3_3._m_Z*this._m_CoeffRight[1]),this._m_FrustumPlane[d.S_RIGHT_PLANE].setD(this._m_Eye.dot(s));var u=this._m_FrustumPlane[d.S_BOTTOM_PLANE].getNormal();u._m_X=d.S_TEMP_VEC3_2._m_X*this._m_CoeffBottom[0],u._m_Y=d.S_TEMP_VEC3_2._m_Y*this._m_CoeffBottom[0],u._m_Z=d.S_TEMP_VEC3_2._m_Z*this._m_CoeffBottom[0],u.addInXYZ(d.S_TEMP_VEC3_3._m_X*this._m_CoeffBottom[1],d.S_TEMP_VEC3_3._m_Y*this._m_CoeffBottom[1],d.S_TEMP_VEC3_3._m_Z*this._m_CoeffBottom[1]),this._m_FrustumPlane[d.S_BOTTOM_PLANE].setD(this._m_Eye.dot(u));var l=this._m_FrustumPlane[d.S_TOP_PLANE].getNormal();l._m_X=d.S_TEMP_VEC3_2._m_X*this._m_CoeffTop[0],l._m_Y=d.S_TEMP_VEC3_2._m_Y*this._m_CoeffTop[0],l._m_Z=d.S_TEMP_VEC3_2._m_Z*this._m_CoeffTop[0],l.addInXYZ(d.S_TEMP_VEC3_3._m_X*this._m_CoeffTop[1],d.S_TEMP_VEC3_3._m_Y*this._m_CoeffTop[1],d.S_TEMP_VEC3_3._m_Z*this._m_CoeffTop[1]),this._m_FrustumPlane[d.S_TOP_PLANE].setD(this._m_Eye.dot(l)),this._m_ParallelProjection&&(this._m_FrustumPlane[d.S_LEFT_PLANE].setD(this._m_FrustumPlane[d.S_LEFT_PLANE].getD()+this._m_FrustumLeft),this._m_FrustumPlane[d.S_RIGHT_PLANE].setD(this._m_FrustumPlane[d.S_RIGHT_PLANE].getD()-this._m_FrustumRight),this._m_FrustumPlane[d.S_TOP_PLANE].setD(this._m_FrustumPlane[d.S_TOP_PLANE].getD()-this._m_FrustumTop),this._m_FrustumPlane[d.S_BOTTOM_PLANE].setD(this._m_FrustumPlane[d.S_BOTTOM_PLANE].getD()+this._m_FrustumBottom)),this._m_FrustumPlane[d.S_FAR_PLANE].setNormaXYZ(-d.S_TEMP_VEC3_3._m_X,-d.S_TEMP_VEC3_3._m_Y,-d.S_TEMP_VEC3_3._m_Z),this._m_FrustumPlane[d.S_FAR_PLANE].setD(-(a+this._m_FrustumFar)),this._m_FrustumPlane[d.S_NEAR_PLANE].setNormaXYZ(d.S_TEMP_VEC3_3._m_X,d.S_TEMP_VEC3_3._m_Y,d.S_TEMP_VEC3_3._m_Z),this._m_FrustumPlane[d.S_NEAR_PLANE].setD(a+this._m_FrustumNear)}},{key:"_update",value:function(){var e=this._m_Scene.getCanvas().getGLContext();e.bindBuffer(e.UNIFORM_BUFFER,this.MAT);var t=this._m_Scene.getRender().getFrameContext();this._m_ViewMatrixUpdate&&(this._m_UpdateCameraPosition=!0,this._m_ProjectViewMatrixUpdate=!0,(t.getContext(s.default.S_VIEW_MATRIX_SRC)||t.getContext(s.default.S_VP_SRC)||t.getContext(s.default.S_MVP_SRC))&&(this._m_IsRenderingCamera&&(e.bufferSubData(e.UNIFORM_BUFFER,0,this._m_ViewMatrix.getBufferData()),t.setCalcContext(s.default.S_VIEW_MATRIX_SRC,this._m_ViewMatrix)),this._m_ViewMatrixUpdate=!1)),this._m_ProjectMatrixUpdate&&(this._m_ProjectViewMatrixUpdate=!0,(t.getContext(s.default.S_PROJECT_MATRIX_SRC)||t.getContext(s.default.S_VP_SRC)||t.getContext(s.default.S_MVP_SRC))&&(this._m_IsRenderingCamera&&(e.bufferSubData(e.UNIFORM_BUFFER,64,this._m_ProjectMatrix.getBufferData()),t.setCalcContext(s.default.S_PROJECT_MATRIX_SRC,this._m_ProjectMatrix)),this._m_ProjectMatrixUpdate=!1)),this._m_ProjectViewMatrixUpdate&&t.getContext(s.default.S_VP_SRC)&&(a.default.multiplyMM(this._m_ProjectViewMatrix,0,this._m_ProjectMatrix,0,this._m_ViewMatrix,0),this._m_IsRenderingCamera&&(e.bufferSubData(e.UNIFORM_BUFFER,128,this._m_ProjectViewMatrix.getBufferData()),t.setCalcContext(s.default.S_VP_SRC,this._m_ProjectViewMatrix)),this._m_ProjectViewMatrixUpdate=!1),e.bindBuffer(e.UNIFORM_BUFFER,null),this._m_UpdateCameraPosition&&t.getContext(s.default.S_CAMERA_POSITION_SRC)&&(this._m_IsRenderingCamera&&(e.bindBuffer(e.UNIFORM_BUFFER,this.VIEW),e.bufferSubData(e.UNIFORM_BUFFER,0,this._m_Eye.getBufferData()),e.bindBuffer(e.UNIFORM_BUFFER,null)),this._m_UpdateCameraPosition=!1),t.getContext(s.default.S_RESOLUTION_INVERSE)&&(e.bindBuffer(e.UNIFORM_BUFFER,this.VIEW_PORT),e.bufferSubData(e.UNIFORM_BUFFER,0,this._m_ResolutionInverse.getBufferData()),e.bindBuffer(e.UNIFORM_BUFFER,null)),(this._m_ViewMatrixUpdate||this._m_ProjectMatrixUpdate||this._m_ProjectViewMatrixUpdate)&&this._doUpdate(),this._updateFrustum(),this.fire(d.S_CAMERA_UPDATE_EVENT,[this._m_ViewMatrix,this._m_ProjectMatrix,this._m_ProjectViewMatrix])}},{key:"setViewMatrix",value:function(e){this._m_ViewMatrix.set(e);var t=this._m_ViewMatrix.inertRetNew(_.default.S_TEMP_MAT4);t&&(this._m_Eye.setToInXYZ(t.m[12],t.m[13],t.m[14]),this._m_Up.setToInXYZ(t.m[4],t.m[5],t.m[6]),_.default.S_TEMP_VEC3.setToInXYZ(-t.m[8],-t.m[9],-t.m[10]),_.default.S_TEMP_VEC3.add(this._m_Eye,this._m_At),this._m_At.sub(this._m_Eye,this._m_Dir),this._m_Dir.normal()),this._m_ViewMatrixUpdate=!0,this._doUpdate()}},{key:"getViewMatrix",value:function(){return this._m_ViewMatrix}},{key:"getProjectViewMatrix",value:function(e){return e&&a.default.multiplyMM(this._m_ProjectViewMatrix,0,this._m_ProjectMatrix,0,this._m_ViewMatrix,0),this._m_ProjectViewMatrix}},{key:"setProjectMatrix",value:function(e){this._m_ProjectMatrix.set(e),this._m_ProjectMatrixUpdate=!0,this._doUpdate()}},{key:"getHeight",value:function(){return this._m_Height}},{key:"getWidth",value:function(){return this._m_Width}},{key:"scroll",value:function(e){this._m_ProjectMatrix.perspectiveM(e,1*this._m_Width/this._m_Height,this._m_FrustumNear,this._m_FrustumFar),this._m_ProjectMatrixUpdate=!0,this._doUpdate()}},{key:"getProjectMatrix",value:function(){return this._m_ProjectMatrix}},{key:"frustumContains",value:function(e){if(e){for(var t=0,n=0,r=0,o=d.S_FRUSTUM_INTERSECT_INSIDE,i=6;i>=0;i--)if(i!=e.getPriorityPlane()&&(t=1<<(n=6==i?e.getPriorityPlane():i),0==(this._m_FrustumMask&t))){if((r=e.whichSide(this._m_FrustumPlane[n]))==u.default.S_SIDE_NEGATIVE)return e.setPriorityPlane(n),d.S_FRUSTUM_INTERSECT_OUTSIDE;r==u.default.S_SIDE_POSITIVE?this._m_FrustumMask|=t:o=d.S_FRUSTUM_INTERSECT_INTERSECTS}return o}return d.S_FRUSTUM_INTERSECT_INSIDE}},{key:"getWorldCoordinates",value:function(e,t,n,r){r||(r=new i.default),n?(a.default.multiplyMM(this._m_ProjectViewMatrix,0,this._m_ProjectMatrix,0,this._m_ViewMatrix,0),d.S_TEMP_MAT4.set(this._m_ProjectViewMatrix)):d.S_TEMP_MAT4.set(this._m_ProjectMatrix),d.S_TEMP_MAT4.inert();var o=this.getWidth(),_=this.getHeight();d.S_TEMP_VEC3.setToInXYZ((e._m_X/o-0)/1*2-1,(e._m_Y/_-0)/1*2-1,2*t-1);var s=a.default.multiplyMV3(r,d.S_TEMP_VEC3,d.S_TEMP_MAT4);return r.multLength(1/s),r}}])&&p(t.prototype,n),r&&p(t,r),d}(o.default);t.default=T,C(T,"S_TEMP_MAT4",new a.default),C(T,"S_TEMP_VEC3",new i.default),C(T,"S_TEMP_VEC3_2",new i.default),C(T,"S_TEMP_VEC3_3",new i.default),C(T,"S_TEMP_VEC3_4",new i.default),C(T,"S_CAMERA_UPDATE_EVENT","camera_update_event"),C(T,"S_FRUSTUM_INTERSECT_INTERSECTS",0),C(T,"S_FRUSTUM_INTERSECT_INSIDE",1),C(T,"S_FRUSTUM_INTERSECT_OUTSIDE",2),C(T,"S_LEFT_PLANE",0),C(T,"S_RIGHT_PLANE",1),C(T,"S_BOTTOM_PLANE",2),C(T,"S_TOP_PLANE",3),C(T,"S_FAR_PLANE",4),C(T,"S_NEAR_PLANE",5)},4939:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(n(9650)),i=h(n(3061)),a=h(n(5109)),_=h(n(1550)),s=h(n(5489)),u=h(n(513)),l=h(n(2949)),f=h(n(7280)),c=h(n(2815)),m=h(n(5604));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(S,e);var t,n,r,h=g(S);function S(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(t=h.call(this,null,e))._m_TaskQueue=new s.default,t._m_Canvas=new a.default(v(t),{id:"default_canvas",canvas:e.cavnas}),t._m_Render=new i.default(v(t),{id:"default_render"}),t._m_MainCamera=new _.default(v(t),{id:"mainCamera"}),t._m_FrustumCullingCamera=t._m_MainCamera,t._m_MainCamera.setIsRenderingCamera(!0),t._m_Nodes=[],t._m_NodeIds={},t._m_Lights=[],t._m_AmbientLightColor=new m.default(1,1,1),t._m_EnableLights=[],t._m_VisLights=[],t._m_LightIds={},t._m_EnableLightIds={},t._m_GIProbes=[],t._m_GIProbeIds={},t._m_RefProbes=[],t._m_RefProbeIds={},t._m_Render.startUp(),t}return t=S,n=[{key:"getType",value:function(){return"Scene"}},{key:"AmbientLightColor",get:function(){return this._m_AmbientLightColor}},{key:"setAmbientLightColor",value:function(e,t,n){this._m_AmbientLightColor.setToInXYZ(e,t,n)}},{key:"getLights",value:function(){return this._m_Lights}},{key:"getEnableLights",value:function(){return this._m_EnableLights}},{key:"enableLight",value:function(e){this._m_EnableLightIds[e.getId()]||(this._m_EnableLightIds[e.getId()]=e,e.enable(),this._m_EnableLights.push(e))}},{key:"disableLight",value:function(e){if(this._m_EnableLightIds[e.getId()]){this._m_EnableLightIds[e.getId()]=null,e.disable();var t=this._m_EnableLights.indexOf(e);t>-1&&this._m_EnableLights.splice(t,1)}}},{key:"getVisLights",value:function(){return this._m_VisLights}},{key:"getLight",value:function(e){return this._m_LightIds[e]}},{key:"getGIProbes",value:function(){return this._m_GIProbes}},{key:"enableGIProbes",value:function(){return this._m_GIProbes.length>0&&this._m_GIProbes[0].isEnable()}},{key:"getGIProbe",value:function(e){return this._m_GIProbeIds[e]}},{key:"scheduleTask",value:function(e,t){this._m_TaskQueue.push(e),this._m_TaskQueue.push(t)}},{key:"runTasks",value:function(){for(var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=n>0?(new Date).getTime():0,o=0,i=this._m_TaskQueue.length;i>0&&(n<0||r<n);)e=this._m_TaskQueue.shift(),i-=2,(t=this._m_TaskQueue.shift())?e.call(t):e(),n>0&&(r=(new Date).getTime()),o++;return o}},{key:"getMainCamera",value:function(){return this._m_MainCamera}},{key:"setMainCamera",value:function(e){this._m_MainCamera!=e&&this._m_MainCamera&&this._m_MainCamera.setIsRenderingCamera(!1),this._m_MainCamera=e,this._m_MainCamera.setIsRenderingCamera(!0)}},{key:"setFrustumCullingCamera",value:function(e){this._m_FrustumCullingCamera=e}},{key:"getFrustumCullingCamera",value:function(){return this._m_FrustumCullingCamera}},{key:"getRender",value:function(){return this._m_Render}},{key:"getCanvas",value:function(){return this._m_Canvas}},{key:"setSky",value:function(e){null!=e&&"SkyBox"!=e.getType()||this._m_Render.setSky(e)}},{key:"getSky",value:function(){return this._m_Render.getSky()}},{key:"addSceneNode",value:function(e){e instanceof l.default&&!(e instanceof f.default)&&(this._m_NodeIds[e.getId()]||(this._m_Nodes.push(e),this._m_NodeIds[e.getId()]=e))}},{key:"getSceneNode",value:function(e){return this._m_Nodes[e]}},{key:"getSceneNodes",value:function(){return this._m_Nodes}},{key:"addComponentInScene",value:function(e){e instanceof o.default?this._m_ComponentIDs[e.getId()]?console.warn("组件[["+e.getId()+"]]已存在!!"):("Scene"!=e.getType()&&(this._m_ComponentIDs[e.getId()]=e,this._m_Components.push(e)),e.isDrawable&&e.isDrawable()&&this._m_Render.addDrawable(e),e instanceof u.default&&(e instanceof c.default?this._m_GIProbeIds[e.getId()]||(this._m_GIProbes.push(e),this._m_GIProbeIds[e.getId()]=e):this._m_LightIds[e.getId()]||(this._m_Lights.push(e),this._m_LightIds[e.getId()]=e))):console.error("component必须是一个Component对象!!")}},{key:"removeComponentInScene",value:function(e){e instanceof o.default&&this._m_ComponentIDs[e.getId()]&&(this._m_ComponentIDs[e.getId()]=null,this._m_Components.remove(e),e.isDrawable&&e.isDrawable()&&this._m_Render.removeDrawable(e))}},{key:"_gatherVisDrawable",value:function(e,t){var n=this;e.isDrawable&&e.isDrawable()?t.push(e):e.getChildren().length>0&&e.getChildren().forEach((function(e){n._gatherVisDrawable(e,t)}))}},{key:"_frustumCulling",value:function(e,t){var n=this;if(e.inFrustum(this._m_FrustumCullingCamera))if(e.isDrawable&&e.isDrawable())t.push(e);else if(e.getChildren().length>0){var r=this._m_FrustumCullingCamera.getFrustumMask();e.getChildren().forEach((function(e){e instanceof u.default||(e.getFilterFlag()==l.default.S_DYNAMIC?e.getCullingFlags()&l.default.S_DEFAULT_FRUSTUM_CULLING&&(n._m_FrustumCullingCamera.setFrustumMask(r),n._frustumCulling(e,t)):e.getFilterFlag()==l.default.S_NEVER&&n._gatherVisDrawable(e,t))}))}}},{key:"update",value:function(e){this.runTasks(),this.fire("update",[e])}},{key:"render",value:function(e){var t=this,n=this._m_Render.getVisDrawables();if(n.length=0,this.fire("render",[e]),this._m_Nodes.forEach((function(e){e.getFilterFlag()==l.default.S_DYNAMIC?e.getCullingFlags()&l.default.S_DEFAULT_FRUSTUM_CULLING&&(t._m_FrustumCullingCamera.setFrustumMask(0),t._frustumCulling(e,n)):e.getFilterFlag()==l.default.S_NEVER&&t._gatherVisDrawable(e,n)})),this._m_VisLights.length=0,this._m_EnableLights.length>0){var r=this._m_FrustumCullingCamera.getFrustumMask();this._m_FrustumCullingCamera.setFrustumMask(0),this._m_EnableLights.forEach((function(e){"GIProbe"!=e.getType()&&"RefProbe"!=e.getType()&&(e._m_Mark^=u.default.S_VISIBLE_LIGHT,e.getFilterFlag()==l.default.S_DYNAMIC?e.inFrustum(t._m_FrustumCullingCamera)&&(e._m_Mark|=u.default.S_VISIBLE_LIGHT,t._m_VisLights.push(e)):e.getFilterFlag()==l.default.S_NEVER&&(e._m_Mark|=u.default.S_VISIBLE_LIGHT,t._m_VisLights.push(e)))})),this._m_FrustumCullingCamera.setFrustumMask(r)}this._m_Render.render(e)}}],n&&d(t.prototype,n),r&&d(t,r),S}(o.default);t.default=C},5602:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=C(n(9650)),i=C(n(513)),a=C(n(8435)),_=C(n(3061)),s=C(n(2320)),u=C(n(7341)),l=(C(n(9784)),C(n(4008))),f=C(n(5397)),c=C(n(8113)),m=C(n(3370)),h=C(n(7280)),d=C(n(1359)),p=C(n(1491)),g=C(n(5776)),S=C(n(9271)),v=C(n(1759)),y=C(n(4690));function C(e){return e&&e.__esModule?e:{default:e}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(C,e);var t,n,r,o=P(C);function C(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),w(D(n=o.call(this,e,t)),"_m_ShadowSplitType",C.S_QUADRATIC_SCALING),w(D(n),"_m_MainCamera",void 0),w(D(n),"_m_PreShadowMat",void 0),w(D(n),"_m_PostShadowMat",void 0),w(D(n),"_m_NbShadowMaps",1),w(D(n),"_m_Light",void 0),w(D(n),"_m_SkipPass",void 0),w(D(n),"_m_ShadowGeometryCasts",[]),w(D(n),"_m_ShadowGeometryReceivers",[]),w(D(n),"_m_FadeInfo",null),w(D(n),"_m_ZFarOverride",0),w(D(n),"_m_FadeLength",0),w(D(n),"_m_BackfaceShadows",!1),w(D(n),"_m_PCFEdge",1),w(D(n),"_m_ShadowIntensity",.7),w(D(n),"_m_ResolutionInverse",new S.default),w(D(n),"_m_ShadowMapSizeInverse",new S.default),w(D(n),"_m_LVPM",[]),w(D(n),"_m_ShadowFB",[]),w(D(n),"_m_ShadowMapSize",512),w(D(n),"_m_ShadowMapSizes",[]),w(D(n),"_m_BiasFactor",1),w(D(n),"_m_BiasUnits",1),w(D(n),"_m_ShadowRenderState",new a.default),w(D(n),"_m_ShadowRenderState2",new a.default),w(D(n),"_m_UploadShadowMaps",[]),w(D(n),"_m_UploadLightViews",[]),w(D(n),"_m_Enable",!0),w(D(n),"_m_DebugShadowMap",[]),w(D(n),"_m_Debug",!1),n._m_NbShadowMaps=t.nbShadowMaps,n._m_ShadowMapSize=t.shadowMapSize,n._m_Debug=null!=t.debug&&t.debug,n._m_BackfaceShadows=null!=t.backfaceShadows&&t.backfaceShadows,n._m_ShadowSplitType=t.shadowSplitType||n._m_ShadowSplitType;for(var r=n._m_Scene.getCanvas().getGLContext(),i=n._m_ShadowMapSize,_=Math.min(1/n._m_NbShadowMaps,.25),y=0;y<n._m_NbShadowMaps;y++)if(n._m_LVPM[y]=new s.default,n._m_ShadowSplitType==C.S_QUADRATIC_SCALING?(n._m_ShadowFB[y]=new u.default(r,"ShadowFB_"+y+f.default.nextId(),i,i),n._m_ShadowMapSizes[y]=i,i/=2,i=Math.max(i,128)):n._m_ShadowSplitType==C.S_FIXED?n._m_ShadowFB[y]=new u.default(r,"ShadowFB_"+y+f.default.nextId(),n._m_ShadowMapSize,n._m_ShadowMapSize):Log.error("错误的阴影类型!"),n._m_ShadowFB[y].setFixedSize(!0),n._m_Debug&&n._m_ShadowFB[y].addTexture(r,"ShadowFBDefaultColor",r.RGBA,0,r.RGBA,r.UNSIGNED_BYTE,r.COLOR_ATTACHMENT0,!1),n._m_ShadowFB[y].addTexture(r,C.S_SHADOW_MAP_ARRAY_SRC[y],r.DEPTH_COMPONENT16,0,r.DEPTH_COMPONENT,r.UNSIGNED_SHORT,r.DEPTH_ATTACHMENT,!1),n._m_ShadowFB[y].finish(r,n._m_Scene,!1),n._m_UploadShadowMaps[y]=C.S_SHADOW_MAP_ARRAY_SRC[y],n._m_UploadLightViews[y]=C.S_LIGHT_SHADOW_VP_ARRAY_SRC[y],n._m_Debug){n._m_DebugShadowMap[y]=new h.default(n._m_Scene,{id:"debug_shadow_map_"+y}),n._m_DebugShadowMap[y].setSize(_,.3),n._m_DebugShadowMap[y].setLeftTop(2.01*_*y-(1-_),-.7),n._m_DebugShadowMap[y].useDefaultMat();var T=new d.default(n._m_Scene);T.setTextureFormat(d.default.S_TEXTURE_FORMAT.S_RGBA,d.default.S_TEXTURE_FORMAT.S_RGBA,d.default.S_TEXTURE_FORMAT.S_UNSIGNED_BYTE),T.target(n._m_ShadowFB[y]),n._m_DebugShadowMap[y].getMaterial().setParam("colorMap",T),n._m_DebugShadowMap[y].setZIndex(0)}return n._m_ShadowRenderState.setFlag(a.default.S_STATES[0],a.default.S_FACE_CULL_FRONT),n._m_Debug||n._m_ShadowRenderState.setFlag(a.default.S_STATES[2],"Off"),n._m_ShadowRenderState.setFlag(a.default.S_STATES[7],"On"),n._m_ShadowRenderState.setFlag(a.default.S_STATES[8],[n._m_BiasFactor,n._m_BiasUnits]),n._m_ShadowRenderState2.setFlag(a.default.S_STATES[1],"Off"),n._m_PreShadowMat=new l.default(n._m_Scene,{id:"preShadowMat_"+f.default.nextId(),materialDef:c.default.parse(m.default.S_PRE_SHADOW_DEF_DATA)}),n._m_Debug&&n._m_PreShadowMat.setParam("debug",(new p.default).valueOf(!0)),n._m_PostShadowMat=new l.default(n._m_Scene,{id:"postShadowMat_"+f.default.nextId(),materialDef:c.default.parse(m.default.S_POST_SHADOW_DEF_DATA)}),n._m_PostShadowMat.setParam("pcfEdge",(new v.default).valueOf(n._m_PCFEdge)),n._m_PostShadowMat.setParam("shadowIntensity",(new v.default).valueOf(n._m_ShadowIntensity)),n._m_ShadowMapSizeInverse.setToInXY(1/n._m_ShadowMapSize,1/n._m_ShadowMapSize),n._m_PostShadowMat.setParam("backfaceShadows",(new p.default).valueOf(n._m_BackfaceShadows)),n.initMat(),n._m_FramePicture=new g.default(n._m_Scene,{id:n._m_Id+"_picture"}),n._m_Scene.getMainCamera().addFilter(D(n),0),n}return t=C,(n=[{key:"isEnable",value:function(){return this._m_Enable}},{key:"enable",value:function(e){this._m_Enable=e}},{key:"initMat",value:function(){}},{key:"setBackfaceShadows",value:function(e){this._m_BackfaceShadows!=e&&(this._m_BackfaceShadows=e,this._m_PostShadowMat.setParam("backfaceShadows",(new p.default).valueOf(this._m_BackfaceShadows)))}},{key:"isBackfaceShadows",value:function(){return this._m_BackfaceShadows}},{key:"setBias",value:function(e,t){this._m_BiasFactor=e,this._m_BiasUnits=t,this._m_ShadowRenderState.setFlag(a.default.S_STATES[8],[this._m_BiasFactor,this._m_BiasUnits])}},{key:"getBiasFactor",value:function(){return this._m_BiasFactor}},{key:"getBiasUnits",value:function(){return this._m_BiasUnits}},{key:"setFade",value:function(e,t){this._m_FadeInfo||(this._m_FadeInfo=new y.default);var n=this._m_FadeInfo.valueFromXY(e,t);this._m_PostShadowMat.setParam("fadeInfo",n)}},{key:"setFadeExtend",value:function(e){this._m_ZFarOverride!=e&&(this._m_ZFarOverride=e),0==this._m_ZFarOverride?this._m_FadeInfo&&this.setFade(0,0):this.setFade(this._m_ZFarOverride-this._m_FadeLength,1/this._m_FadeLength)}},{key:"getFadeExtend",value:function(){return this._m_ZFarOverride}},{key:"setFadeLength",value:function(e){this._m_FadeLength!=e&&(this._m_FadeLength=e),0==this._m_ZFarOverride?this._m_FadeInfo&&this.setFade(0,0):this.setFade(this._m_ZFarOverride-this._m_FadeLength,1/this._m_FadeLength)}},{key:"getFadeLength",value:function(){return this._m_FadeLength}},{key:"setPCFEdge",value:function(e){this._m_PCFEdge!=e&&(this._m_PCFEdge=e,this._m_PostShadowMat.setParam("pcfEdge",(new v.default).valueOf(this._m_PCFEdge)))}},{key:"getPCFEdge",value:function(){return this._m_PCFEdge}},{key:"setShadowIntensity",value:function(e){this._m_ShadowIntensity!=e&&(this._m_ShadowIntensity=e,this._m_PostShadowMat.setParam("shadowIntensity",(new v.default).valueOf(this._m_ShadowIntensity)))}},{key:"getShadowIntensity",value:function(){return this._m_ShadowIntensity}},{key:"setLight",value:function(e){this._m_Light=e}},{key:"getLight",value:function(){return this._m_Light}},{key:"updateShadowCams",value:function(){}},{key:"visLight",value:function(){return 0!=(this._m_Light._m_Mark&i.default.S_VISIBLE_LIGHT)}},{key:"generateShadowMap",value:function(e,t,n,r){this._m_ShadowGeometryCasts.length=0,this._m_ShadowGeometryCasts=this.getShadowGeometryCasts(r,this._m_ShadowGeometryCasts);var o=this.getShadowCam(r);this._m_LVPM[r].set(o.getProjectViewMatrix(!0)),this._m_Scene.setMainCamera(o),this._m_ShadowFB[r].use(t),this._m_ShadowFB[r].clear(e),this._m_ShadowGeometryCasts.forEach((function(e){e.draw(n)}))}},{key:"getShadowGeometryCasts",value:function(e,t){return t}},{key:"getShadowGeometryReceivers",value:function(e){return e}},{key:"getShadowCam",value:function(e){}},{key:"_uploadInfo",value:function(e,t){for(var n=t.m_LastSubShader.getContextVars(),r=null,o=0;o<this._m_NbShadowMaps;o++)null!=(r=n[C.S_SHADOW_MAP_ARRAY_SRC[o]])&&(e.activeTexture(e.TEXTURE0+r.loc),e.bindTexture(e.TEXTURE_2D,this._m_ShadowFB[o].getTexture(C.S_SHADOW_MAP_ARRAY_SRC[o]).getLoc())),null!=(r=n[C.S_LIGHT_SHADOW_VP_ARRAY_SRC[o]])&&e[r.fun](r.loc,!1,this._m_LVPM[o].getBufferData());this._m_BackfaceShadows,null!=(r=n[C.S_SHADOW_MAP_SIZE])&&e.uniform1f(r.loc,this._m_ShadowMapSize),null!=(r=n[C.S_SHADOW_MAP_SIZE_INVERSE])&&e.uniform2f(r.loc,this._m_ShadowMapSizeInverse._m_X,this._m_ShadowMapSizeInverse._m_Y)}},{key:"preFrame",value:function(){if(this._m_ShadowGeometryReceivers.length=0,this._m_SkipPass=!this.visLight(),!this._m_SkipPass){this.updateShadowCams();var e=this._m_Scene.getRender();this._m_MainCamera=this._m_Scene.getMainCamera();var t=e.getFrameContext(),n=this._m_Scene.getCanvas().getGLContext();t.getRenderState().store(),this._m_ShadowSplitType==C.S_FIXED&&e.setViewPort(n,0,0,this._m_ShadowMapSize,this._m_ShadowMapSize),e._checkRenderState(n,this._m_ShadowRenderState,t.getRenderState()),e.useForcedMat("PreFrame",this._m_PreShadowMat,0);for(var r=0;r<this._m_NbShadowMaps;r++)this._m_ShadowSplitType==C.S_QUADRATIC_SCALING&&e.setViewPort(n,0,0,this._m_ShadowMapSizes[r],this._m_ShadowMapSizes[r]),this.generateShadowMap(n,e,t,r);this._m_Scene.setMainCamera(this._m_MainCamera),this._m_Scene.getRender().useDefaultFrame(),e.setViewPort(n,0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight()),e._checkRenderState(n,t.getRenderState().restore(),t.getRenderState())}}},{key:"postFilter",value:function(){if(!this._m_SkipPass){var e=this._m_Scene.getRender(),t=e.getFrameContext(),n=this._m_Scene.getCanvas().getGLContext();if(t.getRenderState().store(),e._checkRenderState(n,this._m_ShadowRenderState2,t.getRenderState()),e.useForcedMat("PostFilter",this._m_PostShadowMat,0),this._uploadInfo(n,t),this._m_FramePicture.draw(t),this._m_Debug)for(var r=0;r<this._m_NbShadowMaps;r++)e.useForcedMat(_.default.FORWARD,this._m_DebugShadowMap[r].getMaterial(),0),this._m_DebugShadowMap[r].draw(t);e._checkRenderState(n,t.getRenderState().restore(),t.getRenderState())}}}])&&T(t.prototype,n),r&&T(t,r),C}(o.default);t.default=M,w(M,"S_QUADRATIC_SCALING",1),w(M,"S_FIXED",2),w(M,"S_SHADOW_MAP_ARRAY_SRC",{0:"_shadowMap0",1:"_shadowMap1",2:"_shadowMap2",3:"_shadowMap3",4:"_shadowMap4",5:"_shadowMap5",6:"_shadowMap6"}),w(M,"S_LIGHT_SHADOW_VP_ARRAY_SRC",{0:"_lightViewProjectMatrix0",1:"_lightViewProjectMatrix1",2:"_lightViewProjectMatrix2",3:"_lightViewProjectMatrix3",4:"_lightViewProjectMatrix4",5:"_lightViewProjectMatrix5",6:"_lightViewProjectMatrix6"}),w(M,"S_LIGHT_DIR","_lightDir"),w(M,"S_LIGHT_POS","_lightPos"),w(M,"S_SPLITS","_splits"),w(M,"S_FADEINFO","_fadeInfo"),w(M,"S_RESOLUTION_INVERSE","_ResolutionInverse"),w(M,"S_SHADOW_MAP_SIZE","_shadowMapSize"),w(M,"S_SHADOW_MAP_SIZE_INVERSE","_sMapSizeInverse")},6177:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(5602)),i=m(n(3846)),a=m(n(1550)),_=m(n(5397)),s=m(n(5604)),u=m(n(1266)),l=m(n(7141)),f=m(n(2949)),c=m(n(9784));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},d(e,t,n||e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(S,e);var t,n,r,m=g(S);function S(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),t.nbShadowMaps=t.nbSplits,C(v(n=m.call(this,e,t)),"_m_SplitsVec4",new l.default),C(v(n),"_m_SplitsArray",null),C(v(n),"_m_ShadowCam",null),C(v(n),"_m_Points",new Array(8)),C(v(n),"_m_TempVec3",new s.default),C(v(n),"_m_Lambda",.65),C(v(n),"_m_Stabilize",!0),n.init(t.nbSplits,t.shadowMapSize),n}return t=S,(n=[{key:"init",value:function(e,t){this._m_NbShadowMaps=Math.max(Math.min(e,4),1),this._m_NbShadowMaps!=e&&i.default.error("PSSM分割级别只能为1-4之间,指定的分割级别为:"+e),this._m_SplitsArray=new Array(this._m_NbShadowMaps+1),this._m_ShadowCam=new a.default(this._m_Scene,{id:"DirectionalLightShadowProcess_"+_.default.nextId(),width:t,height:t,fixedSize:!0,parallelProjection:!0}),this._m_ShadowCam.setEye(new s.default(0,0,0));for(var n=0;n<8;n++)this._m_Points[n]=new s.default}},{key:"initMat",value:function(){d(y(S.prototype),"initMat",this).call(this),this._m_PostShadowMat.addDefine(c.default.S_PSSM_SRC,!1)}},{key:"_uploadInfo",value:function(e,t){d(y(S.prototype),"_uploadInfo",this).call(this,e,t);var n=t.m_LastSubShader.getContextVars(),r=null;if(r=n[o.default.S_LIGHT_DIR]){var i=this._m_Light.getDirection();e.uniform3f(r.loc,i._m_X,i._m_Y,i._m_Z)}(r=n[o.default.S_SPLITS])&&e.uniform4f(r.loc,this._m_SplitsVec4._m_X,this._m_SplitsVec4._m_Y,this._m_SplitsVec4._m_Z,this._m_SplitsVec4._m_W)}},{key:"updateShadowCams",value:function(){if(null!=this._m_Light){var e=this._m_Scene.getMainCamera(),t=this._m_ZFarOverride;0==t&&(t=e.getFar());var n=Math.max(e.getNear(),.001);u.default.calculateLightConeScope(e,n,t,1,this._m_Points),this._m_ShadowCam.setFar(t);var r=this._m_ShadowCam.getEye();if(this._m_ShadowCam.lookAt(r,r.add(this._m_Light.getDirection(),this._m_TempVec3),this._m_ShadowCam.getUp()),this._m_ShadowCam._updateFrustum(),this._m_ShadowCam.forceUpdateProjection(),this._m_ShadowCam.getProjectViewMatrix(!0),u.default.calculateSplits(this._m_SplitsArray,n,t,this._m_Lambda),e.isParallelProjection())for(var o=1*(t-n),a=0;a<this._m_NbShadowMaps;a++)this._m_SplitsArray[a]/=o;switch(this._m_SplitsArray.length){case 5:this._m_SplitsVec4._m_W=this._m_SplitsArray[4];case 4:this._m_SplitsVec4._m_Z=this._m_SplitsArray[3];case 3:this._m_SplitsVec4._m_Y=this._m_SplitsArray[2];case 2:case 1:this._m_SplitsVec4._m_X=this._m_SplitsArray[1]}}else i.default.warn("无效光源!")}},{key:"getShadowCam",value:function(e){return this._m_ShadowCam}},{key:"getShadowGeometryCasts",value:function(e,t){return u.default.calculateLightConeScope(this._m_MainCamera,this._m_SplitsArray[e],this._m_SplitsArray[e+1],1,this._m_Points),0==this._m_ShadowGeometryReceivers.length&&u.default.calculateGeometriesInFrustum(this._m_Scene.getRender().getVisDrawables(),this._m_MainCamera,f.default.S_SHADOW_RECEIVE,this._m_ShadowGeometryReceivers),u.default.calculateShadowCamera(this._m_Scene.getSceneNodes(),this._m_ShadowGeometryReceivers,this._m_ShadowCam,this._m_Points,t,this._m_Stabilize?this._m_ShadowMapSize:0),t}},{key:"getShadowGeometryReceivers",value:function(e){0==e.length&&u.default.calculateGeometriesInFrustum(this._m_Scene.getRender().getVisDrawables(),this._m_MainCamera,f.default.S_SHADOW_RECEIVE,e)}}])&&h(t.prototype,n),r&&h(t,r),S}(o.default);t.default=T},4867:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(5602)),i=f(n(1550)),a=f(n(5397)),_=f(n(5604)),s=(f(n(4048)),f(n(1266))),u=f(n(2949)),l=f(n(9784));function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},m(e,t,n||e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(p,e);var t,n,r,f=d(p);function p(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),t.nbShadowMaps=p._S_FACE_NUMS,t.shadowSplitType=2,v(g(n=f.call(this,e,t)),"_m_ShadowCams",new Array(p._S_FACE_NUMS)),v(g(n),"_m_Position",new _.default),v(g(n),"_m_Radius",0),v(g(n),"_m_UpdateCasterCam",!1),n.init(t.shadowMapSize),n}return t=p,(n=[{key:"init",value:function(e){for(var t=0;t<p._S_FACE_NUMS;t++)this._m_ShadowCams[t]=new i.default(this._m_Scene,{id:this._m_Id+"_"+t+a.default.nextId(),width:e,height:e,fixedSize:!0})}},{key:"initMat",value:function(){m(S(p.prototype),"initMat",this).call(this),this._m_PostShadowMat.addDefine(l.default.S_POINTLIGHT_SHADOWS_SRC,!1)}},{key:"_uploadInfo",value:function(e,t){var n;m(S(p.prototype),"_uploadInfo",this).call(this,e,t),(n=t.m_LastSubShader.getContextVars()[o.default.S_LIGHT_POS])&&e.uniform3f(n.loc,this._m_Position._m_X,this._m_Position._m_Y,this._m_Position._m_Z)}},{key:"updateShadowCams",value:function(){if(this._m_Radius==this._m_Light.getRadius()&&this._m_Position.equals(this._m_Light.getPosition())){if(this._m_UpdateCasterCam){this._m_UpdateCasterCam=!1;for(var e=0;e<p._S_FACE_NUMS;e++)this._m_ShadowCams[e].setFrustumPerspective(90,1,.1,this._m_Radius),this._m_ShadowCams[e]._updateFrustum()}}else this._m_Radius=this._m_Light.getRadius(),this._m_Position.setTo(this._m_Light.getPosition()),this._calc()}},{key:"getShadowCam",value:function(e){return this._m_ShadowCams[e]}},{key:"getShadowGeometryCasts",value:function(e,t){var n=this;return this._m_Scene.getSceneNodes().forEach((function(r){s.default.calculateNodeInFrustum(r,n._m_ShadowCams[e],u.default.S_SHADOW_CAST,t)})),this._m_UpdateCasterCam=!0,this._m_ShadowCams[e].setFrustumPerspective(90,1,.1,1e3),this._m_ShadowCams[e].getProjectViewMatrix(!0),t}},{key:"_calc",value:function(){for(var e=p._S_TEMP_VEC3_0,t=0;t<p._S_FACE_NUMS;t++)p._S_CAPTURE_CONFIG[t].dir.add(this._m_Position,e),this._m_ShadowCams[t].lookAt(this._m_Position,e,p._S_CAPTURE_CONFIG[t].up),this._m_ShadowCams[t].setFrustumPerspective(90,1,.1,this._m_Radius),this._m_ShadowCams[t]._updateFrustum()}}])&&c(t.prototype,n),r&&c(t,r),p}(o.default);t.default=y,v(y,"_S_CAPTURE_CONFIG",[{dir:new _.default(0,-1,0),up:new _.default(0,0,-1)},{dir:new _.default(0,1,0),up:new _.default(0,0,1)},{dir:new _.default(0,0,-1),up:new _.default(0,1,0)},{dir:new _.default(0,0,1),up:new _.default(0,1,0)},{dir:new _.default(-1,0,0),up:new _.default(0,1,0)},{dir:new _.default(1,0,0),up:new _.default(0,1,0)}]),v(y,"_S_FACE_NUMS",6),v(y,"_S_TEMP_VEC3_0",new _.default)},1266:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5604)),o=u(n(2949)),i=u(n(2320)),a=u(n(3801)),_=u(n(8578)),s=u(n(513));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"calculateLightConeScope",value:function(t,n,r,o,i){var a=1*t.getTop()/t.getNear(),_=1*n,s=1*r,u=1*t.getTop(),l=1*t.getRight()/u,f=-1,c=-1,m=-1,h=-1;t.isParallelProjection()?(c=(f=u)*l,h=(m=u)*l):(c=(f=a*_)*l,h=(m=a*s)*l);var d=t.getEye(),p=t.getDir(),g=t.getUp(),S=p.cross(g,e.S_TEMP_VEC3_1).normal(),v=p.multLength(s,e.S_TEMP_VEC3_2).add(d),y=p.multLength(_,e.S_TEMP_VEC3_3).add(d),C=g.multLength(f,e.S_TEMP_VEC3_4),T=g.multLength(m,e.S_TEMP_VEC3_5),b=S.multLength(c,e.S_TEMP_VEC3_6),P=S.multLength(h,e.S_TEMP_VEC3_7);if(y.sub(C,i[0]).sub(b),y.add(C,i[1]).sub(b),y.add(C,i[2]).add(b),y.sub(C,i[3]).add(b),v.sub(T,i[4]).sub(P),v.add(T,i[5]).sub(P),v.add(T,i[6]).add(P),v.sub(T,i[7]).add(P),1!=o){for(var E=e.S_TEMP_VEC3_8.setToInXYZ(0,0,0),D=0;D<8;D++)E.add(i[D]);E.multLength(1/8);for(var R=e.S_TEMP_VEC3_0,w=0;w<8;w++)i[w].sub(E,R),R.multLength(o-1),i[w].add(R)}}},{key:"calculateSplits",value:function(e,t,n,r){for(var o=-1,i=-1,a=-1,_=1*n/t,s=n-t,u=0,l=e.length;u<l;u++)o=1*u/l,i=t*Math.pow(_,o),a=t+s*o,e[u]=i*r+a*(1-r);e[0]=t,e[e.length-1]=n}},{key:"calculateShadowCamera",value:function(t,n,r,o,s,u){r.isParallelProjection()&&(r.setFrustum(-1,1,1,-1,-r.getFar(),r.getFar()),r.forceUpdateProjection());var l=r.getProjectViewMatrix(!0),f=e.calculateBoundaryFromPoints(o,l,e.S_AABB_BOUNDARY_BOX0),c=new a.default,m=new a.default,h=0,d=0,p=null,g=null,S=null;n.forEach((function(t){p=t.getBoundingVolume(),g=e.S_AABB_BOUNDARY_BOX1,p.transformFromMat44(l,e.S_AABB_BOUNDARY_BOX1),f.contains(g)&&(S=g.getCenter(),Math.abs(S._m_X)!=Number.MAX_VALUE&&!Number.isNaN(S._m_X)&&Number.isFinite(S._m_X)&&(m.merge(g),d++))}));var v=new _.default(l,h,f,c,s);t.forEach((function(e){v.calculate(e)})),(h=v._m_CasterCount)!=d&&c.setHalfInXYZ(c.getXHalf()+2,c.getYHalf()+2,c.getZHalf()+2);var y=c.getMin(e.S_TEMP_VEC3_00),C=c.getMax(e.S_TEMP_VEC3_11),T=m.getMin(e.S_TEMP_VEC3_22),b=m.getMax(e.S_TEMP_VEC3_33),P=f.getMin(e.S_TEMP_VEC3_44),E=f.getMax(e.S_TEMP_VEC3_55);P._m_Z=0;var D,R,w,M,x,A,L=r.getProjectMatrix(),I=e.S_TEMP_VEC3_8,O=e.S_TEMP_VEC3_7;I._m_X=Math.max(Math.max(y._m_X,T._m_X),P._m_X),O._m_X=Math.min(Math.min(C._m_X,b._m_X),E._m_X),I._m_Y=Math.max(Math.max(y._m_Y,T._m_Y),P._m_Y),O._m_Y=Math.min(Math.min(C._m_Y,b._m_Y),E._m_Y),I._m_Z=Math.min(y._m_Z,P._m_Z),O._m_Z=Math.min(b._m_Z,E._m_Z),D=2/(O._m_X-I._m_X),R=2/(O._m_Y-I._m_Y);var F=.5*u;if(0!=F&&D>0&&R>0){var k=.1;D=1/Math.ceil(1/D*k)*k,R=1/Math.ceil(1/R*k)*k}M=-.5*(O._m_X+I._m_X)*D,x=-.5*(O._m_Y+I._m_Y)*R,0!=F&&D>0&&R>0&&(M=1*Math.ceil(M*F)/F,x=1*Math.ceil(x*F)/F),w=1/(O._m_Z-I._m_Z),A=-I._m_Z*w;var B=e.S_TEMP_MAT44_0;B.setArray([D,0,0,0,0,R,0,0,0,0,w,0,M,x,A,1]);var N=e.S_TEMP_MAT44_1;i.default.multiplyMM(N,0,B,0,L,0),r.setProjectMatrix(N)}},{key:"calculateBoundaryFromPoints",value:function(t,n,o){for(var _=e.S_TEMP_VEC3_0.setTo(r.default.S_MIN),s=e.S_TEMP_VEC3_1.setTo(r.default.S_MAX),u=e.S_TEMP_VEC3_2,l=0,f=0,c=t.length;f<c;f++)l=i.default.multiplyMV3(u,t[f],n),u.multLength(1/l),_.min(u),s.max(u);var m=_.add(s,e.S_TEMP_VEC3_3).multLength(.5),h=s.sub(_,e.S_TEMP_VEC3_4).multLength(.5),d=o||new a.default;return d.setCenter(m),d.setHalfInXYZ(h._m_X+2,h._m_Y+2,h._m_Z+2.5),d}},{key:"calculateGeometriesInFrustum",value:function(t,n,r,o){var i=n.getFrustumMask();e._cull(t,n,r,o),n.setFrustumMask(i)}},{key:"calculateNodeInFrustum",value:function(t,n,r,o){var i=n.getFrustumMask();n.setFrustumMask(0),e._cull2(t,n,r,o),n.setFrustumMask(i)}},{key:"_cull",value:function(t,n,r,o){t.forEach((function(t){n.setFrustumMask(0),t.inFrustum(n)&&e._parseShadowMode(t,r)&&o.push(t)}))}},{key:"_cull2",value:function(t,n,r,i){if(t.getFilterFlag()!=o.default.S_ALWAYS&&t.inFrustum(n))if(t.isDrawable&&t.isDrawable()&&!t.isGUI())e._parseShadowMode(t,r)&&i.push(t);else if(t.getChildren().length>0){var a=n.getFrustumMask();t.getChildren().forEach((function(t){t instanceof s.default||(n.setFrustumMask(a),e._cull2(t,n,r,i))}))}}},{key:"_parseShadowMode",value:function(e,t){if(t!=o.default.S_SHADOW_NONE)switch(t){case o.default.S_SHADOW_CAST:return e.isCastShadow();case o.default.S_SHADOW_RECEIVE:return e.isReceiveShadow();case o.default.S_SHADOW_CAST_AND_RECEIVE:return!0}return!1}}],(n=null)&&l(t.prototype,n),u&&l(t,u),e}();t.default=c,f(c,"S_TEMP_VEC3_0",new r.default),f(c,"S_TEMP_VEC3_1",new r.default),f(c,"S_TEMP_VEC3_2",new r.default),f(c,"S_TEMP_VEC3_3",new r.default),f(c,"S_TEMP_VEC3_4",new r.default),f(c,"S_TEMP_VEC3_5",new r.default),f(c,"S_TEMP_VEC3_6",new r.default),f(c,"S_TEMP_VEC3_7",new r.default),f(c,"S_TEMP_VEC3_8",new r.default),f(c,"S_TEMP_VEC3_00",new r.default),f(c,"S_TEMP_VEC3_11",new r.default),f(c,"S_TEMP_VEC3_22",new r.default),f(c,"S_TEMP_VEC3_33",new r.default),f(c,"S_TEMP_VEC3_44",new r.default),f(c,"S_TEMP_VEC3_55",new r.default),f(c,"S_TEMP_MAT44_0",new i.default),f(c,"S_TEMP_MAT44_1",new i.default),f(c,"S_AABB_BOUNDARY_BOX0",new a.default),f(c,"S_AABB_BOUNDARY_BOX1",new a.default)},8578:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;_(n(4720));var r=_(n(2949)),o=_(n(3801)),i=_(n(1322)),a=_(n(5604));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_m_VP",void 0),u(this,"_m_CasterCount",void 0),u(this,"_m_SplitBoundaryBox",void 0),u(this,"_m_CasterBoundaryBox",void 0),u(this,"_m_SplitOccluders",void 0),this._m_VP=t,this._m_CasterCount=n,this._m_SplitBoundaryBox=r,this._m_CasterBoundaryBox=o,this._m_SplitOccluders=i}var t,n,o;return t=e,(n=[{key:"calculate",value:function(e){return this._calculate(e),this._m_CasterCount}},{key:"_calculate",value:function(t){var n=this;if(t.getFilterFlag()!=r.default.S_ALWAYS)if(t.isDrawable&&t.isDrawable()&&!t.isGUI()){if(t.isCastShadow()){var o=t.getBoundingVolume(),a=e.S_AABB_BOUNDARY_BOX0;o.transformFromMat44(this._m_VP,e.S_AABB_BOUNDARY_BOX0);var _=this._m_SplitBoundaryBox.contains(a);if(_||o.getType()!=i.default.S_TYPE_AABB)_&&(this._m_CasterBoundaryBox.merge(a),this._m_CasterCount++,null!=this._m_SplitOccluders&&this._m_SplitOccluders.push(t));else if(a.setZHalf(a.getZHalf()+50),a.setCenter(a.getCenter(e.S_TEMP_VEC3_0).addInXYZ(0,0,25)),this._m_SplitBoundaryBox.contains(a)){var s=a.getCenter(e.S_TEMP_VEC3_1)._m_X;Math.abs(s)!=Number.MAX_VALUE&&!Number.isNaN(s)&&Number.isFinite(s)&&(a.setZHalf(a.getZHalf()-50),a.setCenter(a.getCenter(e.S_TEMP_VEC3_0).subInXYZ(0,0,25)),this._m_CasterBoundaryBox.merge(a),this._m_CasterCount++),null!=this._m_SplitOccluders&&this._m_SplitOccluders.push(t)}}}else if(t instanceof r.default){var u=t.getBoundingVolume();if(null!=u){var l=e.S_AABB_BOUNDARY_BOX0;u.transformFromMat44(this._m_VP,e.S_AABB_BOUNDARY_BOX0);var f=this._m_SplitBoundaryBox.contains(l);f||l.getType()!=i.default.S_TYPE_AABB||(l.setZHalf(l.getZHalf()+50),l.setCenter(l.getCenter(e.S_TEMP_VEC3_0).addInXYZ(0,0,25)),f=this._m_SplitBoundaryBox.contains(l)),f&&t.getChildren().forEach((function(e){n._calculate(e)}))}}}}])&&s(t.prototype,n),o&&s(t,o),e}();t.default=l,u(l,"S_TEMP_VEC3_0",new a.default),u(l,"S_TEMP_VEC3_1",new a.default),u(l,"S_TEMP_VEC3_2",new a.default),u(l,"S_AABB_BOUNDARY_BOX0",new o.default),u(l,"S_AABB_BOUNDARY_BOX1",new o.default)},948:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=m(n(5602)),i=m(n(1550)),a=m(n(2949)),_=m(n(5397)),s=m(n(5604)),u=m(n(3846)),l=m(n(1266)),f=m(n(431)),c=m(n(9784));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},d(e,t,n||e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(S,e);var t,n,r,m=g(S);function S(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),t.nbShadowMaps=1,C(v(n=m.call(this,e,t)),"_m_ShadowCam",void 0),C(v(n),"_m_OutAngle",-1),C(v(n),"_m_SpotRange",-1),C(v(n),"_m_Position",new s.default),C(v(n),"_m_Direction",new s.default),C(v(n),"_m_UpdateCasterCam",!1),C(v(n),"_m_TempVec3",new s.default),n.init(t.shadowMapSize),n}return t=S,(n=[{key:"init",value:function(e){this._m_ShadowCam=new i.default(this._m_Scene,{id:this._m_Id+"_"+_.default.nextId(),width:e,height:e,fixedSize:!0})}},{key:"initMat",value:function(){d(y(S.prototype),"initMat",this).call(this),this._m_PostShadowMat.addDefine(c.default.S_SPOTLIGHT_SHADOWS_SRC,!1)}},{key:"_uploadInfo",value:function(e,t){d(y(S.prototype),"_uploadInfo",this).call(this,e,t);var n=t.m_LastSubShader.getContextVars(),r=null;if(r=n[o.default.S_LIGHT_DIR]){var i=this._m_Light.getDirection();e.uniform3f(r.loc,i._m_X,i._m_Y,i._m_Z)}if(r=n[o.default.S_LIGHT_POS]){var a=this._m_Light.getPosition();e.uniform3f(r.loc,a._m_X,a._m_Y,a._m_Z)}}},{key:"getShadowCam",value:function(e){return this._m_ShadowCam}},{key:"updateShadowCams",value:function(){null!=this._m_Light?this._m_OutAngle==this._m_Light.getOuterAngle()&&this._m_SpotRange==this._m_Light.getSpotRange()&&this._m_Position.equals(this._m_Light.getPosition())&&this._m_Direction.equals(this._m_Light.getDirection())?this._m_UpdateCasterCam&&(this._m_UpdateCasterCam=!1,this._m_ShadowCam.setFrustumPerspective(this._m_OutAngle*f.default.S_RAD_TO_DEG*2,1,1,this._m_SpotRange),this._m_ShadowCam._updateFrustum()):(this._m_OutAngle=this._m_Light.getOuterAngle(),this._m_SpotRange=this._m_Light.getSpotRange(),this._m_Position.setTo(this._m_Light.getPosition()),this._m_Direction.setTo(this._m_Light.getDirection()),this._m_ShadowCam.setFrustumPerspective(this._m_OutAngle*f.default.S_RAD_TO_DEG*2,1,1,this._m_SpotRange),this._m_ShadowCam.lookAt(this._m_Position,this._m_Position.add(this._m_Direction,this._m_TempVec3),this._m_ShadowCam.getUp()),this._m_ShadowCam._updateFrustum(),this._m_ShadowCam.getProjectViewMatrix(!0)):u.default.warn("无效光源!")}},{key:"getShadowGeometryCasts",value:function(e,t){var n=this;return this._m_Scene.getSceneNodes().forEach((function(e){l.default.calculateNodeInFrustum(e,n._m_ShadowCam,a.default.S_SHADOW_CAST,t)})),this._m_UpdateCasterCam=!0,this._m_ShadowCam.setFrustumPerspective(this._m_OutAngle*f.default.S_RAD_TO_DEG*2,1,1,1e3),this._m_ShadowCam.getProjectViewMatrix(!0),t}}])&&h(t.prototype,n),r&&h(t,r),S}(o.default);t.default=T},1193:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(3846))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"_get",value:function(e,t,n,r){r=r||{sync:!0};var o=new XMLHttpRequest;if(o.open(n||"POST",e,r.sync),r&&r.inflate&&(o.responseType="arraybuffer"),0==r.sync)return o.send(null),200===o.status?o.responseText:null;o.onreadystatechange=function(){4===o.readyState&&200===o.status&&t(o.response)},o.send(null)}},{key:"getBasePath",value:function(e){var t=e.lastIndexOf("/");return-1===t?e:e.substring(0,t+1)}},{key:"loadFile",value:function(e,t,n,r){(r=r||{type:"GET",sync:!0}).type=r.type||"GET",r.sync=null==r.sync||r.sync;var i=new XMLHttpRequest;i.open(r.type,e,r.sync);var a=r&&r.inflate;if(o.default.debug("inflate:"+a),a&&(i.responseType="arraybuffer",o.default.debug("二进制")),0==r.sync)return i.send(null),200===i.status?i.responseText:null;i.addEventListener("load",(function(e){var r=e.target.response;200===i.status?t&&t(r):0===i.status?(o.default.warn("loadFile: HTTP Status 0 received."),t&&t(r)):n&&n(e)}),!1),i.addEventListener("error",(function(e){n&&n(e)}),!1),i.send(null)}},{key:"loadMaterialSourceDef",value:function(t,n){return e._get(t,null,"GET",{sync:!1})}},{key:"loadModel",value:function(e,t){}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}();t.default=a},66:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.listeners={}}var t,r,o;return t=e,r=[{key:"removeA",value:function(e){for(var t,n,r=arguments,o=r.length;o>1&&e.length;)for(t=r[--o];-1!==(n=e.indexOf(t));)e.splice(n,1);return e}},{key:"isset",value:function(e){for(var t=0;t<arguments.length;t++)if(void 0===arguments[t]||null==arguments[t])return!1;return!0}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"register",value:function(e,t,n){"string"==typeof e&&"function"==typeof t&&(this.listeners[e]||(this.listeners[e]=new Array),this.listeners[e].push({object:this.isset(n)?n:this.object,callback:t}))}},{key:"unregister",value:function(e,t,n){if("string"==typeof e&&"function"==typeof t&&(n=this.isset(n)?n:this.object,this.listeners[e]))for(var r=0;r<this.listeners[e].length;r++)if(this.listeners[e][r].object==n&&this.listeners[e][r].callback==t){this.listeners[e].splice(r,1);break}}},{key:"trigger",value:function(e,t,n){if("string"!=typeof e)return!1;if(t=t||new Array,this.isset(t)?this.isArray(t)||(t=[t]):t=new Array,"mouse"==e.substring(0,5).toLowerCase()&&(t[0]=this.normalizeEvent(t[0])),!this.listeners[e]||0==this.listeners[e].length)return!0;for(var r=this.listeners[e].slice(0),o=0;o<r.length;o++)if(!1===(this.isset(n)?r[o].callback.apply(n,t):r[o].callback.apply(r[o].object,t)))return!1;return!0}},{key:"normalizeEvent",value:function(e){return e}}],r&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},3846:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=console.log,i=console.info,a=console.warn,_=console.debug,s=console.error,u=console.time,l=console.timeEnd,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,f;return t=e,f=[{key:"debug",value:function(){}},{key:"log",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"time",value:function(){}},{key:"timeEnd",value:function(){}},{key:"timeCalc",value:function(){}},{key:"enable",value:function(t,n){switch(t){case e.S_DEBUG:e.debug=n?_:function(){};break;case e.S_INFO:e.info=n?i:function(){};break;case e.S_LOG:e.log=n?o:function(){};break;case e.S_WARN:e.warn=n?a:function(){};break;case e.S_ERROR:e.error=n?s:function(){};break;case e.S_TIME:e.time=n?u:function(){},e.timeEnd=n?l:function(){};break;case e.S_TIME_CALC:e.timeCalc=n?function(e){return e?(e.time=(new Date).getTime()-e.time,e):((e={}).time=(new Date).getTime(),e)}:function(){}}}}],(r=null)&&n(t.prototype,r),f&&n(t,f),e}();t.default=f,r(f,"S_DEBUG",0),r(f,"S_INFO",1),r(f,"S_WARN",2),r(f,"S_LOG",3),r(f,"S_ERROR",4),r(f,"S_TIME",5),r(f,"S_TIME_CALC",6),f.enable(f.S_LOG,!0),f.enable(f.S_INFO,!0),f.enable(f.S_DEBUG,!0),f.enable(f.S_ERROR,!0),f.enable(f.S_WARN,!0),f.enable(f.S_TIME,!0)},8583:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9271)),o=i(n(307));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _,s,u,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"nextId",value:function(){return--e.count}},{key:"pushVec3ToArray",value:function(e,t){e.push(t._m_X),e.push(t._m_Y),e.push(t._m_Z)}},{key:"createProbeMesh",value:function(){var e=new o.default;return e.setData(o.default.S_POSITIONS,[3.4201992,0,-9.396927,2.7669992,2.0103426,-9.396927,1.0568995,3.2528028,-9.396927,-1.0568998,3.2528026,-9.396927,-2.7669995,2.0103424,-9.396927,-3.4201992,-2.9900332e-7,-9.396927,-2.766999,-2.010343,-9.396927,-1.0569,-3.2528026,-9.396927,1.0569001,-3.2528026,-9.396927,2.7670002,-2.0103416,-9.396927,3.4201992,0,-9.396927,6.427875,0,-7.660445,5.20026,3.7782102,-7.660445,1.9863225,6.1132727,-7.660445,-1.9863229,6.113272,-7.660445,-5.2002606,3.7782097,-7.660445,-6.427875,-5.6194267e-7,-7.660445,-5.2002597,-3.7782109,-7.660445,-1.9863232,-6.113272,-7.660445,1.9863235,-6.113272,-7.660445,5.2002616,-3.7782083,-7.660445,6.427875,0,-7.660445,8.6602545,0,-4.9999995,7.0062933,5.0903697,-4.9999995,2.6761656,8.236392,-4.9999995,-2.676166,8.236391,-4.9999995,-7.006294,5.090369,-4.9999995,-8.6602545,-7.5710346e-7,-4.9999995,-7.006293,-5.0903707,-4.9999995,-2.6761668,-8.236391,-4.9999995,2.676167,-8.236391,-4.9999995,7.006295,-5.0903673,-4.9999995,8.6602545,0,-4.9999995,9.848078,0,-1.7364818,7.9672623,5.7885547,-1.7364818,3.0432231,9.366078,-1.7364818,-3.0432239,9.366078,-1.7364818,-7.9672627,5.788554,-1.7364818,-9.848078,-8.6094633e-7,-1.7364818,-7.967262,-5.788556,-1.7364818,-3.0432243,-9.366078,-1.7364818,3.0432246,-9.366078,-1.7364818,7.9672647,-5.788552,-1.7364818,9.848078,0,-1.7364818,9.848078,0,1.7364826,7.9672623,5.7885547,1.7364826,3.0432231,9.366078,1.7364826,-3.0432239,9.366078,1.7364826,-7.9672627,5.788554,1.7364826,-9.848078,-8.6094633e-7,1.7364826,-7.967262,-5.788556,1.7364826,-3.0432243,-9.366078,1.7364826,3.0432246,-9.366078,1.7364826,7.9672647,-5.788552,1.7364826,9.848078,0,1.7364826,8.660254,0,5.0000005,7.0062923,5.090369,5.0000005,2.6761653,8.236391,5.0000005,-2.6761658,8.23639,5.0000005,-7.006293,5.0903687,5.0000005,-8.660254,-7.571034e-7,5.0000005,-7.006292,-5.09037,5.0000005,-2.6761663,-8.23639,5.0000005,2.6761665,-8.23639,5.0000005,7.0062943,-5.090367,5.0000005,8.660254,0,5.0000005,6.427875,0,7.660445,5.20026,3.7782102,7.660445,1.9863225,6.1132727,7.660445,-1.9863229,6.113272,7.660445,-5.2002606,3.7782097,7.660445,-6.427875,-5.6194267e-7,7.660445,-5.2002597,-3.7782109,7.660445,-1.9863232,-6.113272,7.660445,1.9863235,-6.113272,7.660445,5.2002616,-3.7782083,7.660445,6.427875,0,7.660445,3.4201992,0,9.396927,2.7669992,2.0103426,9.396927,1.0568995,3.2528028,9.396927,-1.0568998,3.2528026,9.396927,-2.7669995,2.0103424,9.396927,-3.4201992,-2.9900332e-7,9.396927,-2.766999,-2.010343,9.396927,-1.0569,-3.2528026,9.396927,1.0569001,-3.2528026,9.396927,2.7670002,-2.0103416,9.396927,3.4201992,0,9.396927,0,0,-10,0,0,10]),e.setData(o.default.S_NORMALS,[-.34201992,-0,.9396927,-.27669993,-.20103426,.9396927,-.10568996,-.32528028,.9396927,.10568998,-.32528028,.9396927,.27669996,-.20103423,.9396927,.34201992,2.990033e-8,.9396927,.2766999,.20103431,.9396927,.10569,.32528028,.9396927,-.10569002,.32528028,.9396927,-.27670002,.20103417,.9396927,-.34201992,-0,.9396927,-.6427875,-0,.76604456,-.520026,-.37782103,.76604456,-.19863226,-.6113273,.76604456,.19863228,-.61132723,.76604456,.5200261,-.37782097,.76604456,.6427875,5.6194267e-8,.76604456,.52002597,.3778211,.76604456,.19863233,.61132723,.76604456,-.19863234,.61132723,.76604456,-.52002615,.37782082,.76604456,-.6427875,-0,.76604456,-.86602545,-0,.49999997,-.70062935,-.50903696,.49999997,-.26761654,-.82363915,.4999999,.2676166,-.8236391,.49999997,.70062935,-.5090369,.4999999,.86602545,7.5710346e-8,.49999997,.70062923,.509037,.4999999,.2676167,.8236391,.49999997,-.26761672,.8236391,.49999997,-.7006295,.5090367,.4999999,-.86602545,-0,.49999997,-.9848078,-0,.17364818,-.7967262,-.57885545,.17364818,-.30432233,-.93660784,.17364818,.3043224,-.93660784,.17364818,.7967263,-.57885545,.17364818,.9848078,8.609464e-8,.17364818,.79672617,.57885563,.17364818,.30432245,.93660784,.17364818,-.30432245,.93660784,.17364818,-.79672647,.5788552,.17364818,-.9848078,-0,.17364818,-.9848078,-0,-.17364827,-.7967262,-.57885545,-.17364827,-.30432233,-.93660784,-.17364827,.3043224,-.93660784,-.17364827,.7967263,-.57885545,-.17364827,.9848078,8.609464e-8,-.17364827,.7967261,.5788556,-.17364825,.30432242,.9366078,-.17364825,-.30432245,.9366078,-.17364825,-.79672647,.5788552,-.17364827,-.9848078,-0,-.17364827,-.8660254,-0,-.50000006,-.70062923,-.50903696,-.50000006,-.26761654,-.8236391,-.50000006,.2676166,-.82363904,-.50000006,.7006293,-.5090369,-.50000006,.8660254,7.571034e-8,-.50000006,.7006292,.509037,-.50000006,.26761663,.82363904,-.50000006,-.26761666,.82363904,-.50000006,-.7006294,.5090367,-.50000006,-.8660254,-0,-.50000006,-.6427875,-0,-.76604456,-.520026,-.37782103,-.76604456,-.19863226,-.6113273,-.76604456,.19863228,-.61132723,-.76604456,.5200261,-.37782097,-.76604456,.6427875,5.6194267e-8,-.76604456,.52002597,.3778211,-.76604456,.19863233,.61132723,-.76604456,-.19863234,.61132723,-.76604456,-.52002615,.37782082,-.76604456,-.6427875,-0,-.76604456,-.34201992,-0,-.9396927,-.27669993,-.20103426,-.9396927,-.10568996,-.32528028,-.9396927,.10568998,-.32528028,-.9396927,.27669996,-.20103423,-.9396927,.34201992,2.990033e-8,-.9396927,.2766999,.20103431,-.9396927,.10569,.32528028,-.9396927,-.10569002,.32528028,-.9396927,-.27670002,.20103417,-.9396927,-.34201992,-0,-.9396927,0,0,1,0,0,-1]),e.setData(o.default.S_INDICES,[0,11,1,1,11,12,1,12,2,2,12,13,2,13,3,3,13,14,3,14,4,4,14,15,4,15,5,5,15,16,5,16,6,6,16,17,6,17,7,7,17,18,7,18,8,8,18,19,8,19,9,9,19,20,9,20,10,10,20,21,11,22,12,12,22,23,12,23,13,13,23,24,13,24,14,14,24,25,14,25,15,15,25,26,15,26,16,16,26,27,16,27,17,17,27,28,17,28,18,18,28,29,18,29,19,19,29,30,19,30,20,20,30,31,20,31,21,21,31,32,22,33,23,23,33,34,23,34,24,24,34,35,24,35,25,25,35,36,25,36,26,26,36,37,26,37,27,27,37,38,27,38,28,28,38,39,28,39,29,29,39,40,29,40,30,30,40,41,30,41,31,31,41,42,31,42,32,32,42,43,33,44,34,34,44,45,34,45,35,35,45,46,35,46,36,36,46,47,36,47,37,37,47,48,37,48,38,38,48,49,38,49,39,39,49,50,39,50,40,40,50,51,40,51,41,41,51,52,41,52,42,42,52,53,42,53,43,43,53,54,44,55,45,45,55,56,45,56,46,46,56,57,46,57,47,47,57,58,47,58,48,48,58,59,48,59,49,49,59,60,49,60,50,50,60,61,50,61,51,51,61,62,51,62,52,52,62,63,52,63,53,53,63,64,53,64,54,54,64,65,55,66,56,56,66,67,56,67,57,57,67,68,57,68,58,58,68,69,58,69,59,59,69,70,59,70,60,60,70,71,60,71,61,61,71,72,61,72,62,62,72,73,62,73,63,63,73,74,63,74,64,64,74,75,64,75,65,65,75,76,66,77,67,67,77,78,67,78,68,68,78,79,68,79,69,69,79,80,69,80,70,70,80,81,70,81,71,71,81,82,71,82,72,72,82,83,72,83,73,73,83,84,73,84,74,74,84,85,74,85,75,75,85,86,75,86,76,76,86,87,0,1,88,1,2,88,2,3,88,3,4,88,4,5,88,5,6,88,6,7,88,7,8,88,8,9,88,9,10,88,77,89,78,78,89,79,79,89,80,80,89,81,81,89,82,82,89,83,83,89,84,84,89,85,85,89,86,86,89,87]),e}},{key:"createAABBBoundingBoxMeshFromAABBBoundingBox",value:function(e){var t=new o.default,n=e.getMin(),r=e.getMax(),i=[n._m_X,n._m_Y,n._m_Z,n._m_X,n._m_Y,r._m_Z,r._m_X,n._m_Y,n._m_Z,r._m_X,n._m_Y,r._m_Z,n._m_X,r._m_Y,n._m_Z,n._m_X,r._m_Y,r._m_Z,r._m_X,r._m_Y,n._m_Z,r._m_X,r._m_Y,r._m_Z];return t.setData(o.default.S_POSITIONS,i),t.setData(o.default.S_INDICES,[0,1,1,3,3,2,2,0,4,5,5,7,7,6,6,4,0,4,1,5,2,6,3,7]),t.setPrimitive(o.default.S_PRIMITIVE_LINES),t}},{key:"createViewFrustumMeshFromCamera",value:function(t,n){var i=t.getWidth(),a=t.getHeight(),_=[];e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(0,0),0,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(0,a),0,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(i,a),0,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(i,0),0,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(0,0),1,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(0,a),1,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(i,a),1,n||!0)),e.pushVec3ToArray(_,t.getWorldCoordinates(new r.default(i,0),1,n||!0));var s=new o.default;return s.setData(o.default.S_POSITIONS,_),s.setData(o.default.S_INDICES,[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s.setPrimitive(o.default.S_PRIMITIVE_LINES),s}}],(n=null)&&a(t.prototype,n),i&&a(t,i),e}();t.default=l,u=0,(s="count")in(_=l)?Object.defineProperty(_,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):_[s]=u},5247:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(7341)),o=d(n(5604)),i=d(n(1550)),a=d(n(5397)),_=(d(n(9784)),d(n(4048))),s=d(n(7141)),u=d(n(3846)),l=d(n(9468)),f=d(n(8113)),c=d(n(4008)),m=d(n(3370)),h=d(n(1759));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(t,n,r,i){p(this,e),this._m_Scene=t,this._m_MipMap=i,this._m_Resolute=n,this._m_CaptureCameres=[],this._m_CaptureFrames=[],this._m_CaptureResult=new _.default(t),this._m_CaptureResult.setTextureFormat(_.default.S_TEXTURE_FORMAT.S_RGBA16F,_.default.S_TEXTURE_FORMAT.S_RGBA,_.default.S_TEXTURE_FORMAT.S_FLOAT),this._m_CapturePixels=[],this._m_Position=new o.default,r&&this._m_Position.setTo(r),this._m_PrefilterSky=new l.default(t,{id:"prefitlerSky"+a.default.nextId()}),this._m_PrefilterSky.setMaterial(new c.default(t,{id:"prefilterMat"+a.default.nextId(),materialDef:f.default.parse(m.default.S_PREFILTER_DEF)})),this._m_PrefilterSky.getMaterial().setParam("roughness",(new h.default).valueOf(0)),this._m_PrefilterSky.getMaterial().setParam("resolution",(new h.default).valueOf(n)),this._m_PrefilterSky.getMaterial().setParam("envMap",this._m_CaptureResult),this._m_PrefilterMap=new _.default(t),this._m_PrefilterMap.setTextureFormat(_.default.S_TEXTURE_FORMAT.S_RGBA16F,_.default.S_TEXTURE_FORMAT.S_RGBA,_.default.S_TEXTURE_FORMAT.S_FLOAT),this._m_PrefilterMap.setFilter(t,_.default.S_FILTERS.S_LINEAR_MIPMAP_NEAREST,_.default.S_FILTERS.S_LINEAR),this._m_PrefilterMipmap=0;for(var s=n,u=n;(s>=1||u>=1)&&1!=s&&1!=u;)s/=2,u/=2,this._m_PrefilterMipmap++;this._init()}return S(e,[{key:"_init",value:function(){for(var t=new o.default,n=this._m_Scene.getCanvas().getGLContext(),_=0;_<6;_++)this._m_CaptureCameres[_]=new i.default(this._m_Scene,{id:"capture_"+_+"_"+a.default.nextId(),fovy:90,aspect:1}),e._S_CAPTURE_CONFIG[_].dir.add(this._m_Position,t),this._m_CaptureCameres[_].lookAt(this._m_Position,t,e._S_CAPTURE_CONFIG[_].up),this._m_CaptureFrames[_]=new r.default(n,"capture_frame_"+_+"_"+a.default.nextId(),this._m_Resolute,this._m_Resolute),this._m_CaptureFrames[_].addTexture(n,"capture_texture_"+_,n.RGBA16F,0,n.RGBA,n.FLOAT,n.COLOR_ATTACHMENT0,!1,this._m_MipMap),this._m_CaptureFrames[_].addBuffer(n,"capture_depth_"+_,n.DEPTH24_STENCIL8,n.DEPTH_STENCIL_ATTACHMENT),this._m_CaptureFrames[_].finish(n,this._m_Scene,!1);this._m_CaptureResult.setPreloadColor(this._m_Scene,new s.default(.5,.5,.5,1))}},{key:"setPosition",value:function(e){this._m_Position.setTo(e)}},{key:"getPosition",value:function(){return this._m_Position}},{key:"capture",value:function(){var t=this._m_Scene.getCanvas().getGLContext();this._m_Scene.getRender()._resetFrameContext(),this._m_Scene.getRender()._drawEnv(t);var n=this._m_Scene.getMainCamera(),r=this._m_Scene.getRender(),o=null;r.setViewPort(t,0,0,this._m_Resolute,this._m_Resolute);for(var i=0;i<6;i++)this._m_Scene.setMainCamera(this._m_CaptureCameres[i]),this._m_CaptureFrames[i].use(r),this._m_CaptureFrames[i].clear(t),this._m_Scene.getRender()._drawEnv(t),o=this._m_CaptureFrames[i].readPixels(t,"",t.RGBA,t.FLOAT),this._m_CapturePixels[i]=o,this._m_CaptureResult.setImage(this._m_Scene,e._S_CAPTURE_FACE[i],o,{width:this._m_Resolute,height:this._m_Resolute});this._m_CaptureResult.setWrap(this._m_Scene,_.default.S_WRAPS.S_CLAMP_TO_EDGE,_.default.S_WRAPS.S_CLAMP_TO_EDGE,_.default.S_WRAPS.S_CLAMP_TO_EDGE),this._m_Scene.setMainCamera(n),this._m_Scene.getRender().useDefaultFrame(),r.setViewPort(t,0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight())}},{key:"prefiltered",value:function(){var t=this._m_Scene.getCanvas().getGLContext(),n=this._m_Scene.getSky();this._m_Scene.setSky(this._m_PrefilterSky),this._m_Scene.getRender()._resetFrameContext(),this._m_Scene.getRender()._drawEnv(t);var r,o,i=this._m_Scene.getMainCamera(),a=this._m_Scene.getRender(),s=null;a.setViewPort(t,0,0,this._m_Resolute,this._m_Resolute);for(var u=0;u<6;u++){this._m_Scene.setMainCamera(this._m_CaptureCameres[u]),this._m_CaptureFrames[u].use(a),this._m_CaptureFrames[u].clear(t);for(var l=0;l<=this._m_PrefilterMipmap;l++)r=this._m_Resolute*Math.pow(.5,l),o=this._m_Resolute*Math.pow(.5,l),this._m_PrefilterSky.getMaterial().setParam("roughness",(new h.default).valueOf(1*l/(this._m_PrefilterMipmap-1))),this._m_CaptureFrames[u].clear(t),this._m_Scene.getRender()._drawEnv(t),s=this._m_CaptureFrames[u].readPixels(t,"",t.RGBA,t.FLOAT),this._m_PrefilterMap.setImage(this._m_Scene,e._S_CAPTURE_FACE[u],s,{width:r,height:o,mipmapLevel:l})}this._m_PrefilterMap.setWrap(this._m_Scene,_.default.S_WRAPS.S_CLAMP_TO_EDGE,_.default.S_WRAPS.S_CLAMP_TO_EDGE,_.default.S_WRAPS.S_CLAMP_TO_EDGE),this._m_Scene.setMainCamera(i),this._m_Scene.getRender().useDefaultFrame(),this._m_Scene.setSky(n),a.setViewPort(t,0,0,this._m_Scene.getCanvas().getWidth(),this._m_Scene.getCanvas().getHeight())}},{key:"getCaptureTextureCube",value:function(){return this._m_CaptureResult}},{key:"getCapturePixels",value:function(){return this._m_CapturePixels}},{key:"getPrefilterTextureCube",value:function(){return this._m_PrefilterMap}},{key:"getPrefilterMipMap",value:function(){return this._m_PrefilterMipmap}}]),e}();v(y,"_S_CAPTURE_CONFIG",[{dir:new o.default(1,0,0),up:new o.default(0,-1,0)},{dir:new o.default(-1,0,0),up:new o.default(0,-1,0)},{dir:new o.default(0,1,0),up:new o.default(0,0,1)},{dir:new o.default(0,-1,0),up:new o.default(0,0,-1)},{dir:new o.default(0,0,1),up:new o.default(0,-1,0)},{dir:new o.default(0,0,-1),up:new o.default(0,-1,0)}]),v(y,"_S_CAPTURE_FACE",{0:_.default.S_FACE.PositiveX,1:_.default.S_FACE.NegativeX,2:_.default.S_FACE.PositiveY,3:_.default.S_FACE.NegativeY,4:_.default.S_FACE.PositiveZ,5:_.default.S_FACE.NegativeZ});var C=function(){function e(){p(this,e)}return S(e,null,[{key:"captureProbe",value:function(t,n,r){t.getCanvas().getGLContext();var o=r&&null!=r.resolute?r.resolute:e._S_DEFAULT_CAPTURE_RESOLUTE,i=new y(t,o,n.getPosition(),r.mipmap);return u.default.time("capture!"),i.capture(),u.default.timeEnd("capture!"),i}},{key:"bakeGIProbe",value:function(t,n,r){(r=r||{}).mipmap=!0;var o=r&&null!=r.resolute?r.resolute:e._S_DEFAULT_CAPTURE_RESOLUTE,i=e.captureProbe(t,n,r);u.default.time("shCoeffs");var a=e.getShCoeffs(o,o,i.getCapturePixels(),e._S_FIX_SEAMS_METHOD.Wrap);return e.prepareShCoefs(a),n.setShCoeffs(a),u.default.timeEnd("shCoeffs"),u.default.time("prefiltered"),i.prefiltered(),n.setPrefilterEnvMap(i.getPrefilterTextureCube()),n.setPrefilterMipmap(i.getPrefilterMipMap()),u.default.timeEnd("prefiltered"),i}},{key:"_bakePrefilteredEnvMap",value:function(t,n,r,i){t.getCapturePixels(),i.getCapturePixels();for(var a=new o.default,_=new o.default,u=(new s.default,n),l=0;l<4;l++){e._getRFM(l,4),e._getSFM(l,4);for(var f=0;f<u;f++)for(var c=0;c<u;c++)_.setToInXYZ(0,0,0),e._getVFCFTC(c,f,u,face,a,r)}}},{key:"_prefilterEnvMapTexel",value:function(t,n,r,i,a,_,u){var l=2*Math.PI/1,f=256*Math.abs(i._m_Z+i._m_X),c=(Math.cos(.5*f%(2*Math.PI)),r*r);c*=c;var m=e._S_TEMP_UNIT_X;Math.abs(i._m_Z)<.999&&(m=e._S_TEMP_UNIT_Y);var h=new o.default,d=new o.default;h.setTo(m),h.cross(i),h.normal(),d.setTo(i),d.cross(h);for(var p=new o.default(0,0,1),g=new o.default,S=new s.default,v=new o.default,y=0;y<a;y++){S=e._getHPoint(y,a,S),(v=e._iSGGX(S,c,v)).normal();var C=v._m_Z,T=v.multLength(2*C).sub(p);T._m_Z;0!=_&&e._computeMipLevel(r,a,t,C),e._2World(T,i,h,d,g),0}}},{key:"_getHPoint",value:function(e,t,n){var r,o=e;return n._m_X=1*e/t,o=(16711935&(o=(252645135&(o=(858993459&(o=(1431655765&(o=o<<16|o>>16))<<1|(2863311530&o)>>>1))<<2|(3435973836&o)>>>2))<<4|(4042322160&o)>>>4))<<8|(4278255360&o)>>>8,o&=4294967295,n._m_Y=1*o*2.3283064365386963e-10,r=2*Math.PI*n._m_Y,n._m_Z=Math.cos(r),n._m_W=Math.sin(r),n}},{key:"_2World",value:function(e,t,n,r,i){i.setTo(n),i.multLength(e._m_X);var a=new o.default;a.set(r),a.multLength(e._m_Y),i.add(a),a.set(t),a.multLength(e._m_Z),i.add(a)}},{key:"_samplePixel",value:function(e,t,n,r,o,i){if(r<=0)return 0;var a=new s.default;return i._m_X=i._m_X+a._m_X*r,i._m_Y=i._m_Y+a._m_Y*r,i._m_Z=i._m_Z+a._m_Z*r,r}},{key:"_iSGGX",value:function(e,t,n){var r=Math.sqrt((1-e._m_X)/(1+(t-1)*e._m_X)),o=Math.sqrt(1-r*r),i=o*e._m_Z,a=o*e._m_W;return n._m_X=i,n._m_Y=a,n._m_Z=r,n}},{key:"_ggx",value:function(e,t){var n=t/(e*e*(t*t-1)+1);return n*n*(1/Math.PI)}},{key:"_computeMipLevel",value:function(t,n,r,o){var i=o+1e-5,a=1/(n*(e._ggx(i,t)*i/(4*o))),_=4*Math.PI/(6*r*r),s=Math.log(r)/Math.log(2),u=Math.log(a/_)/Math.log(2);return Math.min(Math.max(.5*u+1,0),1*s)}},{key:"_getRFM",value:function(e,t){var n=1/(t-1);return(n*=e)*n}},{key:"_getSFM",value:function(e,t){return 0==e?1:Math.min(1<<t-1+2*e,8192)}},{key:"prepareShCoefs",value:function(t){var n=e._S_SQRT_PI,r=e._S_SQRT_3PI,o=e._S_SQRT_5PI,i=e._S_SQRT_15PI,a=1/(2*n),_=-r/2,s=-_,u=_,l=i/2,f=-l,c=o/4,m=f,h=i/4;t[0].multLength(a).multLength(e._S_SH_BAND_FACTOR[0]),t[1].multLength(_).multLength(e._S_SH_BAND_FACTOR[1]),t[2].multLength(-s).multLength(e._S_SH_BAND_FACTOR[2]),t[3].multLength(-u).multLength(e._S_SH_BAND_FACTOR[3]),t[4].multLength(-l).multLength(e._S_SH_BAND_FACTOR[4]),t[5].multLength(-f).multLength(e._S_SH_BAND_FACTOR[5]),t[6].multLength(c).multLength(e._S_SH_BAND_FACTOR[6]),t[7].multLength(m).multLength(e._S_SH_BAND_FACTOR[7]),t[8].multLength(h).multLength(e._S_SH_BAND_FACTOR[8])}},{key:"getShCoeffs",value:function(t,n,r,i){for(var a=[],_=0;_<9;_++)a.push(new o.default);for(var u,l=[],f=0,c=new o.default,m=new s.default,h=0;h<6;h++)for(var d=0;d<n;d++)for(var p=0;p<t;p++){u=e.getSAAV(p,d,t,h,c,i),e.evalShBasis(c,l),e._getPixelColor(p,d,t,n,r[h],m);for(var g=0;g<9;g++)a[g].setToInXYZ(a[g]._m_X+m._m_X*l[g]*u,a[g]._m_Y+m._m_Y*l[g]*u,a[g]._m_Z+m._m_Z*l[g]*u);f+=u}for(var S=0;S<9;++S)a[S].multLength(4*Math.PI/f);return a}},{key:"_getPixelColor",value:function(e,t,n,r,o,i){e*=4,i._m_X=o[t*n*4+e],i._m_Y=o[t*n*4+e+1],i._m_Z=o[t*n*4+e+2],i._m_W=o[t*n*4+e+3]}},{key:"evalShBasis",value:function(t,n){var r=t._m_X,o=t._m_Y,i=t._m_Z,a=r*r,_=o*o,s=i*i,u=e._S_SQRT_PI,l=e._S_SQRT_3PI,f=e._S_SQRT_5PI,c=e._S_SQRT_15PI;n[0]=1/(2*u),n[1]=-l*o/2,n[2]=l*i/2,n[3]=-l*r/2,n[4]=c*r*o/2,n[5]=-c*o*i/2,n[6]=f*(3*s-1)/4,n[7]=-c*r*i/2,n[8]=c*(a-_)/4}},{key:"getSAAV",value:function(t,n,r,o,i,a){var _,s,u,l,f=2*(t+.5)/(r*=1)-1,c=2*(n+.5)/r-1;e._getVFCFTC(t,n,r,o,i,a);var m=1/r;return _=f-m,s=c-m,u=f+m,l=c+m,e._areaElement(_,s)-e._areaElement(_,l)-e._areaElement(u,s)+e._areaElement(u,l)}},{key:"_areaElement",value:function(e,t){return Math.atan2(e*t,Math.sqrt(e*e+t*t+1))}},{key:"_getVFCFTC",value:function(t,n,r,o,i,a){var _,s;if(t*=1,n*=1,r*=1,a==e._S_FIX_SEAMS_METHOD.Stretch?(_=2*t/(r-1)-1,s=2*n/(r-1)-1):(_=2*(t+.5)/r-1,s=2*(n+.5)/r-1),a==e._S_FIX_SEAMS_METHOD.Wrap){var u=Math.pow(r,2)/Math.pow(r-1,3);_=u*Math.pow(_,3)+_,s=u*Math.pow(s,3)+s}switch(o){case 0:i.setToInXYZ(1,-s,-_);break;case 1:i.setToInXYZ(-1,-s,_);break;case 2:i.setToInXYZ(_,1,s);break;case 3:i.setToInXYZ(_,-1,-s);break;case 4:i.setToInXYZ(_,-s,1);break;case 5:i.setToInXYZ(-_,-s,-1)}return i.normal(),i}}]),e}();t.default=C,v(C,"_S_TEMP_UNIT_X",new o.default(1,0,0)),v(C,"_S_TEMP_UNIT_Y",new o.default(0,1,0)),v(C,"_S_TEMP_UNIT_Z",new o.default(0,0,1)),v(C,"_S_DEFAULT_CAPTURE_RESOLUTE",256),v(C,"_S_FIX_SEAMS_METHOD",{Wrap:0,Stretch:1,None:2}),v(C,"_S_SQRT_PI",Math.sqrt(Math.PI)),v(C,"_S_SQRT_3PI",Math.sqrt(3/Math.PI)),v(C,"_S_SQRT_5PI",Math.sqrt(5/Math.PI)),v(C,"_S_SQRT_15PI",Math.sqrt(15/Math.PI)),v(C,"_S_SH_BAND_FACTOR",[1,2/3,2/3,2/3,1/4,1/4,1/4,1/4,1/4])},5489:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=[],this._headLength=0,this._tail=[],this._index=0,this._length=0}var t,r,o;return t=e,(r=[{key:"length",get:function(){return this._length}},{key:"shift",value:function(){if(this._index>=this._headLength){var e=this._head;if(e.length=0,this._head=this._tail,this._tail=e,this._index=0,this._headLength=this._head.length,!this._headLength)return}var t=this._head[this._index];return this._index<0?delete this._head[this._index++]:this._head[this._index++]=void 0,this._length--,t}},{key:"push",value:function(e){return this._length++,this._tail.push(e),this}},{key:"unshift",value:function(e){return this._head[--this._index]=e,this._length++,this}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},2475:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(5604)),o=_(n(2320)),i=_(n(1446)),a=_(n(7141));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"mallocLightData",value:function(t){e.S_LIGHT_DATA=new i.default(3*t*4)}}],(n=null)&&s(t.prototype,n),r&&s(t,r),e}();t.default=l,u(l,"S_TEMP_VEC3",new r.default),u(l,"S_TEMP_VEC3_2",new r.default),u(l,"S_TEMP_VEC3_3",new r.default),u(l,"S_TEMP_VEC3_4",new r.default),u(l,"S_TEMP_VEC4",new a.default),u(l,"S_TEMP_VEC4_2",new a.default),u(l,"S_TEMP_VEC4_3",new a.default),u(l,"S_TEMP_MAT4",new o.default),u(l,"S_TEMP_MAT4_1",new o.default),u(l,"S_TEMP_MAT4_2",new o.default),u(l,"S_TEMP_MAT4_3",new o.default),u(l,"S_LIGHT_DATA_4",new i.default(48)),u(l,"S_LIGHT_DATA",l.S_LIGHT_DATA_4),u(l,"S_LIGHT_DATA_8",new i.default(96)),u(l,"S_SH_COEFFS",new i.default(27))},6552:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_m_TextureCanvas",void 0),r(this,"_m_Context",void 0),r(this,"_m_Pixelsize",void 0),r(this,"_m_Width",void 0),r(this,"_m_Height",void 0),r(this,"_m_BackgroundColor","#a0d7ff"),r(this,"_m_TextColor","black"),r(this,"_m_AlignLeftOffset",.5),r(this,"_m_AlignTopOffset",.7),r(this,"_m_CurLabel",null),this._m_Pixelsize=i||60,this._m_BackgroundColor=a||this._m_BackgroundColor,this._m_Width=t,this._m_Height=n,this._m_TextureCanvas=document.createElement("canvas"),this._m_TextureCanvas.width=t,this._m_TextureCanvas.height=n,this._m_TextureCanvas.style.width=t+"px",this._m_TextureCanvas.style.height=n+"px",this._m_TextureCanvas.style.padding="0",this._m_TextureCanvas.style.margin="0",this._m_TextureCanvas.style.top="0",this._m_TextureCanvas.style.background=this._m_BackgroundColor,this._m_TextureCanvas.style.position="absolute",this._m_TextureCanvas.style.opacity="1.0",this._m_TextureCanvas.style.visibility="hidden",this._m_TextureCanvas.style["z-index"]=1,document.getElementsByTagName("body")[0].appendChild(this._m_TextureCanvas),this._m_Context=this._m_TextureCanvas.getContext("2d"),this._m_Context.translate(this._m_Width,this._m_Height),this._m_Context.scale(-1,-1),this.setText(o)}var t,o,i;return t=e,(o=[{key:"getImage",value:function(){return this._m_TextureCanvas}},{key:"setPixelSize",value:function(e){this._m_Pixelsize=e,this.setText(this._m_CurLabel)}},{key:"setBackgroundColor",value:function(e){this._m_BackgroundColor=e,this.setText(this._m_CurLabel)}},{key:"setText",value:function(e){this._m_CurLabel=e,this._m_Context.fillStyle=this._m_BackgroundColor,this._m_Context.fillRect(0,0,this._m_Width,this._m_Height),this._m_Context.fillStyle=this._m_TextColor,this._m_Context.font=this._m_Pixelsize+"px sans-serif",this._m_Context.textAlign="center";var t=0+this._m_Width*this._m_AlignLeftOffset,n=0+this._m_Height*this._m_AlignTopOffset;this._m_Context.fillText(e,t,n,this._m_Width)}},{key:"setTextColor",value:function(e){this._m_TextColor=e,this.setText(this._m_CurLabel)}},{key:"setAlign",value:function(e,t){this._m_AlignLeftOffset=e,this._m_AlignTopOffset=t,this.setText(this._m_CurLabel)}}])&&n(t.prototype,o),i&&n(t,i),e}();t.default=o},5397:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _BoundingVolume=_interopRequireDefault(__webpack_require__(1322)),_Vector=_interopRequireDefault(__webpack_require__(5604)),_Vector2=_interopRequireDefault(__webpack_require__(9271)),_Log=_interopRequireDefault(__webpack_require__(3846));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={lz:function(e,t){if("number"!=typeof t||t<=0||"number"!=typeof e&&"string"!=typeof e)return e;for(e+="";e.length<t;)e="0"+e;return e},getHashCode:function(e){for(var t=0,n="string"==typeof e?e.length:0,r=0;r<n;)t=(t<<5)-t+e.charCodeAt(r++);return t<0?-1*t+4294967295:t},uniqueId:function(e,t){if(null==e||"string"!=typeof e){o.___uqidc?++o.___uqidc:o.___uqidc=0;var n=e=(new Date).getTime()+""+o.___uqidc}else n=o.getHashCode(e);return(t?"res:":"")+n.toString(32)+"-"+o.lz((4*e.length).toString(16),3)}},BS=[[0,1,0],[1,0,0],[0,0,1]],Tools=function(){function Tools(){_classCallCheck(this,Tools)}return _createClass(Tools,null,[{key:"isPowerOfTwo",value:function(e){return 0==(e&e-1)}},{key:"nextHighestPowerOfTwo",value:function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1}},{key:"ensureImageSizePowerOfTwo",value:function(e,t){Tools.isPowerOfTwo(e.width)&&Tools.isPowerOfTwo(e.height)||(t.width=Tools.nextHighestPowerOfTwo(e.width),t.height=Tools.nextHighestPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),e=t);return e}},{key:"checkIsNull",value:function(e){return null!=e&&null!=e}},{key:"nextId",value:function(){return Tools.uniqueId(--Tools._s_Id+"R3D")}},{key:"insertLine",value:function(e,t,n){for(var r=(e=Tools.trim(e)).split("\n"),o="",i=0;i<r.length;i++)i==n&&(o+=t+"\n"),o+=r[i]+"\n";return o}},{key:"uniqueId",value:function(e){return o.uniqueId(e)}},{key:"getTagPattern",value:function getTagPattern(str){return eval("/"+str+"/g")}},{key:"getPattern",value:function getPattern(str){return eval("/"+str+"/")}},{key:"trim",value:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},{key:"find",value:function(e,t){return-1!=e.search(t)}},{key:"find2",value:function(e,t){return e.search(t)}},{key:"repSrc",value:function(e,t,n,r){return-1!=e.search(t)?e.replace(n,r):e}},{key:"approxScreenArea",value:function(e,t,n){return e.getType()==_BoundingVolume.default.S_TYPE_AABB?(e.getXHalf()*e.getXHalf()+e.getYHalf()*e.getYHalf()+e.getZHalf()*e.getZHalf())*n*n/(t*t*4)*Math.PI:(e.getType(),_BoundingVolume.default.S_TYPE_SPHERE,0)}},{key:"generatorTangents2",value:function(e,t,n,r){for(var o=t.length/3,i=new Float32Array(4*o),a=[],_=[],s=0;s<o;s++)a[s]=new _Vector.default,_[s]=new _Vector.default;for(var u=new _Vector.default,l=new _Vector.default,f=new _Vector.default,c=new _Vector2.default,m=new _Vector2.default,h=new _Vector2.default,d=new _Vector.default,p=new _Vector.default,g=function(e,r,o){u.setToInXYZ(t[3*e],t[3*e+1],t[3*e+2]),l.setToInXYZ(t[3*r],t[3*r+1],t[3*r+2]),f.setToInXYZ(t[3*o],t[3*o+1],t[3*o+2]),c.setToInXY(n[2*e],n[2*e+1]),m.setToInXY(n[2*r],n[2*r+1]),h.setToInXY(n[2*o],n[2*o+1]),l.sub(u),f.sub(u),m.sub(c),h.sub(c);var i=1/(m._m_X*h._m_Y-h._m_X*m._m_Y);isFinite(i)&&(d.setTo(l),d.multLength(h._m_Y),d.addInXYZ(f._m_X*-m._m_Y,f._m_Y*-m._m_Y,f._m_Z*-m._m_Y),d.multLength(i),p.setTo(f),p.multLength(m._m_X),p.addInXYZ(l._m_X*-h._m_X,l._m_Y*-h._m_X,l._m_Z*-h._m_X),p.multLength(i),a[e].add(d),a[r].add(d),a[o].add(d),_[e].add(p),_[r].add(p),_[o].add(p))},S=0;S<e.length;S+=3)g(e[S+0],e[S+1],e[S+2]);for(var v,y,C,T=new _Vector.default,b=new _Vector.default,P=new _Vector.default,E=new _Vector.default,D=function(e){P.setToInXYZ(r[3*e],r[3*e+1],r[3*e+2]),E.setTo(P),y=a[e],T.setTo(y),T.sub(P.multLength(P.dot(y))).normal(),E.cross(y,b),C=b.dot(_[e]),v=C<0?-1:1,i[4*e]=T._m_X,i[4*e+1]=T._m_Y,i[4*e+2]=T._m_Z,i[4*e+3]=v},R=0;R<e.length;R+=3)D(e[R+0]),D(e[R+1]),D(e[R+2]);return i}},{key:"generatorFillTangents2",value:function(e){for(var t=4*(e.length/3),n=[],r=0;r<t;r++)n[r]=0;return n}},{key:"generatorFillTangents",value:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t}},{key:"generatorTangents",value:function(e,t,n){for(var r=new _Vector.default,o=new _Vector.default,i=new Array(4).fill(0),a=0,_=0,s=0,u=0,l=[],f={},c=new _Vector.default,m=new _Vector.default,h=new _Vector.default,d=new _Vector2.default,p=new _Vector2.default,g=new _Vector2.default,S=new _Vector2.default,v=0,y=0,C=0,T=0,b=0;b<e.length;b+=3){c.setToInXYZ(t[3*e[b]],t[3*e[b]+1],t[3*e[b]+2]),m.setToInXYZ(t[3*e[b+1]],t[3*e[b+1]+1],t[3*e[b+1]+2]),h.setToInXYZ(t[3*e[b+2]],t[3*e[b+2]+1],t[3*e[b+2]+2]),d.setToInXY(n[2*e[b]],n[2*e[b]+1]),p.setToInXY(n[2*e[b+1]],n[2*e[b+1]+1]),g.setToInXY(n[2*e[b+2]],n[2*e[b+2]+1]),m.sub(c,r),h.sub(c,o),p.sub(d,S),v=S._m_X,y=S._m_Y,g.sub(d,S),C=S._m_X,T=S._m_Y,Tools._generatorDietaryUVMat(v,y,C,T,i);var P=(_=i[0]*r._m_X+i[1]*o._m_X)*_+(s=i[0]*r._m_Y+i[1]*o._m_Y)*s+(u=i[0]*r._m_Z+i[1]*o._m_Z)*u;_*=P=1/Math.sqrt(P),s*=P,u*=P,Tools._generatorWeightedTangent(e[b],e[b+1],e[b+2],_,s,u,f)}for(var E in Tools._normalizedTangents(f),f)l[a++]=f[E][0],l[a++]=f[E][1],l[a++]=f[E][2];return l}},{key:"_normalizedTangents",value:function(e){var t=[],n=0;for(var r in e)t[0]=e[r][0],t[1]=e[r][1],t[2]=e[r][2],(n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2])>0?(n=Math.sqrt(1*n),t[0]/=n,t[1]/=n,t[2]/=n):t[0]=t[1]=t[2]=0,e[r][0]=t[0],e[r][1]=t[1],e[r][2]=t[2]}},{key:"_generatorWeightedTangent",value:function(e,t,n,r,o,i,a){Tools.checkIsNull(a[e])?a[e]=[.5*(r+a[e][0]),.5*(o+a[e][1]),.5*(i+a[e][2])]:a[e]=[r,o,i],Tools.checkIsNull(a[t])?a[t]=[.5*(r+a[t][0]),.5*(o+a[t][1]),.5*(i+a[t][2])]:a[t]=[r,o,i],Tools.checkIsNull(a[n])?a[n]=[.5*(r+a[n][0]),.5*(o+a[n][1]),.5*(i+a[n][2])]:a[n]=[r,o,i]}},{key:"_generatorDietaryUVMat",value:function(e,t,n,r,o){var i=1/(e*r-n*t);return o[0]=r*i,o[1]=-t*i,o[2]=-n*i,o[3]=e*i,o}},{key:"generatorBaryCentrics",value:function(e,t){for(var n,r,o,i={},a=[],_=null,s=0,u=0;u<t.length;u+=3)a.length=0,n=t[u],r=t[u+1],o=t[u+2],i[n]&&a.push(i[n]),i[r]&&a.push(i[r]),i[o]&&a.push(i[o]),(_=Tools._nextBarycentrics(a))&&(s=0,i[n]||(i[n]=_[s++]),i[r]||(i[r]=_[s++]),i[o]||(i[o]=_[s++]));var l=new Array(e.length).fill(0);for(var f in i)l[3*f]=i[f][0],l[3*f+1]=i[f][1],l[3*f+2]=i[f][2];return l}},{key:"_nextBarycentrics",value:function(e){if(3==e.length)return e[0][0]==e[1][0]&&e[0][1]==e[1][1]&&e[0][2]==e[1][2]?e[0]=[0,0,0]:e[1][0]==e[2][0]&&e[1][1]==e[2][1]&&e[1][2]==e[2][2]?e[1]=[0,0,0]:e[2][0]==e[0][0]&&e[2][1]==e[0][1]&&e[2][2]==e[0][2]&&(e[2]=[0,0,0]),null;if(0==e.length)return[[0,1,0],[1,0,0],[0,0,1]];var t=[!0,!0,!0],n=[];2==e.length&&(e[0][0]==e[1][0]&&e[0][1]==e[1][1]&&e[0][2]==e[1][2]?e[0]=[0,0,0]:e[1][0]==e[2][0]&&e[1][1]==e[2][1]&&e[1][2]==e[2][2]&&(e[1]=[0,0,0])),e.forEach((function(n){n[0]==e[1][0]&&n[1]==e[1][1]&&n[2]==e[1][2]?t[1]=!1:n[0]==e[2][0]&&n[1]==e[2][1]&&n[2]==e[2][2]?t[2]=!1:n[0]==e[0][0]&&n[1]==e[0][1]&&n[2]==e[0][2]&&(t[0]=!1)}));for(var r=0;r<3;r++)t[r]&&n.push(BS[r]);return n}}]),Tools}();exports.default=Tools,_defineProperty(Tools,"_s_Id",0)},6693:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"setBufLocal",value:function(e,t,n,r,o,i,a,_){e.bindBuffer(n,t),e.vertexAttribPointer(r,o,i,!1,a,_),e.enableVertexAttribArray(r),e.bindBuffer(n,null)}},{key:"setVertexBuf",value:function(e,t,n,r,o,i,a,_,s,u){e.bindVertexArray(t);var l=e.createBuffer();return e.bindBuffer(n,l),e.bufferData(n,r,o),e.vertexAttribPointer(i,a,_,!1,s,u),e.enableVertexAttribArray(i),e.bindBuffer(n,null),e.bindVertexArray(null),l}},{key:"setIndicesBuf",value:function(e,t,n,r,o){e.bindVertexArray(t);var i=e.createBuffer();return e.bindBuffer(n,i),e.bufferData(n,r,o),e.bindVertexArray(null),e.bindBuffer(n,null),i}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},7902:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=void 0;var r=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Name=t,this._m_Loc=n||null,this._m_Width=r||0,this._m_Height=o||0,this._m_Format=i}var t,r,o;return t=e,(r=[{key:"setName",value:function(e){this._m_Name=e}},{key:"getName",value:function(){return this._m_Name}},{key:"setLoc",value:function(e){this._m_Loc=e}},{key:"getLoc",value:function(){return this._m_Loc}},{key:"setWidth",value:function(e){this._m_Width=e}},{key:"getWidth",value:function(){return this._m_Width}},{key:"setHeight",value:function(e){this._m_Height=e}},{key:"getHeight",value:function(){return this._m_Height}},{key:"setFormat",value:function(e){this._m_Format=e}},{key:"getFormat",value:function(){return this._m_Format}}])&&n(t.prototype,r),o&&n(t,o),e}();t.Buffer=r},7341:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7902),o=_(n(2584)),i=(_(n(7280)),_(n(5776))),a=_(n(3846));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Name=n,this._m_Framebuffer=t.createFramebuffer(),this._m_Textures=[],this._m_NameTextures={},this._m_MapTextures={},this._m_Buffers=[],this._m_MapBuffers={},this._m_DrawBuffers=[],this._m_Width=r,this._m_Height=o,this._m_RData={},this._m_FramePicture=null,this._m_FixedSize=!1}var t,n,_;return t=e,(n=[{key:"setFixedSize",value:function(e){this._m_FixedSize=e}},{key:"isFixedSize",value:function(){return this._m_FixedSize}},{key:"readPixels",value:function(e,t,n,r,o,i,a,_){o=o||0,i=i||0,a=a||this._m_Width,_=_||this._m_Height;var s=-1,u=null;switch(n){case e.RGBA16F:u=Float32Array,s=4;break;case e.RGBA8:case e.RGBA:u=r!=e.FLOAT?Uint8Array:Float32Array,s=4;break;case e.RGB16F:u=Float32Array,s=3;break;case e.RGB8:case e.RGB:u=r!=e.FLOAT?Uint8Array:Float32Array,s=3}e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT),e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE);var l=new u(a*_*s);return e.readPixels(o,i,a,_,n,r,l),l}},{key:"getFramePicture",value:function(){return this._m_FramePicture}},{key:"getFrameBuffer",value:function(){return this._m_Framebuffer}},{key:"use",value:function(e){var t=e.getFrameContext();if(t.m_LastFrameBuffer!=this._m_Framebuffer){var n=e._m_Scene.getCanvas().getGLContext();n.bindFramebuffer(n.FRAMEBUFFER,this._m_Framebuffer),t.m_LastFrameBuffer=this._m_Framebuffer}}},{key:"clear",value:function(e){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}},{key:"addBuffer",value:function(e,t,n,o){var i;e.bindFramebuffer(e.FRAMEBUFFER,this._m_Framebuffer),i=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i);var a=new r.Buffer(t,i,this._m_Width,this._m_Height,n);e.renderbufferStorage(e.RENDERBUFFER,n,this._m_Width,this._m_Height),e.framebufferRenderbuffer(e.FRAMEBUFFER,o,e.RENDERBUFFER,i),this._m_MapBuffers[o]=a,this._m_Buffers.push(a),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),this._rData("buffer",{name:t,format:n,attachId:o})}},{key:"_rData",value:function(e,t){this._m_RData[e]||(this._m_RData[e]={keys:{},values:[]}),this._m_RData[e].keys[t.name]||(this._m_RData[e].keys[t.name]=!0,this._m_RData[e].values.push(t))}},{key:"getBuffers",value:function(){return this._m_Buffers}},{key:"setMipMap",value:function(e,t,n,r){e.framebufferTexture2D(e.FRAMEBUFFER,n,e.TEXTURE_2D,this._m_NameTextures[t].getLoc(),r)}},{key:"addTexture",value:function(e,t,n,r,i,a,_,s,u){e.bindFramebuffer(e.FRAMEBUFFER,this._m_Framebuffer);var l=e.createTexture(),f=new o.default(t,l,n,this._m_Width,this._m_Height,r,i,a,null);e.bindTexture(e.TEXTURE_2D,l),e.texImage2D(e.TEXTURE_2D,0,n,this._m_Width,this._m_Height,0,i,a,null),u?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,_,e.TEXTURE_2D,l,0),this._m_MapTextures[_]=f,this._m_Textures.push(f),this._m_NameTextures[t]=f,s&&this._m_DrawBuffers.push(_),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),this._rData("texture",{name:t,internalformat:n,border:r,format:i,type:a,attachId:_,toDrawBuffer:s,genMipmap:u})}},{key:"getTextures",value:function(){return this._m_Textures}},{key:"getTexture",value:function(e){return this._m_NameTextures[e]}},{key:"resize",value:function(e,t,n){var r=this;if(!this._m_FixedSize&&(this._m_Width!=t||this._m_Height!=n)){this._m_Width=t,this._m_Height=n,e.deleteFramebuffer(this._m_Framebuffer),this._m_Framebuffer=e.createFramebuffer(),this._m_Textures=[],this._m_NameTextures={},this._m_MapTextures={},this._m_Buffers=[],this._m_MapBuffers={},this._m_DrawBuffers=[];var o=null;for(var i in this._m_RData)o=this._m_RData[i].values,"buffer"==i?o.forEach((function(t){r.addBuffer(e,t.name,t.format,t.attachId)})):"texture"==i&&o.forEach((function(t){r.addTexture(e,t.name,t.internalformat,t.border,t.format,t.type,t.attachId,t.toDrawBuffer,t.genMipmap)}));this.finish(e)}}},{key:"finish",value:function(e,t,n){switch(e.bindFramebuffer(e.FRAMEBUFFER,this._m_Framebuffer),this._m_DrawBuffers.length>0&&e.drawBuffers(this._m_DrawBuffers),e.isFramebuffer(this._m_Framebuffer)||a.default.error("[["+this._m_Name+"]]无效frameBuffer!"),e.checkFramebufferStatus(e.FRAMEBUFFER)){case e.FRAMEBUFFER_COMPLETE:a.default.log("[["+this._m_Name+"]]帧缓冲区已准备好显示。");break;case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:a.default.error("[["+this._m_Name+"]]附件类型不匹配或不是所有的帧缓冲附件点都已完成。");break;case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:a.default.error("[["+this._m_Name+"]]没有附件。");break;case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:a.default.error("[["+this._m_Name+"]]附件的高度和宽度不同。");break;case e.FRAMEBUFFER_UNSUPPORTED:a.default.error("[["+this._m_Name+"]]不支持附件的格式，或者深度和模板附件的渲染缓冲区不同。")}e.bindFramebuffer(e.FRAMEBUFFER,null),n&&(this._m_FramePicture=new i.default(t,{id:this._m_Name+"_picture"}))}}])&&s(t.prototype,n),_&&s(t,_),e}();t.default=u},6798:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(8435))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m_LastMaterial=null,this.m_LastIDrawable=null,this.m_LastSubShader=null,this.m_LastSubShaderId=null,this.m_LastFrameBuffer=null,this.m_SM=0,this.m_SS=0,this._m_BatchLightLastIndex=0,this._m_DefaultFrameBuffer=null,this.m_Contexts={},this.m_CalcContexts={},this.m_RenderState=new o.default(!0),this.m_FrameBuffers={},this.m_Shaders={},this._m_ContextBlocks={}}var t,n,r;return t=e,(n=[{key:"getBatchLightLastIndex",value:function(){return this._m_BatchLightLastIndex}},{key:"BatchLightLastIndex",set:function(e){this._m_BatchLightLastIndex=e}},{key:"resize",value:function(e,t,n){for(var r in this.m_FrameBuffers)this.m_FrameBuffers[r].resize(e,t,n)}},{key:"getContextBlock",value:function(e){return this._m_ContextBlocks[e]}},{key:"addContextBlock",value:function(e,t){this._m_ContextBlocks[e]=t}},{key:"getFrameBuffer",value:function(e){return this.m_FrameBuffers[e]}},{key:"addFrameBuffer",value:function(e,t){this.m_FrameBuffers[e]=t}},{key:"getRenderState",value:function(){return this.m_RenderState}},{key:"addContext",value:function(e){this.m_Contexts[e]=!0}},{key:"getContext",value:function(e){return this.m_Contexts[e]}},{key:"getCalcContexts",value:function(){return this.m_CalcContexts}},{key:"getCalcContext",value:function(e){return this.m_CalcContexts[e]}},{key:"setCalcContext",value:function(e,t){this.m_CalcContexts[e]=t}},{key:"reset",value:function(){this._m_BatchLightLastIndex=0,this.m_LastMaterial=null,this.m_LastSubShader=null,this.m_LastSubShaderId=null,this.m_LastFrameBuffer=null,this.m_SM=0,this.m_SS=0}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=a},307:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(6693)),o=_(n(9784)),i=_(n(3846)),a=_(n(2228));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Datas={},this._m_Bufs={},this._m_VAO=null,this._m_GL=null,this._m_ElementCount=0,this._m_Primitive=e.S_PRIMITIVE_TRIANGLES,this._m_DrawPrimitive=null,this._m_DrawType=null,this._m_CurrentLod=0,this._m_DrawLod=0,this._m_LodLevels={},this._m_LodLevelCount=0}var t,n,_;return t=e,(n=[{key:"setPrimitive",value:function(t){if(this._m_Primitive=t,this._m_GL)switch(this._m_Primitive){case e.S_PRIMITIVE_TRIANGLES:this._m_DrawPrimitive=this._m_GL.TRIANGLES;break;case e.S_PRIMITIVE_LINES:this._m_DrawPrimitive=this._m_GL.LINES}}},{key:"getPrimitive",value:function(){return this._m_Primitive}},{key:"_checkDataType",value:function(t){return!!e.S_DATAS[t]||(console.error("type is undefined:"+t),!1)}},{key:"setData",value:function(e,t,n){this._checkDataType(e)&&n&&null!=n.level?(this._m_Datas[e]||(this._m_Datas[e]={lod:!0,datas:[],count:0}),this._m_Datas[e].count+=t.length,this._m_Datas[e].datas.push({data:t,level:n.level,count:t.length})):this._m_Datas[e]=t}},{key:"getData",value:function(e){return this._m_Datas[e]}},{key:"_refreshBufLocal",value:function(e,t){var n=this;t.forEach((function(e){n._m_Bufs[e.name]}))}},{key:"_updateBound",value:function(t){if(this._m_GL=t,this._m_Datas){for(var n in this._m_VAO||(this._m_VAO=t.createVertexArray()),this._m_Datas)switch(n){case e.S_BARYCENTRICS:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_BARYCENTRIC,3,t.FLOAT,0,0);break;case e.S_POSITIONS:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_POSITION,3,t.FLOAT,0,0);break;case e.S_COLORS:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_COLOR,4,t.FLOAT,0,0);break;case e.S_NORMALS:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_NORMAL,3,t.FLOAT,0,0);break;case e.S_TANGENTS:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_TANGENT,4,t.FLOAT,0,0);break;case e.S_INDICES:if(this._m_DrawType=t.UNSIGNED_SHORT,this._m_Datas[n].lod){for(var i=this._m_Datas[n].datas,a=new Uint16Array(this._m_Datas[n].count),_=0,s=0,u=0,l=0;u<i.length;u++){this._m_LodLevels[i[u].level]={lod:l,count:i[u].count},this._m_LodLevelCount++;for(var f=0,c=0==s?0:s+1;f<i[u].data.length;f++)a[l++]=c+i[u].data[f],_=Math.max(i[u].data[f]+c,_);s=_,_=0}this._m_CurrentLod=-1,this.lod(0),r.default.setIndicesBuf(t,this._m_VAO,t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW)}else this._m_ElementCount=this._m_Datas[n].length,r.default.setIndicesBuf(t,this._m_VAO,t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this._m_Datas[n]),t.STATIC_DRAW);break;case e.S_INDICES_32:if(this._m_DrawType=t.UNSIGNED_INT,this._m_Datas[n].lod){for(var m=this._m_Datas[n].datas,h=new Uint32Array(this._m_Datas[n].count),d=0,p=0,g=0,S=0;g<m.length;g++){this._m_LodLevels[m[g].level]={lod:S,count:m[g].count},this._m_LodLevelCount++;for(var v=0,y=0==p?0:p+1;v<m[g].data.length;v++)h[S++]=y+m[g].data[v],d=Math.max(m[g].data[v]+y,d);p=d,d=0}this._m_CurrentLod=-1,this.lod(0),r.default.setIndicesBuf(t,this._m_VAO,t.ELEMENT_ARRAY_BUFFER,h,t.STATIC_DRAW)}else this._m_ElementCount=this._m_Datas[n].length,r.default.setIndicesBuf(t,this._m_VAO,t.ELEMENT_ARRAY_BUFFER,new Uint32Array(this._m_Datas[n]),t.STATIC_DRAW);break;case e.S_UV0:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_UV0,2,t.FLOAT,0,0);break;case e.S_UV1:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_UV1,2,t.FLOAT,0,0);break;case e.S_UV2:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_UV2,2,t.FLOAT,0,0);break;case e.S_UV3:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_UV3,2,t.FLOAT,0,0);break;case e.S_JOINTS_0:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Uint16Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_JOINT_0,4,t.UNSIGNED_SHORT,0,0);break;case e.S_JOINTS_0_32:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Uint32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_JOINT_0,4,t.UNSIGNED_INT,0,0);break;case e.S_WEIGHTS_0:r.default.setVertexBuf(t,this._m_VAO,t.ARRAY_BUFFER,new Float32Array(this._m_Datas[n]),t.STATIC_DRAW,o.default.S_WEIGHT_0,4,t.FLOAT,0,0)}switch(this._m_Primitive){case e.S_PRIMITIVE_TRIANGLES:this._m_DrawPrimitive=this._m_GL.TRIANGLES;break;case e.S_PRIMITIVE_LINES:this._m_DrawPrimitive=this._m_GL.LINES}}}},{key:"draw",value:function(e){e.bindVertexArray(this._m_VAO),e.drawElements(this._m_DrawPrimitive,this._m_ElementCount,this._m_DrawType,this._m_DrawLod)}},{key:"lod",value:function(e){this._m_CurrentLod!=e&&(null!=this._m_LodLevels[e]?(this._m_CurrentLod=e,this._m_ElementCount=this._m_LodLevels[this._m_CurrentLod].count,this._m_DrawLod=this._m_LodLevels[this._m_CurrentLod].lod*a.default.sizeof(a.default.S_UNSIGNED_SHORT)):i.default.error("lod level "+e+"对于当前Mesh无效!"))}},{key:"getLodLevelCount",value:function(){return this._m_LodLevelCount}},{key:"getLodPrimitiveCount",value:function(t){if(null!=this._m_LodLevels[t]){var n=this._m_LodLevels[t].count;switch(this._m_Primitive){case e.S_PRIMITIVE_TRIANGLES:return n/3;case e.S_PRIMITIVE_LINES:return n/2}}else i.default.error("lod level "+t+"对于当前Mesh无效!");return 0}}])&&s(t.prototype,n),_&&s(t,_),e}();t.default=l,u(l,"S_BARYCENTRICS","barycentrics"),u(l,"S_POSITIONS","positions"),u(l,"S_COLORS","colors"),u(l,"S_NORMALS","normals"),u(l,"S_INDICES","indices"),u(l,"S_INDICES_32","indices32"),u(l,"S_TANGENTS","tangents"),u(l,"S_UV0","uv0"),u(l,"S_UV1","uv1"),u(l,"S_UV2","uv2"),u(l,"S_UV3","uv3"),u(l,"S_JOINTS_0","joints_0"),u(l,"S_JOINTS_0_32","joints_0"),u(l,"S_WEIGHTS_0","weights_0"),u(l,"S_DATAS",{barycentrics:"barycentrics",positions:"positions",colors:"colors",normals:"normals",indices:"indices",indices32:"indices",tangents:"tangents",uv0:"uv0",uv1:"uv1",uv2:"uv2",uv3:"uv3",joints_0:"joints_0",weights_0:"weights_0"}),u(l,"S_PRIMITIVE_TRIANGLES","triangles"),u(l,"S_PRIMITIVE_LINES","lines")},8435:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_State={},this._m_StoreState={_state:{},getState:function(){return this._state}},this._m_ResetState={_state:{},getState:function(){return this._state}},t&&this._init()}var t,r,o;return t=e,(r=[{key:"getState",value:function(){return this._m_State}},{key:"getFlag",value:function(e){return this._m_State[e]}},{key:"setFlag",value:function(e,t){this._m_State[e]=t}},{key:"store",value:function(){for(var e in this._m_State)this._m_StoreState._state[e]=this._m_State[e]}},{key:"restore",value:function(){return this._m_StoreState}},{key:"_init",value:function(){this._m_State[e.S_STATES[0]]=e.S_FACE_CULL_BACK,this._m_State[e.S_STATES[1]]="On",this._m_State[e.S_STATES[2]]="On",this._m_State[e.S_STATES[3]]="On",this._m_State[e.S_STATES[4]]="Off",this._m_State[e.S_STATES[6]]="Off",this._m_State[e.S_STATES[7]]="Off",this._m_ResetState._state[e.S_STATES[0]]=e.S_FACE_CULL_BACK,this._m_ResetState._state[e.S_STATES[1]]="On",this._m_ResetState._state[e.S_STATES[2]]="On",this._m_ResetState._state[e.S_STATES[3]]="On",this._m_ResetState._state[e.S_STATES[4]]="Off",this._m_ResetState._state[e.S_STATES[6]]="Off",this._m_ResetState._state[e.S_STATES[7]]="Off"}},{key:"reset",value:function(){return this._m_ResetState}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o,r(o,"S_FACE_CULL_OFF","Off"),r(o,"S_FACE_CULL_BACK","Back"),r(o,"S_FACE_CULL_FRONT","Front"),r(o,"S_FACE_CULL_FRONT_AND_BACK","FrontAndBack"),r(o,"S_STATES",["FaceCull","DepthWrite","ColorWrite","DepthTest","Blend","BlendFactor","ScissorTest","PolygonOffsetFill","PolygonOffset"])},6616:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_GL=t,this._m_Shader=t.createShader(n),t.shaderSource(this._m_Shader,r),t.compileShader(this._m_Shader),this.compile=t.getShaderParameter(this._m_Shader,t.COMPILE_STATUS),this.compile||(this.error=t.getShaderInfoLog(this._m_Shader),console.log("编译["+(n==t.VERTEX_SHADER?"vertex_shader":n==t.FRAGMENT_SHADER?"fragment_shader":"unknow_shader")+"]失败!原因:\n"+this.error))}var t,r,o;return t=e,(r=[{key:"getShader",value:function(){return this._m_Shader}},{key:"deleteShader",value:function(){this._m_GL.deleteShader(this._m_Shader),this._m_Shader=null}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o,r(o,"S_TYPE",{float:"float",mat4:"mat4"}),r(o,"S_GLOBALS_MAT","layout (std140) uniform S_GLOBALS_MAT\n{\nmat4 Globals_ViewMatrix;\nmat4 Globals_ProjectMatrix;\nmat4 Globals_ViewProjectMatrix;\n};\n"),r(o,"S_GLOBALS_PARAMS",{viewMatrix:"Globals_ViewProjectMatrix",projectMatrix:"Globals_ProjectMatrix",viewProjectMatrix:"Globals_ViewProjectMatrix"})},9836:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9784)),o=a(n(6616)),i=a(n(5397));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_DefId=n,this._m_vs_s=o.get(r.default.VERTEX_SHADER),this._m_fs_s=o.get(r.default.FRAGMENT_SHADER),this._m_vsDefines=i?i[r.default.VERTEX_SHADER]:null,this._m_fsDefines=i?i[r.default.FRAGMENT_SHADER]:null,this._m_Hold=0,this._m_Holds={},a?this._m_needCompile=!0:this._compile(t)}var t,n,a;return t=e,(n=[{key:"canDestroy",value:function(){return this._m_Hold<=0}},{key:"destroy",value:function(e,t){this._m_Program&&(e.deleteProgram(this._m_Program),t.m_Shaders[this._m_DefId]=null,this._m_Program=null)}},{key:"addHold",value:function(e){this._m_Hold++,this._m_Holds[e._m_ObjId]=e}},{key:"deleteHold",value:function(e){this._m_Hold--,this._m_Holds[e._m_ObjId]=null}},{key:"needCompile",value:function(){return this._m_needCompile}},{key:"_compile",value:function(e){if(this._m_needCompile=!1,this._m_vs_s&&(this._m_vsDefines&&(this._m_vs_s=i.default.insertLine(this._m_vs_s,this._m_vsDefines,1)),this._m_vs=new o.default(e,e.VERTEX_SHADER,this._m_vs_s)),this._m_fs_s&&(this._m_fsDefines&&(this._m_fs_s=i.default.insertLine(this._m_fs_s,this._m_fsDefines,1)),this._m_fs=new o.default(e,e.FRAGMENT_SHADER,this._m_fs_s)),this._m_Program=null,this._m_vs&&this._m_fs)if(this._m_vs.compile&&this._m_fs.compile){if(this._m_Program=e.createProgram(),e.attachShader(this._m_Program,this._m_vs.getShader()),e.attachShader(this._m_Program,this._m_fs.getShader()),e.linkProgram(this._m_Program),!e.getProgramParameter(this._m_Program,e.LINK_STATUS)){var t=e.getProgramInfoLog(this._m_Program);console.error("[["+name+"]]链接ShaderProgram异常:"+t),console.log("vs:\n"+this._m_vs_s),console.log("fs:\n"+this._m_fs_s)}this._m_vs.deleteShader(),this._m_fs.deleteShader()}else console.error("[["+name+"]]无法创建着色器程序,vs或fs编译失败!!"),console.log("vs:\n"+this._m_vs_s),console.log("fs:\n"+this._m_fs_s)}},{key:"use",value:function(e){e.useProgram(this._m_Program)}},{key:"getProgram",value:function(){return this._m_Program}}])&&_(t.prototype,n),a&&_(t,a),e}();t.default=s},9784:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Source={}}var t,r,o;return t=e,o=[{key:"resizeBatchLightSize",value:function(t){t!=e.S_BATCH_LIGHT_SIZE&&(e.S_BATCH_LIGHT_SIZE=3*t,e.Context_Data["Context.VLightData"].modifier="["+e.S_BATCH_LIGHT_SIZE+"]",e.Context_Data["Context.WLightData"].modifier="["+e.S_BATCH_LIGHT_SIZE+"]")}}],(r=[{key:"set",value:function(t,n){e.SOURCE_ENUM[t]?this._m_Source[t]=n:console.error("未知着色器类型:"+t)}},{key:"get",value:function(t){return e.SOURCE_ENUM[t]?this._m_Source[t]:(console.error("未知着色器类型:"+t),null)}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o,r(o,"VERTEX_SHADER","vertex_shader"),r(o,"FRAGMENT_SHADER","fragment_shader"),r(o,"SOURCE_ENUM",{vertex_shader:"vertex_shader",fragment_shader:"fragment_shader"}),r(o,"S_BARYCENTRIC",0),r(o,"S_POSITION",1),r(o,"S_COLOR",2),r(o,"S_NORMAL",3),r(o,"S_TANGENT",4),r(o,"S_UV0",5),r(o,"S_UV1",6),r(o,"S_UV2",7),r(o,"S_UV3",8),r(o,"S_JOINT_0",9),r(o,"S_WEIGHT_0",10),r(o,"S_MODEL_MATRIX",17),r(o,"S_VIEW_MATRIX",18),r(o,"S_PROJECT_MATRIX",19),r(o,"S_MVP",20),r(o,"S_MV",21),r(o,"S_VP",22),r(o,"S_NDP",23),r(o,"S_G_BUFFER0",0),r(o,"S_G_BUFFER1",1),r(o,"S_G_BUFFER2",2),r(o,"S_G_DEPTH",3),r(o,"S_BARYCENTRIC_SRC","_barycentric"),r(o,"S_POSITION_SRC","_position"),r(o,"S_COLOR_SRC","_color"),r(o,"S_NORMAL_SRC","_normal"),r(o,"S_TANGENT_SRC","_tangent"),r(o,"S_UV0_SRC","_uv0"),r(o,"S_UV1_SRC","_uv1"),r(o,"S_UV2_SRC","_uv2"),r(o,"S_UV3_SRC","_uv3"),r(o,"S_JOINT_0_SRC","_joint_0"),r(o,"S_WEIGHT_0_SRC","_weight_0"),r(o,"S_JOINTS_SRC","_joints"),r(o,"S_OUT_COLOR","_outColor"),r(o,"S_OUT_POSITION","gl_Position"),r(o,"S_MODEL_MATRIX_SRC","_model_matrix"),r(o,"S_VIEW_MATRIX_SRC","_view_matrix"),r(o,"S_PROJECT_MATRIX_SRC","_project_matrix"),r(o,"S_MVP_SRC","_model_view_project_matrix"),r(o,"S_MV_SRC","_model_view_matrix"),r(o,"S_VP_SRC","_view_project_matrix"),r(o,"S_NDP",""),r(o,"S_V_LIGHT_DATA_SRC","_vLightData"),r(o,"S_W_LIGHT_DATA_SRC","_wLightData"),r(o,"S_MULTI_ID_SRC","_multiId"),r(o,"S_BLEND_GI_PROBES","_blend_gi_probes"),r(o,"S_V_LIGHT_DATA0_SRC","_vLight_Data_0"),r(o,"S_V_LIGHT_DATA1_SRC","_vLight_Data_1"),r(o,"S_V_LIGHT_DATA2_SRC","_vLight_Data_2"),r(o,"S_W_LIGHT_DATA0_SRC","_wLight_Data_0"),r(o,"S_W_LIGHT_DATA1_SRC","_wLight_Data_1"),r(o,"S_W_LIGHT_DATA2_SRC","_wLight_Data_2"),r(o,"S_AMBIENT_LIGHT_COLOR","_ambientLightColor"),r(o,"S_CUR_LIGHT_COUNT_SRC","_curLightCount"),r(o,"S_NB_LIGHTS","_NB_LIGHTS"),r(o,"S_BATCH_LIGHT_SIZE",12),r(o,"S_CAMERA_POSITION_SRC","_cameraPosition"),r(o,"S_MAX_BONE",256),r(o,"S_SKINS_SRC","_C_SKINS"),r(o,"S_SRGB_SRC","_C_SRGB"),r(o,"S_GIPROBES_SRC","_C_GIPROBES"),r(o,"S_PSSM_SRC","_C_PSSM"),r(o,"S_POINTLIGHT_SHADOWS_SRC","_C_POINTLIGHT_SHADOWS"),r(o,"S_SPOTLIGHT_SHADOWS_SRC","_C_SPOTLIGHT_SHADOWS"),r(o,"S_FADE_SRC","_C_FADE"),r(o,"S_G_BUFFER0_SRC","_gBuffer0"),r(o,"S_G_BUFFER1_SRC","_gBuffer1"),r(o,"S_G_BUFFER2_SRC","_gBuffer2"),r(o,"S_G_DEPTH_SRC","_gDepth"),r(o,"S_G_DEPTH_RENDER_BUFFER_SRC","_gDepthRenderBuffer"),r(o,"S_SCREEN_SRC","_screen"),r(o,"S_FORWARD_COLOR_MAP_SRC","_forwardColorMap"),r(o,"S_IN_SCREEN_SRC","_inScreenMap"),r(o,"S_IN_DEPTH_SRC","_inDepthMap"),r(o,"S_LIGHT_NUM_SRC","_lightNum"),r(o,"S_TILE_LIGHT_DECODE_SRC","_tileLightDecode"),r(o,"S_TILE_LIGHT_INDEX_SRC","_tileLightIndex"),r(o,"S_TILE_LIGHT_OFFSET_SIZE","_tileLightOffsetSize"),r(o,"S_TILE_W_LIGHT_DATA_0","_tileWLightData0"),r(o,"S_TILE_V_LIGHT_DATA_0","_tileVLightData0"),r(o,"S_TILE_W_LIGHT_DATA_1","_tileWLightData1"),r(o,"S_TILE_V_LIGHT_DATA_1","_tileVLightData1"),r(o,"S_TILE_W_LIGHT_DATA_2","_tileWLightData2"),r(o,"S_TILE_V_LIGHT_DATA_2","_tileVLightData2"),r(o,"S_PREF_ENV_MAP_SRC","_prefEnvMap"),r(o,"S_WGIPROBE_SRC","_wGIProbe"),r(o,"S_SH_COEFFS_SRC","_ShCoeffs"),r(o,"S_RESOLUTION_INVERSE","_ResolutionInverse"),r(o,"S_SHADOW_MAP_ARRAY_SRC",{0:"_shadowMap0",1:"_shadowMap1",2:"_shadowMap2",3:"_shadowMap3",4:"_shadowMap4",5:"_shadowMap5",6:"_shadowMap6"}),r(o,"S_LIGHT_SHADOW_VP_ARRAY_SRC",{0:"_lightViewProjectMatrix0",1:"_lightViewProjectMatrix1",2:"_lightViewProjectMatrix2",3:"_lightViewProjectMatrix3",4:"_lightViewProjectMatrix4",5:"_lightViewProjectMatrix5",6:"_lightViewProjectMatrix6"}),r(o,"S_LIGHT_DIR","_lightDir"),r(o,"S_LIGHT_POS","_lightPos"),r(o,"S_SPLITS","_splits"),r(o,"S_FADEINFO","_fadeInfo"),r(o,"S_SHADOW_MAP_SIZE","_shadowMapSize"),r(o,"S_SHADOW_MAP_SIZE_INVERSE","_sMapSizeInverse"),r(o,"ContextBlocks",{S_VIEW_MATRIX_SRC:!0,S_PROJECT_MATRIX_SRC:!0,S_VP_SRC:!0}),r(o,"MAT","layout (std140) uniform MAT\n{\nmat4 "+o.S_VIEW_MATRIX_SRC+";\nmat4 "+o.S_PROJECT_MATRIX_SRC+";\nmat4 "+o.S_VP_SRC+";\n};\n"),r(o,"VIEW","layout (std140) uniform VIEW\n{\nvec3 "+o.S_CAMERA_POSITION_SRC+";\n};\n"),r(o,"VIEW_PORT","layout (std140) uniform VIEW_PORT\n{\nvec2 "+o.S_RESOLUTION_INVERSE+";\n};\n"),r(o,"BLOCKS",{MAT:{blockIndex:1,blockDef:o.MAT},VIEW:{blockIndex:2,blockDef:o.VIEW},VIEW_PORT:{blockIndex:3,blockDef:o.VIEW_PORT}}),r(o,"Context_RenderDataRefFBs",{_gBuffer0:"DefaultDeferredShadingFrameBuffer",_gBuffer1:"DefaultDeferredShadingFrameBuffer",_gBuffer2:"DefaultDeferredShadingFrameBuffer",_gDepth:"DefaultDeferredShadingFrameBuffer",_forwardColorMap:"DefaultForwardShadingFrameBuffer",_inScreenMap:"DefaultPostFilterShadingFrameBuffer",_inDepthMap:"DefaultPostFilterShadingFrameBuffer"}),r(o,"Context_Data",{"Context.InPosition":{src:o.S_POSITION_SRC,loc:o.S_POSITION,pattern:/Context.InPosition/,pattern2:/Context.InPosition[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InPosition/g,tag:o.S_POSITION_SRC,type:"vec3"},"Context.InBarycentric":{src:o.S_BARYCENTRIC_SRC,loc:o.S_BARYCENTRIC,pattern:/Context.InBarycentric/,pattern2:/Context.InBarycentric[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InBarycentric/g,tag:o.S_BARYCENTRIC_SRC,type:"vec3"},"Context.InNormal":{src:o.S_NORMAL_SRC,loc:o.S_NORMAL,pattern:/Context.InNormal/,pattern2:/Context.InNormal[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InNormal/g,tag:o.S_NORMAL_SRC,type:"vec3"},"Context.InTangent":{src:o.S_TANGENT_SRC,loc:o.S_TANGENT,pattern:/Context.InTangent/,pattern2:/Context.InTangent[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTangent/g,tag:o.S_TANGENT_SRC,type:"vec4"},"Context.InUv0":{src:o.S_UV0_SRC,loc:o.S_UV0,pattern:/Context.InUv0/,pattern2:/Context.InUv0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InUv0/g,tag:o.S_UV0_SRC,type:"vec2"},"Context.InJoint0":{src:o.S_JOINT_0_SRC,loc:o.S_JOINT_0,pattern:/Context.InJoint0/,pattern2:/Context.InJoint0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InJoint0/g,tag:o.S_JOINT_0_SRC,type:"vec4"},"Context.InWeight0":{src:o.S_WEIGHT_0_SRC,loc:o.S_WEIGHT_0,pattern:/Context.InWeight0/,pattern2:/Context.InWeight0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InWeight0/g,tag:o.S_WEIGHT_0_SRC,type:"vec4"},"Context.OutPosition":{src:o.S_OUT_POSITION,pattern:/Context.OutPosition/,pattern2:/Context.OutPosition[\s+-;.,\*\\]{1,}/,tagPattern:/Context.OutPosition/g,tag:"gl_Position"},"Context.ProjectViewModelMatrix":{src:o.S_MVP_SRC,pattern:/Context.ProjectViewModelMatrix/,pattern2:/Context.ProjectViewModelMatrix[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ProjectViewModelMatrix/g,tag:"_model_view_project_matrix",type:"mat4",utype:"uniform mat4"},"Context.ViewMatrix":{src:o.S_VIEW_MATRIX_SRC,pattern:/Context.ViewMatrix/,pattern2:/Context.ViewMatrix[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ViewMatrix/g,tag:o.S_VIEW_MATRIX_SRC,def:"MAT"},"Context.ProjectMatrix":{src:o.S_PROJECT_MATRIX_SRC,pattern:/Context.ProjectMatrix/,pattern2:/Context.ProjectMatrix[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ProjectMatrix/g,tag:o.S_PROJECT_MATRIX_SRC,def:"MAT"},"Context.ModelMatrix":{src:o.S_MODEL_MATRIX_SRC,pattern:/Context.ModelMatrix/,pattern2:/Context.ModelMatrix[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ModelMatrix/g,tag:o.S_MODEL_MATRIX_SRC,type:"mat4",utype:"uniform mat4"},"Context.ProjectViewMatrix":{src:o.S_VP_SRC,pattern:/Context.ProjectViewMatrix/,pattern2:/Context.ProjectViewMatrix[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ProjectViewMatrix/g,tag:o.S_VP_SRC,def:"MAT"},"Context.OutColor":{src:o.S_OUT_COLOR,pattern:/Context.OutColor/,pattern2:/Context.OutColor[\s+-;.,\*\\]{1,}/,tagPattern:/Context.OutColor/g,tag:"_outColor",type:"out vec4"},"Context.Joints":{src:o.S_JOINTS_SRC,pattern:/Context.Joints/,pattern2:/Context.Joints[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Joints/g,tag:o.S_JOINTS_SRC,type:"vec4",utype:"uniform mat4",modifier:"["+o.S_MAX_BONE+"]"},"Context.VLightData":{src:o.S_V_LIGHT_DATA_SRC,pattern:/Context.VLightData/,pattern2:/Context.VLightData[\s+-;.,\*\\]{1,}/,tagPattern:/Context.VLightData/g,tag:o.S_V_LIGHT_DATA_SRC,type:"vec4",utype:"uniform vec4",modifier:"["+o.S_BATCH_LIGHT_SIZE+"]"},"Context.MultiId":{src:o.S_MULTI_ID_SRC,pattern:/Context.MultiId/,pattern2:/Context.MultiId[\s+-;.,\*\\]{1,}/,tagPattern:/Context.MultiId/g,tag:o.S_MULTI_ID_SRC,type:"int",utype:"uniform int"},"Context.TileLightNum":{src:o.S_LIGHT_NUM_SRC,pattern:/Context.TileLightNum/,pattern2:/Context.TileLightNum[\s+-;.,\*\\]{1,}/,tagPattern:/Context.TileLightNum/g,tag:o.S_LIGHT_NUM_SRC,type:"int",utype:"uniform int"},"Context.TileLightOffsetSize":{src:o.S_TILE_LIGHT_OFFSET_SIZE,pattern:/Context.TileLightOffsetSize/,pattern2:/Context.TileLightOffsetSize[\s+-;.,\*\\]{1,}/,tagPattern:/Context.TileLightOffsetSize/g,tag:o.S_TILE_LIGHT_OFFSET_SIZE,type:"float",utype:"uniform float"},"Context.BlendGiProbes":{src:o.S_BLEND_GI_PROBES,pattern:/Context.BlendGiProbes/,pattern2:/Context.BlendGiProbes[\s+-;.,\*\\]{1,}/,tagPattern:/Context.BlendGiProbes/g,tag:o.S_BLEND_GI_PROBES,type:"bool",utype:"uniform bool"},"Context.VLight_Data_0":{src:o.S_V_LIGHT_DATA0_SRC,pattern:/Context.VLight_Data_0/,pattern2:/Context.VLight_Data_0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.VLight_Data_0/g,tag:o.S_V_LIGHT_DATA0_SRC,type:"vec4",utype:"uniform vec4"},"Context.VLight_Data_1":{src:o.S_V_LIGHT_DATA1_SRC,pattern:/Context.VLight_Data_1/,pattern2:/Context.VLight_Data_1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.VLight_Data_1/g,tag:o.S_V_LIGHT_DATA1_SRC,type:"vec4",utype:"uniform vec4"},"Context.VLight_Data_2":{src:o.S_V_LIGHT_DATA2_SRC,pattern:/Context.VLight_Data_2/,pattern2:/Context.VLight_Data_2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.VLight_Data_2/g,tag:o.S_V_LIGHT_DATA2_SRC,type:"vec4",utype:"uniform vec4"},"Context.WLightData":{src:o.S_W_LIGHT_DATA_SRC,pattern:/Context.WLightData/,pattern2:/Context.WLightData[\s+-;.,\*\\]{1,}/,tagPattern:/Context.WLightData/g,tag:o.S_W_LIGHT_DATA_SRC,type:"vec4",utype:"uniform vec4",modifier:"["+o.S_BATCH_LIGHT_SIZE+"]"},"Context.WLight_Data_0":{src:o.S_W_LIGHT_DATA0_SRC,pattern:/Context.WLight_Data_0/,pattern2:/Context.WLight_Data_0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.WLight_Data_0/g,tag:o.S_W_LIGHT_DATA0_SRC,type:"vec4",utype:"uniform vec4"},"Context.WLight_Data_1":{src:o.S_W_LIGHT_DATA1_SRC,pattern:/Context.WLight_Data_1/,pattern2:/Context.WLight_Data_1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.WLight_Data_1/g,tag:o.S_W_LIGHT_DATA1_SRC,type:"vec4",utype:"uniform vec4"},"Context.WLight_Data_2":{src:o.S_W_LIGHT_DATA2_SRC,pattern:/Context.WLight_Data_2/,pattern2:/Context.WLight_Data_2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.WLight_Data_2/g,tag:o.S_W_LIGHT_DATA2_SRC,type:"vec4",utype:"uniform vec4"},"Context.AmbientLightColor":{src:o.S_AMBIENT_LIGHT_COLOR,pattern:/Context.AmbientLightColor/,pattern2:/Context.AmbientLightColor[\s+-;.,\*\\]{1,}/,tagPattern:/Context.AmbientLightColor/g,tag:o.S_AMBIENT_LIGHT_COLOR,type:"vec3",utype:"uniform vec3"},"Context.CurLightCount":{src:o.S_CUR_LIGHT_COUNT_SRC,pattern:/Context.CurLightCount/,pattern2:/Context.CurLightCount[\s+-;.,\*\\]{1,}/,tagPattern:/Context.CurLightCount/g,tag:o.S_CUR_LIGHT_COUNT_SRC,type:"int",utype:"uniform int"},"Context.CameraPosition":{src:o.S_CAMERA_POSITION_SRC,pattern:/Context.CameraPosition/,pattern2:/Context.CameraPosition[\s+-;.,\*\\]{1,}/,tagPattern:/Context.CameraPosition/g,tag:o.S_CAMERA_POSITION_SRC,def:"VIEW"},"Context.WGIProbe":{src:o.S_WGIPROBE_SRC,pattern:/Context.WGIProbe/,pattern2:/Context.WGIProbe[\s+-;.,\*\\]{1,}/,tagPattern:/Context.WGIProbe/g,tag:o.S_WGIPROBE_SRC,type:"vec4",utype:"uniform vec4"},"Context.ShCoeffs":{src:o.S_SH_COEFFS_SRC,pattern:/Context.ShCoeffs/,pattern2:/Context.ShCoeffs[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ShCoeffs/g,tag:o.S_SH_COEFFS_SRC,type:"vec3",utype:"uniform vec3",modifier:"[9]"},"Context.InGBuffer0":{src:o.S_G_BUFFER0_SRC,pattern:/Context.InGBuffer0/,pattern2:/Context.InGBuffer0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InGBuffer0/g,tag:o.S_G_BUFFER0_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InGBuffer1":{src:o.S_G_BUFFER1_SRC,pattern:/Context.InGBuffer1/,pattern2:/Context.InGBuffer1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InGBuffer1/g,tag:o.S_G_BUFFER1_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InGBuffer2":{src:o.S_G_BUFFER2_SRC,pattern:/Context.InGBuffer2/,pattern2:/Context.InGBuffer2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InGBuffer2/g,tag:o.S_G_BUFFER2_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InGDepth":{src:o.S_G_DEPTH_SRC,pattern:/Context.InGDepth/,pattern2:/Context.InGDepth[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InGDepth/g,tag:o.S_G_DEPTH_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InScreen":{src:o.S_IN_SCREEN_SRC,pattern:/Context.InScreen/,pattern2:/Context.InScreen[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InScreen/g,tag:o.S_IN_SCREEN_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InDepth":{src:o.S_IN_DEPTH_SRC,pattern:/Context.InDepth/,pattern2:/Context.InDepth[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InDepth/g,tag:o.S_IN_DEPTH_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InForwardColorMap":{src:o.S_FORWARD_COLOR_MAP_SRC,pattern:/Context.InForwardColorMap/,pattern2:/Context.InForwardColorMap[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InForwardColorMap/g,tag:o.S_FORWARD_COLOR_MAP_SRC,type:"sampler2D",utype:"uniform sampler2D",flag:"renderData"},"Context.InPrefEnvMap":{src:o.S_PREF_ENV_MAP_SRC,pattern:/Context.InPrefEnvMap/,pattern2:/Context.InPrefEnvMap[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InPrefEnvMap/g,tag:o.S_PREF_ENV_MAP_SRC,type:"samplerCube",utype:"uniform samplerCube"},"Context.InTileLightDecode":{src:o.S_TILE_LIGHT_DECODE_SRC,pattern:/Context.InTileLightDecode/,pattern2:/Context.InTileLightDecode[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileLightDecode/g,tag:o.S_TILE_LIGHT_DECODE_SRC,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileLightIndex":{src:o.S_TILE_LIGHT_INDEX_SRC,pattern:/Context.InTileLightIndex/,pattern2:/Context.InTileLightIndex[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileLightIndex/g,tag:o.S_TILE_LIGHT_INDEX_SRC,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileWLightData0":{src:o.S_TILE_W_LIGHT_DATA_0,pattern:/Context.InTileWLightData0/,pattern2:/Context.InTileWLightData0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileWLightData0/g,tag:o.S_TILE_W_LIGHT_DATA_0,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileVLightData0":{src:o.S_TILE_V_LIGHT_DATA_0,pattern:/Context.InTileVLightData0/,pattern2:/Context.InTileVLightData0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileVLightData0/g,tag:o.S_TILE_V_LIGHT_DATA_0,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileWLightData1":{src:o.S_TILE_W_LIGHT_DATA_1,pattern:/Context.InTileWLightData1/,pattern2:/Context.InTileWLightData1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileWLightData1/g,tag:o.S_TILE_W_LIGHT_DATA_1,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileVLightData1":{src:o.S_TILE_V_LIGHT_DATA_1,pattern:/Context.InTileVLightData1/,pattern2:/Context.InTileVLightData1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileVLightData1/g,tag:o.S_TILE_V_LIGHT_DATA_1,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileWLightData2":{src:o.S_TILE_W_LIGHT_DATA_2,pattern:/Context.InTileWLightData2/,pattern2:/Context.InTileWLightData2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileWLightData2/g,tag:o.S_TILE_W_LIGHT_DATA_2,type:"sampler2D",utype:"uniform sampler2D"},"Context.InTileVLightData2":{src:o.S_TILE_V_LIGHT_DATA_2,pattern:/Context.InTileVLightData2/,pattern2:/Context.InTileVLightData2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InTileVLightData2/g,tag:o.S_TILE_V_LIGHT_DATA_2,type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap0":{src:o.S_SHADOW_MAP_ARRAY_SRC[0],pattern:/Context.InShadowMap0/,pattern2:/Context.InShadowMap0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap0/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[0],type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap1":{src:o.S_SHADOW_MAP_ARRAY_SRC[1],pattern:/Context.InShadowMap1/,pattern2:/Context.InShadowMap1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap1/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[1],type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap2":{src:o.S_SHADOW_MAP_ARRAY_SRC[2],pattern:/Context.InShadowMap2/,pattern2:/Context.InShadowMap2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap2/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[2],type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap3":{src:o.S_SHADOW_MAP_ARRAY_SRC[3],pattern:/Context.InShadowMap3/,pattern2:/Context.InShadowMap3[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap3/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[3],type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap4":{src:o.S_SHADOW_MAP_ARRAY_SRC[4],pattern:/Context.InShadowMap4/,pattern2:/Context.InShadowMap4[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap4/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[4],type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap5":{src:o.S_SHADOW_MAP_ARRAY_SRC[5],pattern:/Context.InShadowMap5/,pattern2:/Context.InShadowMap5[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap5/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[5],type:"sampler2D",utype:"uniform sampler2D"},"Context.InShadowMap6":{src:o.S_SHADOW_MAP_ARRAY_SRC[6],pattern:/Context.InShadowMap6/,pattern2:/Context.InShadowMap6[\s+-;.,\*\\]{1,}/,tagPattern:/Context.InShadowMap6/g,tag:o.S_SHADOW_MAP_ARRAY_SRC[6],type:"sampler2D",utype:"uniform sampler2D"},"Context.LightViewProjectMatrix0":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[0],pattern:/Context.LightViewProjectMatrix0/,pattern2:/Context.LightViewProjectMatrix0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix0/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[0],type:"mat4",utype:"uniform mat4"},"Context.LightViewProjectMatrix1":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[1],pattern:/Context.LightViewProjectMatrix1/,pattern2:/Context.LightViewProjectMatrix1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix1/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[1],type:"mat4",utype:"uniform mat4"},"Context.LightViewProjectMatrix2":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[2],pattern:/Context.LightViewProjectMatrix2/,pattern2:/Context.LightViewProjectMatrix2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix2/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[2],type:"mat4",utype:"uniform mat4"},"Context.LightViewProjectMatrix3":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[3],pattern:/Context.LightViewProjectMatrix3/,pattern2:/Context.LightViewProjectMatrix3[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix3/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[3],type:"mat4",utype:"uniform mat4"},"Context.LightViewProjectMatrix4":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[4],pattern:/Context.LightViewProjectMatrix4/,pattern2:/Context.LightViewProjectMatrix4[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix4/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[4],type:"mat4",utype:"uniform mat4"},"Context.LightViewProjectMatrix5":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[5],pattern:/Context.LightViewProjectMatrix5/,pattern2:/Context.LightViewProjectMatrix5[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix5/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[5],type:"mat4",utype:"uniform mat4"},"Context.LightViewProjectMatrix6":{src:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[6],pattern:/Context.LightViewProjectMatrix6/,pattern2:/Context.LightViewProjectMatrix6[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightViewProjectMatrix6/g,tag:o.S_LIGHT_SHADOW_VP_ARRAY_SRC[6],type:"mat4",utype:"uniform mat4"},"Context.LightDir":{src:o.S_LIGHT_DIR,pattern:/Context.LightDir/,pattern2:/Context.LightDir[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightDir/g,tag:o.S_LIGHT_DIR,type:"vec3",utype:"uniform vec3"},"Context.LightPos":{src:o.S_LIGHT_POS,pattern:/Context.LightPos/,pattern2:/Context.LightPos[\s+-;.,\*\\]{1,}/,tagPattern:/Context.LightPos/g,tag:o.S_LIGHT_POS,type:"vec3",utype:"uniform vec3"},"Context.Splits":{src:o.S_SPLITS,pattern:/Context.Splits/,pattern2:/Context.Splits[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Splits/g,tag:o.S_SPLITS,type:"vec4",utype:"uniform vec4"},"Context.Fadeinfo":{src:o.S_FADEINFO,pattern:/Context.Fadeinfo/,pattern2:/Context.Fadeinfo[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Fadeinfo/g,tag:o.S_FADEINFO,type:"vec2",utype:"uniform vec2"},"Context.ResolutionInverse":{src:o.S_RESOLUTION_INVERSE,pattern:/Context.ResolutionInverse/,pattern2:/Context.ResolutionInverse[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ResolutionInverse/g,tag:o.S_RESOLUTION_INVERSE,def:"VIEW_PORT"},"Context.ShadowMapSize":{src:o.S_SHADOW_MAP_SIZE,pattern:/Context.ShadowMapSize/,pattern2:/Context.ShadowMapSize[\s+-;.,\*\\]{1,}/,tagPattern:/Context.ShadowMapSize/g,tag:o.S_SHADOW_MAP_SIZE,type:"float",utype:"uniform float"},"Context.SMapSizeInverse":{src:o.S_SHADOW_MAP_SIZE_INVERSE,pattern:/Context.SMapSizeInverse/,pattern2:/Context.SMapSizeInverse[\s+-;.,\*\\]{1,}/,tagPattern:/Context.SMapSizeInverse/g,tag:o.S_SHADOW_MAP_SIZE_INVERSE,type:"vec2",utype:"uniform vec2"},"Context.OutGBuffer0":{src:o.S_G_BUFFER0_SRC,loc:o.S_G_BUFFER0,pattern:/Context.OutGBuffer0/,pattern2:/Context.OutGBuffer0[\s+-;.,\*\\]{1,}/,tagPattern:/Context.OutGBuffer0/g,tag:o.S_G_BUFFER0_SRC,type:"vec4"},"Context.OutGBuffer1":{src:o.S_G_BUFFER1_SRC,loc:o.S_G_BUFFER1,pattern:/Context.OutGBuffer1/,pattern2:/Context.OutGBuffer1[\s+-;.,\*\\]{1,}/,tagPattern:/Context.OutGBuffer1/g,tag:o.S_G_BUFFER1_SRC,type:"vec4"},"Context.OutGBuffer2":{src:o.S_G_BUFFER2_SRC,loc:o.S_G_BUFFER2,pattern:/Context.OutGBuffer2/,pattern2:/Context.OutGBuffer2[\s+-;.,\*\\]{1,}/,tagPattern:/Context.OutGBuffer2/g,tag:o.S_G_BUFFER2_SRC,type:"vec4"},"Context.OutGDepth":{src:o.S_G_DEPTH_SRC,loc:o.S_G_DEPTH,pattern:/Context.OutGDepth/,pattern2:/Context.OutGDepth[\s+-;.,\*\\]{1,}/,tagPattern:/Context.OutGDepth/g,tag:o.S_G_DEPTH_SRC,type:"vec4"},"Context.Skins":{src:o.S_SKINS_SRC,pattern:/Context.Skins/,pattern2:/Context.Skins[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Skins/g,tag:o.S_SKINS_SRC,isFlagVariable:!0},"Context.Srgb":{src:o.S_SRGB_SRC,pattern:/Context.Srgb/,pattern2:/Context.Srgb[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Srgb/g,tag:o.S_SRGB_SRC,isFlagVariable:!0},"Context.GIProbes":{src:o.S_GIPROBES_SRC,pattern:/Context.GIProbes/,pattern2:/Context.GIProbes[\s+-;.,\*\\]{1,}/,tagPattern:/Context.GIProbes/g,tag:o.S_GIPROBES_SRC,isFlagVariable:!0},"Context.Pssm":{src:o.S_PSSM_SRC,pattern:/Context.Pssm/,pattern2:/Context.Pssm[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Pssm/g,tag:o.S_PSSM_SRC,isFlagVariable:!0},"Context.PointLightShadows":{src:o.S_POINTLIGHT_SHADOWS_SRC,pattern:/Context.PointLightShadows/,pattern2:/Context.PointLightShadows[\s+-;.,\*\\]{1,}/,tagPattern:/Context.PointLightShadows/g,tag:o.S_POINTLIGHT_SHADOWS_SRC,isFlagVariable:!0},"Context.SpotLightShadows":{src:o.S_SPOTLIGHT_SHADOWS_SRC,pattern:/Context.SpotLightShadows/,pattern2:/Context.SpotLightShadows[\s+-;.,\*\\]{1,}/,tagPattern:/Context.SpotLightShadows/g,tag:o.S_SPOTLIGHT_SHADOWS_SRC,isFlagVariable:!0},"Context.Fade":{src:o.S_FADE_SRC,pattern:/Context.Fade/,pattern2:/Context.Fade[\s+-;.,\*\\]{1,}/,tagPattern:/Context.Fade/g,tag:o.S_FADE_SRC,isFlagVariable:!0},_C_SKINS:"#define "+o.S_SKINS_SRC+" "+o.S_SKINS_SRC,_C_SRGB:"#define "+o.S_SRGB_SRC+" "+o.S_SRGB_SRC,_C_GIPROBES:"#define "+o.S_GIPROBES_SRC+" "+o.S_GIPROBES_SRC,_C_PSSM:"#define "+o.S_PSSM_SRC+" "+o.S_PSSM_SRC,_C_POINTLIGHT_SHADOWS:"#define "+o.S_POINTLIGHT_SHADOWS_SRC+" "+o.S_POINTLIGHT_SHADOWS_SRC,_C_SPOTLIGHT_SHADOWS:"#define "+o.S_SPOTLIGHT_SHADOWS_SRC+" "+o.S_SPOTLIGHT_SHADOWS_SRC,_FADE:"#define "+o.S_FADE_SRC+" "+o.S_FADE_SRC})},2228:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,i,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"sizeof",value:function(t){return t===e.S_UNSIGNED_SHORT?2:-1}}],(r=null)&&n(t.prototype,r),o&&n(t,o),e}();t.default=a,i=1,(o="S_UNSIGNED_SHORT")in(r=a)?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i},2584:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t,n,r,o,i,a,_,s,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Name=t,this._m_Loc=n,this._m_InternalFormat=r,this._m_Widht=o,this._m_Height=i,this._m_Border=a,this._m_Format=_,this._m_Type=s,this._m_Data=u}var t,r,o;return t=e,(r=[{key:"setName",value:function(e){this._m_Name=e}},{key:"getName",value:function(){return this._m_Name}},{key:"setLoc",value:function(e){this._m_Loc=e}},{key:"getLoc",value:function(){return this._m_Loc}},{key:"setInternalFormat",value:function(e){this._m_InternalFormat=e}},{key:"getInternalFormat",value:function(){return this._m_InternalFormat}},{key:"setWidth",value:function(e){this._m_Widht=e}},{key:"getWidth",value:function(){return this._m_Widht}},{key:"setHeihgt",value:function(e){this._m_Height=e}},{key:"getHeight",value:function(){return this._m_Height}},{key:"setBorder",value:function(e){this._m_Border=e}},{key:"getBorder",value:function(){return this._m_Border}},{key:"setFormat",value:function(e){this._m_Format=e}},{key:"getFormat",value:function(){return this._m_Format}},{key:"setType",value:function(e){this._m_Type=e}},{key:"getType",value:function(){return this._m_Type}},{key:"setData",value:function(e){this._m_Data=e}},{key:"getData",value:function(){return this._m_Data}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},1446:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Buffer=new Float32Array(t),this._m_Array=new Array(t).fill(0)}var t,r,o;return t=e,(r=[{key:"getArray",value:function(){return this._m_Array}},{key:"getBufferData",value:function(){return this._m_Buffer.set(this._m_Array),this._m_Buffer}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},6140:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_Buffer=new Uint8Array(t),this._m_Array=new Array(t).fill(0)}var t,r,o;return t=e,(r=[{key:"getArray",value:function(){return this._m_Array}},{key:"getBufferData",value:function(){return this._m_Buffer.set(this._m_Array),this._m_Buffer}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},1491:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e))._m_Bool=!1,t}return t=s,(n=[{key:"valueOf",value:function(e){return this._m_Bool=e,this}},{key:"compare",value:function(e){return!1}},{key:"_upload",value:function(e,t,n){e.uniform1i(t,this._m_Bool)}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(3552))&&o.__esModule?o:{default:o}).default);t.default=l},1759:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e))._m_Float=0,t}return t=s,(n=[{key:"valueOf",value:function(e){return this._m_Float=e,this}},{key:"compare",value:function(e){return!1}},{key:"_upload",value:function(e,t,n){e.uniform1f(t,this._m_Float)}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(3552))&&o.__esModule?o:{default:o}).default);t.default=l},1359:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(3552)),i=(a(n(6140)),a(n(1446)));function a(e){return e&&e.__esModule?e:{default:e}}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,r,o=u(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),m(f(t=o.call(this,e)),"_m_Target",void 0),t._m_Scene=e;var n=e.getCanvas().getGLContext();return i.S_TEXTURE_FORMAT={S_RGB:n.RGB,S_RGBA:n.RGBA,S_RGB16F:n.RGB16F,S_RGB32F:n.RGB32F,S_RGBA16F:n.RGBA16F,S_RGBA32F:n.RGBA32F,S_RGBE5:n.RGB9_E5,S_SRGB:n.SRGB,S_SRGB8:n.SRGB8,S_SRGBA:n.SRGB8_ALPHA8,S_DEPTH_COMPONENT24:n.DEPTH_COMPONENT24,S_DEPTH_COMPONENT:n.DEPTH_COMPONENT,S_SHORT:n.SHORT,S_INT:n.INT,S_BYTE:n.BYTE,S_UNSIGNED_BYTE:n.UNSIGNED_BYTE,S_FLOAT:n.FLOAT},t._m_Texture=n.createTexture(),t._setFilter(e,n.TEXTURE_MIN_FILTER,n.NEAREST),t._setFilter(e,n.TEXTURE_MAG_FILTER,n.LINEAR),t._m_Internalformat=n.RGBA16F,t._m_Format=n.RGBA,t._m_Type=n.FLOAT,t._m_UpdateImage=!1,t._m_Image=null,t._m_Rgbe=!1,t._m_Width=t._m_Scene.getCanvas().getWidth(),t._m_Height=t._m_Scene.getCanvas().getHeight(),t._m_FlipY=!1,t._m_Alignment=4,t._m_WrapS=null,t._m_WrapT=null,t._m_MinFilter=i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST,t._m_MagFilter=i.S_FILTERS.S_LINEAR,t}return t=i,(n=[{key:"target",value:function(e){this._m_Target=e}},{key:"setTextureFormat",value:function(e,t,n){this._m_Internalformat=e,this._m_Format=t,this._m_Type=n}},{key:"setAlignment",value:function(e){this._m_Alignment!=e&&(this._m_Alignment=e)}},{key:"updateTextureFilter",value:function(){var e=this._m_Scene.getCanvas().getGLContext();this._m_WrapS&&this._setWrap(this._m_Scene,e.TEXTURE_WRAP_S,this._parseWrap(e,this._m_WrapS)),this._m_WrapT&&this._setWrap(this._m_Scene,e.TEXTURE_WRAP_T,this._parseWrap(e,this._m_WrapT)),this._m_MinFilter&&this._setFilter(this._m_Scene,e.TEXTURE_MIN_FILTER,this._parseFilter(e,this._m_MinFilter)),this._m_MagFilter&&this._setFilter(this._m_Scene,e.TEXTURE_MAG_FILTER,this._parseFilter(e,this._m_MagFilter))}},{key:"uploadArrayData",value:function(e,t,n,r){var o=this._m_Scene.getCanvas().getGLContext();o.activeTexture(o.TEXTURE0+e),o.bindTexture(o.TEXTURE_2D,this._m_Texture),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this._m_FlipY),o.pixelStorei(o.UNPACK_ALIGNMENT,this._m_Alignment),o.texImage2D(o.TEXTURE_2D,0,this._m_Internalformat,t,n,0,this._m_Format,this._m_Type,r)}},{key:"setFlipY",value:function(e){this._m_FlipY=e}},{key:"genMipmap",value:function(e){var t=e.getCanvas().getGLContext();t.bindTexture(t.TEXTURE_2D,this._m_Texture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)}},{key:"setFilter",value:function(e,t,n){this._m_MinFilter=t,this._m_MagFilter=n}},{key:"_parseFilter",value:function(e,t){switch(t){case i.S_FILTERS.S_LINEAR:return e.LINEAR;case i.S_FILTERS.S_NEAREST:return e.NEAREST;case i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST:return e.LINEAR_MIPMAP_NEAREST;case i.S_FILTERS.S_LINEAR_MIPMAP_LINEAR:return e.LINEAR_MIPMAP_LINEAR;case i.S_FILTERS.S_NEAREST_MIPMAP_LINEAR:return e.NEAREST_MIPMAP_LINEAR;case i.S_FILTERS.S_NEAREST_MIPMAP_NEAREST:return e.NEAREST_MIPMAP_NEAREST}return null}},{key:"_setFilter",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.texParameteri(r.TEXTURE_2D,t,n),r.bindTexture(r.TEXTURE_2D,null)}},{key:"setWrap",value:function(e,t,n){this._m_WrapS=t,this._m_WrapT=n}},{key:"_parseWrap",value:function(e,t){switch(t){case i.S_WRAPS.S_CLAMP:return e.CLAMP;case i.S_WRAPS.S_REPEAT:return e.REPEAT;case i.S_WRAPS.S_CLAMP_TO_EDGE:return e.CLAMP_TO_EDGE;case i.S_WRAPS.S_CLAMP_TO_BORDER:return e.CLAMP_TO_BORDER}return null}},{key:"_setWrap",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.texParameteri(r.TEXTURE_2D,t,n),r.bindTexture(r.TEXTURE_2D,null)}},{key:"setPreloadColor",value:function(e,t){var n=i._S_TEMP_COLOR.getArray();t?(n[0]=Math.floor(255*t._m_X),n[1]=Math.floor(255*t._m_Y),n[2]=Math.floor(255*t._m_Z),n[3]=Math.floor(255*t._m_W)):(n[0]=0,n[1]=0,n[2]=0,n[3]=255);var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.texImage2D(r.TEXTURE_2D,0,this._m_Internalformat,1,1,0,this._m_Format,this._m_Type,i._S_TEMP_COLOR.getBufferData()),r.bindTexture(r.TEXTURE_2D,null)}},{key:"setImageSrc",value:function(e,t,n){var r=this,o=n&&n.rgbe?RadianceLoader.rgbeImg():new Image;o.onload=function(){for(var e in r._m_Image=n&&n.rgbe?n.linearFloat?o.dataFloat:o.dataRGBE:o,n&&n.rgbe&&(r._m_Rgbe=!0),r._m_Width=o.width,r._m_Height=o.height,r._m_UpdateImage=!0,r._m_OwnerFlags)r._m_OwnerFlags[e].owner.setParam(r._m_OwnerFlags[e].flag,r)},o.src=t}},{key:"setImage",value:function(e,t,n){for(var r in this._m_Image=n&&n.rgbe?n.linearFloat?t.dataFloat:t.dataRGBE:t,n&&n.rgbe&&(this._m_Rgbe=!0),this._m_Width=n&&null!=n.width?n.width:t.width,this._m_Height=n&&null!=n.height?n.height:t.height,this._m_UpdateImage=!0,this._m_OwnerFlags)this._m_OwnerFlags[r].owner.setParam(this._m_OwnerFlags[r].flag,this)}},{key:"_setImage",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this._m_FlipY),this._m_Rgbe,r.texImage2D(r.TEXTURE_2D,0,this._m_Internalformat,this._m_Width,this._m_Height,0,this._m_Format,this._m_Type,t),r.bindTexture(r.TEXTURE_2D,null)}},{key:"_upload",value:function(e,t,n){if(e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this._m_Texture),this._m_Target){var r=this._m_Scene.getRender().getFrameContext();e.bindFramebuffer(e.READ_FRAMEBUFFER,this._m_Target.getFrameBuffer()),e.copyTexImage2D(e.TEXTURE_2D,0,this._m_Internalformat,0,0,this._m_Target._m_Width,this._m_Target._m_Height,0),this._m_MinFilter!=i.S_FILTERS.S_NEAREST&&(this._m_MinFilter,i.S_FILTERS.S_LINEAR),e.bindFramebuffer(e.FRAMEBUFFER,r.m_LastFrameBuffer)}}},{key:"compare",value:function(e){return!1}}])&&_(t.prototype,n),r&&_(t,r),i}(o.default);t.default=h,m(h,"_S_TEMP_COLOR",new i.default(4)),m(h,"S_FILTERS",{S_NEAREST:1,S_LINEAR:2,S_LINEAR_MIPMAP_NEAREST:3,S_NEAREST_MIPMAP_LINEAR:4,S_LINEAR_MIPMAP_LINEAR:5,S_NEAREST_MIPMAP_NEAREST:6}),m(h,"S_WRAPS",{S_REPEAT:1,S_CLAMP:2,S_CLAMP_TO_EDGE:3,S_CLAMP_TO_BORDER:4}),m(h,"S_TEXTURE_FORMAT",{})},5141:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(3552)),i=_(n(6140)),a=(_(n(5397)),_(n(6797)));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,r,o=l(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._m_Scene=e;var n=e.getCanvas().getGLContext();return i.S_TEXTURE_FORMAT={S_RGB:n.RGB,S_RGBA:n.RGBA,S_RGB16F:n.RGB16F,S_RGB32F:n.RGB32F,S_RGBA16F:n.RGBA16F,S_RGBA32F:n.RGBA32F,S_RGBE5:n.RGB9_E5,S_SRGB:n.SRGB,S_SRGB8:n.SRGB8,S_SRGBA:n.SRGB8_ALPHA8,S_SHORT:n.SHORT,S_INT:n.INT,S_BYTE:n.BYTE,S_UNSIGNED_BYTE:n.UNSIGNED_BYTE,S_FLOAT:n.FLOAT},t._m_Texture=n.createTexture(),t._setFilter(e,n.TEXTURE_MIN_FILTER,n.NEAREST),t._setFilter(e,n.TEXTURE_MAG_FILTER,n.LINEAR),t._m_Internalformat=n.RGBA,t._m_Format=n.RGBA,t._m_Type=n.UNSIGNED_BYTE,t._m_UpdateImage=!1,t._m_Image=null,t._m_Rgbe=!1,t._m_Width=-1,t._m_Height=-1,t._m_FlipY=!1,t._m_Alignment=4,t._m_WrapS=null,t._m_WrapT=null,t._m_MinFilter=i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST,t._m_MagFilter=i.S_FILTERS.S_LINEAR,t}return t=i,(n=[{key:"setTextureFormat",value:function(e,t,n){this._m_Internalformat=e,this._m_Format=t,this._m_Type=n}},{key:"setAlignment",value:function(e){this._m_Alignment!=e&&(this._m_Alignment=e)}},{key:"updateTextureFilter",value:function(){var e=this._m_Scene.getCanvas().getGLContext();this._m_WrapS&&this._setWrap(this._m_Scene,e.TEXTURE_WRAP_S,this._parseWrap(e,this._m_WrapS)),this._m_WrapT&&this._setWrap(this._m_Scene,e.TEXTURE_WRAP_T,this._parseWrap(e,this._m_WrapT)),this._m_MinFilter&&this._setFilter(this._m_Scene,e.TEXTURE_MIN_FILTER,this._parseFilter(e,this._m_MinFilter)),this._m_MagFilter&&this._setFilter(this._m_Scene,e.TEXTURE_MAG_FILTER,this._parseFilter(e,this._m_MagFilter))}},{key:"uploadArrayData",value:function(e,t,n,r){var o=this._m_Scene.getCanvas().getGLContext();o.activeTexture(o.TEXTURE0+e),o.bindTexture(o.TEXTURE_2D,this._m_Texture),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this._m_FlipY),o.pixelStorei(o.UNPACK_ALIGNMENT,this._m_Alignment),o.texImage2D(o.TEXTURE_2D,0,this._m_Internalformat,t,n,0,this._m_Format,this._m_Type,r)}},{key:"setFlipY",value:function(e){this._m_FlipY=e}},{key:"genMipmap",value:function(e){var t=e.getCanvas().getGLContext();t.bindTexture(t.TEXTURE_2D,this._m_Texture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)}},{key:"setFilter",value:function(e,t,n){this._m_MinFilter=t,this._m_MagFilter=n}},{key:"_parseFilter",value:function(e,t){switch(t){case i.S_FILTERS.S_LINEAR:return e.LINEAR;case i.S_FILTERS.S_NEAREST:return e.NEAREST;case i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST:return e.LINEAR_MIPMAP_NEAREST;case i.S_FILTERS.S_LINEAR_MIPMAP_LINEAR:return e.LINEAR_MIPMAP_LINEAR;case i.S_FILTERS.S_NEAREST_MIPMAP_LINEAR:return e.NEAREST_MIPMAP_LINEAR;case i.S_FILTERS.S_NEAREST_MIPMAP_NEAREST:return e.NEAREST_MIPMAP_NEAREST}return null}},{key:"_setFilter",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.texParameteri(r.TEXTURE_2D,t,n),r.bindTexture(r.TEXTURE_2D,null)}},{key:"setWrap",value:function(e,t,n){this._m_WrapS=t,this._m_WrapT=n}},{key:"_parseWrap",value:function(e,t){switch(t){case i.S_WRAPS.S_CLAMP:return e.CLAMP;case i.S_WRAPS.S_REPEAT:return e.REPEAT;case i.S_WRAPS.S_CLAMP_TO_EDGE:return e.CLAMP_TO_EDGE;case i.S_WRAPS.S_CLAMP_TO_BORDER:return e.CLAMP_TO_BORDER}return null}},{key:"_setWrap",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.texParameteri(r.TEXTURE_2D,t,n),r.bindTexture(r.TEXTURE_2D,null)}},{key:"setPreloadColor",value:function(e,t){var n=i._S_TEMP_COLOR.getArray();t?(n[0]=Math.floor(255*t._m_X),n[1]=Math.floor(255*t._m_Y),n[2]=Math.floor(255*t._m_Z),n[3]=Math.floor(255*t._m_W)):(n[0]=0,n[1]=0,n[2]=0,n[3]=255);var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.texImage2D(r.TEXTURE_2D,0,this._m_Internalformat,1,1,0,this._m_Format,this._m_Type,i._S_TEMP_COLOR.getBufferData()),r.bindTexture(r.TEXTURE_2D,null)}},{key:"setImageSrc",value:function(e,t,n){var r=this,o=n&&n.rgbe?a.default.rgbeImg():new Image;o.onload=function(){for(var e in r._m_Image=n&&n.rgbe?n.linearFloat?o.dataFloat:o.dataRGBE:o,n&&n.rgbe&&(r._m_Rgbe=!0),r._m_Width=o.width,r._m_Height=o.height,r._m_UpdateImage=!0,r._m_OwnerFlags)r._m_OwnerFlags[e].owner.setParam(r._m_OwnerFlags[e].flag,r)},o.src=t}},{key:"setImage",value:function(e,t,n){for(var r in this._m_Image=n&&n.rgbe?n.linearFloat?t.dataFloat:t.dataRGBE:t,n&&n.rgbe&&(this._m_Rgbe=!0),this._m_Width=n&&null!=n.width?n.width:t.width,this._m_Height=n&&null!=n.height?n.height:t.height,this._m_UpdateImage=!0,this._m_OwnerFlags)this._m_OwnerFlags[r].owner.setParam(this._m_OwnerFlags[r].flag,this)}},{key:"_setImage",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_2D,this._m_Texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this._m_FlipY),this._m_Rgbe,r.texImage2D(r.TEXTURE_2D,0,this._m_Internalformat,this._m_Width,this._m_Height,0,this._m_Format,this._m_Type,t),r.bindTexture(r.TEXTURE_2D,null)}},{key:"_upload",value:function(e,t,n){e.activeTexture(e.TEXTURE0+t),this._m_UpdateImage&&(this._setImage(this._m_Scene,this._m_Image),this._m_MinFilter!=i.S_FILTERS.S_NEAREST&&this._m_MinFilter!=i.S_FILTERS.S_LINEAR&&this.genMipmap(this._m_Scene),this.updateTextureFilter(),this._m_UpdateImage=!1,this._m_Image=null,this._m_Width=this._m_Height=-1,this._m_Rgbe=!1),e.bindTexture(e.TEXTURE_2D,this._m_Texture)}},{key:"compare",value:function(e){return!1}}])&&s(t.prototype,n),r&&s(t,r),i}(o.default);t.default=h,m(h,"_S_TEMP_COLOR",new i.default(4)),m(h,"S_FILTERS",{S_NEAREST:1,S_LINEAR:2,S_LINEAR_MIPMAP_NEAREST:3,S_NEAREST_MIPMAP_LINEAR:4,S_LINEAR_MIPMAP_LINEAR:5,S_NEAREST_MIPMAP_NEAREST:6}),m(h,"S_WRAPS",{S_REPEAT:1,S_CLAMP:2,S_CLAMP_TO_EDGE:3,S_CLAMP_TO_BORDER:4}),m(h,"S_TEXTURE_FORMAT",{})},4048:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=_(n(3552)),i=_(n(6140)),a=_(n(1446));function _(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,n,r,o=l(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._m_Scene=e;var n=e.getCanvas().getGLContext();return i.S_TEXTURE_FORMAT={S_RGB:n.RGB,S_RGBA:n.RGBA,S_RGB16F:n.RGB16F,S_RGB32F:n.RGB32F,S_RGBA16F:n.RGBA16F,S_RGBA32F:n.RGBA32F,S_RGBE5:n.RGB9_E5,S_SHORT:n.SHORT,S_SRGB:n.SRGB,S_SRGB8:n.SRGB8,S_SRGBA:n.SRGB8_ALPHA8,S_INT:n.INT,S_BYTE:n.BYTE,S_UNSIGNED_BYTE:n.UNSIGNED_BYTE,S_FLOAT:n.FLOAT},t._m_Texture=n.createTexture(),t._setFilter(e,n.TEXTURE_MIN_FILTER,n.NEAREST),t._setFilter(e,n.TEXTURE_MAG_FILTER,n.LINEAR),t._m_Internalformat=n.RGBA,t._m_Format=n.RGBA,t._m_Type=n.UNSIGNED_BYTE,t._m_CubeMaps={},t._m_UpdateImage=!1,t._m_FlipY=!1,t._m_WrapS=null,t._m_WrapT=null,t._m_WrapR=null,t._m_MinFilter=i.S_FILTERS.S_LINEAR,t._m_MagFilter=i.S_FILTERS.S_LINEAR,t}return t=i,(n=[{key:"setTextureFormat",value:function(e,t,n){this._m_Internalformat=e,this._m_Format=t,this._m_Type=n}},{key:"setFlipY",value:function(e){this._m_FlipY=e}},{key:"genMipmap",value:function(e){var t=e.getCanvas().getGLContext();t.bindTexture(t.TEXTURE_CUBE_MAP,this._m_Texture),t.generateMipmap(t.TEXTURE_CUBE_MAP),t.bindTexture(t.TEXTURE_CUBE_MAP,null)}},{key:"setFilter",value:function(e,t,n){this._m_MinFilter=t,this._m_MagFilter=n}},{key:"_parseFilter",value:function(e,t){switch(t){case i.S_FILTERS.S_LINEAR:return e.LINEAR;case i.S_FILTERS.S_NEAREST:return e.NEAREST;case i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST:return e.LINEAR_MIPMAP_NEAREST}return null}},{key:"_setFilter",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_CUBE_MAP,this._m_Texture),r.texParameteri(r.TEXTURE_CUBE_MAP,t,n),r.bindTexture(r.TEXTURE_CUBE_MAP,null)}},{key:"setWrap",value:function(e,t,n,r){this._m_WrapS=t,this._m_WrapT=n,this._m_WrapR=r}},{key:"_parseWrap",value:function(e,t){switch(t){case i.S_WRAPS.S_CLAMP:return e.CLAMP;case i.S_WRAPS.S_REPEAT:return e.REPEAT;case i.S_WRAPS.S_CLAMP_TO_EDGE:return e.CLAMP_TO_EDGE;case i.S_WRAPS.S_CLAMP_TO_BORDER:return e.CLAMP_TO_BORDER}return null}},{key:"_setWrap",value:function(e,t,n){var r=e.getCanvas().getGLContext();r.bindTexture(r.TEXTURE_CUBE_MAP,this._m_Texture),r.texParameteri(r.TEXTURE_CUBE_MAP,t,n),r.bindTexture(r.TEXTURE_CUBE_MAP,null)}},{key:"setPreloadColor",value:function(e,t){var n=this._m_Type!=i.S_TEXTURE_FORMAT.S_FLOAT?i._S_TEMP_COLOR:i._S_TEMP_COLORF,r=n.getArray();t?(r[0]=Math.floor(255*t._m_X),r[1]=Math.floor(255*t._m_Y),r[2]=Math.floor(255*t._m_Z),r[3]=Math.floor(255*t._m_W)):(r[0]=0,r[1]=0,r[2]=0,r[3]=255);var o=e.getCanvas().getGLContext();o.bindTexture(o.TEXTURE_CUBE_MAP,this._m_Texture);for(var a=0;a<6;a++)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,this._m_Internalformat,1,1,0,this._m_Format,this._m_Type,n.getBufferData());o.bindTexture(o.TEXTURE_CUBE_MAP,null)}},{key:"setImageSrc",value:function(e,t,n,r){var o=this,i=r&&r.rgbe?RadianceLoader.rgbeImg():new Image;i.onload=function(){for(var e in o._m_UpdateImage=!0,o._m_CubeMaps[t]={imgData:r&&r.rgbe?i.dataRGBE:i},r&&r.rgbe&&(o._m_CubeMaps[t].rgbe=!0),o._m_CubeMaps[t].width=i.width,o._m_CubeMaps[t].height=i.height,o._m_CubeMaps[t].updateImage=!0,o._m_OwnerFlags)o._m_OwnerFlags[e].owner.setParam(o._m_OwnerFlags[e].flag,o)},i.src=n}},{key:"setImage",value:function(e,t,n,r){this._m_UpdateImage=!0;var o=r&&null!=r.mipmapLevel?r.mipmapLevel:null,i=null;for(var a in null!=o?(this._m_CubeMaps[t]||(this._m_CubeMaps[t]=[]),this._m_CubeMaps[t].push({imgData:r&&r.rgbe?n.dataRGBE:n,mipmapLevel:o}),i=this._m_CubeMaps[t][this._m_CubeMaps[t].length-1]):(this._m_CubeMaps[t]={imgData:r&&r.rgbe?n.dataRGBE:n},i=this._m_CubeMaps[t]),r&&r.rgbe&&(i.rgbe=!0),i.width=r&&null!=r.width?r.width:n.width,i.height=r&&null!=r.height?r.height:n.height,i.updateImage=!0,i.mipmapLevel=r&&r.mipmapLevel?r.mipmapLevel:0,this._m_OwnerFlags)this._m_OwnerFlags[a].owner.setParam(this._m_OwnerFlags[a].flag,this)}},{key:"_setImage",value:function(e,t,n,r){var o=e.getCanvas().getGLContext();if(o.bindTexture(o.TEXTURE_CUBE_MAP,this._m_Texture),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this._m_FlipY),n.rgbe)o.texImage2D(this._parseFace(o,t),n.mipmapLevel,this._m_Internalformat,n.width,n.height,0,this._m_Format,this._m_Type,n.imgData);else if(Array.isArray(n)){o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_BASE_LEVEL,0),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAX_LEVEL,n.length);for(var i=null,a=0;a<n.length;a++)i=n[a],o.texImage2D(this._parseFace(o,t),i.mipmapLevel,this._m_Internalformat,i.width,i.height,0,this._m_Format,this._m_Type,i.imgData)}else o.texImage2D(this._parseFace(o,t),n.mipmapLevel,this._m_Internalformat,n.width,n.height,0,this._m_Format,this._m_Type,n.imgData);o.bindTexture(o.TEXTURE_CUBE_MAP,null)}},{key:"_parseFace",value:function(e,t){switch(t){case i.S_FACE.PositiveX:return e.TEXTURE_CUBE_MAP_POSITIVE_X;case i.S_FACE.NegativeX:return e.TEXTURE_CUBE_MAP_NEGATIVE_X;case i.S_FACE.PositiveY:return e.TEXTURE_CUBE_MAP_POSITIVE_Y;case i.S_FACE.NegativeY:return e.TEXTURE_CUBE_MAP_NEGATIVE_Y;case i.S_FACE.PositiveZ:return e.TEXTURE_CUBE_MAP_POSITIVE_Z;case i.S_FACE.NegativeZ:return e.TEXTURE_CUBE_MAP_NEGATIVE_Z}}},{key:"_upload",value:function(e,t,n){if(e.activeTexture(e.TEXTURE0+t),this._m_UpdateImage){for(var r in this._m_CubeMaps)this._m_CubeMaps[r]&&(this._setImage(this._m_Scene,r,this._m_CubeMaps[r]),this._m_CubeMaps[r]=null);this._m_MinFilter!=i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST&&this._m_MagFilter!=i.S_FILTERS.S_LINEAR_MIPMAP_NEAREST||this.genMipmap(this._m_Scene);var o=this._m_Scene.getCanvas().getGLContext();this._m_WrapS&&this._setWrap(this._m_Scene,o.TEXTURE_WRAP_S,this._parseWrap(o,this._m_WrapS)),this._m_WrapT&&this._setWrap(this._m_Scene,o.TEXTURE_WRAP_T,this._parseWrap(o,this._m_WrapT)),this._m_WrapR&&this._setWrap(this._m_Scene,o.TEXTURE_WRAP_R,this._parseWrap(o,this._m_WrapR)),this._m_MinFilter&&this._setFilter(this._m_Scene,o.TEXTURE_MIN_FILTER,this._parseFilter(o,this._m_MinFilter)),this._m_MagFilter&&this._setFilter(this._m_Scene,o.TEXTURE_MAG_FILTER,this._parseFilter(o,this._m_MagFilter)),this._m_UpdateImage=!1}e.bindTexture(e.TEXTURE_CUBE_MAP,this._m_Texture)}},{key:"compare",value:function(e){return!1}}])&&s(t.prototype,n),r&&s(t,r),i}(o.default);t.default=h,m(h,"_S_TEMP_COLOR",new i.default(4)),m(h,"_S_TEMP_COLORF",new a.default(4)),m(h,"S_FACE",{PositiveX:"1",NegativeX:"2",PositiveY:"3",NegativeY:"4",PositiveZ:"5",NegativeZ:"6"}),m(h,"S_FILTERS",{S_NEAREST:1,S_LINEAR:2,S_LINEAR_MIPMAP_NEAREST:3}),m(h,"S_WRAPS",{S_REPEAT:1,S_CLAMP:2,S_CLAMP_TO_EDGE:3,S_CLAMP_TO_BORDER:4}),m(h,"S_TEXTURE_FORMAT",{})},3552:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._m_OwnerFlags={}}var t,r,o;return t=e,(r=[{key:"compare",value:function(e){return!1}},{key:"_upload",value:function(e,t,n){}},{key:"owner",value:function(e,t){this._m_OwnerFlags[e.getId()]||(this._m_OwnerFlags[e.getId()]={owner:e,flag:t})}},{key:"unowner",value:function(e){this._m_OwnerFlags[e.getId()]&&delete this._m_OwnerFlags[e.getId()]}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=r},4690:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e))._m_X=0,t._m_Y=0,t}return t=s,(n=[{key:"valueFromXY",value:function(e,t){return this._m_X=e,this._m_Y=t,this}},{key:"compare",value:function(e){return!1}},{key:"_upload",value:function(e,t,n){e.uniform2f(t,this._m_X,this._m_Y)}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(3552))&&o.__esModule?o:{default:o}).default);t.default=l},2462:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r,o=_(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e))._m_X=0,t._m_Y=0,t._m_Z=0,t._m_W=1,t}return t=s,(n=[{key:"valueFromXYZW",value:function(e,t,n,r){return this._m_X=e,this._m_Y=t,this._m_Z=n,this._m_W=r,this}},{key:"compare",value:function(e){return!1}},{key:"_upload",value:function(e,t,n){e.uniform4f(t,this._m_X,this._m_Y,this._m_Z,this._m_W)}}])&&i(t.prototype,n),r&&i(t,r),s}(((o=n(3552))&&o.__esModule?o:{default:o}).default);t.default=l},4620:(e,n,r)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=x(r(2949)),i=x(r(5397)),a=x(r(1193)),_=x(r(3846)),s=x(r(4720)),u=x(r(307)),l=x(r(8113)),f=x(r(4008)),c=x(r(9586)),m=x(r(6858)),h=x(r(479)),d=x(r(7938)),p=x(r(4755)),g=x(r(1245)),S=x(r(7868)),v=x(r(1608)),y=x(r(8649)),C=x(r(1648)),T=x(r(9784)),b=x(r(2462)),P=x(r(1759)),E=x(r(5141)),D=x(r(1491)),R=x(r(7141)),w=x(r(2320)),M=x(r(3370));function x(e){return e&&e.__esModule?e:{default:e}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,"_m_CustomMatDef",null),L(this,"_m_MatDefSrc",M.default.S_PRINCIPLED_LIGHTING_DEF)}var n,r,x;return n=e,(r=[{key:"load",value:function(e,t,n,r){this._m_Scene=e,this._m_Batch=r&&r.batch,this._m_GLTFRootNode=null,this._m_PrincipledMatDef=null,this._m_DefaultMatDef=null,this._m_Joints={},this._m_Bones=[],this._m_Nodes={},this._m_Aps=[],this._m_Skeletons={},this._m_AnimationProcessors={},this._m_Mats={},this._m_MatMeshs={},this._m_BasePath=a.default.getBasePath(t),this._loadGLTF(t,n)}},{key:"reset",value:function(){this._m_GLTFRootNode=null,this._m_PrincipledMatDef=null,this._m_DefaultMatDef=null,this._m_Joints={},this._m_Bones=[],this._m_Nodes={},this._m_Aps=[],this._m_Skeletons={},this._m_AnimationProcessors={},this._m_Mats={},this._m_MatMeshs={}}},{key:"setAssetsPath",value:function(e,t){this._m_AssetsPath=e,t&&(this._m_CustomMatDef=t)}},{key:"_loadBIN",value:function(e,t,n,r,o){var i=this;r>0?a.default.loadFile(this._m_BasePath+e.buffers[n].uri,(function(a){r--,t.push({data:a,byteLength:e.buffers[n].byteLength}),i._loadBIN(e,t,++n,r,o)}),null,{inflate:!0}):o&&o()}},{key:"_loadGLTF",value:function(e,t){var n=this;a.default.loadFile(e,(function(e){if((e=JSON.parse(e))&&e.buffers&&e.buffers.length>0){var r=e.buffers.length,o=[];n._loadBIN(e,o,0,r,(function(){if(e.buffers=o,i.default.checkIsNull(e.scene)&&n._addScene(e),n._m_Batch?n._batchScene():(n._bindBone(),i.default.checkIsNull(e.animations)&&(n._parseAnimations(e),n._m_Aps.forEach((function(e){e.skeleton.finished()})))),_.default.log("当前材质:",n._m_Mats),n._m_Mats)for(var r in n._m_Mats)n._m_Mats[r].preload();t&&t(n._m_GLTFRootNode)}))}_.default.log("gltf:",e)}))}},{key:"_batchScene",value:function(){if(this._m_MatMeshs){var e=null,t=null;for(var n in this._m_MatMeshs)e=this._m_MatMeshs[n].mesh,(t=new s.default(this._m_Scene,{id:n+"_"+i.default.nextId()})).setMesh(e),t.updateBound(),t.setMaterial(this._m_Mats[n]),this._m_Mats[n].renderState&&("BLEND"!=this._m_Mats[n].renderState.alphaMode&&"MASK"!=this._m_Mats[n].renderState.alphaMode||t.setTranslucent()),this._m_GLTFRootNode.addChildren(t)}}},{key:"_bindBone",value:function(){for(var e=null,t=null,n=0;n<this._m_Aps.length;n++){e=this._m_Aps[n].skeleton.getJoints(),_.default.log("jointcount:"+e.length);for(var r=0;r<e.length;r++)(t=this._m_Nodes[e[r].getId()])instanceof c.default||t._update2||(t.getType=function(){return"Bone"},t._update2=t._updateLocalMatrix,t.bind=function(e){this._m_Bind=e},t.getBind=function(){return this._m_Bind},t._updateLocalMatrix=function(){this._update2(),this._m_Bind&&this._m_Bind.actived()}),t&&e[r].link(t)}}},{key:"_parseAnimations",value:function(e){var t=this,n=null,r=null,o=null,a=null,s=!1;e.animations.forEach((function(u){r=new h.default(t._getName(u.name)),n=new d.default,u.channels.forEach((function(l){var f=l.target.node;if(o=new p.default(l.target.path),t._m_Nodes[f]){g.default.createTrack(o,t._m_Nodes[f]);var c=u.samplers[l.sampler];t._parseSampler(e,c.input,c.output,c.interpolation,S.default.S_KEY_FRAME[l.target.path],o),n.addClip(o),s=!1;for(var m=0;m<t._m_Aps.length;m++){a=t._m_Aps[m].skeleton.getJoints();for(var h=0;h<a.length;h++)if(a[h].getId()==f){s=!0,t._m_Aps[m].animationProcessor.addAnimationAction(r);break}if(s)break}if(!s){if(_.default.log(f+"非skin动画!path:"+l.target.path),!t._m_AnimationProcessors[f]){var d=new C.default(t._m_GLTFRootNode,{id:i.default.nextId()+"_"+f+"_animationProcessor"});t._m_AnimationProcessors[f]=d}t._m_AnimationProcessors[f].addAnimationAction(r)}}else _.default.log("animation_node:"+f)})),r.setTrackMixer(n)}))}},{key:"_getAccessorData",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=e.DATA_COMPONENT[r.type];return new e.DATA[r.componentType](o[i.buffer].data,(i.byteOffset||0)+(r.byteOffset||0),r.count*a)}},{key:"_parseSampler",value:function(t,n,r,o,i,a){for(var s=this._getAccessorData(t,n),u=this._getAccessorData(t,r),l=t.accessors[n].count,f=e.DATA_COMPONENT[t.accessors[r].type],c=null,m=0,h=0;h<l;h++)m=h*f,f>3?(i||_.default.warn("未知keyframe!"),c=new i(s[h],u[m],u[m+1],u[m+2],u[m+3])):(i||_.default.warn("未知keyframe!"),c=new i(s[h],u[m],u[m+1],u[m+2])),c.setInterpolationMode(o),a.addKeyframe(c)}},{key:"_addScene",value:function(e){var t=this;if(i.default.checkIsNull(e.scene)){var n=e.scenes[e.scene],r=new o.default(this._m_Scene,{id:n.name});return this._m_Batch?(this._m_GLTFRootNode=new o.default(this._m_Scene,{id:i.default.nextId()+"_scene"}),this._m_GLTFRootNode.addChildren(r)):this._m_GLTFRootNode=r,i.default.checkIsNull(n.nodes)&&n.nodes.forEach((function(n){t._addNode(e,r,n)})),this._m_GLTFRootNode}return null}},{key:"_getName",value:function(e){return null==e||null==e||""==e?i.default.nextId():e}},{key:"_parseSkins",value:function(e,t){var n=this,r=e.skins[t],o=new v.default(this._getName(r.name)),i=null,a=this._getAccessorData(e,r.inverseBindMatrices),_=0,s=[];return r.joints.forEach((function(e){n._m_Joints[e]=!0,s.length=0;for(var t=0,r=16*_;t<16;t++)s.push(a[t+r]);(i=new y.default(e,_)).setJointSpace(s),o.addJoint(i),_++})),o}},{key:"_addNode",value:function(e,t,n){var r=this,a=e.nodes[n],s=null;if(this._m_Joints[n]?(s=new c.default(t,{id:this._getName(a.name)}),this._m_Bones.push(s)):s=new o.default(t,{id:this._getName(a.name)}),this._m_Nodes[n]=s,t.addChildren(s),i.default.checkIsNull(a.children)&&a.children.forEach((function(t){r._addNode(e,s,t)})),s&&(i.default.checkIsNull(a.scale)&&s.setLocalScaleXYZ(a.scale[0],a.scale[1],a.scale[2]),i.default.checkIsNull(a.rotation)&&s.setLocalRotationFromXYZW(a.rotation[0],a.rotation[1],a.rotation[2],a.rotation[3]),i.default.checkIsNull(a.translation)&&s.setLocalTranslationXYZ(a.translation[0],a.translation[1],a.translation[2]),i.default.checkIsNull(a.matrix)&&s.setLocalMatrixFromArray(a.matrix)),i.default.checkIsNull(a.mesh))if(this._m_Batch)this._parseMeshBatch(e,s,a.mesh);else if(this._parseMesh(e,s,a.mesh,i.default.checkIsNull(a.skin)),i.default.checkIsNull(a.skin)){var u=null;if(this._m_Skeletons[a.skin]?u=this._m_Skeletons[a.skin]:(u=this._parseSkins(e,a.skin),this._m_Skeletons[a.skin]=u,_.default.log("创建Skeleton!")),s.getChildren().forEach((function(e){e.setSkeleton(u)})),this._m_AnimationProcessors[a.skin]);else{var l=new C.default(this._m_GLTFRootNode,{id:i.default.nextId()+"_animationProcessor"});this._m_Aps.push({skeleton:u,animationProcessor:l}),this._m_AnimationProcessors[a.skin]=l}}}},{key:"_transformVertex",value:function(e,t){for(var n=new R.default,r=new R.default,o=[],i=0;i<e.length;i+=3)n.setToInXYZW(e[i],e[i+1],e[i+2],1),w.default.multiplyMV(r,n,t),o.push(r._m_X),o.push(r._m_Y),o.push(r._m_Z);return o}},{key:"_transformNormal",value:function(e,t){var n=new w.default;n.set(t),n.inert(),n.transpose();for(var r=new R.default,o=new R.default,i=[],a=0;a<e.length;a+=3)r.setToInXYZW(e[a],e[a+1],e[a+2],0),w.default.multiplyMV(o,r,t),i.push(o._m_X),i.push(o._m_Y),i.push(o._m_Z);return i}},{key:"_parseMeshBatch",value:function(e,n,r){for(var o=this,a=e.meshes[r].primitives,_=null,s=null,c=0;c<a.length;c++){_=a[c];var m=null;if(i.default.checkIsNull(_.material)){this._m_PrincipledMatDef||(this._m_AssetsPath&&this._m_CustomMatDef?this._m_PrincipledMatDef=l.default.load(this._m_AssetsPath+this._m_CustomMatDef):this._m_PrincipledMatDef=l.default.parse(this._m_MatDefSrc)),m=this._getName(e.materials[_.material].name);var h=null;this._m_Mats[m]?h=this._m_Mats[m]:(h=new f.default(this._m_Scene,{id:m,materialDef:this._m_PrincipledMatDef}),this._parseMaterial(e,_.material,h),this._m_Mats[m]=h)}else{this._m_DefaultMatDef||(this._m_AssetsPath?this._m_DefaultMatDef=l.default.load(this._m_AssetsPath+"ColorDef"):this._m_DefaultMatDef=l.default.parse(this._m_MatDefSrc)),m="default_gltf_mat";var d=null;this._m_Mats[m]?d=this._m_Mats[m]:(d=new f.default(this._m_Scene,{id:m,materialDef:this._m_DefaultMatDef}),this._m_Mats[m]=d)}if(this._m_MatMeshs[m]){s=this._m_MatMeshs[m].mesh;var p=0;i.default.checkIsNull(_.attributes.POSITION)&&function(){var t=o._parsePositions(e,_.attributes.POSITION);n&&(t.data=o._transformVertex(t.data,n.getWorldMatrix()));var r=s.getData(u.default.S_POSITIONS);r&&(p=r.length,t.data.forEach((function(e){r.push(e)})),s.setData(u.default.S_POSITIONS,r))}(),i.default.checkIsNull(_.attributes.NORMAL)&&function(){var t=o._parseNormals(e,_.attributes.NORMAL);n&&(t.data=o._transformNormal(t.data,n.getWorldMatrix()));var r=s.getData(u.default.S_NORMALS);r&&(t.data.forEach((function(e){r.push(e)})),s.setData(u.default.S_NORMALS,r))}(),i.default.checkIsNull(_.attributes.TEXCOORD_0)&&function(){var t=o._parseTexcoords(e,_.attributes.TEXCOORD_0),n=s.getData(u.default.S_UV0);n&&(t.data.forEach((function(e){n.push(e)})),s.setData(u.default.S_UV0,n))}(),i.default.checkIsNull(_.indices)&&function(){var t=o._parseIndices(e,_.indices),n=s.getData(u.default.S_INDICES),r=0;n?(r=p/3,t.data.forEach((function(e){n.push(e+r)})),s.setData(5125==t.bufType?u.default.S_INDICES_32:u.default.S_INDICES,n),5125!=t.bufType&&s.setData(u.default.S_INDICES,null)):(n=s.getData(u.default.S_INDICES_32))&&(r=p/3,t.data.forEach((function(e){n.push(e+r)})),s.setData(u.default.S_INDICES_32,n))}(),i.default.checkIsNull(_.attributes.TANGENT)?function(){var t=o._parseTangents(e,_.attributes.TANGENT),n=s.getData(u.default.S_TANGENTS);n&&(t.data.forEach((function(e){n.push(e)})),s.setData(u.default.S_TANGENTS,n))}():s.getData(u.default.S_UV0)?function(){var e=i.default.generatorTangents(s.getData(u.default.S_INDICES)?s.getData(u.default.S_INDICES):s.getData(u.default.S_INDICES_32),s.getData(u.default.S_POSITIONS),s.getData(u.default.S_UV0)),t=s.getData(u.default.S_TANGENTS);t&&(e.forEach((function(e){t.push(e)})),s.setData(u.default.S_TANGENTS,t))}():function(){var e=i.default.generatorFillTangents(s.getData(u.default.S_INDICES)?s.getData(u.default.S_INDICES):s.getData(u.default.S_INDICES_32),s.getData(u.default.S_POSITIONS),s.getData(u.default.S_UV0)),t=s.getData(u.default.S_TANGENTS);t&&(e.forEach((function(e){t.push(e)})),s.setData(u.default.S_TANGENTS,t))}()}else{if(s=new u.default,i.default.checkIsNull(_.attributes.POSITION)){var g=this._parsePositions(e,_.attributes.POSITION);n&&(g.data=this._transformVertex(g.data,n.getWorldMatrix())),s.setData(u.default.S_POSITIONS,g.data)}if(i.default.checkIsNull(_.attributes.NORMAL)){var S=this._parseNormals(e,_.attributes.NORMAL);n&&(S.data=this._transformNormal(S.data,n.getWorldMatrix())),s.setData(u.default.S_NORMALS,S.data)}if(i.default.checkIsNull(_.attributes.TEXCOORD_0)){for(var v=this._parseTexcoords(e,_.attributes.TEXCOORD_0),y=[],C=0;C<v.data.length;C++)y.push(v.data[C]);s.setData(u.default.S_UV0,y)}if(i.default.checkIsNull(_.indices)){for(var T=this._parseIndices(e,_.indices),b=[],P=0;P<T.data.length;P++)b.push(T.data[P]);s.setData(5125==T.bufType?u.default.S_INDICES_32:u.default.S_INDICES,b)}if(i.default.checkIsNull(_.attributes.TANGENT)){for(var E=this._parseTangents(e,_.attributes.TANGENT),D=[],R=0;R<E.data.length;R++)D.push(E.data[R]);s.setData(u.default.S_TANGENTS,D)}else if(s.getData(u.default.S_UV0)){for(var w=i.default.generatorTangents2(s.getData(u.default.S_INDICES)?s.getData(u.default.S_INDICES):s.getData(u.default.S_INDICES_32),s.getData(u.default.S_POSITIONS),s.getData(u.default.S_UV0),s.getData(u.default.S_NORMALS)),M=[],x=0;x<w.length;x++)M.push(w[x]);s.setData(u.default.S_TANGENTS,M)}else{for(var A=i.default.generatorFillTangents2(s.getData(u.default.S_INDICES)?s.getData(u.default.S_INDICES):s.getData(u.default.S_INDICES_32),s.getData(u.default.S_POSITIONS),s.getData(u.default.S_UV0)),L=0;L<A.length;L++)t.push(A[L]);s.setData(u.default.S_TANGENTS,t)}this._m_MatMeshs[m]={mesh:s}}}}},{key:"_parseMesh",value:function(e,t,n,r){for(var o=e.meshes[n],a=o.primitives,_=null,c=null,h=null,d=0;d<a.length;d++){if(_=a[d],c=r?new m.default(t,{id:this._getName(o.name)+d}):new s.default(t,{id:this._getName(o.name)+d}),t.addChildren(c),h=new u.default,i.default.checkIsNull(_.attributes.POSITION)){var p=this._parsePositions(e,_.attributes.POSITION);h.setData(u.default.S_POSITIONS,p.data)}if(i.default.checkIsNull(_.attributes.NORMAL)){var g=this._parseNormals(e,_.attributes.NORMAL);h.setData(u.default.S_NORMALS,g.data)}if(i.default.checkIsNull(_.attributes.TEXCOORD_0)){var S=this._parseTexcoords(e,_.attributes.TEXCOORD_0);h.setData(u.default.S_UV0,S.data)}if(r){if(i.default.checkIsNull(_.attributes.JOINTS_0)){var v=this._parseJoints(e,_.attributes.JOINTS_0);h.setData(5125==v.bufType?u.default.S_JOINTS_0_32:u.default.S_JOINTS_0,v.data)}if(i.default.checkIsNull(_.attributes.WEIGHTS_0)){var y=this._parseWeights(e,_.attributes.WEIGHTS_0);h.setData(u.default.S_WEIGHTS_0,y.data)}}if(i.default.checkIsNull(_.indices)){var C=this._parseIndices(e,_.indices);h.setData(5125==C.bufType?u.default.S_INDICES_32:u.default.S_INDICES,C.data)}if(i.default.checkIsNull(_.attributes.TANGENT)){var b=this._parseTangents(e,_.attributes.TANGENT);h.setData(u.default.S_TANGENTS,b.data)}else if(h.getData(u.default.S_UV0)){console.log("生成切线数据");var P=i.default.generatorTangents2(h.getData(u.default.S_INDICES)?h.getData(u.default.S_INDICES):h.getData(u.default.S_INDICES_32),h.getData(u.default.S_POSITIONS),h.getData(u.default.S_UV0),h.getData(u.default.S_NORMALS));h.setData(u.default.S_TANGENTS,P)}else console.log("-----------------------------");if(i.default.checkIsNull(_.material)){this._m_PrincipledMatDef||(this._m_AssetsPath?this._m_PrincipledMatDef=l.default.load(this._m_AssetsPath+"PrincipledLightingDef"):this._m_PrincipledMatDef=l.default.parse(this._m_MatDefSrc));var E=this._getName(e.materials[_.material].name),D=null;this._m_Mats[E]?D=this._m_Mats[E]:(D=new f.default(this._m_Scene,{id:E,materialDef:this._m_PrincipledMatDef}),this._parseMaterial(e,_.material,D),this._m_Mats[E]=D),c.setMaterial(D),D.renderState&&("BLEND"!=D.renderState.alphaMode&&"MASK"!=D.renderState.alphaMode||c.setTranslucent())}else{this._m_DefaultMatDef||(this._m_DefaultMatDef=l.default.load(this._m_AssetsPath+"ColorDef"));var R="default_gltf_mat",w=null;this._m_Mats[R]?w=this._m_Mats[R]:(w=new f.default(this._m_Scene,{id:R,materialDef:this._m_DefaultMatDef}),this._m_Mats[R]=w),c.setMaterial(w)}c.setMesh(h),c.updateBound(),r&&c.getMaterial().addDefine(T.default.S_SKINS_SRC)}}},{key:"_samplerMap",value:function(t,n,r){var o=t.textures[n],a=t.images[o.source],_=new E.default(this._m_Scene);if(r&&_.setTextureFormat(E.default.S_TEXTURE_FORMAT.S_SRGBA,E.default.S_TEXTURE_FORMAT.S_RGBA,E.default.S_TEXTURE_FORMAT.S_UNSIGNED_BYTE),_.setImageSrc(this._m_Scene,this._m_BasePath+a.uri),i.default.checkIsNull(o.sampler)){var s=t.samplers[o.sampler];if(i.default.checkIsNull(s)){var u=s.magFilter,l=s.minFilter;u&&l&&_.setFilter(this._m_Scene,e.FILTERS[l],e.FILTERS[u]);var f=s.wrapS,c=s.wrapT;f&&c&&_.setWrap(this._m_Scene,e.WRAPS[f],e.WRAPS[c])}}return _}},{key:"_parseMaterial",value:function(e,t,n){var r=e.materials[t];if(r.pbrMetallicRoughness){var o=r.pbrMetallicRoughness,a=o.baseColorFactor;i.default.checkIsNull(a)&&n.setParam("baseColor",(new b.default).valueFromXYZW(a[0],a[1],a[2],a[3]));var _=o.roughnessFactor;i.default.checkIsNull(_)&&n.setParam("roughness",(new P.default).valueOf(_));var s=o.metallicFactor;i.default.checkIsNull(s)&&n.setParam("metallic",(new P.default).valueOf(s));var u=o.baseColorTexture;i.default.checkIsNull(u)&&n.setParam("baseColorMap",this._samplerMap(e,u.index,!0));var l=o.metallicRoughnessTexture;i.default.checkIsNull(l)&&n.setParam("metallicRoughnessMap",this._samplerMap(e,l.index))}if(r.extensions&&r.extensions.KHR_materials_pbrSpecularGlossiness){var f=r.extensions.KHR_materials_pbrSpecularGlossiness;n.setParam("useSpecGloss",(new D.default).valueOf(!0));var c=f.diffuseTexture;i.default.checkIsNull(c)&&n.setParam("baseColorMap",this._samplerMap(e,c.index,!0));var m=f.specularGlossinessTexture;i.default.checkIsNull(m)&&n.setParam("specularGlossinessMap",this._samplerMap(e,m.index,!0))}var h=r.normalTexture;i.default.checkIsNull(h)&&n.setParam("normalMap",this._samplerMap(e,h.index));var d=r.occlusionTexture;if(i.default.checkIsNull(d)){var p=d.texCoord;n.setParam("lightMap",this._samplerMap(e,d.index,!0)),null!=p&&0!=p||n.setParam("aoMap",(new D.default).valueOf(!0))}var g=r.emissiveFactor;i.default.checkIsNull(g)&&n.setParam("emissive",(new b.default).valueFromXYZW(g[0],g[1],g[2],1));var S=r.emissiveTexture;i.default.checkIsNull(S)&&n.setParam("emissiveMap",this._samplerMap(e,S.index,!0));var v={};r.alphaMode&&(v.alphaMode=r.alphaMode),r.doubleSided&&(v.doubleSided=r.doubleSided),n.renderState=v}},{key:"_parsePositions",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),3*r.count),bufType:r.componentType}}},{key:"_parseTangents",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),4*r.count),bufType:r.componentType}}},{key:"_parseNormals",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),3*r.count),bufType:r.componentType}}},{key:"_parseTexcoords",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),2*r.count),bufType:r.componentType}}},{key:"_parseIndices",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),r.count),bufType:r.componentType}}},{key:"_parseJoints",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),4*r.count),bufType:r.componentType}}},{key:"_parseWeights",value:function(t,n){var r=t.accessors[n],o=t.buffers,i=t.bufferViews[r.bufferView],a=o[i.buffer].data;return{data:new e.DATA[r.componentType](a,(i.byteOffset||0)+(r.byteOffset||0),4*r.count),bufType:r.componentType}}}])&&A(n.prototype,r),x&&A(n,x),e}();n.default=I,L(I,"DATA",{5121:Uint8Array,5123:Uint16Array,5124:Uint16Array,5125:Uint32Array,5126:Float32Array}),L(I,"DATA_COMPONENT",{SCALAR:1,VEC3:3,VEC4:4,MAT4:16}),L(I,"FILTERS",{9729:E.default.S_FILTERS.S_LINEAR,9728:E.default.S_FILTERS.S_NEAREST,9987:E.default.S_FILTERS.S_LINEAR_MIPMAP_LINEAR,9986:E.default.S_FILTERS.S_NEAREST_MIPMAP_LINEAR,9985:E.default.S_FILTERS.S_LINEAR_MIPMAP_NEAREST,9984:E.default.S_FILTERS.S_NEAREST_MIPMAP_NEAREST}),L(I,"WRAPS",{10497:E.default.S_WRAPS.S_REPEAT,33071:E.default.S_WRAPS.S_CLAMP_TO_EDGE})},8236:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(2949)),o=d(n(8113)),i=d(n(4008)),a=d(n(307)),_=d(n(4720)),s=d(n(5397)),u=d(n(3846)),l=d(n(2462)),f=d(n(1759)),c=d(n(7141)),m=d(n(5141)),h=d(n(3370));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"_m_CustomMatDef",null),g(this,"_m_MatDefSrc",h.default.S_BASIC_LIGHTING_DEF_DATA),g(this,"_m_AlphaMode",e.S_ALPHA_MODE_BLEND)}var t,n,d;return t=e,(n=[{key:"load",value:function(e,t,n,o){this._m_Scene=e,this._m_DefaultMatDef=null,this._m_Mats={},this._m_CurrentMat=null;var i=new r.default(e,{id:t||s.default.nextId()});this._load(i,n,o)}},{key:"config",value:function(e){this._m_AlphaMode=e.alphaMode||this._m_AlphaMode}},{key:"setAssetsPath",value:function(e,t){this._m_AssetsPath=e,t&&(this._m_CustomMatDef=t)}},{key:"useDeferredMatDef",value:function(){this.setMatDef(h.default.S_DEFERRED_LIGHTING_DEF_DATA)}},{key:"setMatDef",value:function(e){e&&(this._m_MatDefSrc=e)}},{key:"_load",value:function(e,t,n){var r=this;this.loadOBJ(e,t,(function(t){r._m_DefaultMatDef||(r._m_AssetsPath&&r._m_CustomMatDef?r._m_DefaultMatDef=o.default.load(r._m_AssetsPath+r._m_CustomMatDef):r._m_DefaultMatDef=o.default.parse(r._m_MatDefSrc)),r.loadMTLs(e,t,(function(){r.createMeshes(e,t),n&&n(e)}))}))}},{key:"loadOBJ",value:function(e,t,n){var r=this;this.loadFile(t,(function(o){var i=r.parseOBJ(e,o,t);n(i)}),(function(e){u.default.error(e)}))}},{key:"parseOBJ",value:function(e,t,n){var r={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /},o={src:n=n||"",basePath:this.getBasePath(n),objects:[],object:{},positions:[],normals:[],uv:[],materialLibraries:{}};this.startObject(o,"",!1),-1!==t.indexOf("\r\n")&&(t=t.replace("\r\n","\n"));for(var i=t.split("\n"),a="",_="",s="",l=[],f="function"==typeof"".trimLeft,c=0,m=i.length;c<m;c++)if(a=i[c],0!==(a=f?a.trimLeft():a.trim()).length&&"#"!==(_=a.charAt(0)))if("v"===_)if(" "===(s=a.charAt(1))&&null!==(l=r.vertex_pattern.exec(a)))o.positions.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if("n"===s&&null!==(l=r.normal_pattern.exec(a)))o.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else{if("t"!==s||null===(l=r.uv_pattern.exec(a)))return void u.default.error("Unexpected vertex/normal/uv line: '"+a+"'");o.uv.push(parseFloat(l[1]),parseFloat(l[2]))}else if("f"===_)if(null!==(l=r.face_vertex_uv_normal.exec(a)))this.addFace(o,l[1],l[4],l[7],l[10],l[2],l[5],l[8],l[11],l[3],l[6],l[9],l[12]);else if(null!==(l=r.face_vertex_uv.exec(a)))this.addFace(o,l[1],l[3],l[5],l[7],l[2],l[4],l[6],l[8]);else if(null!==(l=r.face_vertex_normal.exec(a)))this.addFace(o,l[1],l[3],l[5],l[7],void 0,void 0,void 0,void 0,l[2],l[4],l[6],l[8]);else{if(null===(l=r.face_vertex.exec(a)))return void u.default.error("Unexpected face line: '"+a+"'");this.addFace(o,l[1],l[2],l[3],l[4])}else if("l"===_){var h=a.substring(1).trim().split(" "),d=[],p=[];if(-1===a.indexOf("/"))d=h;else for(var g=0,S=h.length;g<S;g++){var v=h[g].split("/");""!==v[0]&&d.push(v[0]),""!==v[1]&&p.push(v[1])}this.addLineGeometry(o,d,p)}else if(null!==(l=r.object_pattern.exec(a))){var y=l[0].substr(1).trim();this.startObject(o,y,!0)}else if(r.material_use_pattern.test(a)){var C=a.substring(7).trim();o.object.material.id=C}else if(r.material_library_pattern.test(a))o.materialLibraries[a.substring(7).trim()]=!0;else{if(null===(l=r.smoothing_pattern.exec(a))){if("\0"===a)continue;return void u.default.error("Unexpected line: '"+a+"'")}var T=l[1].trim().toLowerCase();o.object.material.smooth="1"===T||"on"===T}return o}},{key:"getBasePath",value:function(e){var t=e.lastIndexOf("/");return-1===t?e:e.substring(0,t+1)}},{key:"startObject",value:function(e,t,n){if(e.object&&!1===e.object.fromDeclaration)return e.object.id=t,void(e.object.fromDeclaration=!1!==n);e.object={id:t||"",geometry:{positions:[],normals:[],uv:[]},material:{id:"",smooth:!0},fromDeclaration:!1!==n},e.objects.push(e.object)}},{key:"parseVertexIndex",value:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)}},{key:"parseNormalIndex",value:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)}},{key:"parseUVIndex",value:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)}},{key:"addVertex",value:function(e,t,n,r){var o=e.positions,i=e.object.geometry.positions;i.push(o[t+0]),i.push(o[t+1]),i.push(o[t+2]),i.push(o[n+0]),i.push(o[n+1]),i.push(o[n+2]),i.push(o[r+0]),i.push(o[r+1]),i.push(o[r+2])}},{key:"addVertexLine",value:function(e,t){var n=e.positions,r=e.object.geometry.positions;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2])}},{key:"addNormal",value:function(e,t,n,r){var o=e.normals,i=e.object.geometry.normals;i.push(o[t+0]),i.push(o[t+1]),i.push(o[t+2]),i.push(o[n+0]),i.push(o[n+1]),i.push(o[n+2]),i.push(o[r+0]),i.push(o[r+1]),i.push(o[r+2])}},{key:"addUV",value:function(e,t,n,r){var o=e.uv,i=e.object.geometry.uv;i.push(o[t+0]),i.push(o[t+1]),i.push(o[n+0]),i.push(o[n+1]),i.push(o[r+0]),i.push(o[r+1])}},{key:"addUVLine",value:function(e,t){var n=e.uv,r=e.object.geometry.uv;r.push(n[t+0]),r.push(n[t+1])}},{key:"addFace",value:function(e,t,n,r,o,i,a,_,s,u,l,f,c){var m,h=e.positions.length,d=this.parseVertexIndex(t,h),p=this.parseVertexIndex(n,h),g=this.parseVertexIndex(r,h);if(void 0===o?this.addVertex(e,d,p,g):(m=this.parseVertexIndex(o,h),this.addVertex(e,d,p,m),this.addVertex(e,p,g,m)),void 0!==i){var S=e.uv.length;d=this.parseUVIndex(i,S),p=this.parseUVIndex(a,S),g=this.parseUVIndex(_,S),void 0===o?this.addUV(e,d,p,g):(m=this.parseUVIndex(s,S),this.addUV(e,d,p,m),this.addUV(e,p,g,m))}if(void 0!==u){var v=e.normals.length;d=this.parseNormalIndex(u,v),p=u===l?d:this.parseNormalIndex(l,v),g=u===f?d:this.parseNormalIndex(f,v),void 0===o?this.addNormal(e,d,p,g):(m=this.parseNormalIndex(c,v),this.addNormal(e,d,p,m),this.addNormal(e,p,g,m))}}},{key:"addLineGeometry",value:function(e,t,n){e.object.geometry.type="Line";for(var r=e.positions.length,o=e.uv.length,i=0,a=t.length;i<a;i++)this.addVertexLine(e,this.parseVertexIndex(t[i],r));for(var _=0,s=n.length;_<s;_++)this.addUVLine(e,this.parseUVIndex(n[_],o))}},{key:"loadMTLs",value:function(e,t,n){for(var r=t.basePath,o=Object.keys(t.materialLibraries),i=o.length,a=0,_=i;a<_;a++)this.loadMTL(e,r,r+o[a],(function(){0==--i&&n()}))}},{key:"loadMTL",value:function(e,t,n,r){var o=this;this.loadFile(n,(function(n){o.parseMTL(e,n,t),r()}),(function(e){u.default.error(e),r()}))}},{key:"createTexture",value:function(e,t,n,r){var o={},i=n.split(/\s+/),a=i.indexOf("-bm");a>=0&&i.splice(a,2),(a=i.indexOf("-s"))>=0&&(o.scale=[parseFloat(i[a+1]),parseFloat(i[a+2])],i.splice(a,4)),(a=i.indexOf("-o"))>=0&&(o.translate=[parseFloat(i[a+1]),parseFloat(i[a+2])],i.splice(a,4)),o.src=t+i.join(" ").trim(),o.flipY=!0,o.encoding=r||"linear";var _=new m.default(this._m_Scene);return"sRGB"==o.encoding&&_.setTextureFormat(m.default.S_TEXTURE_FORMAT.S_SRGBA,m.default.S_TEXTURE_FORMAT.S_RGBA,m.default.S_TEXTURE_FORMAT.S_UNSIGNED_BYTE),_.setPreloadColor(this._m_Scene,new c.default(.2,.2,.2,1)),_.setImageSrc(this._m_Scene,o.src),_.setFlipY(!0),_}},{key:"createMaterial",value:function(e,t){if(this._m_DefaultMatDef&&!this._m_Mats[t.id]){var n=new i.default(this._m_Scene,{id:t.id,materialDef:this._m_DefaultMatDef});this._m_Mats[t.id]=n,this._m_CurrentMat=n,this._m_CurrentMat.setParam("diffuseColor",(new l.default).valueFromXYZW(.5,.5,.5,1)),this._m_CurrentMat.setParam("ambientColor",(new l.default).valueFromXYZW(.2,.2,.2,1)),this._m_CurrentMat.setParam("specularColor",(new l.default).valueFromXYZW(1,1,1,1)),this._m_CurrentMat.setParam("shininess",(new f.default).valueOf(32))}}},{key:"parseRGB",value:function(e){var t=e.split(/\s+/,3);return[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])]}},{key:"parseMTL",value:function(t,n,r){var o,i,a,_,s,u=n.split("\n"),c={id:"Default"};r=r||"";for(var m=0;m<u.length;m++)if(0!==(o=u[m].trim()).length&&"#"!==o.charAt(0))switch(a=(a=(i=o.indexOf(" "))>=0?o.substring(0,i):o).toLowerCase(),_=(_=i>=0?o.substring(i+1):"").trim(),a.toLowerCase()){case"newmtl":c={id:_},this.createMaterial(t,c);break;case"ka":c.ambient=this.parseRGB(_),this._m_CurrentMat.setParam("ambientColor",(new l.default).valueFromXYZW(c.ambient[0],c.ambient[1],c.ambient[2],1));break;case"kd":c.diffuse=this.parseRGB(_),this._m_CurrentMat.setParam("diffuseColor",(new l.default).valueFromXYZW(c.diffuse[0],c.diffuse[1],c.diffuse[2],1));break;case"ks":c.specular=this.parseRGB(_),this._m_CurrentMat.setParam("specularColor",(new l.default).valueFromXYZW(c.specular[0],c.specular[1],c.specular[2],1));break;case"map_kd":c.diffuseMap||(c.diffuseMap=this.createTexture(t,r,_,"sRGB"),this._m_CurrentMat.setParam("diffuseMap",c.diffuseMap));break;case"map_ks":c.specularMap||(c.specularMap=this.createTexture(t,r,_,"linear"),this._m_CurrentMat.setParam("specularMap",c.specularMap));break;case"map_bump":case"bump":c.normalMap||(c.normalMap=this.createTexture(t,r,_),this._m_CurrentMat.setParam("normalMap",c.normalMap));break;case"ns":c.shininess=parseFloat(_),this._m_CurrentMat.setParam("shininess",(new f.default).valueOf(c.shininess));break;case"d":(s=parseFloat(_))<=.1&&(this._m_AlphaMode==e.S_ALPHA_MODE_BLEND?this._m_CurrentMat.alphaMode="blend":this._m_AlphaMode==e.S_ALPHA_MODE_DISCARD&&this._m_CurrentMat.setParam("alphaDiscard",(new f.default).valueOf(s))),s<1&&(c.alpha=s,this._m_AlphaMode==e.S_ALPHA_MODE_BLEND&&(c.alphaMode="blend"));break;case"tr":(s=parseFloat(_))<=.1&&(this._m_AlphaMode==e.S_ALPHA_MODE_BLEND?this._m_CurrentMat.alphaMode="blend":this._m_AlphaMode==e.S_ALPHA_MODE_DISCARD&&this._m_CurrentMat.setParam("alphaDiscard",(new f.default).valueOf(1-s))),s>0&&(c.alpha=1-s,this._m_AlphaMode==e.S_ALPHA_MODE_BLEND&&(c.alphaMode="blend"))}}},{key:"createMeshes",value:function(e,t){u.default.debug("state.objects.length:"+t.objects.length);for(var n={},r=0,o=0,l=t.objects.length;o<l;o++){var f=t.objects[o],c=f.geometry,m=(c.type,f.material.id),h=void 0,d=null;if(0!==c.positions.length)if(n[m])!function(){for(var e=n[m].mesh,t=n[m].unitType,r=e.getData(a.default.S_POSITIONS),o=new Array(c.positions.length/3),i=0,_=r.length/3;i<o.length;i++)o[i]=i+_;if(r&&c.positions.forEach((function(e){r.push(e)})),e.setData(a.default.S_POSITIONS,r),c.normals.length>0){var s=e.getData(a.default.S_NORMALS);s&&c.normals.forEach((function(e){s.push(e)})),e.setData(a.default.S_NORMALS,s)}if(c.uv.length>0){var u=e.getData(a.default.S_UV0);u&&c.uv.forEach((function(e){u.push(e)})),e.setData(a.default.S_UV0,u)}var l=e.getData(t);l&&o.forEach((function(e){l.push(e)})),e.setData(t,l)}();else{r++;var p=new Array(c.positions.length/3);d=p.length>65534?a.default.S_INDICES_32:a.default.S_INDICES;for(var g=0;g<p.length;g++)p[g]=g;var S=new a.default;if(S.setData(a.default.S_POSITIONS,c.positions),c.normals.length>0&&S.setData(a.default.S_NORMALS,c.normals),c.uv.length>0&&S.setData(a.default.S_UV0,c.uv),S.setData(d,p),m&&""!==m)(h=this._m_Mats[m])||u.default.error("Material not found: "+m);else if(this._m_DefaultMatDef){if(!this._m_Mats.Default){var v=new i.default(this._m_Scene,{id:"Default",materialDef:this._m_DefaultMatDef});this._m_Mats.Default=v}h=this._m_Mats.Default}n[m]={mesh:S,material:h,unitType:d}}}if(r)for(var y in u.default.debug("实体数量:"+r),n){var C=n[y].material,T=n[y].unitType,b=n[y].mesh;if(b.getData(a.default.S_UV0)){var P=s.default.generatorTangents2(b.getData(T),b.getData(a.default.S_POSITIONS),b.getData(a.default.S_UV0),b.getData(a.default.S_NORMALS));b.setData(a.default.S_TANGENTS,P)}else{var E=s.default.generatorFillTangents2(b.getData(a.default.S_POSITIONS));b.setData(a.default.S_TANGENTS,E)}var D=new _.default(e,{id:"Geo_"+y});D.setMesh(b),D.setMaterial(C),D.updateBound(),C.alphaMode&&D.setTranslucent(),e.addChildren(D)}}},{key:"loadFile",value:function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.addEventListener("load",(function(e){var o=e.target.response;200===r.status?t&&t(o):0===r.status?(u.default.warn("loadFile: HTTP Status 0 received."),t&&t(o)):n&&n(e)}),!1),r.addEventListener("error",(function(e){n&&n(e)}),!1),r.send(null)}}])&&p(t.prototype,n),d&&p(t,d),e}();t.default=S,g(S,"S_ALPHA_MODE_BLEND","blend"),g(S,"S_ALPHA_MODE_DISCARD","discard")},6797:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(3319))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"rgbeImg",value:function(){return(new o.default).HDRImage()}}],(n=[{key:"loadHDR",value:function(t,n){var r=e.rgbeImg();r.onload=function(){n(r)},r.src=t}}])&&i(t.prototype,n),r&&i(t,r),e}();t.default=a},3319:(t,n)=>{function r(){var e,t,n=document.createElement("canvas"),r="t",u=1,l=2.2,f=null;return n.__defineGetter__("exposure",(function(){return u})),n.__defineSetter__("exposure",(function(n){u=n,f&&(s(f,u,l,t.data),e.putImageData(t,0,0))})),n.__defineGetter__("gamma",(function(){return l})),n.__defineSetter__("gamma",(function(n){l=n,f&&(s(f,u,l,t.data),e.putImageData(t,0,0))})),n.__defineGetter__("dataFloat",(function(){return _(f)})),n.__defineGetter__("dataRGBE",(function(){return f})),n.toHDRBlob=function(e,t,n){function r(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),r}var i=t&&t.match(/rgb9_e5/i)?new Uint8Array(o(_(f)).buffer):new Uint8Array(f.buffer),a=this.width,s=this.height;if(a*s*4<i.byteLength)return console.error("not big enough.");var u=document.createElement("canvas");u.width=a,u.height=s;var l=u.getContext("webgl",{antialias:!1,alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0}),c=l.createTexture();l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!0),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,a,s,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(i.buffer));var m=function(e,t,n){var o,i,a=e.createProgram();return e.attachShader(a,o=r(e,t,e.VERTEX_SHADER)),e.attachShader(a,i=r(e,n,e.FRAGMENT_SHADER)),e.linkProgram(a),e.deleteShader(o),e.deleteShader(i),a}(l,"precision highp float;\nattribute vec3 position;\nvarying vec2 tex;\nvoid main() { tex = position.xy/2.0+0.5; gl_Position = vec4(position, 1.0); }","precision highp float;\nprecision highp sampler2D;\nuniform sampler2D tx;\nvarying vec2 tex;\nvoid main() { gl_FragColor = texture2D(tx,tex); }"),h=l.getUniformLocation(m,"tx"),d=new Float32Array([-1,-1,0,1,-1,0,1,1,0,1,1,0,-1,1,0,-1,-1,0]),p=l.createBuffer();return l.enableVertexAttribArray(0),l.bindBuffer(l.ARRAY_BUFFER,p),l.bufferData(l.ARRAY_BUFFER,d,l.STATIC_DRAW),l.vertexAttribPointer(0,3,l.FLOAT,!1,0,0),l.useProgram(m),l.uniform1i(h,0),l.drawArrays(l.TRIANGLES,0,6),l.deleteTexture(c),l.deleteProgram(m),e?u.toBlob(e):void 0},n.__defineGetter__("src",(function(){return r})),n.__defineSetter__("src",(function(o){if(r=o,e&&e.clearRect(0,0,this.width,this.height),o.match(/\.hdr$/i))c=o,m=function(n,r,o){f=n,this.width=this.style.width=r,this.height=this.style.height=o,e=this.getContext("2d"),t=e.getImageData(0,0,r,o),s(n,u,l,t.data),e.putImageData(t,0,0),this.onload&&this.onload()}.bind(n),h=function(e,t){for(var n in t)e[n]=t[n];return e}(new XMLHttpRequest,{responseType:"arraybuffer"}),h.onerror=m.bind(h,!1),h.onload=function(){if(this.status>=400)return this.onerror();for(var e,t="",n=0,r=new Uint8Array(this.response);!t.match(/\n\n[^\n]+\n/g);)t+=String.fromCharCode(r[n++]);if("32-bit_rle_rgbe"!=(e=t.match(/FORMAT=(.*)$/m)[1]))return console.warn("unknown format : "+e),this.onerror();for(var o=t.split(/\n/).reverse()[1].split(" "),i=1*o[3],a=1*o[1],_=new Uint8Array(i*a*4),s=0,u=0;u<a;u++){var l=r.slice(n,n+=4),f=[];if(2!=l[0]||2!=l[1]||128&l[2]){var c=i;for(n-=4;c>0;)if(_.set(r.slice(n,n+=4),s),1==_[s]&&1==_[s+1]&&1==_[s+2])for(_[s+3];h>0;h--)_.set(_.slice(s-4,s),s),s+=4,c--;else c--,s+=4}else{if((l[2]<<8)+l[3]!=i)return console.warn("HDR line mismatch .."),this.onerror();for(var h=0;h<4;h++)for(var d,p,g=h*i,S=(h+1)*i;g<S;)if((d=r.slice(n,n+=2))[0]>128)for(p=d[0]-128;p-- >0;)f[g++]=d[1];else for(p=d[0]-1,f[g++]=d[1];p-- >0;)f[g++]=r[n++];for(h=0;h<i;h++)_[s++]=f[h],_[s++]=f[h+i],_[s++]=f[h+2*i],_[s++]=f[h+3*i]}}m&&m(_,i,a)},h.open("GET",c,!0),h.send(null);else if(o.match(/\.rgb9_e5\.png$/i)){(_=new Image).src=o,_.onload=function(){var n=document.createElement("canvas"),r=this.width=this.style.width=n.width=_.width,o=this.height=this.style.height=n.height=_.height,c=n.getContext("webgl"),m=c.createTexture();c.bindTexture(c.TEXTURE_2D,m),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,_),fb=c.createFramebuffer(),c.bindFramebuffer(c.FRAMEBUFFER,fb),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,m,0);var h=new Uint8Array(r*o*4);c.readPixels(0,0,r,o,c.RGBA,c.UNSIGNED_BYTE,h),c.deleteTexture(m),c.deleteFramebuffer(fb),this.dataRAW=new Uint32Array(h.buffer),f=a(i(this.dataRAW)),e=this.getContext("2d"),t=e.getImageData(0,0,r,o),s(f,u,l,t.data),e.putImageData(t,0,0),this.onload&&this.onload()}.bind(n)}else if(o.match(/\.hdr\.png$|\.rgbe\.png/i)){var _;(_=new Image).src=o,_.onload=function(){var n=document.createElement("canvas"),r=this.width=this.style.width=n.width=_.width,o=this.height=this.style.height=n.height=_.height,i=n.getContext("webgl"),a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,_),fb=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,fb),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0);var c=new Uint8Array(r*o*4);i.readPixels(0,0,r,o,i.RGBA,i.UNSIGNED_BYTE,c),i.deleteTexture(a),i.deleteFramebuffer(fb),f=c,e=this.getContext("2d"),t=e.getImageData(0,0,r,o),s(f,u,l,t.data),e.putImageData(t,0,0),this.onload&&this.onload()}.bind(n)}var c,m,h})),n}function o(e,t){for(var n,r,o,i,a,_,s=e.byteLength/12|0,u=(t=t||new Uint32Array(s),0);u<s;u++)n=Math.min(32768,e[3*u]),r=Math.min(32768,e[3*u+1]),o=Math.min(32768,e[3*u+2]),i=Math.max(Math.max(n,r),o),a=Math.max(-16,Math.floor(Math.log2(i)))+16,_=Math.pow(2,a-24),511==Math.floor(i/_+.5)&&(_*=2,a+=1),t[u]=(Math.floor(n/_+.5)<<23)+(Math.floor(r/_+.5)<<14)+(Math.floor(o/_+.5)<<5)+(0|a);return t}function i(e,t){for(var n,r,o=e.byteLength>>2,i=(t=t||new Float32Array(3*o),0);i<o;i++)n=e[i],r=Math.pow(2,(31&n)-24),t[3*i]=(n>>>23)*r,t[3*i+1]=(n>>>14&511)*r,t[3*i+2]=(n>>>5&511)*r;return t}function a(t,n){for(var r,o,i,a,_,s=t.byteLength/12|0,u=(n=n||new Uint8Array(4*s),0);u<s;u++)r=t[3*u],o=t[3*u+1],i=t[3*u+2],a=Math.max(Math.max(r,o),i),e=Math.ceil(Math.log2(a)),_=Math.pow(2,e-8),n[4*u]=r/_|0,n[4*u+1]=o/_|0,n[4*u+2]=i/_|0,n[4*u+3]=e+128;return n}function _(e,t){for(var n,r=e.byteLength>>2,o=(t=t||new Float32Array(3*r),0);o<r;o++)n=Math.pow(2,e[4*o+3]-136),t[3*o]=e[4*o]*n,t[3*o+1]=e[4*o+1]*n,t[3*o+2]=e[4*o+2]*n;return t}function s(e,t,n,r){t=Math.pow(2,void 0===t?1:t)/2,void 0===n&&(n=2.2);for(var o,i=1/n,a=e.byteLength>>2,_=(r=r||new Uint8ClampedArray(4*a),0);_<a;_++)o=t*Math.pow(2,e[4*_+3]-136),r[4*_]=255*Math.pow(e[4*_]*o,i),r[4*_+1]=255*Math.pow(e[4*_+1]*o,i),r[4*_+2]=255*Math.pow(e[4*_+2]*o,i),r[4*_+3]=255;return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r.floatToRgbe=a,r.rgbeToFloat=_,r.floatToRgb9_e5=o,r.rgb9_e5ToFloat=i,r.rgbeToLDR=s,r.floatToLDR=function(e,t,n,r){t=Math.pow(2,void 0===t?1:t)/2,void 0===n&&(n=2.2);for(var o=1/n,i=e.byteLength/12|0,a=(r=r||new Uint8ClampedArray(4*i),0);a<i;a++)r[4*a]=255*Math.pow(e[3*a]*t,o),r[4*a+1]=255*Math.pow(e[3*a+1]*t,o),r[4*a+2]=255*Math.pow(e[3*a+2]*t,o),r[4*a+3]=255;return r};n.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.HDRImage=r}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;e.default=void 0;var t=dt(__webpack_require__(4939)),n=dt(__webpack_require__(9586)),r=dt(__webpack_require__(1648)),o=dt(__webpack_require__(479)),i=dt(__webpack_require__(4755)),a=dt(__webpack_require__(6858)),_=dt(__webpack_require__(1608)),s=dt(__webpack_require__(8649)),u=dt(__webpack_require__(1245)),l=dt(__webpack_require__(7938)),f=dt(__webpack_require__(6458)),c=dt(__webpack_require__(7868)),m=dt(__webpack_require__(8081)),h=dt(__webpack_require__(6454)),d=dt(__webpack_require__(2414)),p=dt(__webpack_require__(5109)),g=dt(__webpack_require__(7120)),S=dt(__webpack_require__(6984)),v=dt(__webpack_require__(8878)),y=dt(__webpack_require__(4165)),C=dt(__webpack_require__(2028)),T=dt(__webpack_require__(7539)),b=dt(__webpack_require__(2815)),P=dt(__webpack_require__(513)),E=dt(__webpack_require__(6807)),D=dt(__webpack_require__(6967)),R=dt(__webpack_require__(3330)),w=dt(__webpack_require__(9098)),M=dt(__webpack_require__(4008)),x=dt(__webpack_require__(8113)),A=dt(__webpack_require__(5449)),L=dt(__webpack_require__(2603)),I=dt(__webpack_require__(4974)),O=dt(__webpack_require__(7057)),F=dt(__webpack_require__(2768)),k=dt(__webpack_require__(8173)),B=dt(__webpack_require__(3801)),N=dt(__webpack_require__(1846)),V=dt(__webpack_require__(1322)),G=dt(__webpack_require__(2320)),U=dt(__webpack_require__(431)),H=dt(__webpack_require__(7088)),j=dt(__webpack_require__(453)),X=dt(__webpack_require__(9271)),Y=dt(__webpack_require__(5604)),W=dt(__webpack_require__(7141)),Z=dt(__webpack_require__(2949)),z=dt(__webpack_require__(5765)),q=dt(__webpack_require__(1645)),K=dt(__webpack_require__(6341)),J=dt(__webpack_require__(9468)),Q=dt(__webpack_require__(5776)),$=dt(__webpack_require__(4720)),ee=dt(__webpack_require__(7280)),te=dt(__webpack_require__(2482)),ne=dt(__webpack_require__(9011)),re=dt(__webpack_require__(9369)),oe=dt(__webpack_require__(512)),ie=dt(__webpack_require__(6528)),ae=dt(__webpack_require__(870)),_e=dt(__webpack_require__(5734)),se=dt(__webpack_require__(9526)),ue=dt(__webpack_require__(6987)),le=dt(__webpack_require__(1393)),fe=dt(__webpack_require__(8388)),ce=dt(__webpack_require__(4658)),me=dt(__webpack_require__(8546)),he=dt(__webpack_require__(6148)),de=dt(__webpack_require__(2987)),pe=dt(__webpack_require__(2390)),ge=dt(__webpack_require__(7664)),Se=dt(__webpack_require__(3370)),ve=dt(__webpack_require__(3061)),ye=dt(__webpack_require__(9510)),Ce=dt(__webpack_require__(1550)),Te=dt(__webpack_require__(5602)),be=dt(__webpack_require__(6177)),Pe=dt(__webpack_require__(4867)),Ee=dt(__webpack_require__(1266)),De=dt(__webpack_require__(8578)),Re=dt(__webpack_require__(948)),we=dt(__webpack_require__(1193)),Me=dt(__webpack_require__(66)),xe=dt(__webpack_require__(3846)),Ae=dt(__webpack_require__(8583)),Le=dt(__webpack_require__(5247)),Ie=dt(__webpack_require__(5489)),Oe=dt(__webpack_require__(2475)),Fe=dt(__webpack_require__(5397)),ke=dt(__webpack_require__(1491)),Be=dt(__webpack_require__(1759)),Ne=dt(__webpack_require__(1359)),Ve=dt(__webpack_require__(5141)),Ge=dt(__webpack_require__(4048)),Ue=dt(__webpack_require__(3552)),He=dt(__webpack_require__(4690)),je=dt(__webpack_require__(2462)),Xe=dt(__webpack_require__(6693)),Ye=__webpack_require__(7902),We=dt(__webpack_require__(7341)),Ze=dt(__webpack_require__(6798)),ze=dt(__webpack_require__(307)),qe=dt(__webpack_require__(8435)),Ke=dt(__webpack_require__(6616)),Je=dt(__webpack_require__(9836)),Qe=dt(__webpack_require__(9784)),$e=dt(__webpack_require__(2228)),et=dt(__webpack_require__(2584)),tt=dt(__webpack_require__(1446)),nt=dt(__webpack_require__(6140)),rt=dt(__webpack_require__(9650)),ot=dt(__webpack_require__(8636)),it=dt(__webpack_require__(1797)),at=dt(__webpack_require__(4620)),_t=dt(__webpack_require__(8236)),st=dt(__webpack_require__(6797)),ut=dt(__webpack_require__(3319)),lt=dt(__webpack_require__(7698)),ft=dt(__webpack_require__(6552)),ct=dt(__webpack_require__(4992)),mt=dt(__webpack_require__(8011)),ht=dt(__webpack_require__(4257));function dt(e){return e&&e.__esModule?e:{default:e}}var pt={Scene:t.default,Bone:n.default,AnimationProcessor:r.default,AnimationAction:o.default,ActionClip:i.default,SkinGeometry:a.default,Skeleton:_.default,Joint:s.default,TrackBinding:u.default,TrackMixer:l.default,AnimKeyframe:f.default,AnimKeyframeEnum:c.default,QuaternionKeyframe:m.default,Vector3Keyframe:h.default,Vector4Keyframe:d.default,Canvas:p.default,Filter:g.default,CameraIps:S.default,FirstPersonController:v.default,Input:y.default,SceneBrowsingController:C.default,DirectionalLight:T.default,GIProbe:b.default,Light:P.default,PointLight:E.default,Probe:D.default,RefProbe:R.default,SpotLight:w.default,Material:M.default,MaterialDef:x.default,SubPass:A.default,SubShader:L.default,SubShaderDef:I.default,SubShaderSource:O.default,Technology:F.default,TechnologyDef:k.default,AABBBoundingBox:B.default,BoundingSphere:N.default,BoundingVolume:V.default,Matrix44:G.default,MoreMath:U.default,Plane:H.default,Quaternion:j.default,Vector2:X.default,Vector3:Y.default,Vector4:W.default,Box:z.default,Cylinder:ct.default,Torus:mt.default,GroupPlane:q.default,Grid:lt.default,Sphere:K.default,Teapot:ht.default,SkyBox:J.default,FramePicture:Q.default,Geometry:$.default,Node:Z.default,Picture:ee.default,LodControl:te.default,OctCullingControl:ne.default,OctNode:re.default,Base:oe.default,Clustered:ie.default,Deferred:ae.default,Forward:_e.default,ForwardPlus:se.default,TileDeferred:ue.default,DefaultRenderProgram:le.default,MultiPassIBLLightingRenderProgram:fe.default,MultiPassLightingRenderProgram:ce.default,SinglePassIBLLightingRenderProgram:me.default,SinglePassLightingRenderProgram:he.default,TilePassIBLLightingRenderProgram:de.default,TilePassLightingRenderProgram:pe.default,IDrawable:ge.default,Internal:Se.default,Render:ve.default,RenderQueue:ye.default,Camera:Ce.default,BasicShadowProcess:Te.default,DirectionalLightShadowProcess:be.default,PointLightShadowProcess:Pe.default,Shadow:Ee.default,SplitOccluders:De.default,SpotLightShadowProcess:Re.default,AssetLoader:we.default,Events:Me.default,Log:xe.default,MeshFactor:Ae.default,ProbeTools:Le.default,Queue:Ie.default,TempVars:Oe.default,TextImage:ft.default,Tools:Fe.default,BoolVars:ke.default,FloatVars:Be.default,Texture2DTargetVars:Ne.default,Texture2DVars:Ve.default,TextureCubeVars:Ge.default,Vars:Ue.default,Vec2Vars:He.default,Vec4Vars:je.default,ArrayBuf:Xe.default,Buffer:Ye.Buffer,FrameBuffer:We.default,FrameContext:Ze.default,Mesh:ze.default,RenderState:qe.default,Shader:Ke.default,ShaderProgram:Je.default,ShaderSource:Qe.default,SizeOf:$e.default,Texture:et.default,UniformBuffer:tt.default,UniformBufferI:nt.default,Component:rt.default,Globals:ot.default,RenderEngine:it.default,GLTFLoader:at.default,OBJLoader:_t.default,RadianceLoader:st.default,hdrpng:ut.default};e.default=pt})(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__})()}));